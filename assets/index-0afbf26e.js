var XA=Object.defineProperty;var YA=(e,t,r)=>t in e?XA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var bf=(e,t,r)=>(YA(e,typeof t!="symbol"?t+"":t,r),r);function QA(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var XC={exports:{}},hc={},YC={exports:{}},wt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Rb=Object.getOwnPropertySymbols,ZA=Object.prototype.hasOwnProperty,ej=Object.prototype.propertyIsEnumerable;function tj(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function rj(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var gy=rj()?Object.assign:function(e,t){for(var r,n=tj(e),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var l in r)ZA.call(r,l)&&(n[l]=r[l]);if(Rb){i=Rb(r);for(var u=0;u<i.length;u++)ej.call(r,i[u])&&(n[i[u]]=r[i[u]])}}return n};const nj=kt(gy);/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy=gy,Un=typeof Symbol=="function"&&Symbol.for,pc=Un?Symbol.for("react.element"):60103,ij=Un?Symbol.for("react.portal"):60106,oj=Un?Symbol.for("react.fragment"):60107,aj=Un?Symbol.for("react.strict_mode"):60108,sj=Un?Symbol.for("react.profiler"):60114,lj=Un?Symbol.for("react.provider"):60109,uj=Un?Symbol.for("react.context"):60110,cj=Un?Symbol.for("react.forward_ref"):60112,fj=Un?Symbol.for("react.suspense"):60113,dj=Un?Symbol.for("react.memo"):60115,hj=Un?Symbol.for("react.lazy"):60116,$b=typeof Symbol=="function"&&Symbol.iterator;function gc(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JC={};function Js(e,t,r){this.props=e,this.context=t,this.refs=JC,this.updater=r||QC}Js.prototype.isReactComponent={};Js.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(gc(85));this.updater.enqueueSetState(this,e,t,"setState")};Js.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZC(){}ZC.prototype=Js.prototype;function my(e,t,r){this.props=e,this.context=t,this.refs=JC,this.updater=r||QC}var yy=my.prototype=new ZC;yy.constructor=my;vy(yy,Js.prototype);yy.isPureReactComponent=!0;var wy={current:null},ek=Object.prototype.hasOwnProperty,tk={key:!0,ref:!0,__self:!0,__source:!0};function rk(e,t,r){var n,i={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)ek.call(t,n)&&!tk.hasOwnProperty(n)&&(i[n]=t[n]);var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];i.children=d}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)i[n]===void 0&&(i[n]=u[n]);return{$$typeof:pc,type:e,key:a,ref:l,props:i,_owner:wy.current}}function pj(e,t){return{$$typeof:pc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function by(e){return typeof e=="object"&&e!==null&&e.$$typeof===pc}function gj(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(r){return t[r]})}var nk=/\/+/g,Cd=[];function ik(e,t,r,n){if(Cd.length){var i=Cd.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function ok(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Cd.length&&Cd.push(e)}function Lv(e,t,r,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case pc:case ij:a=!0}}if(a)return r(n,e,t===""?"."+bg(e,0):t),1;if(a=0,t=t===""?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){i=e[l];var u=t+bg(i,l);a+=Lv(i,u,r,n)}else if(e===null||typeof e!="object"?u=null:(u=$b&&e[$b]||e["@@iterator"],u=typeof u=="function"?u:null),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=t+bg(i,l++),a+=Lv(i,u,r,n);else if(i==="object")throw r=""+e,Error(gc(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return a}function Nv(e,t,r){return e==null?0:Lv(e,"",t,r)}function bg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gj(e.key):t.toString(36)}function vj(e,t){e.func.call(e.context,t,e.count++)}function mj(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Av(e,n,r,function(a){return a}):e!=null&&(by(e)&&(e=pj(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(nk,"$&/")+"/")+r)),n.push(e))}function Av(e,t,r,n,i){var a="";r!=null&&(a=(""+r).replace(nk,"$&/")+"/"),t=ik(t,a,n,i),Nv(e,mj,t),ok(t)}var ak={current:null};function Ji(){var e=ak.current;if(e===null)throw Error(gc(321));return e}var yj={ReactCurrentDispatcher:ak,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:wy,IsSomeRendererActing:{current:!1},assign:vy};wt.Children={map:function(e,t,r){if(e==null)return e;var n=[];return Av(e,n,null,t,r),n},forEach:function(e,t,r){if(e==null)return e;t=ik(null,null,t,r),Nv(e,vj,t),ok(t)},count:function(e){return Nv(e,function(){return null},null)},toArray:function(e){var t=[];return Av(e,t,null,function(r){return r}),t},only:function(e){if(!by(e))throw Error(gc(143));return e}};wt.Component=Js;wt.Fragment=oj;wt.Profiler=sj;wt.PureComponent=my;wt.StrictMode=aj;wt.Suspense=fj;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yj;wt.cloneElement=function(e,t,r){if(e==null)throw Error(gc(267,e));var n=vy({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=wy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)ek.call(t,d)&&!tk.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];n.children=u}return{$$typeof:pc,type:e.type,key:i,ref:a,props:n,_owner:l}};wt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:uj,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:lj,_context:e},e.Consumer=e};wt.createElement=rk;wt.createFactory=function(e){var t=rk.bind(null,e);return t.type=e,t};wt.createRef=function(){return{current:null}};wt.forwardRef=function(e){return{$$typeof:cj,render:e}};wt.isValidElement=by;wt.lazy=function(e){return{$$typeof:hj,_ctor:e,_status:-1,_result:null}};wt.memo=function(e,t){return{$$typeof:dj,type:e,compare:t===void 0?null:t}};wt.useCallback=function(e,t){return Ji().useCallback(e,t)};wt.useContext=function(e,t){return Ji().useContext(e,t)};wt.useDebugValue=function(){};wt.useEffect=function(e,t){return Ji().useEffect(e,t)};wt.useImperativeHandle=function(e,t,r){return Ji().useImperativeHandle(e,t,r)};wt.useLayoutEffect=function(e,t){return Ji().useLayoutEffect(e,t)};wt.useMemo=function(e,t){return Ji().useMemo(e,t)};wt.useReducer=function(e,t,r){return Ji().useReducer(e,t,r)};wt.useRef=function(e){return Ji().useRef(e)};wt.useState=function(e){return Ji().useState(e)};wt.version="16.14.0";YC.exports=wt;var C=YC.exports;const Ge=kt(C);/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj=C,sk=60103;hc.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Fb=Symbol.for;sk=Fb("react.element"),hc.Fragment=Fb("react.fragment")}var bj=wj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xj=Object.prototype.hasOwnProperty,Ej={key:!0,ref:!0,__self:!0,__source:!0};function lk(e,t,r){var n,i={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)xj.call(t,n)&&!Ej.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:sk,type:e,key:a,ref:l,props:i,_owner:bj.current}}hc.jsx=lk;hc.jsxs=lk;XC.exports=hc;var y=XC.exports,uk={exports:{}},Tn={},ck={exports:{}},fk={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,n,i,a;if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,u=null,d=function(){if(l!==null)try{var X=e.unstable_now();l(!0,X),l=null}catch(J){throw setTimeout(d,0),J}},p=Date.now();e.unstable_now=function(){return Date.now()-p},t=function(X){l!==null?setTimeout(t,0,X):(l=X,setTimeout(d,0))},r=function(X,J){u=setTimeout(X,J)},n=function(){clearTimeout(u)},i=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var g=window.performance,m=window.Date,w=window.setTimeout,x=window.clearTimeout;if(typeof console<"u"){var O=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof O!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof g=="object"&&typeof g.now=="function")e.unstable_now=function(){return g.now()};else{var I=m.now();e.unstable_now=function(){return m.now()-I}}var P=!1,T=null,N=-1,R=5,_=0;i=function(){return e.unstable_now()>=_},a=function(){},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):R=0<X?Math.floor(1e3/X):5};var $=new MessageChannel,z=$.port2;$.port1.onmessage=function(){if(T!==null){var X=e.unstable_now();_=X+R;try{T(!0,X)?z.postMessage(null):(P=!1,T=null)}catch(J){throw z.postMessage(null),J}}else P=!1},t=function(X){T=X,P||(P=!0,z.postMessage(null))},r=function(X,J){N=w(function(){X(e.unstable_now())},J)},n=function(){x(N),N=-1}}function H(X,J){var ne=X.length;X.push(J);e:for(;;){var de=ne-1>>>1,xe=X[de];if(xe!==void 0&&0<oe(xe,J))X[de]=J,X[ne]=xe,ne=de;else break e}}function q(X){return X=X[0],X===void 0?null:X}function re(X){var J=X[0];if(J!==void 0){var ne=X.pop();if(ne!==J){X[0]=ne;e:for(var de=0,xe=X.length;de<xe;){var Oe=2*(de+1)-1,$e=X[Oe],_e=Oe+1,Ye=X[_e];if($e!==void 0&&0>oe($e,ne))Ye!==void 0&&0>oe(Ye,$e)?(X[de]=Ye,X[_e]=ne,de=_e):(X[de]=$e,X[Oe]=ne,de=Oe);else if(Ye!==void 0&&0>oe(Ye,ne))X[de]=Ye,X[_e]=ne,de=_e;else break e}}return J}return null}function oe(X,J){var ne=X.sortIndex-J.sortIndex;return ne!==0?ne:X.id-J.id}var le=[],we=[],W=1,U=null,F=3,be=!1,pe=!1,ce=!1;function ue(X){for(var J=q(we);J!==null;){if(J.callback===null)re(we);else if(J.startTime<=X)re(we),J.sortIndex=J.expirationTime,H(le,J);else break;J=q(we)}}function me(X){if(ce=!1,ue(X),!pe)if(q(le)!==null)pe=!0,t(V);else{var J=q(we);J!==null&&r(me,J.startTime-X)}}function V(X,J){pe=!1,ce&&(ce=!1,n()),be=!0;var ne=F;try{for(ue(J),U=q(le);U!==null&&(!(U.expirationTime>J)||X&&!i());){var de=U.callback;if(de!==null){U.callback=null,F=U.priorityLevel;var xe=de(U.expirationTime<=J);J=e.unstable_now(),typeof xe=="function"?U.callback=xe:U===q(le)&&re(le),ue(J)}else re(le);U=q(le)}if(U!==null)var Oe=!0;else{var $e=q(we);$e!==null&&r(me,$e.startTime-J),Oe=!1}return Oe}finally{U=null,F=ne,be=!1}}function ee(X){switch(X){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var se=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){pe||be||(pe=!0,t(V))},e.unstable_getCurrentPriorityLevel=function(){return F},e.unstable_getFirstCallbackNode=function(){return q(le)},e.unstable_next=function(X){switch(F){case 1:case 2:case 3:var J=3;break;default:J=F}var ne=F;F=J;try{return X()}finally{F=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=se,e.unstable_runWithPriority=function(X,J){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=F;F=X;try{return J()}finally{F=ne}},e.unstable_scheduleCallback=function(X,J,ne){var de=e.unstable_now();if(typeof ne=="object"&&ne!==null){var xe=ne.delay;xe=typeof xe=="number"&&0<xe?de+xe:de,ne=typeof ne.timeout=="number"?ne.timeout:ee(X)}else ne=ee(X),xe=de;return ne=xe+ne,X={id:W++,callback:J,priorityLevel:X,startTime:xe,expirationTime:ne,sortIndex:-1},xe>de?(X.sortIndex=xe,H(we,X),q(le)===null&&X===q(we)&&(ce?n():ce=!0,r(me,xe-de))):(X.sortIndex=ne,H(le,X),pe||be||(pe=!0,t(V))),X},e.unstable_shouldYield=function(){var X=e.unstable_now();ue(X);var J=q(le);return J!==U&&U!==null&&J!==null&&J.callback!==null&&J.startTime<=X&&J.expirationTime<U.expirationTime||i()},e.unstable_wrapCallback=function(X){var J=F;return function(){var ne=F;F=J;try{return X.apply(this,arguments)}finally{F=ne}}}})(fk);ck.exports=fk;var Sj=ck.exports;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh=C,Ir=gy,pr=Sj;function Te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Eh)throw Error(Te(227));function Cj(e,t,r,n,i,a,l,u,d){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(g){this.onError(g)}}var Eu=!1,kd=null,Td=!1,jv=null,kj={onError:function(e){Eu=!0,kd=e}};function Tj(e,t,r,n,i,a,l,u,d){Eu=!1,kd=null,Cj.apply(kj,arguments)}function Oj(e,t,r,n,i,a,l,u,d){if(Tj.apply(this,arguments),Eu){if(Eu){var p=kd;Eu=!1,kd=null}else throw Error(Te(198));Td||(Td=!0,jv=p)}}var xy=null,dk=null,hk=null;function Db(e,t,r){var n=e.type||"unknown-event";e.currentTarget=hk(r),Oj(n,t,void 0,e),e.currentTarget=null}var Od=null,Es={};function pk(){if(Od)for(var e in Es){var t=Es[e],r=Od.indexOf(e);if(!(-1<r))throw Error(Te(96,e));if(!Pd[r]){if(!t.extractEvents)throw Error(Te(97,e));Pd[r]=t,r=t.eventTypes;for(var n in r){var i=void 0,a=r[n],l=t,u=n;if(Iv.hasOwnProperty(u))throw Error(Te(99,u));Iv[u]=a;var d=a.phasedRegistrationNames;if(d){for(i in d)d.hasOwnProperty(i)&&zb(d[i],l,u);i=!0}else a.registrationName?(zb(a.registrationName,l,u),i=!0):i=!1;if(!i)throw Error(Te(98,n,e))}}}}function zb(e,t,r){if(Ds[e])throw Error(Te(100,e));Ds[e]=t,Ey[e]=t.eventTypes[r].dependencies}var Pd=[],Iv={},Ds={},Ey={};function gk(e){var t=!1,r;for(r in e)if(e.hasOwnProperty(r)){var n=e[r];if(!Es.hasOwnProperty(r)||Es[r]!==n){if(Es[r])throw Error(Te(102,r));Es[r]=n,t=!0}}t&&pk()}var Fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=null,Ns=null,As=null;function Bb(e){if(e=dk(e)){if(typeof _v!="function")throw Error(Te(280));var t=e.stateNode;t&&(t=xy(t),_v(e.stateNode,e.type,t))}}function vk(e){Ns?As?As.push(e):As=[e]:Ns=e}function mk(){if(Ns){var e=Ns,t=As;if(As=Ns=null,Bb(e),t)for(e=0;e<t.length;e++)Bb(t[e])}}function Sy(e,t){return e(t)}function yk(e,t,r,n,i){return e(t,r,n,i)}function Cy(){}var wk=Sy,fa=!1,xg=!1;function ky(){(Ns!==null||As!==null)&&(Cy(),mk())}function bk(e,t,r){if(xg)return e(t,r);xg=!0;try{return wk(e,t,r)}finally{xg=!1,ky()}}var Pj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hb=Object.prototype.hasOwnProperty,Ub={},Wb={};function Lj(e){return Hb.call(Wb,e)?!0:Hb.call(Ub,e)?!1:Pj.test(e)?Wb[e]=!0:(Ub[e]=!0,!1)}function Nj(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Aj(e,t,r,n){if(t===null||typeof t>"u"||Nj(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,r,n,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a}var gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gr[e]=new _r(e,0,!1,e,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gr[t]=new _r(t,1,!1,e[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gr[e]=new _r(e,2,!1,e.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gr[e]=new _r(e,2,!1,e,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gr[e]=new _r(e,3,!1,e.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(e){gr[e]=new _r(e,3,!0,e,null,!1)});["capture","download"].forEach(function(e){gr[e]=new _r(e,4,!1,e,null,!1)});["cols","rows","size","span"].forEach(function(e){gr[e]=new _r(e,6,!1,e,null,!1)});["rowSpan","start"].forEach(function(e){gr[e]=new _r(e,5,!1,e.toLowerCase(),null,!1)});var Ty=/[\-:]([a-z])/g;function Oy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ty,Oy);gr[t]=new _r(t,1,!1,e,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ty,Oy);gr[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ty,Oy);gr[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(e){gr[e]=new _r(e,1,!1,e.toLowerCase(),null,!1)});gr.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(e){gr[e]=new _r(e,1,!1,e.toLowerCase(),null,!0)});var Dn=Eh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Dn.hasOwnProperty("ReactCurrentDispatcher")||(Dn.ReactCurrentDispatcher={current:null});Dn.hasOwnProperty("ReactCurrentBatchConfig")||(Dn.ReactCurrentBatchConfig={suspense:null});function Py(e,t,r,n){var i=gr.hasOwnProperty(t)?gr[t]:null,a=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(Aj(t,r,i,n)&&(r=null),n||i===null?Lj(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jj=/^(.*)[\\\/]/,Wr=typeof Symbol=="function"&&Symbol.for,xf=Wr?Symbol.for("react.element"):60103,Ss=Wr?Symbol.for("react.portal"):60106,la=Wr?Symbol.for("react.fragment"):60107,xk=Wr?Symbol.for("react.strict_mode"):60108,td=Wr?Symbol.for("react.profiler"):60114,Ek=Wr?Symbol.for("react.provider"):60109,Sk=Wr?Symbol.for("react.context"):60110,Ij=Wr?Symbol.for("react.concurrent_mode"):60111,Ly=Wr?Symbol.for("react.forward_ref"):60112,rd=Wr?Symbol.for("react.suspense"):60113,Mv=Wr?Symbol.for("react.suspense_list"):60120,Ny=Wr?Symbol.for("react.memo"):60115,Ck=Wr?Symbol.for("react.lazy"):60116,kk=Wr?Symbol.for("react.block"):60121,Kb=typeof Symbol=="function"&&Symbol.iterator;function Xl(e){return e===null||typeof e!="object"?null:(e=Kb&&e[Kb]||e["@@iterator"],typeof e=="function"?e:null)}function _j(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}}function Xi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case la:return"Fragment";case Ss:return"Portal";case td:return"Profiler";case xk:return"StrictMode";case rd:return"Suspense";case Mv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sk:return"Context.Consumer";case Ek:return"Context.Provider";case Ly:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Ny:return Xi(e.type);case kk:return Xi(e.render);case Ck:if(e=e._status===1?e._result:null)return Xi(e)}return null}function Ay(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,i=e._debugSource,a=Xi(e.type);r=null,n&&(r=Xi(n.type)),n=a,a="",i?a=" (at "+i.fileName.replace(jj,"")+":"+i.lineNumber+")":r&&(a=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+a}t+=r,e=e.return}while(e);return t}function No(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Tk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mj(e){var t=Tk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ef(e){e._valueTracker||(e._valueTracker=Mj(e))}function Ok(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Tk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Rv(e,t){var r=t.checked;return Ir({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Gb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=No(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pk(e,t){t=t.checked,t!=null&&Py(e,"checked",t,!1)}function $v(e,t){Pk(e,t);var r=No(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fv(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fv(e,t.type,No(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fv(e,t,r){(t!=="number"||e.ownerDocument.activeElement!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Rj(e){var t="";return Eh.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function Dv(e,t){return e=Ir({children:void 0},t),(t=Rj(t.children))&&(e.children=t),e}function js(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+No(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function zv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Te(91));return Ir({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Te(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Te(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:No(r)}}function Lk(e,t){var r=No(t.value),n=No(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Xb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Nk={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ak(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ak(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sf,jk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==Nk.svg||"innerHTML"in e)e.innerHTML=t;else{for(Sf=Sf||document.createElement("div"),Sf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $u(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}function Cf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cs={animationend:Cf("Animation","AnimationEnd"),animationiteration:Cf("Animation","AnimationIteration"),animationstart:Cf("Animation","AnimationStart"),transitionend:Cf("Transition","TransitionEnd")},Eg={},Ik={};Fo&&(Ik=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function Sh(e){if(Eg[e])return Eg[e];if(!Cs[e])return e;var t=Cs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ik)return Eg[e]=t[r];return e}var _k=Sh("animationend"),Mk=Sh("animationiteration"),Rk=Sh("animationstart"),$k=Sh("transitionend"),gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yb=new(typeof WeakMap=="function"?WeakMap:Map);function jy(e){var t=Yb.get(e);return t===void 0&&(t=new Map,Yb.set(e,t)),t}function Ma(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.effectTag&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Fk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qb(e){if(Ma(e)!==e)throw Error(Te(188))}function $j(e){var t=e.alternate;if(!t){if(t=Ma(e),t===null)throw Error(Te(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Qb(i),e;if(a===n)return Qb(i),t;a=a.sibling}throw Error(Te(188))}if(r.return!==n.return)r=i,n=a;else{for(var l=!1,u=i.child;u;){if(u===r){l=!0,r=i,n=a;break}if(u===n){l=!0,n=i,r=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===r){l=!0,r=a,n=i;break}if(u===n){l=!0,n=a,r=i;break}u=u.sibling}if(!l)throw Error(Te(189))}}if(r.alternate!==n)throw Error(Te(190))}if(r.tag!==3)throw Error(Te(188));return r.stateNode.current===r?e:t}function Dk(e){if(e=$j(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function zs(e,t){if(t==null)throw Error(Te(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Iy(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var Yl=null;function Fj(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)Db(e,t[n],r[n]);else t&&Db(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Ch(e){if(e!==null&&(Yl=zs(Yl,e)),e=Yl,Yl=null,e){if(Iy(e,Fj),Yl)throw Error(Te(95));if(Td)throw e=jv,Td=!1,jv=null,e}}function _y(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function zk(e){if(!Fo)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}var Ld=[];function Bk(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Ld.length&&Ld.push(e)}function Hk(e,t,r,n){if(Ld.length){var i=Ld.pop();return i.topLevelType=e,i.eventSystemFlags=n,i.nativeEvent=t,i.targetInst=r,i}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:r,ancestors:[]}}function Uk(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n=r;if(n.tag===3)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=n.tag!==3?null:n.stateNode.containerInfo}if(!n)break;t=r.tag,t!==5&&t!==6||e.ancestors.push(r),r=mc(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var i=_y(e.nativeEvent);n=e.topLevelType;var a=e.nativeEvent,l=e.eventSystemFlags;r===0&&(l|=64);for(var u=null,d=0;d<Pd.length;d++){var p=Pd[d];p&&(p=p.extractEvents(n,t,a,i,l))&&(u=zs(u,p))}Ch(u)}}function Hv(e,t,r){if(!r.has(e)){switch(e){case"scroll":vu(t,"scroll",!0);break;case"focus":case"blur":vu(t,"focus",!0),vu(t,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":zk(e)&&vu(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:gu.indexOf(e)===-1&&Mt(e,t)}r.set(e,null)}}var Wk,My,Kk,Uv=!1,ui=[],Eo=null,So=null,Co=null,Fu=new Map,Du=new Map,Ql=[],Wv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Dj="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function zj(e,t){var r=jy(t);Wv.forEach(function(n){Hv(n,t,r)}),Dj.forEach(function(n){Hv(n,t,r)})}function Kv(e,t,r,n,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:r|32,nativeEvent:i,container:n}}function Jb(e,t){switch(e){case"focus":case"blur":Eo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Fu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(t.pointerId)}}function Jl(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e=Kv(t,r,n,i,a),t!==null&&(t=yc(t),t!==null&&My(t)),e):(e.eventSystemFlags|=n,e)}function Bj(e,t,r,n,i){switch(t){case"focus":return Eo=Jl(Eo,e,t,r,n,i),!0;case"dragenter":return So=Jl(So,e,t,r,n,i),!0;case"mouseover":return Co=Jl(Co,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Fu.set(a,Jl(Fu.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Du.set(a,Jl(Du.get(a)||null,e,t,r,n,i)),!0}return!1}function Hj(e){var t=mc(e.target);if(t!==null){var r=Ma(t);if(r!==null){if(t=r.tag,t===13){if(t=Fk(r),t!==null){e.blockedOn=t,pr.unstable_runWithPriority(e.priority,function(){Kk(r)});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nd(e){if(e.blockedOn!==null)return!1;var t=Fy(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var r=yc(t);return r!==null&&My(r),e.blockedOn=t,!1}return!0}function Zb(e,t,r){nd(e)&&r.delete(t)}function Uj(){for(Uv=!1;0<ui.length;){var e=ui[0];if(e.blockedOn!==null){e=yc(e.blockedOn),e!==null&&Wk(e);break}var t=Fy(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:ui.shift()}Eo!==null&&nd(Eo)&&(Eo=null),So!==null&&nd(So)&&(So=null),Co!==null&&nd(Co)&&(Co=null),Fu.forEach(Zb),Du.forEach(Zb)}function Zl(e,t){e.blockedOn===t&&(e.blockedOn=null,Uv||(Uv=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,Uj)))}function Gk(e){function t(i){return Zl(i,e)}if(0<ui.length){Zl(ui[0],e);for(var r=1;r<ui.length;r++){var n=ui[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Eo!==null&&Zl(Eo,e),So!==null&&Zl(So,e),Co!==null&&Zl(Co,e),Fu.forEach(t),Du.forEach(t),r=0;r<Ql.length;r++)n=Ql[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ql.length&&(r=Ql[0],r.blockedOn===null);)Hj(r),r.blockedOn===null&&Ql.shift()}var qk={},Vk=new Map,Ry=new Map,Wj=["abort","abort",_k,"animationEnd",Mk,"animationIteration",Rk,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$k,"transitionEnd","waiting","waiting"];function $y(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[n],eventPriority:t},Ry.set(n,t),Vk.set(n,a),qk[i]=a}}$y("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);$y("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);$y(Wj,2);for(var ex="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sg=0;Sg<ex.length;Sg++)Ry.set(ex[Sg],0);var Kj=pr.unstable_UserBlockingPriority,Gj=pr.unstable_runWithPriority,id=!0;function Mt(e,t){vu(t,e,!1)}function vu(e,t,r){var n=Ry.get(t);switch(n===void 0?2:n){case 0:n=qj.bind(null,t,1,e);break;case 1:n=Vj.bind(null,t,1,e);break;default:n=kh.bind(null,t,1,e)}r?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function qj(e,t,r,n){fa||Cy();var i=kh,a=fa;fa=!0;try{yk(i,e,t,r,n)}finally{(fa=a)||ky()}}function Vj(e,t,r,n){Gj(Kj,kh.bind(null,e,t,r,n))}function kh(e,t,r,n){if(id)if(0<ui.length&&-1<Wv.indexOf(e))e=Kv(null,e,t,r,n),ui.push(e);else{var i=Fy(e,t,r,n);if(i===null)Jb(e,n);else if(-1<Wv.indexOf(e))e=Kv(i,e,t,r,n),ui.push(e);else if(!Bj(i,e,t,r,n)){Jb(e,n),e=Hk(e,n,null,t);try{bk(Uk,e)}finally{Bk(e)}}}}function Fy(e,t,r,n){if(r=_y(n),r=mc(r),r!==null){var i=Ma(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=Fk(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}e=Hk(e,n,r,t);try{bk(Uk,e)}finally{Bk(e)}return null}var Su={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xj=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(e){Xj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Su[t]=Su[e]})});function Xk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Su.hasOwnProperty(e)&&Su[e]?(""+t).trim():t+"px"}function Yk(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Xk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Yj=Ir({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gv(e,t){if(t){if(Yj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Te(137,e,""));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Te(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Te(62,""))}}function qv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tx=Nk.html;function Fi(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var r=jy(e);t=Ey[t];for(var n=0;n<t.length;n++)Hv(t[n],e,r)}function Nd(){}function Vv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nx(e,t){var r=rx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rx(r)}}function Qk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ix(){for(var e=window,t=Vv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Vv(e.document)}return t}function Xv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Jk="$",Zk="/$",Dy="$?",zy="$!",Cg=null,kg=null;function eT(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Yv(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,Qj=typeof clearTimeout=="function"?clearTimeout:void 0;function Is(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function ox(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r===Jk||r===zy||r===Dy){if(t===0)return e;t--}else r===Zk&&t++}e=e.previousSibling}return null}var By=Math.random().toString(36).slice(2),vo="__reactInternalInstance$"+By,Ad="__reactEventHandlers$"+By,vc="__reactContainere$"+By;function mc(e){var t=e[vo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vc]||r[vo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ox(e);e!==null;){if(r=e[vo])return r;e=ox(e)}return t}e=r,r=e.parentNode}return null}function yc(e){return e=e[vo]||e[vc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Te(33))}function Hy(e){return e[Ad]||null}function Di(e){do e=e.return;while(e&&e.tag!==5);return e||null}function tT(e,t){var r=e.stateNode;if(!r)return null;var n=xy(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Te(231,t,typeof r));return r}function ax(e,t,r){(t=tT(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=zs(r._dispatchListeners,t),r._dispatchInstances=zs(r._dispatchInstances,e))}function Jj(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Di(t);for(t=r.length;0<t--;)ax(r[t],"captured",e);for(t=0;t<r.length;t++)ax(r[t],"bubbled",e)}}function Qv(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=tT(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=zs(r._dispatchListeners,t),r._dispatchInstances=zs(r._dispatchInstances,e))}function Zj(e){e&&e.dispatchConfig.registrationName&&Qv(e._targetInst,null,e)}function Bs(e){Iy(e,Jj)}var mo=null,Uy=null,od=null;function rT(){if(od)return od;var e,t=Uy,r=t.length,n,i="value"in mo?mo.value:mo.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===i[a-n];n++);return od=i.slice(e,1<n?1-n:void 0)}function ad(){return!0}function jd(){return!1}function dn(e,t,r,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(r):i==="target"?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ad:jd,this.isPropagationStopped=jd,this}Ir(dn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){this.isPersistent=ad},isPersistent:jd,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=jd,this._dispatchInstances=this._dispatchListeners=null}});dn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};dn.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var i=new t;return Ir(i,r.prototype),r.prototype=i,r.prototype.constructor=r,r.Interface=Ir({},n.Interface,e),r.extend=n.extend,nT(r),r};nT(dn);function eI(e,t,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,r,n),i}return new this(e,t,r,n)}function tI(e){if(!(e instanceof this))throw Error(Te(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function nT(e){e.eventPool=[],e.getPooled=eI,e.release=tI}var rI=dn.extend({data:null}),nI=dn.extend({data:null}),iI=[9,13,27,32],Wy=Fo&&"CompositionEvent"in window,Cu=null;Fo&&"documentMode"in document&&(Cu=document.documentMode);var oI=Fo&&"TextEvent"in window&&!Cu,iT=Fo&&(!Wy||Cu&&8<Cu&&11>=Cu),sx=String.fromCharCode(32),_i={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},lx=!1;function oT(e,t){switch(e){case"keyup":return iI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function aT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ks=!1;function aI(e,t){switch(e){case"compositionend":return aT(t);case"keypress":return t.which!==32?null:(lx=!0,sx);case"textInput":return e=t.data,e===sx&&lx?null:e;default:return null}}function sI(e,t){if(ks)return e==="compositionend"||!Wy&&oT(e,t)?(e=rT(),od=Uy=mo=null,ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iT&&t.locale!=="ko"?null:t.data;default:return null}}var lI={eventTypes:_i,extractEvents:function(e,t,r,n){var i;if(Wy)e:{switch(e){case"compositionstart":var a=_i.compositionStart;break e;case"compositionend":a=_i.compositionEnd;break e;case"compositionupdate":a=_i.compositionUpdate;break e}a=void 0}else ks?oT(e,r)&&(a=_i.compositionEnd):e==="keydown"&&r.keyCode===229&&(a=_i.compositionStart);return a?(iT&&r.locale!=="ko"&&(ks||a!==_i.compositionStart?a===_i.compositionEnd&&ks&&(i=rT()):(mo=n,Uy="value"in mo?mo.value:mo.textContent,ks=!0)),a=rI.getPooled(a,t,r,n),i?a.data=i:(i=aT(r),i!==null&&(a.data=i)),Bs(a),i=a):i=null,(e=oI?aI(e,r):sI(e,r))?(t=nI.getPooled(_i.beforeInput,t,r,n),t.data=e,Bs(t)):t=null,i===null?t:t===null?i:[i,t]}},uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uI[e.type]:t==="textarea"}var lT={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function uT(e,t,r){return e=dn.getPooled(lT.change,e,t,r),e.type="change",vk(r),Bs(e),e}var ku=null,zu=null;function cI(e){Ch(e)}function Th(e){var t=Oa(e);if(Ok(t))return e}function fI(e,t){if(e==="change")return t}var Jv=!1;Fo&&(Jv=zk("input")&&(!document.documentMode||9<document.documentMode));function ux(){ku&&(ku.detachEvent("onpropertychange",cT),zu=ku=null)}function cT(e){if(e.propertyName==="value"&&Th(zu))if(e=uT(zu,e,_y(e)),fa)Ch(e);else{fa=!0;try{Sy(cI,e)}finally{fa=!1,ky()}}}function dI(e,t,r){e==="focus"?(ux(),ku=t,zu=r,ku.attachEvent("onpropertychange",cT)):e==="blur"&&ux()}function hI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Th(zu)}function pI(e,t){if(e==="click")return Th(t)}function gI(e,t){if(e==="input"||e==="change")return Th(t)}var vI={eventTypes:lT,_isInputEventSupported:Jv,extractEvents:function(e,t,r,n){var i=t?Oa(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if(a==="select"||a==="input"&&i.type==="file")var l=fI;else if(sT(i))if(Jv)l=gI;else{l=hI;var u=dI}else(a=i.nodeName)&&a.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")&&(l=pI);if(l&&(l=l(e,t)))return uT(l,r,n);u&&u(e,i,t),e==="blur"&&(e=i._wrapperState)&&e.controlled&&i.type==="number"&&Fv(i,"number",i.value)}},wc=dn.extend({view:null,detail:null}),mI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mI[e])?!!t[e]:!1}function Ky(){return yI}var cx=0,fx=0,dx=!1,hx=!1,bc=wc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ky,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=cx;return cx=e.screenX,dx?e.type==="mousemove"?e.screenX-t:0:(dx=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=fx;return fx=e.screenY,hx?e.type==="mousemove"?e.screenY-t:0:(hx=!0,0)}}),fT=bc.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),eu={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},wI={eventTypes:eu,extractEvents:function(e,t,r,n,i){var a=e==="mouseover"||e==="pointerover",l=e==="mouseout"||e==="pointerout";if(a&&!(i&32)&&(r.relatedTarget||r.fromElement)||!l&&!a)return null;if(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,l){if(l=t,t=(t=r.relatedTarget||r.toElement)?mc(t):null,t!==null){var u=Ma(t);(t!==u||t.tag!==5&&t.tag!==6)&&(t=null)}}else l=null;if(l===t)return null;if(e==="mouseout"||e==="mouseover")var d=bc,p=eu.mouseLeave,g=eu.mouseEnter,m="mouse";else(e==="pointerout"||e==="pointerover")&&(d=fT,p=eu.pointerLeave,g=eu.pointerEnter,m="pointer");if(e=l==null?a:Oa(l),a=t==null?a:Oa(t),p=d.getPooled(p,l,r,n),p.type=m+"leave",p.target=e,p.relatedTarget=a,r=d.getPooled(g,t,r,n),r.type=m+"enter",r.target=a,r.relatedTarget=e,n=l,m=t,n&&m)e:{for(d=n,g=m,l=0,e=d;e;e=Di(e))l++;for(e=0,t=g;t;t=Di(t))e++;for(;0<l-e;)d=Di(d),l--;for(;0<e-l;)g=Di(g),e--;for(;l--;){if(d===g||d===g.alternate)break e;d=Di(d),g=Di(g)}d=null}else d=null;for(g=d,d=[];n&&n!==g&&(l=n.alternate,!(l!==null&&l===g));)d.push(n),n=Di(n);for(n=[];m&&m!==g&&(l=m.alternate,!(l!==null&&l===g));)n.push(m),m=Di(m);for(m=0;m<d.length;m++)Qv(d[m],"bubbled",p);for(m=n.length;0<m--;)Qv(n[m],"captured",r);return i&64?[p,r]:[p]}};function bI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pa=typeof Object.is=="function"?Object.is:bI,xI=Object.prototype.hasOwnProperty;function Bu(e,t){if(Pa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!xI.call(t,r[n])||!Pa(e[r[n]],t[r[n]]))return!1;return!0}var EI=Fo&&"documentMode"in document&&11>=document.documentMode,dT={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ts=null,Zv=null,Tu=null,em=!1;function px(e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return em||Ts==null||Ts!==Vv(r)?null:(r=Ts,"selectionStart"in r&&Xv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tu&&Bu(Tu,r)?null:(Tu=r,e=dn.getPooled(dT.select,Zv,e,t),e.type="select",e.target=Ts,Bs(e),e))}var SI={eventTypes:dT,extractEvents:function(e,t,r,n,i,a){if(i=a||(n.window===n?n.document:n.nodeType===9?n:n.ownerDocument),!(a=!i)){e:{i=jy(i),a=Ey.onSelect;for(var l=0;l<a.length;l++)if(!i.has(a[l])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?Oa(t):window,e){case"focus":(sT(i)||i.contentEditable==="true")&&(Ts=i,Zv=t,Tu=null);break;case"blur":Tu=Zv=Ts=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":return em=!1,px(r,n);case"selectionchange":if(EI)break;case"keydown":case"keyup":return px(r,n)}return null}},CI=dn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),kI=dn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TI=wc.extend({relatedTarget:null});function sd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var OI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LI=wc.extend({key:function(e){if(e.key){var t=OI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PI[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ky,charCode:function(e){return e.type==="keypress"?sd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NI=bc.extend({dataTransfer:null}),AI=wc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ky}),jI=dn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),II=bc.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),_I={eventTypes:qk,extractEvents:function(e,t,r,n){var i=Vk.get(e);if(!i)return null;switch(e){case"keypress":if(sd(r)===0)return null;case"keydown":case"keyup":e=LI;break;case"blur":case"focus":e=TI;break;case"click":if(r.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=NI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=AI;break;case _k:case Mk:case Rk:e=CI;break;case $k:e=jI;break;case"scroll":e=wc;break;case"wheel":e=II;break;case"copy":case"cut":case"paste":e=kI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=fT;break;default:e=dn}return t=e.getPooled(i,t,r,n),Bs(t),t}};if(Od)throw Error(Te(101));Od=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));pk();var MI=yc;xy=Hy;dk=MI;hk=Oa;gk({SimpleEventPlugin:_I,EnterLeaveEventPlugin:wI,ChangeEventPlugin:vI,SelectEventPlugin:SI,BeforeInputEventPlugin:lI});var tm=[],Os=-1;function jt(e){0>Os||(e.current=tm[Os],tm[Os]=null,Os--)}function Ht(e,t){Os++,tm[Os]=e.current,e.current=t}var Ao={},kr={current:Ao},Br={current:!1},La=Ao;function Hs(e,t){var r=e.type.contextTypes;if(!r)return Ao;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Hr(e){return e=e.childContextTypes,e!=null}function Id(){jt(Br),jt(kr)}function gx(e,t,r){if(kr.current!==Ao)throw Error(Te(168));Ht(kr,t),Ht(Br,r)}function hT(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Te(108,Xi(t)||"Unknown",i));return Ir({},r,{},n)}function ld(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,La=kr.current,Ht(kr,e),Ht(Br,Br.current),!0}function vx(e,t,r){var n=e.stateNode;if(!n)throw Error(Te(169));r?(e=hT(e,t,La),n.__reactInternalMemoizedMergedChildContext=e,jt(Br),jt(kr),Ht(kr,e)):jt(Br),Ht(Br,r)}var RI=pr.unstable_runWithPriority,Gy=pr.unstable_scheduleCallback,pT=pr.unstable_cancelCallback,mx=pr.unstable_requestPaint,rm=pr.unstable_now,$I=pr.unstable_getCurrentPriorityLevel,Oh=pr.unstable_ImmediatePriority,gT=pr.unstable_UserBlockingPriority,vT=pr.unstable_NormalPriority,mT=pr.unstable_LowPriority,yT=pr.unstable_IdlePriority,wT={},FI=pr.unstable_shouldYield,DI=mx!==void 0?mx:function(){},Bi=null,ud=null,Og=!1,yx=rm(),wn=1e4>yx?rm:function(){return rm()-yx};function Ph(){switch($I()){case Oh:return 99;case gT:return 98;case vT:return 97;case mT:return 96;case yT:return 95;default:throw Error(Te(332))}}function bT(e){switch(e){case 99:return Oh;case 98:return gT;case 97:return vT;case 96:return mT;case 95:return yT;default:throw Error(Te(332))}}function jo(e,t){return e=bT(e),RI(e,t)}function xT(e,t,r){return e=bT(e),Gy(e,t,r)}function wx(e){return Bi===null?(Bi=[e],ud=Gy(Oh,ET)):Bi.push(e),wT}function bi(){if(ud!==null){var e=ud;ud=null,pT(e)}ET()}function ET(){if(!Og&&Bi!==null){Og=!0;var e=0;try{var t=Bi;jo(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Bi=null}catch(r){throw Bi!==null&&(Bi=Bi.slice(e+1)),Gy(Oh,bi),r}finally{Og=!1}}}function cd(e,t,r){return r/=10,1073741821-(((1073741821-e+t/10)/r|0)+1)*r}function Mn(e,t){if(e&&e.defaultProps){t=Ir({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r])}return t}var _d={current:null},Md=null,Ps=null,Rd=null;function qy(){Rd=Ps=Md=null}function Vy(e){var t=_d.current;jt(_d),e.type._context._currentValue=t}function ST(e,t){for(;e!==null;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,r!==null&&r.childExpirationTime<t&&(r.childExpirationTime=t);else if(r!==null&&r.childExpirationTime<t)r.childExpirationTime=t;else break;e=e.return}}function _s(e,t){Md=e,Rd=Ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(ci=!0),e.firstContext=null)}function En(e,t){if(Rd!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Rd=e,t=1073741823),t={context:e,observedBits:t,next:null},Ps===null){if(Md===null)throw Error(Te(308));Ps=t,Md.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ps=Ps.next=t;return e._currentValue}var go=!1;function Xy(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Yy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ko(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function To(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function bx(e,t){var r=e.alternate;r!==null&&Yy(r,e),e=e.updateQueue,r=e.baseQueue,r===null?(e.baseQueue=t.next=t,t.next=t):(t.next=r.next,r.next=t)}function Hu(e,t,r,n){var i=e.updateQueue;go=!1;var a=i.baseQueue,l=i.shared.pending;if(l!==null){if(a!==null){var u=a.next;a.next=l.next,l.next=u}a=l,i.shared.pending=null,u=e.alternate,u!==null&&(u=u.updateQueue,u!==null&&(u.baseQueue=l))}if(a!==null){u=a.next;var d=i.baseState,p=0,g=null,m=null,w=null;if(u!==null){var x=u;do{if(l=x.expirationTime,l<n){var O={expirationTime:x.expirationTime,suspenseConfig:x.suspenseConfig,tag:x.tag,payload:x.payload,callback:x.callback,next:null};w===null?(m=w=O,g=d):w=w.next=O,l>p&&(p=l)}else{w!==null&&(w=w.next={expirationTime:1073741823,suspenseConfig:x.suspenseConfig,tag:x.tag,payload:x.payload,callback:x.callback,next:null}),ZT(l,x.suspenseConfig);e:{var I=e,P=x;switch(l=t,O=r,P.tag){case 1:if(I=P.payload,typeof I=="function"){d=I.call(O,d,l);break e}d=I;break e;case 3:I.effectTag=I.effectTag&-4097|64;case 0:if(I=P.payload,l=typeof I=="function"?I.call(O,d,l):I,l==null)break e;d=Ir({},d,l);break e;case 2:go=!0}}x.callback!==null&&(e.effectTag|=32,l=i.effects,l===null?i.effects=[x]:l.push(x))}if(x=x.next,x===null||x===u){if(l=i.shared.pending,l===null)break;x=a.next=l.next,l.next=u,i.baseQueue=a=l,i.shared.pending=null}}while(1)}w===null?g=d:w.next=m,i.baseState=g,i.baseQueue=w,Ih(p),e.expirationTime=p,e.memoizedState=d}}function xx(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=i,i=r,typeof n!="function")throw Error(Te(191,n));n.call(i)}}}var Ou=Dn.ReactCurrentBatchConfig,CT=new Eh.Component().refs;function $d(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ir({},t,r),e.memoizedState=r,e.expirationTime===0&&(e.updateQueue.baseState=r)}var Lh={isMounted:function(e){return(e=e._reactInternalFiber)?Ma(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=pi(),i=Ou.suspense;n=Sa(n,e,i),i=ko(n,i),i.payload=t,r!=null&&(i.callback=r),To(e,i),Po(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=pi(),i=Ou.suspense;n=Sa(n,e,i),i=ko(n,i),i.tag=1,i.payload=t,r!=null&&(i.callback=r),To(e,i),Po(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=pi(),n=Ou.suspense;r=Sa(r,e,n),n=ko(r,n),n.tag=2,t!=null&&(n.callback=t),To(e,n),Po(e,r)}};function Ex(e,t,r,n,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!Bu(r,n)||!Bu(i,a):!0}function kT(e,t,r){var n=!1,i=Ao,a=t.contextType;return typeof a=="object"&&a!==null?a=En(a):(i=Hr(t)?La:kr.current,n=t.contextTypes,a=(n=n!=null)?Hs(e,i):Ao),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lh,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Sx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lh.enqueueReplaceState(t,t.state,null)}function nm(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=CT,Xy(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=En(a):(a=Hr(t)?La:kr.current,i.context=Hs(e,a)),Hu(e,r,i,n),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&($d(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Lh.enqueueReplaceState(i,i.state,null),Hu(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.effectTag|=4)}var kf=Array.isArray;function tu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Te(309));var n=r.stateNode}if(!n)throw Error(Te(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=n.refs;l===CT&&(l=n.refs={}),a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(Te(284));if(!r._owner)throw Error(Te(290,e))}return e}function Tf(e,t){if(e.type!=="textarea")throw Error(Te(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function TT(e){function t(P,T){if(e){var N=P.lastEffect;N!==null?(N.nextEffect=T,P.lastEffect=T):P.firstEffect=P.lastEffect=T,T.nextEffect=null,T.effectTag=8}}function r(P,T){if(!e)return null;for(;T!==null;)t(P,T),T=T.sibling;return null}function n(P,T){for(P=new Map;T!==null;)T.key!==null?P.set(T.key,T):P.set(T.index,T),T=T.sibling;return P}function i(P,T){return P=Na(P,T),P.index=0,P.sibling=null,P}function a(P,T,N){return P.index=N,e?(N=P.alternate,N!==null?(N=N.index,N<T?(P.effectTag=2,T):N):(P.effectTag=2,T)):T}function l(P){return e&&P.alternate===null&&(P.effectTag=2),P}function u(P,T,N,R){return T===null||T.tag!==6?(T=Ig(N,P.mode,R),T.return=P,T):(T=i(T,N),T.return=P,T)}function d(P,T,N,R){return T!==null&&T.elementType===N.type?(R=i(T,N.props),R.ref=tu(P,T,N),R.return=P,R):(R=pd(N.type,N.key,N.props,null,P.mode,R),R.ref=tu(P,T,N),R.return=P,R)}function p(P,T,N,R){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=_g(N,P.mode,R),T.return=P,T):(T=i(T,N.children||[]),T.return=P,T)}function g(P,T,N,R,_){return T===null||T.tag!==7?(T=bo(N,P.mode,R,_),T.return=P,T):(T=i(T,N),T.return=P,T)}function m(P,T,N){if(typeof T=="string"||typeof T=="number")return T=Ig(""+T,P.mode,N),T.return=P,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case xf:return N=pd(T.type,T.key,T.props,null,P.mode,N),N.ref=tu(P,null,T),N.return=P,N;case Ss:return T=_g(T,P.mode,N),T.return=P,T}if(kf(T)||Xl(T))return T=bo(T,P.mode,N,null),T.return=P,T;Tf(P,T)}return null}function w(P,T,N,R){var _=T!==null?T.key:null;if(typeof N=="string"||typeof N=="number")return _!==null?null:u(P,T,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case xf:return N.key===_?N.type===la?g(P,T,N.props.children,R,_):d(P,T,N,R):null;case Ss:return N.key===_?p(P,T,N,R):null}if(kf(N)||Xl(N))return _!==null?null:g(P,T,N,R,null);Tf(P,N)}return null}function x(P,T,N,R,_){if(typeof R=="string"||typeof R=="number")return P=P.get(N)||null,u(T,P,""+R,_);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case xf:return P=P.get(R.key===null?N:R.key)||null,R.type===la?g(T,P,R.props.children,_,R.key):d(T,P,R,_);case Ss:return P=P.get(R.key===null?N:R.key)||null,p(T,P,R,_)}if(kf(R)||Xl(R))return P=P.get(N)||null,g(T,P,R,_,null);Tf(T,R)}return null}function O(P,T,N,R){for(var _=null,$=null,z=T,H=T=0,q=null;z!==null&&H<N.length;H++){z.index>H?(q=z,z=null):q=z.sibling;var re=w(P,z,N[H],R);if(re===null){z===null&&(z=q);break}e&&z&&re.alternate===null&&t(P,z),T=a(re,T,H),$===null?_=re:$.sibling=re,$=re,z=q}if(H===N.length)return r(P,z),_;if(z===null){for(;H<N.length;H++)z=m(P,N[H],R),z!==null&&(T=a(z,T,H),$===null?_=z:$.sibling=z,$=z);return _}for(z=n(P,z);H<N.length;H++)q=x(z,P,H,N[H],R),q!==null&&(e&&q.alternate!==null&&z.delete(q.key===null?H:q.key),T=a(q,T,H),$===null?_=q:$.sibling=q,$=q);return e&&z.forEach(function(oe){return t(P,oe)}),_}function I(P,T,N,R){var _=Xl(N);if(typeof _!="function")throw Error(Te(150));if(N=_.call(N),N==null)throw Error(Te(151));for(var $=_=null,z=T,H=T=0,q=null,re=N.next();z!==null&&!re.done;H++,re=N.next()){z.index>H?(q=z,z=null):q=z.sibling;var oe=w(P,z,re.value,R);if(oe===null){z===null&&(z=q);break}e&&z&&oe.alternate===null&&t(P,z),T=a(oe,T,H),$===null?_=oe:$.sibling=oe,$=oe,z=q}if(re.done)return r(P,z),_;if(z===null){for(;!re.done;H++,re=N.next())re=m(P,re.value,R),re!==null&&(T=a(re,T,H),$===null?_=re:$.sibling=re,$=re);return _}for(z=n(P,z);!re.done;H++,re=N.next())re=x(z,P,H,re.value,R),re!==null&&(e&&re.alternate!==null&&z.delete(re.key===null?H:re.key),T=a(re,T,H),$===null?_=re:$.sibling=re,$=re);return e&&z.forEach(function(le){return t(P,le)}),_}return function(P,T,N,R){var _=typeof N=="object"&&N!==null&&N.type===la&&N.key===null;_&&(N=N.props.children);var $=typeof N=="object"&&N!==null;if($)switch(N.$$typeof){case xf:e:{for($=N.key,_=T;_!==null;){if(_.key===$){switch(_.tag){case 7:if(N.type===la){r(P,_.sibling),T=i(_,N.props.children),T.return=P,P=T;break e}break;default:if(_.elementType===N.type){r(P,_.sibling),T=i(_,N.props),T.ref=tu(P,_,N),T.return=P,P=T;break e}}r(P,_);break}else t(P,_);_=_.sibling}N.type===la?(T=bo(N.props.children,P.mode,R,N.key),T.return=P,P=T):(R=pd(N.type,N.key,N.props,null,P.mode,R),R.ref=tu(P,T,N),R.return=P,P=R)}return l(P);case Ss:e:{for(_=N.key;T!==null;){if(T.key===_)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){r(P,T.sibling),T=i(T,N.children||[]),T.return=P,P=T;break e}else{r(P,T);break}else t(P,T);T=T.sibling}T=_g(N,P.mode,R),T.return=P,P=T}return l(P)}if(typeof N=="string"||typeof N=="number")return N=""+N,T!==null&&T.tag===6?(r(P,T.sibling),T=i(T,N),T.return=P,P=T):(r(P,T),T=Ig(N,P.mode,R),T.return=P,P=T),l(P);if(kf(N))return O(P,T,N,R);if(Xl(N))return I(P,T,N,R);if($&&Tf(P,N),typeof N>"u"&&!_)switch(P.tag){case 1:case 0:throw P=P.type,Error(Te(152,P.displayName||P.name||"Component"))}return r(P,T)}}var Us=TT(!0),Qy=TT(!1),xc={},hi={current:xc},Uu={current:xc},Wu={current:xc};function da(e){if(e===xc)throw Error(Te(174));return e}function im(e,t){switch(Ht(Wu,t),Ht(Uu,e),Ht(hi,xc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bv(t,e)}jt(hi),Ht(hi,t)}function Ws(){jt(hi),jt(Uu),jt(Wu)}function Cx(e){da(Wu.current);var t=da(hi.current),r=Bv(t,e.type);t!==r&&(Ht(Uu,e),Ht(hi,r))}function Jy(e){Uu.current===e&&(jt(hi),jt(Uu))}var $t={current:0};function Fd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data===Dy||r.data===zy))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.effectTag&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Zy(e,t){return{responder:e,props:t}}var fd=Dn.ReactCurrentDispatcher,xn=Dn.ReactCurrentBatchConfig,yo=0,Yt=null,Er=null,Sr=null,Dd=!1;function Jr(){throw Error(Te(321))}function e0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Pa(e[r],t[r]))return!1;return!0}function t0(e,t,r,n,i,a){if(yo=a,Yt=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,fd.current=e===null||e.memoizedState===null?zI:BI,e=r(n,i),t.expirationTime===yo){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(Te(301));a+=1,Sr=Er=null,t.updateQueue=null,fd.current=HI,e=r(n,i)}while(t.expirationTime===yo)}if(fd.current=Hd,t=Er!==null&&Er.next!==null,yo=0,Sr=Er=Yt=null,Dd=!1,t)throw Error(Te(300));return e}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Yt.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function Zs(){if(Er===null){var e=Yt.alternate;e=e!==null?e.memoizedState:null}else e=Er.next;var t=Sr===null?Yt.memoizedState:Sr.next;if(t!==null)Sr=t,Er=e;else{if(e===null)throw Error(Te(310));Er=e,e={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},Sr===null?Yt.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function ba(e,t){return typeof t=="function"?t(e):t}function Of(e){var t=Zs(),r=t.queue;if(r===null)throw Error(Te(311));r.lastRenderedReducer=e;var n=Er,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var u=l=a=null,d=i;do{var p=d.expirationTime;if(p<yo){var g={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null};u===null?(l=u=g,a=n):u=u.next=g,p>Yt.expirationTime&&(Yt.expirationTime=p,Ih(p))}else u!==null&&(u=u.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null}),ZT(p,d.suspenseConfig),n=d.eagerReducer===e?d.eagerState:e(n,d.action);d=d.next}while(d!==null&&d!==i);u===null?a=n:u.next=l,Pa(n,t.memoizedState)||(ci=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Pf(e){var t=Zs(),r=t.queue;if(r===null)throw Error(Te(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);Pa(a,t.memoizedState)||(ci=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Pg(e){var t=Ms();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},e=e.dispatch=jT.bind(null,Yt,e),[t.memoizedState,e]}function om(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Yt.updateQueue,t===null?(t={lastEffect:null},Yt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function OT(){return Zs().memoizedState}function am(e,t,r,n){var i=Ms();Yt.effectTag|=e,i.memoizedState=om(1|t,r,void 0,n===void 0?null:n)}function r0(e,t,r,n){var i=Zs();n=n===void 0?null:n;var a=void 0;if(Er!==null){var l=Er.memoizedState;if(a=l.destroy,n!==null&&e0(n,l.deps)){om(t,r,a,n);return}}Yt.effectTag|=e,i.memoizedState=om(1|t,r,a,n)}function kx(e,t){return am(516,4,e,t)}function zd(e,t){return r0(516,4,e,t)}function PT(e,t){return r0(4,2,e,t)}function LT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NT(e,t,r){return r=r!=null?r.concat([e]):null,r0(4,2,LT.bind(null,t,e),r)}function n0(){}function Tx(e,t){return Ms().memoizedState=[e,t===void 0?null:t],e}function Bd(e,t){var r=Zs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&e0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function AT(e,t){var r=Zs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&e0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function i0(e,t,r){var n=Ph();jo(98>n?98:n,function(){e(!0)}),jo(97<n?97:n,function(){var i=xn.suspense;xn.suspense=t===void 0?null:t;try{e(!1),r()}finally{xn.suspense=i}})}function jT(e,t,r){var n=pi(),i=Ou.suspense;n=Sa(n,e,i),i={expirationTime:n,suspenseConfig:i,action:r,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Yt||a!==null&&a===Yt)Dd=!0,i.expirationTime=yo,Yt.expirationTime=yo;else{if(e.expirationTime===0&&(a===null||a.expirationTime===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,r);if(i.eagerReducer=a,i.eagerState=u,Pa(u,l))return}catch{}finally{}Po(e,n)}}var Hd={readContext:En,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useResponder:Jr,useDeferredValue:Jr,useTransition:Jr},zI={readContext:En,useCallback:Tx,useContext:En,useEffect:kx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,am(4,2,LT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return am(4,2,e,t)},useMemo:function(e,t){var r=Ms();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ms();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=jT.bind(null,Yt,e),[n.memoizedState,e]},useRef:function(e){var t=Ms();return e={current:e},t.memoizedState=e},useState:Pg,useDebugValue:n0,useResponder:Zy,useDeferredValue:function(e,t){var r=Pg(e),n=r[0],i=r[1];return kx(function(){var a=xn.suspense;xn.suspense=t===void 0?null:t;try{i(e)}finally{xn.suspense=a}},[e,t]),n},useTransition:function(e){var t=Pg(!1),r=t[0];return t=t[1],[Tx(i0.bind(null,t,e),[t,e]),r]}},BI={readContext:En,useCallback:Bd,useContext:En,useEffect:zd,useImperativeHandle:NT,useLayoutEffect:PT,useMemo:AT,useReducer:Of,useRef:OT,useState:function(){return Of(ba)},useDebugValue:n0,useResponder:Zy,useDeferredValue:function(e,t){var r=Of(ba),n=r[0],i=r[1];return zd(function(){var a=xn.suspense;xn.suspense=t===void 0?null:t;try{i(e)}finally{xn.suspense=a}},[e,t]),n},useTransition:function(e){var t=Of(ba),r=t[0];return t=t[1],[Bd(i0.bind(null,t,e),[t,e]),r]}},HI={readContext:En,useCallback:Bd,useContext:En,useEffect:zd,useImperativeHandle:NT,useLayoutEffect:PT,useMemo:AT,useReducer:Pf,useRef:OT,useState:function(){return Pf(ba)},useDebugValue:n0,useResponder:Zy,useDeferredValue:function(e,t){var r=Pf(ba),n=r[0],i=r[1];return zd(function(){var a=xn.suspense;xn.suspense=t===void 0?null:t;try{i(e)}finally{xn.suspense=a}},[e,t]),n},useTransition:function(e){var t=Pf(ba),r=t[0];return t=t[1],[Bd(i0.bind(null,t,e),[t,e]),r]}},Wi=null,wo=null,xa=!1;function IT(e,t){var r=fi(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Ox(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function sm(e){if(xa){var t=wo;if(t){var r=t;if(!Ox(e,t)){if(t=Is(r.nextSibling),!t||!Ox(e,t)){e.effectTag=e.effectTag&-1025|2,xa=!1,Wi=e;return}IT(Wi,r)}Wi=e,wo=Is(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,xa=!1,Wi=e}}function Px(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wi=e}function Lf(e){if(e!==Wi)return!1;if(!xa)return Px(e),xa=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Yv(t,e.memoizedProps))for(t=wo;t;)IT(e,t),t=Is(t.nextSibling);if(Px(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r===Zk){if(t===0){wo=Is(e.nextSibling);break e}t--}else r!==Jk&&r!==zy&&r!==Dy||t++}e=e.nextSibling}wo=null}}else wo=Wi?Is(e.stateNode.nextSibling):null;return!0}function Lg(){wo=Wi=null,xa=!1}var UI=Dn.ReactCurrentOwner,ci=!1;function tn(e,t,r,n){t.child=e===null?Qy(t,null,r,n):Us(t,e.child,r,n)}function Lx(e,t,r,n,i){r=r.render;var a=t.ref;return _s(t,i),n=t0(e,t,r,n,a,i),e!==null&&!ci?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ki(e,t,i)):(t.effectTag|=1,tn(e,t,n,i),t.child)}function Nx(e,t,r,n,i,a){if(e===null){var l=r.type;return typeof l=="function"&&!u0(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,_T(e,t,l,n,i,a)):(e=pd(r.type,null,n,null,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return l=e.child,i<a&&(i=l.memoizedProps,r=r.compare,r=r!==null?r:Bu,r(i,n)&&e.ref===t.ref)?Ki(e,t,a):(t.effectTag|=1,e=Na(l,n),e.ref=t.ref,e.return=t,t.child=e)}function _T(e,t,r,n,i,a){return e!==null&&Bu(e.memoizedProps,n)&&e.ref===t.ref&&(ci=!1,i<a)?(t.expirationTime=e.expirationTime,Ki(e,t,a)):lm(e,t,r,n,a)}function MT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.effectTag|=128)}function lm(e,t,r,n,i){var a=Hr(r)?La:kr.current;return a=Hs(t,a),_s(t,i),r=t0(e,t,r,n,a,i),e!==null&&!ci?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ki(e,t,i)):(t.effectTag|=1,tn(e,t,r,i),t.child)}function Ax(e,t,r,n,i){if(Hr(r)){var a=!0;ld(t)}else a=!1;if(_s(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),kT(t,r,n),nm(t,r,n,i),n=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,p=r.contextType;typeof p=="object"&&p!==null?p=En(p):(p=Hr(r)?La:kr.current,p=Hs(t,p));var g=r.getDerivedStateFromProps,m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||d!==p)&&Sx(t,l,n,p),go=!1;var w=t.memoizedState;l.state=w,Hu(t,n,l,i),d=t.memoizedState,u!==n||w!==d||Br.current||go?(typeof g=="function"&&($d(t,r,g,n),d=t.memoizedState),(u=go||Ex(t,r,u,n,w,d,p))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.effectTag|=4)):(typeof l.componentDidMount=="function"&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=d),l.props=n,l.state=d,l.context=p,n=u):(typeof l.componentDidMount=="function"&&(t.effectTag|=4),n=!1)}else l=t.stateNode,Yy(e,t),u=t.memoizedProps,l.props=t.type===t.elementType?u:Mn(t.type,u),d=l.context,p=r.contextType,typeof p=="object"&&p!==null?p=En(p):(p=Hr(r)?La:kr.current,p=Hs(t,p)),g=r.getDerivedStateFromProps,(m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||d!==p)&&Sx(t,l,n,p),go=!1,d=t.memoizedState,l.state=d,Hu(t,n,l,i),w=t.memoizedState,u!==n||d!==w||Br.current||go?(typeof g=="function"&&($d(t,r,g,n),w=t.memoizedState),(g=go||Ex(t,r,u,n,d,w,p))?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,w,p),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,w,p)),typeof l.componentDidUpdate=="function"&&(t.effectTag|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.effectTag|=256)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=w),l.props=n,l.state=w,l.context=p,n=g):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=256),n=!1);return um(e,t,r,n,a,i)}function um(e,t,r,n,i,a){MT(e,t);var l=(t.effectTag&64)!==0;if(!n&&!l)return i&&vx(t,r,!1),Ki(e,t,a);n=t.stateNode,UI.current=t;var u=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.effectTag|=1,e!==null&&l?(t.child=Us(t,e.child,null,a),t.child=Us(t,null,u,a)):tn(e,t,u,a),t.memoizedState=n.state,i&&vx(t,r,!0),t.child}function jx(e){var t=e.stateNode;t.pendingContext?gx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gx(e,t.context,!1),im(e,t.containerInfo)}var Ng={dehydrated:null,retryTime:0};function Ix(e,t,r){var n=t.mode,i=t.pendingProps,a=$t.current,l=!1,u;if((u=(t.effectTag&64)!==0)||(u=(a&2)!==0&&(e===null||e.memoizedState!==null)),u?(l=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||i.fallback===void 0||i.unstable_avoidThisFallback===!0||(a|=1),Ht($t,a&1),e===null){if(i.fallback!==void 0&&sm(t),l){if(l=i.fallback,i=bo(null,n,0,null),i.return=t,!(t.mode&2))for(e=t.memoizedState!==null?t.child.child:t.child,i.child=e;e!==null;)e.return=i,e=e.sibling;return r=bo(l,n,r,null),r.return=t,i.sibling=r,t.memoizedState=Ng,t.child=i,r}return n=i.children,t.memoizedState=null,t.child=Qy(t,null,n,r)}if(e.memoizedState!==null){if(e=e.child,n=e.sibling,l){if(i=i.fallback,r=Na(e,e.pendingProps),r.return=t,!(t.mode&2)&&(l=t.memoizedState!==null?t.child.child:t.child,l!==e.child))for(r.child=l;l!==null;)l.return=r,l=l.sibling;return n=Na(n,i),n.return=t,r.sibling=n,r.childExpirationTime=0,t.memoizedState=Ng,t.child=r,n}return r=Us(t,e.child,i.children,r),t.memoizedState=null,t.child=r}if(e=e.child,l){if(l=i.fallback,i=bo(null,n,0,null),i.return=t,i.child=e,e!==null&&(e.return=i),!(t.mode&2))for(e=t.memoizedState!==null?t.child.child:t.child,i.child=e;e!==null;)e.return=i,e=e.sibling;return r=bo(l,n,r,null),r.return=t,i.sibling=r,r.effectTag|=2,i.childExpirationTime=0,t.memoizedState=Ng,t.child=i,r}return t.memoizedState=null,t.child=Us(t,e,i.children,r)}function _x(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;r!==null&&r.expirationTime<t&&(r.expirationTime=t),ST(e.return,t)}function Ag(e,t,r,n,i,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailExpiration:0,tailMode:i,lastEffect:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailExpiration=0,l.tailMode=i,l.lastEffect=a)}function Mx(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(tn(e,t,n.children,r),n=$t.current,n&2)n=n&1|2,t.effectTag|=64;else{if(e!==null&&e.effectTag&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_x(e,r);else if(e.tag===19)_x(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ht($t,n),!(t.mode&2))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Fd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Ag(t,!1,i,r,a,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Fd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Ag(t,!0,r,null,a,t.lastEffect);break;case"together":Ag(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ki(e,t,r){e!==null&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(n!==0&&Ih(n),t.childExpirationTime<r)return null;if(e!==null&&t.child!==e.child)throw Error(Te(153));if(t.child!==null){for(e=t.child,r=Na(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Na(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}var RT,cm,$T,FT;RT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cm=function(){};$T=function(e,t,r,n,i){var a=e.memoizedProps;if(a!==n){var l=t.stateNode;switch(da(hi.current),e=null,r){case"input":a=Rv(l,a),n=Rv(l,n),e=[];break;case"option":a=Dv(l,a),n=Dv(l,n),e=[];break;case"select":a=Ir({},a,{value:void 0}),n=Ir({},n,{value:void 0}),e=[];break;case"textarea":a=zv(l,a),n=zv(l,n),e=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(l.onclick=Nd)}Gv(r,n);var u,d;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style")for(d in l=a[u],l)l.hasOwnProperty(d)&&(r||(r={}),r[d]="");else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ds.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in n){var p=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&p!==l&&(p!=null||l!=null))if(u==="style")if(l){for(d in l)!l.hasOwnProperty(d)||p&&p.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in p)p.hasOwnProperty(d)&&l[d]!==p[d]&&(r||(r={}),r[d]=p[d])}else r||(e||(e=[]),e.push(u,r)),r=p;else u==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,l=l?l.__html:void 0,p!=null&&l!==p&&(e=e||[]).push(u,p)):u==="children"?l===p||typeof p!="string"&&typeof p!="number"||(e=e||[]).push(u,""+p):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(u)?(p!=null&&Fi(i,u),e||l===p||(e=[])):(e=e||[]).push(u,p))}r&&(e=e||[]).push("style",r),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}};FT=function(e,t,r,n){r!==n&&(t.effectTag|=4)};function Nf(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function WI(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Hr(t.type)&&Id(),null;case 3:return Ws(),jt(Br),jt(kr),r=t.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),e!==null&&e.child!==null||!Lf(t)||(t.effectTag|=4),cm(t),null;case 5:Jy(t),r=da(Wu.current);var i=t.type;if(e!==null&&t.stateNode!=null)$T(e,t,i,n,r),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(t.stateNode===null)throw Error(Te(166));return null}if(e=da(hi.current),Lf(t)){n=t.stateNode,i=t.type;var a=t.memoizedProps;switch(n[vo]=t,n[Ad]=a,i){case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(e=0;e<gu.length;e++)Mt(gu[e],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"form":Mt("reset",n),Mt("submit",n);break;case"details":Mt("toggle",n);break;case"input":Gb(n,a),Mt("invalid",n),Fi(r,"onChange");break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Mt("invalid",n),Fi(r,"onChange");break;case"textarea":Vb(n,a),Mt("invalid",n),Fi(r,"onChange")}Gv(i,a),e=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?n.textContent!==u&&(e=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(e=["children",""+u]):Ds.hasOwnProperty(l)&&u!=null&&Fi(r,l)}switch(i){case"input":Ef(n),qb(n,a,!0);break;case"textarea":Ef(n),Xb(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Nd)}r=e,t.updateQueue=r,r!==null&&(t.effectTag|=4)}else{switch(l=r.nodeType===9?r:r.ownerDocument,e===tx&&(e=Ak(i)),e===tx?i==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),i==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[vo]=t,e[Ad]=n,RT(e,t,!1,!1),t.stateNode=e,l=qv(i,n),i){case"iframe":case"object":case"embed":Mt("load",e),u=n;break;case"video":case"audio":for(u=0;u<gu.length;u++)Mt(gu[u],e);u=n;break;case"source":Mt("error",e),u=n;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),u=n;break;case"form":Mt("reset",e),Mt("submit",e),u=n;break;case"details":Mt("toggle",e),u=n;break;case"input":Gb(e,n),u=Rv(e,n),Mt("invalid",e),Fi(r,"onChange");break;case"option":u=Dv(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},u=Ir({},n,{value:void 0}),Mt("invalid",e),Fi(r,"onChange");break;case"textarea":Vb(e,n),u=zv(e,n),Mt("invalid",e),Fi(r,"onChange");break;default:u=n}Gv(i,u);var d=u;for(a in d)if(d.hasOwnProperty(a)){var p=d[a];a==="style"?Yk(e,p):a==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&jk(e,p)):a==="children"?typeof p=="string"?(i!=="textarea"||p!=="")&&$u(e,p):typeof p=="number"&&$u(e,""+p):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ds.hasOwnProperty(a)?p!=null&&Fi(r,a):p!=null&&Py(e,a,p,l))}switch(i){case"input":Ef(e),qb(e,n,!1);break;case"textarea":Ef(e),Xb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+No(n.value));break;case"select":e.multiple=!!n.multiple,r=n.value,r!=null?js(e,!!n.multiple,r,!1):n.defaultValue!=null&&js(e,!!n.multiple,n.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Nd)}eT(i,n)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)FT(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Te(166));r=da(Wu.current),da(hi.current),Lf(t)?(r=t.stateNode,n=t.memoizedProps,r[vo]=t,r.nodeValue!==n&&(t.effectTag|=4)):(r=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),r[vo]=t,t.stateNode=r)}return null;case 13:return jt($t),n=t.memoizedState,t.effectTag&64?(t.expirationTime=r,t):(r=n!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&Lf(t):(i=e.memoizedState,n=i!==null,r||i===null||(i=e.child.sibling,i!==null&&(a=t.firstEffect,a!==null?(t.firstEffect=i,i.nextEffect=a):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8))),r&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||$t.current&1?nr===Ea&&(nr=Kd):((nr===Ea||nr===Kd)&&(nr=Nh),Gu!==0&&sn!==null&&(ga(sn,Ur),i2(sn,Gu)))),(r||n)&&(t.effectTag|=4),null);case 4:return Ws(),cm(t),null;case 10:return Vy(t),null;case 17:return Hr(t.type)&&Id(),null;case 19:if(jt($t),n=t.memoizedState,n===null)return null;if(i=(t.effectTag&64)!==0,a=n.rendering,a===null){if(i)Nf(n,!1);else if(nr!==Ea||e!==null&&e.effectTag&64)for(a=t.child;a!==null;){if(e=Fd(a),e!==null){for(t.effectTag|=64,Nf(n,!1),i=e.updateQueue,i!==null&&(t.updateQueue=i,t.effectTag|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;n!==null;)i=n,a=r,i.effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,e=i.alternate,e===null?(i.childExpirationTime=0,i.expirationTime=a,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),n=n.sibling;return Ht($t,$t.current&1|2),t.child}a=a.sibling}}else{if(!i)if(e=Fd(a),e!==null){if(t.effectTag|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.effectTag|=4),Nf(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*wn()-n.renderingStartTime>n.tailExpiration&&1<r&&(t.effectTag|=64,i=!0,Nf(n,!1),t.expirationTime=t.childExpirationTime=r-1);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(n.tailExpiration===0&&(n.tailExpiration=wn()+500),r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=wn(),r.sibling=null,t=$t.current,Ht($t,i?t&1|2:t&1),r):null}throw Error(Te(156,t.tag))}function KI(e){switch(e.tag){case 1:Hr(e.type)&&Id();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(Ws(),jt(Br),jt(kr),t=e.effectTag,t&64)throw Error(Te(285));return e.effectTag=t&-4097|64,e;case 5:return Jy(e),null;case 13:return jt($t),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return jt($t),null;case 4:return Ws(),null;case 10:return Vy(e),null;default:return null}}function o0(e,t){return{value:e,source:t,stack:Ay(t)}}var GI=typeof WeakSet=="function"?WeakSet:Set;function fm(e,t){var r=t.source,n=t.stack;n===null&&r!==null&&(n=Ay(r)),r!==null&&Xi(r.type),t=t.value,e!==null&&e.tag===1&&Xi(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function qI(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(r){Ca(e,r)}}function Rx(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ca(e,r)}else t.current=null}function VI(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Mn(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(Te(163))}function DT(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,n!==void 0&&n()}r=r.next}while(r!==t)}}function zT(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function XI(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:zT(3,r);return;case 1:if(e=r.stateNode,r.effectTag&4)if(t===null)e.componentDidMount();else{var n=r.elementType===r.type?t.memoizedProps:Mn(r.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=r.updateQueue,t!==null&&xx(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}xx(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.effectTag&4&&eT(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&Gk(r))));return;case 19:case 17:case 20:case 21:return}throw Error(Te(163))}function $x(e,t,r){switch(typeof wm=="function"&&wm(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e.next;jo(97<r?97:r,function(){var i=n;do{var a=i.destroy;if(a!==void 0){var l=t;try{a()}catch(u){Ca(l,u)}}i=i.next}while(i!==n)})}break;case 1:Rx(t),r=t.stateNode,typeof r.componentWillUnmount=="function"&&qI(t,r);break;case 5:Rx(t);break;case 4:HT(e,t,r)}}function BT(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&BT(t)}function Fx(e){return e.tag===5||e.tag===3||e.tag===4}function Dx(e){e:{for(var t=e.return;t!==null;){if(Fx(t)){var r=t;break e}t=t.return}throw Error(Te(160))}switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(Te(161))}r.effectTag&16&&($u(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Fx(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.effectTag&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.effectTag&2)){r=r.stateNode;break e}}n?dm(e,r,t):hm(e,r,t)}function dm(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Nd));else if(n!==4&&(e=e.child,e!==null))for(dm(e,t,r),e=e.sibling;e!==null;)dm(e,t,r),e=e.sibling}function hm(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(hm(e,t,r),e=e.sibling;e!==null;)hm(e,t,r),e=e.sibling}function HT(e,t,r){for(var n=t,i=!1,a,l;;){if(!i){i=n.return;e:for(;;){if(i===null)throw Error(Te(160));switch(a=i.stateNode,i.tag){case 5:l=!1;break e;case 3:a=a.containerInfo,l=!0;break e;case 4:a=a.containerInfo,l=!0;break e}i=i.return}i=!0}if(n.tag===5||n.tag===6){e:for(var u=e,d=n,p=r,g=d;;)if($x(u,g,p),g.child!==null&&g.tag!==4)g.child.return=g,g=g.child;else{if(g===d)break e;for(;g.sibling===null;){if(g.return===null||g.return===d)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l?(u=a,d=n.stateNode,u.nodeType===8?u.parentNode.removeChild(d):u.removeChild(d)):a.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){a=n.stateNode.containerInfo,l=!0,n.child.return=n,n=n.child;continue}}else if($x(e,n,r),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(i=!1)}n.sibling.return=n.return,n=n.sibling}}function jg(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:DT(3,t);return;case 1:return;case 5:var r=t.stateNode;if(r!=null){var n=t.memoizedProps,i=e!==null?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(r[Ad]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Pk(r,n),qv(e,i),t=qv(e,n),i=0;i<a.length;i+=2){var l=a[i],u=a[i+1];l==="style"?Yk(r,u):l==="dangerouslySetInnerHTML"?jk(r,u):l==="children"?$u(r,u):Py(r,l,u,t)}switch(e){case"input":$v(r,n);break;case"textarea":Lk(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,e=n.value,e!=null?js(r,!!n.multiple,e,!1):t!==!!n.multiple&&(n.defaultValue!=null?js(r,!!n.multiple,n.defaultValue,!0):js(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Te(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,Gk(t.containerInfo));return;case 12:return;case 13:if(r=t,t.memoizedState===null?n=!1:(n=!0,r=t.child,l0=wn()),r!==null)e:for(e=r;;){if(e.tag===5)a=e.stateNode,n?(a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(a=e.stateNode,i=e.memoizedProps.style,i=i!=null&&i.hasOwnProperty("display")?i.display:null,a.style.display=Xk("display",i));else if(e.tag===6)e.stateNode.nodeValue=n?"":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){a=e.child.sibling,a.return=e,e=a;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}zx(t);return;case 19:zx(t);return;case 17:return}throw Error(Te(163))}function zx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new GI),t.forEach(function(n){var i=o_.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}var YI=typeof WeakMap=="function"?WeakMap:Map;function UT(e,t,r){r=ko(r,null),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vd||(Vd=!0,pm=n),fm(e,t)},r}function WT(e,t,r){r=ko(r,null),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return fm(e,t),n(i)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this),fm(e,t));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}var QI=Math.ceil,Ud=Dn.ReactCurrentDispatcher,KT=Dn.ReactCurrentOwner,ir=0,a0=8,zn=16,mi=32,Ea=0,Wd=1,GT=2,Kd=3,Nh=4,s0=5,Ze=ir,sn=null,rt=null,Ur=0,nr=Ea,Ah=null,Ui=1073741823,Ku=1073741823,Gd=null,Gu=0,qd=!1,l0=0,qT=500,Ue=null,Vd=!1,pm=null,Oo=null,Xd=!1,Pu=null,mu=90,ha=null,Lu=0,gm=null,dd=0;function pi(){return(Ze&(zn|mi))!==ir?1073741821-(wn()/10|0):dd!==0?dd:dd=1073741821-(wn()/10|0)}function Sa(e,t,r){if(t=t.mode,!(t&2))return 1073741823;var n=Ph();if(!(t&4))return n===99?1073741823:1073741822;if((Ze&zn)!==ir)return Ur;if(r!==null)e=cd(e,r.timeoutMs|0||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=cd(e,150,100);break;case 97:case 96:e=cd(e,5e3,250);break;case 95:e=2;break;default:throw Error(Te(326))}return sn!==null&&e===Ur&&--e,e}function Po(e,t){if(50<Lu)throw Lu=0,gm=null,Error(Te(185));if(e=jh(e,t),e!==null){var r=Ph();t===1073741823?(Ze&a0)!==ir&&(Ze&(zn|mi))===ir?vm(e):(ln(e),Ze===ir&&bi()):ln(e),(Ze&4)===ir||r!==98&&r!==99||(ha===null?ha=new Map([[e,t]]):(r=ha.get(e),(r===void 0||r>t)&&ha.set(e,t)))}}function jh(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;r!==null&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,i=null;if(n===null&&e.tag===3)i=e.stateNode;else for(;n!==null;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),r!==null&&r.childExpirationTime<t&&(r.childExpirationTime=t),n.return===null&&n.tag===3){i=n.stateNode;break}n=n.return}return i!==null&&(sn===i&&(Ih(t),nr===Nh&&ga(i,Ur)),i2(i,t)),i}function hd(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!n2(e,t)))return t;var r=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=r>e?r:e,2>=e&&t!==e?0:e}function ln(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=wx(vm.bind(null,e));else{var t=hd(e),r=e.callbackNode;if(t===0)r!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=pi();if(t===1073741823?n=99:t===1||t===2?n=95:(n=10*(1073741821-t)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),r!==null){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=n)return;r!==wT&&pT(r)}e.callbackExpirationTime=t,e.callbackPriority=n,t=t===1073741823?wx(vm.bind(null,e)):xT(n,VT.bind(null,e),{timeout:10*(1073741821-t)-wn()}),e.callbackNode=t}}}function VT(e,t){if(dd=0,t)return t=pi(),bm(e,t),ln(e),null;var r=hd(e);if(r!==0){if(t=e.callbackNode,(Ze&(zn|mi))!==ir)throw Error(Te(327));if(el(),e===sn&&r===Ur||pa(e,r),rt!==null){var n=Ze;Ze|=zn;var i=JT();do try{e_();break}catch(u){QT(e,u)}while(1);if(qy(),Ze=n,Ud.current=i,nr===Wd)throw t=Ah,pa(e,r),ga(e,r),ln(e),t;if(rt===null)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,n=nr,sn=null,n){case Ea:case Wd:throw Error(Te(345));case GT:bm(e,2<r?2:r);break;case Kd:if(ga(e,r),n=e.lastSuspendedTime,r===n&&(e.nextKnownPendingLevel=mm(i)),Ui===1073741823&&(i=l0+qT-wn(),10<i)){if(qd){var a=e.lastPingedTime;if(a===0||a>=r){e.lastPingedTime=r,pa(e,r);break}}if(a=hd(e),a!==0&&a!==r)break;if(n!==0&&n!==r){e.lastPingedTime=n;break}e.timeoutHandle=Tg(ia.bind(null,e),i);break}ia(e);break;case Nh:if(ga(e,r),n=e.lastSuspendedTime,r===n&&(e.nextKnownPendingLevel=mm(i)),qd&&(i=e.lastPingedTime,i===0||i>=r)){e.lastPingedTime=r,pa(e,r);break}if(i=hd(e),i!==0&&i!==r)break;if(n!==0&&n!==r){e.lastPingedTime=n;break}if(Ku!==1073741823?n=10*(1073741821-Ku)-wn():Ui===1073741823?n=0:(n=10*(1073741821-Ui)-5e3,i=wn(),r=10*(1073741821-r)-i,n=i-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QI(n/1960))-n,r<n&&(n=r)),10<n){e.timeoutHandle=Tg(ia.bind(null,e),n);break}ia(e);break;case s0:if(Ui!==1073741823&&Gd!==null){a=Ui;var l=Gd;if(n=l.busyMinDurationMs|0,0>=n?n=0:(i=l.busyDelayMs|0,a=wn()-(10*(1073741821-a)-(l.timeoutMs|0||5e3)),n=a<=i?0:i+n-a),10<n){ga(e,r),e.timeoutHandle=Tg(ia.bind(null,e),n);break}}ia(e);break;default:throw Error(Te(329))}if(ln(e),e.callbackNode===t)return VT.bind(null,e)}}return null}function vm(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(Ze&(zn|mi))!==ir)throw Error(Te(327));if(el(),e===sn&&t===Ur||pa(e,t),rt!==null){var r=Ze;Ze|=zn;var n=JT();do try{ZI();break}catch(i){QT(e,i)}while(1);if(qy(),Ze=r,Ud.current=n,nr===Wd)throw r=Ah,pa(e,t),ga(e,t),ln(e),r;if(rt!==null)throw Error(Te(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,sn=null,ia(e),ln(e)}return null}function JI(){if(ha!==null){var e=ha;ha=null,e.forEach(function(t,r){bm(r,t),ln(r)}),bi()}}function XT(e,t){var r=Ze;Ze|=1;try{return e(t)}finally{Ze=r,Ze===ir&&bi()}}function YT(e,t){var r=Ze;Ze&=-2,Ze|=a0;try{return e(t)}finally{Ze=r,Ze===ir&&bi()}}function pa(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Qj(r)),rt!==null)for(r=rt.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Id();break;case 3:Ws(),jt(Br),jt(kr);break;case 5:Jy(n);break;case 4:Ws();break;case 13:jt($t);break;case 19:jt($t);break;case 10:Vy(n)}r=r.return}sn=e,rt=Na(e.current,null),Ur=t,nr=Ea,Ah=null,Ku=Ui=1073741823,Gd=null,Gu=0,qd=!1}function QT(e,t){do{try{if(qy(),fd.current=Hd,Dd)for(var r=Yt.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}if(yo=0,Sr=Er=Yt=null,Dd=!1,rt===null||rt.return===null)return nr=Wd,Ah=t,rt=null;e:{var i=e,a=rt.return,l=rt,u=t;if(t=Ur,l.effectTag|=2048,l.firstEffect=l.lastEffect=null,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u;if(!(l.mode&2)){var p=l.alternate;p?(l.updateQueue=p.updateQueue,l.memoizedState=p.memoizedState,l.expirationTime=p.expirationTime):(l.updateQueue=null,l.memoizedState=null)}var g=($t.current&1)!==0,m=a;do{var w;if(w=m.tag===13){var x=m.memoizedState;if(x!==null)w=x.dehydrated!==null;else{var O=m.memoizedProps;w=O.fallback===void 0?!1:O.unstable_avoidThisFallback!==!0?!0:!g}}if(w){var I=m.updateQueue;if(I===null){var P=new Set;P.add(d),m.updateQueue=P}else I.add(d);if(!(m.mode&2)){if(m.effectTag|=64,l.effectTag&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var T=ko(1073741823,null);T.tag=2,To(l,T)}l.expirationTime=1073741823;break e}u=void 0,l=t;var N=i.pingCache;if(N===null?(N=i.pingCache=new YI,u=new Set,N.set(d,u)):(u=N.get(d),u===void 0&&(u=new Set,N.set(d,u))),!u.has(l)){u.add(l);var R=i_.bind(null,i,d,l);d.then(R,R)}m.effectTag|=4096,m.expirationTime=t;break e}m=m.return}while(m!==null);u=Error((Xi(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Ay(l))}nr!==s0&&(nr=GT),u=o0(u,l),m=a;do{switch(m.tag){case 3:d=u,m.effectTag|=4096,m.expirationTime=t;var _=UT(m,d,t);bx(m,_);break e;case 1:d=u;var $=m.type,z=m.stateNode;if(!(m.effectTag&64)&&(typeof $.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Oo===null||!Oo.has(z)))){m.effectTag|=4096,m.expirationTime=t;var H=WT(m,d,t);bx(m,H);break e}}m=m.return}while(m!==null)}rt=t2(rt)}catch(q){t=q;continue}break}while(1)}function JT(){var e=Ud.current;return Ud.current=Hd,e===null?Hd:e}function ZT(e,t){e<Ui&&2<e&&(Ui=e),t!==null&&e<Ku&&2<e&&(Ku=e,Gd=t)}function Ih(e){e>Gu&&(Gu=e)}function ZI(){for(;rt!==null;)rt=e2(rt)}function e_(){for(;rt!==null&&!FI();)rt=e2(rt)}function e2(e){var t=r2(e.alternate,e,Ur);return e.memoizedProps=e.pendingProps,t===null&&(t=t2(e)),KT.current=null,t}function t2(e){rt=e;do{var t=rt.alternate;if(e=rt.return,rt.effectTag&2048){if(t=KI(rt),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}else{if(t=WI(t,rt,Ur),Ur===1||rt.childExpirationTime!==1){for(var r=0,n=rt.child;n!==null;){var i=n.expirationTime,a=n.childExpirationTime;i>r&&(r=i),a>r&&(r=a),n=n.sibling}rt.childExpirationTime=r}if(t!==null)return t;e!==null&&!(e.effectTag&2048)&&(e.firstEffect===null&&(e.firstEffect=rt.firstEffect),rt.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=rt.firstEffect),e.lastEffect=rt.lastEffect),1<rt.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=rt:e.firstEffect=rt,e.lastEffect=rt))}if(t=rt.sibling,t!==null)return t;rt=e}while(rt!==null);return nr===Ea&&(nr=s0),null}function mm(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function ia(e){var t=Ph();return jo(99,t_.bind(null,e,t)),null}function t_(e,t){do el();while(Pu!==null);if((Ze&(zn|mi))!==ir)throw Error(Te(327));var r=e.finishedWork,n=e.finishedExpirationTime;if(r===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(Te(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=mm(r);if(e.firstPendingTime=i,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===sn&&(rt=sn=null,Ur=0),1<r.effectTag?r.lastEffect!==null?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,i!==null){var a=Ze;Ze|=mi,KT.current=null,Cg=id;var l=ix();if(Xv(l)){if("selectionStart"in l)var u={start:l.selectionStart,end:l.selectionEnd};else e:{u=(u=l.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var m=0,w=-1,x=-1,O=0,I=0,P=l,T=null;t:for(;;){for(var N;P!==u||p!==0&&P.nodeType!==3||(w=m+p),P!==g||d!==0&&P.nodeType!==3||(x=m+d),P.nodeType===3&&(m+=P.nodeValue.length),(N=P.firstChild)!==null;)T=P,P=N;for(;;){if(P===l)break t;if(T===u&&++O===p&&(w=m),T===g&&++I===d&&(x=m),(N=P.nextSibling)!==null)break;P=T,T=P.parentNode}P=N}u=w===-1||x===-1?null:{start:w,end:x}}else u=null}u=u||{start:0,end:0}}else u=null;kg={activeElementDetached:null,focusedElem:l,selectionRange:u},id=!1,Ue=i;do try{r_()}catch(re){if(Ue===null)throw Error(Te(330));Ca(Ue,re),Ue=Ue.nextEffect}while(Ue!==null);Ue=i;do try{for(l=e,u=t;Ue!==null;){var R=Ue.effectTag;if(R&16&&$u(Ue.stateNode,""),R&128){var _=Ue.alternate;if(_!==null){var $=_.ref;$!==null&&(typeof $=="function"?$(null):$.current=null)}}switch(R&1038){case 2:Dx(Ue),Ue.effectTag&=-3;break;case 6:Dx(Ue),Ue.effectTag&=-3,jg(Ue.alternate,Ue);break;case 1024:Ue.effectTag&=-1025;break;case 1028:Ue.effectTag&=-1025,jg(Ue.alternate,Ue);break;case 4:jg(Ue.alternate,Ue);break;case 8:p=Ue,HT(l,p,u),BT(p)}Ue=Ue.nextEffect}}catch(re){if(Ue===null)throw Error(Te(330));Ca(Ue,re),Ue=Ue.nextEffect}while(Ue!==null);if($=kg,_=ix(),R=$.focusedElem,u=$.selectionRange,_!==R&&R&&R.ownerDocument&&Qk(R.ownerDocument.documentElement,R)){for(u!==null&&Xv(R)&&(_=u.start,$=u.end,$===void 0&&($=_),"selectionStart"in R?(R.selectionStart=_,R.selectionEnd=Math.min($,R.value.length)):($=(_=R.ownerDocument||document)&&_.defaultView||window,$.getSelection&&($=$.getSelection(),p=R.textContent.length,l=Math.min(u.start,p),u=u.end===void 0?l:Math.min(u.end,p),!$.extend&&l>u&&(p=u,u=l,l=p),p=nx(R,l),g=nx(R,u),p&&g&&($.rangeCount!==1||$.anchorNode!==p.node||$.anchorOffset!==p.offset||$.focusNode!==g.node||$.focusOffset!==g.offset)&&(_=_.createRange(),_.setStart(p.node,p.offset),$.removeAllRanges(),l>u?($.addRange(_),$.extend(g.node,g.offset)):(_.setEnd(g.node,g.offset),$.addRange(_)))))),_=[],$=R;$=$.parentNode;)$.nodeType===1&&_.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<_.length;R++)$=_[R],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}id=!!Cg,kg=Cg=null,e.current=r,Ue=i;do try{for(R=e;Ue!==null;){var z=Ue.effectTag;if(z&36&&XI(R,Ue.alternate,Ue),z&128){_=void 0;var H=Ue.ref;if(H!==null){var q=Ue.stateNode;switch(Ue.tag){case 5:_=q;break;default:_=q}typeof H=="function"?H(_):H.current=_}}Ue=Ue.nextEffect}}catch(re){if(Ue===null)throw Error(Te(330));Ca(Ue,re),Ue=Ue.nextEffect}while(Ue!==null);Ue=null,DI(),Ze=a}else e.current=r;if(Xd)Xd=!1,Pu=e,mu=t;else for(Ue=i;Ue!==null;)t=Ue.nextEffect,Ue.nextEffect=null,Ue=t;if(t=e.firstPendingTime,t===0&&(Oo=null),t===1073741823?e===gm?Lu++:(Lu=0,gm=e):Lu=0,typeof ym=="function"&&ym(r.stateNode,n),ln(e),Vd)throw Vd=!1,e=pm,pm=null,e;return(Ze&a0)!==ir||bi(),null}function r_(){for(;Ue!==null;){var e=Ue.effectTag;e&256&&VI(Ue.alternate,Ue),!(e&512)||Xd||(Xd=!0,xT(97,function(){return el(),null})),Ue=Ue.nextEffect}}function el(){if(mu!==90){var e=97<mu?97:mu;return mu=90,jo(e,n_)}}function n_(){if(Pu===null)return!1;var e=Pu;if(Pu=null,(Ze&(zn|mi))!==ir)throw Error(Te(331));var t=Ze;for(Ze|=mi,e=e.current.firstEffect;e!==null;){try{var r=e;if(r.effectTag&512)switch(r.tag){case 0:case 11:case 15:case 22:DT(5,r),zT(5,r)}}catch(n){if(e===null)throw Error(Te(330));Ca(e,n)}r=e.nextEffect,e.nextEffect=null,e=r}return Ze=t,bi(),!0}function Bx(e,t,r){t=o0(r,t),t=UT(e,t,1073741823),To(e,t),e=jh(e,1073741823),e!==null&&ln(e)}function Ca(e,t){if(e.tag===3)Bx(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Bx(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oo===null||!Oo.has(n))){e=o0(t,e),e=WT(r,e,1073741823),To(r,e),r=jh(r,1073741823),r!==null&&ln(r);break}}r=r.return}}function i_(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),sn===e&&Ur===r?nr===Nh||nr===Kd&&Ui===1073741823&&wn()-l0<qT?pa(e,Ur):qd=!0:n2(e,r)&&(t=e.lastPingedTime,t!==0&&t<r||(e.lastPingedTime=r,ln(e)))}function o_(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=pi(),t=Sa(t,e,null)),e=jh(e,t),e!==null&&ln(e)}var r2;r2=function(e,t,r){var n=t.expirationTime;if(e!==null){var i=t.pendingProps;if(e.memoizedProps!==i||Br.current)ci=!0;else{if(n<r){switch(ci=!1,t.tag){case 3:jx(t),Lg();break;case 5:if(Cx(t),t.mode&4&&r!==1&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Hr(t.type)&&ld(t);break;case 4:im(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,i=t.type._context,Ht(_d,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return n=t.child.childExpirationTime,n!==0&&n>=r?Ix(e,t,r):(Ht($t,$t.current&1),t=Ki(e,t,r),t!==null?t.sibling:null);Ht($t,$t.current&1);break;case 19:if(n=t.childExpirationTime>=r,e.effectTag&64){if(n)return Mx(e,t,r);t.effectTag|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null),Ht($t,$t.current),!n)return null}return Ki(e,t,r)}ci=!1}}else ci=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=Hs(t,kr.current),_s(t,r),i=t0(null,t,n,e,i,r),t.effectTag|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hr(n)){var a=!0;ld(t)}else a=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xy(t);var l=n.getDerivedStateFromProps;typeof l=="function"&&$d(t,n,l,e),i.updater=Lh,t.stateNode=i,i._reactInternalFiber=t,nm(t,n,e,r),t=um(null,t,n,!0,a,r)}else t.tag=0,tn(null,t,i,r),t=t.child;return t;case 16:e:{if(i=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,_j(i),i._status!==1)throw i._result;switch(i=i._result,t.type=i,a=t.tag=l_(i),e=Mn(i,e),a){case 0:t=lm(null,t,i,e,r);break e;case 1:t=Ax(null,t,i,e,r);break e;case 11:t=Lx(null,t,i,e,r);break e;case 14:t=Nx(null,t,i,Mn(i.type,e),n,r);break e}throw Error(Te(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),lm(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),Ax(e,t,n,i,r);case 3:if(jx(t),n=t.updateQueue,e===null||n===null)throw Error(Te(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,Yy(e,t),Hu(t,n,null,r),n=t.memoizedState.element,n===i)Lg(),t=Ki(e,t,r);else{if((i=t.stateNode.hydrate)&&(wo=Is(t.stateNode.containerInfo.firstChild),Wi=t,i=xa=!0),i)for(r=Qy(t,null,n,r),t.child=r;r;)r.effectTag=r.effectTag&-3|1024,r=r.sibling;else tn(e,t,n,r),Lg();t=t.child}return t;case 5:return Cx(t),e===null&&sm(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,Yv(n,i)?l=null:a!==null&&Yv(n,a)&&(t.effectTag|=16),MT(e,t),t.mode&4&&r!==1&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(tn(e,t,l,r),t=t.child),t;case 6:return e===null&&sm(t),null;case 13:return Ix(e,t,r);case 4:return im(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Us(t,null,n,r):tn(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),Lx(e,t,n,i,r);case 7:return tn(e,t,t.pendingProps,r),t.child;case 8:return tn(e,t,t.pendingProps.children,r),t.child;case 12:return tn(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,l=t.memoizedProps,a=i.value;var u=t.type._context;if(Ht(_d,u._currentValue),u._currentValue=a,l!==null)if(u=l.value,a=Pa(u,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(u,a):1073741823)|0,a===0){if(l.children===i.children&&!Br.current){t=Ki(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var d=u.dependencies;if(d!==null){l=u.child;for(var p=d.firstContext;p!==null;){if(p.context===n&&p.observedBits&a){u.tag===1&&(p=ko(r,null),p.tag=2,To(u,p)),u.expirationTime<r&&(u.expirationTime=r),p=u.alternate,p!==null&&p.expirationTime<r&&(p.expirationTime=r),ST(u.return,r),d.expirationTime<r&&(d.expirationTime=r);break}p=p.next}}else l=u.tag===10&&u.type===t.type?null:u.child;if(l!==null)l.return=u;else for(l=u;l!==null;){if(l===t){l=null;break}if(u=l.sibling,u!==null){u.return=l.return,l=u;break}l=l.return}u=l}tn(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps,n=a.children,_s(t,r),i=En(i,a.unstable_observedBits),n=n(i),t.effectTag|=1,tn(e,t,n,r),t.child;case 14:return i=t.type,a=Mn(i,t.pendingProps),a=Mn(i.type,a),Nx(e,t,i,a,n,r);case 15:return _T(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Hr(n)?(e=!0,ld(t)):e=!1,_s(t,r),kT(t,n,i),nm(t,n,i,r),um(null,t,n,!0,e,r);case 19:return Mx(e,t,r)}throw Error(Te(156,t.tag))};var ym=null,wm=null;function a_(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);ym=function(n){try{t.onCommitFiberRoot(r,n,void 0,(n.current.effectTag&64)===64)}catch{}},wm=function(n){try{t.onCommitFiberUnmount(r,n)}catch{}}}catch{}return!0}function s_(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function fi(e,t,r,n){return new s_(e,t,r,n)}function u0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function l_(e){if(typeof e=="function")return u0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ly)return 11;if(e===Ny)return 14}return 2}function Na(e,t){var r=e.alternate;return r===null?(r=fi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function pd(e,t,r,n,i,a){var l=2;if(n=e,typeof e=="function")u0(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case la:return bo(r.children,i,a,t);case Ij:l=8,i|=7;break;case xk:l=8,i|=1;break;case td:return e=fi(12,r,t,i|8),e.elementType=td,e.type=td,e.expirationTime=a,e;case rd:return e=fi(13,r,t,i),e.type=rd,e.elementType=rd,e.expirationTime=a,e;case Mv:return e=fi(19,r,t,i),e.elementType=Mv,e.expirationTime=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ek:l=10;break e;case Sk:l=9;break e;case Ly:l=11;break e;case Ny:l=14;break e;case Ck:l=16,n=null;break e;case kk:l=22;break e}throw Error(Te(130,e==null?e:typeof e,""))}return t=fi(l,r,t,i),t.elementType=e,t.type=n,t.expirationTime=a,t}function bo(e,t,r,n){return e=fi(7,e,n,t),e.expirationTime=r,e}function Ig(e,t,r){return e=fi(6,e,null,t),e.expirationTime=r,e}function _g(e,t,r){return t=fi(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function u_(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function n2(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,r!==0&&r>=t&&e<=t}function ga(e,t){var r=e.firstSuspendedTime,n=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(n>t||r===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function i2(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;r!==0&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function bm(e,t){var r=e.lastExpiredTime;(r===0||r>t)&&(e.lastExpiredTime=t)}function Yd(e,t,r,n){var i=t.current,a=pi(),l=Ou.suspense;a=Sa(a,i,l);e:if(r){r=r._reactInternalFiber;t:{if(Ma(r)!==r||r.tag!==1)throw Error(Te(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Hr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(Te(171))}if(r.tag===1){var d=r.type;if(Hr(d)){r=hT(r,d,u);break e}}r=u}else r=Ao;return t.context===null?t.context=r:t.pendingContext=r,t=ko(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),To(i,t),Po(i,a),a}function Mg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hx(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function c0(e,t){Hx(e,t),(e=e.alternate)&&Hx(e,t)}function f0(e,t,r){r=r!=null&&r.hydrate===!0;var n=new u_(e,t,r),i=fi(3,null,null,t===2?7:t===1?3:0);n.current=i,i.stateNode=n,Xy(i),e[vc]=n.current,r&&t!==0&&zj(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=n}f0.prototype.render=function(e){Yd(e,this._internalRoot,null,null)};f0.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Yd(null,e,null,function(){t[vc]=null})};function Ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function c_(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new f0(e,0,t?{hydrate:!0}:void 0)}function _h(e,t,r,n,i){var a=r._reactRootContainer;if(a){var l=a._internalRoot;if(typeof i=="function"){var u=i;i=function(){var p=Mg(l);u.call(p)}}Yd(t,l,e,i)}else{if(a=r._reactRootContainer=c_(r,n),l=a._internalRoot,typeof i=="function"){var d=i;i=function(){var p=Mg(l);d.call(p)}}YT(function(){Yd(t,l,e,i)})}return Mg(l)}function f_(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}Wk=function(e){if(e.tag===13){var t=cd(pi(),150,100);Po(e,t),c0(e,t)}};My=function(e){e.tag===13&&(Po(e,3),c0(e,3))};Kk=function(e){if(e.tag===13){var t=pi();t=Sa(t,e,null),Po(e,t),c0(e,t)}};_v=function(e,t,r){switch(t){case"input":if($v(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Hy(n);if(!i)throw Error(Te(90));Ok(n),$v(n,i)}}}break;case"textarea":Lk(e,r);break;case"select":t=r.value,t!=null&&js(e,!!r.multiple,t,!1)}};Sy=XT;yk=function(e,t,r,n,i){var a=Ze;Ze|=4;try{return jo(98,e.bind(null,t,r,n,i))}finally{Ze=a,Ze===ir&&bi()}};Cy=function(){(Ze&(1|zn|mi))===ir&&(JI(),el())};wk=function(e,t){var r=Ze;Ze|=2;try{return e(t)}finally{Ze=r,Ze===ir&&bi()}};function o2(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(t))throw Error(Te(200));return f_(e,t,null,r)}var d_={Events:[yc,Oa,Hy,gk,Iv,Bs,function(e){Iy(e,Zj)},vk,mk,kh,Ch,el,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return a_(Ir({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Dk(r),r===null?null:r.stateNode},findFiberByHostInstance:function(r){return t?t(r):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:mc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d_;Tn.createPortal=o2;Tn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render=="function"?Error(Te(188)):Error(Te(268,Object.keys(e)));return e=Dk(t),e=e===null?null:e.stateNode,e};Tn.flushSync=function(e,t){if((Ze&(zn|mi))!==ir)throw Error(Te(187));var r=Ze;Ze|=1;try{return jo(99,e.bind(null,t))}finally{Ze=r,bi()}};Tn.hydrate=function(e,t,r){if(!Ec(t))throw Error(Te(200));return _h(null,e,t,!0,r)};Tn.render=function(e,t,r){if(!Ec(t))throw Error(Te(200));return _h(null,e,t,!1,r)};Tn.unmountComponentAtNode=function(e){if(!Ec(e))throw Error(Te(40));return e._reactRootContainer?(YT(function(){_h(null,null,e,!1,function(){e._reactRootContainer=null,e[vc]=null})}),!0):!1};Tn.unstable_batchedUpdates=XT;Tn.unstable_createPortal=function(e,t){return o2(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Tn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ec(r))throw Error(Te(200));if(e==null||e._reactInternalFiber===void 0)throw Error(Te(38));return _h(e,t,r,!1,n)};Tn.version="16.14.0";function a2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a2)}catch(e){console.error(e)}}a2(),uk.exports=Tn;var Sc=uk.exports;const Rg=kt(Sc);function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},He.apply(this,arguments)}function Ke(e,t){if(e==null)return{};var r,n,i=function(l,u){if(l==null)return{};var d,p,g={},m=Object.keys(l);for(p=0;p<m.length;p++)d=m[p],u.indexOf(d)>=0||(g[d]=l[d]);return g}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var h_=["size","color","stroke"];function p_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,h_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-alert-octagon",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M8.7 3h6.6c.3 0 .5 .1 .7 .3l4.7 4.7c.2 .2 .3 .4 .3 .7v6.6c0 .3 -.1 .5 -.3 .7l-4.7 4.7c-.2 .2 -.4 .3 -.7 .3h-6.6c-.3 0 -.5 -.1 -.7 -.3l-4.7 -4.7c-.2 -.2 -.3 -.4 -.3 -.7v-6.6c0 -.3 .1 -.5 .3 -.7l4.7 -4.7c.2 -.2 .4 -.3 .7 -.3z"}),C.createElement("line",{x1:12,y1:8,x2:12,y2:12}),C.createElement("line",{x1:12,y1:16,x2:12.01,y2:16}))}var g_=["size","color","stroke"];function v_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,g_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-alert-triangle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M12 9v2m0 4v.01"}),C.createElement("path",{d:"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75"}))}var m_=["size","color","stroke"];function s2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,m_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-back",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1"}))}var y_=["size","color","stroke"];function w_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,y_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-bar-to-right",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:14,y1:12,x2:4,y2:12}),C.createElement("line",{x1:14,y1:12,x2:10,y2:16}),C.createElement("line",{x1:14,y1:12,x2:10,y2:8}),C.createElement("line",{x1:20,y1:4,x2:20,y2:20}))}var b_=["size","color","stroke"];function l2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,b_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-forward",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M15 11l4 4l-4 4m4 -4h-11a4 4 0 0 1 0 -8h1"}))}var x_=["size","color","stroke"];function E_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,x_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-left",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:5,y1:12,x2:19,y2:12}),C.createElement("line",{x1:5,y1:12,x2:11,y2:18}),C.createElement("line",{x1:5,y1:12,x2:11,y2:6}))}var S_=["size","color","stroke"];function C_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,S_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-right",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:5,y1:12,x2:19,y2:12}),C.createElement("line",{x1:13,y1:18,x2:19,y2:12}),C.createElement("line",{x1:13,y1:6,x2:19,y2:12}))}var k_=["size","color","stroke"];function T_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,k_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrows-diagonal-minimize",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M6 10h4v-4"}),C.createElement("path",{d:"M4 4l6 6"}),C.createElement("path",{d:"M18 14h-4v4"}),C.createElement("path",{d:"M14 14l6 6"}))}var O_=["size","color","stroke"];function P_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,O_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrows-diagonal",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("polyline",{points:"16 4 20 4 20 8"}),C.createElement("line",{x1:14,y1:10,x2:20,y2:4}),C.createElement("polyline",{points:"8 20 4 20 4 16"}),C.createElement("line",{x1:4,y1:20,x2:10,y2:14}))}var L_=["size","color","stroke"];function N_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,L_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrows-sort",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),C.createElement("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"}))}var A_=["size","color","stroke"];function j_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,A_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-award",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:9,r:6}),C.createElement("path",{d:"M12.002 15.003l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889"}),C.createElement("path",{d:"M6.802 12.003l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889"}))}var I_=["size","color","stroke"];function __(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,I_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-braces",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M7 4a2 2 0 0 0 -2 2v3a2 3 0 0 1 -2 3a2 3 0 0 1 2 3v3a2 2 0 0 0 2 2"}),C.createElement("path",{d:"M17 4a2 2 0 0 1 2 2v3a2 3 0 0 0 2 3a2 3 0 0 0 -2 3v3a2 2 0 0 1 -2 2"}))}var M_=["size","color","stroke"];function R_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,M_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-bug",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M9 9v-1a3 3 0 0 1 6 0v1"}),C.createElement("path",{d:"M8 9h8a6 6 0 0 1 1 3v3a5 5 0 0 1 -10 0v-3a6 6 0 0 1 1 -3"}),C.createElement("line",{x1:3,y1:13,x2:7,y2:13}),C.createElement("line",{x1:17,y1:13,x2:21,y2:13}),C.createElement("line",{x1:12,y1:20,x2:12,y2:14}),C.createElement("line",{x1:4,y1:19,x2:7.35,y2:17}),C.createElement("line",{x1:20,y1:19,x2:16.65,y2:17}),C.createElement("line",{x1:4,y1:7,x2:7.75,y2:9.4}),C.createElement("line",{x1:20,y1:7,x2:16.25,y2:9.4}))}var $_=["size","color","stroke"];function d0(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,$_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-check",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M5 12l5 5l10 -10"}))}var F_=["size","color","stroke"];function u2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,F_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-chevron-down",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("polyline",{points:"6 9 12 15 18 9"}))}var D_=["size","color","stroke"];function z_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,D_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-chevron-up",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("polyline",{points:"6 15 12 9 18 15"}))}var B_=["size","color","stroke"];function H_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,B_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-chevrons-right",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("polyline",{points:"7 7 12 12 7 17"}),C.createElement("polyline",{points:"13 7 18 12 13 17"}))}var U_=["size","color","stroke"];function W_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,U_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:12,r:9}))}var K_=["size","color","stroke"];function G_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,K_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-code",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("polyline",{points:"7 8 3 12 7 16"}),C.createElement("polyline",{points:"17 8 21 12 17 16"}),C.createElement("line",{x1:14,y1:4,x2:10,y2:20}))}var q_=["size","color","stroke"];function V_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,q_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-copy",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("rect",{x:8,y:8,width:12,height:12,rx:2}),C.createElement("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}))}var X_=["size","color","stroke"];function Ux(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,X_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-device-floppy",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),C.createElement("circle",{cx:12,cy:14,r:2}),C.createElement("polyline",{points:"14 4 14 8 8 8 8 4"}))}var Y_=["size","color","stroke"];function c2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,Y_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-edit",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),C.createElement("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),C.createElement("path",{d:"M16 5l3 3"}))}var Q_=["size","color","stroke"];function J_(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,Q_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:12,r:2}),C.createElement("path",{d:"M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"}))}var Z_=["size","color","stroke"];function eM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,Z_);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eyeglass",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M8 4h-2l-3 10"}),C.createElement("path",{d:"M16 4h2l3 10"}),C.createElement("line",{x1:10,y1:16,x2:14,y2:16}),C.createElement("path",{d:"M21 16.5a3.5 3.5 0 0 1 -7 0v-2.5h7v2.5"}),C.createElement("path",{d:"M10 16.5a3.5 3.5 0 0 1 -7 0v-2.5h7v2.5"}))}var tM=["size","color","stroke"];function rM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,tM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-code",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),C.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),C.createElement("path",{d:"M10 13l-1 2l1 2"}),C.createElement("path",{d:"M14 13l1 2l-1 2"}))}var nM=["size","color","stroke"];function f2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,nM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-import",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),C.createElement("path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3"}))}var iM=["size","color","stroke"];function oM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,iM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-text",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),C.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),C.createElement("line",{x1:9,y1:9,x2:10,y2:9}),C.createElement("line",{x1:9,y1:13,x2:15,y2:13}),C.createElement("line",{x1:9,y1:17,x2:15,y2:17}))}var aM=["size","color","stroke"];function sM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,aM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-focus-2",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:12,r:.5,fill:"currentColor"}),C.createElement("circle",{cx:12,cy:12,r:7}),C.createElement("line",{x1:12,y1:3,x2:12,y2:5}),C.createElement("line",{x1:3,y1:12,x2:5,y2:12}),C.createElement("line",{x1:12,y1:19,x2:12,y2:21}),C.createElement("line",{x1:19,y1:12,x2:21,y2:12}))}var lM=["size","color","stroke"];function uM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,lM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-grid-dots",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:5,cy:5,r:1}),C.createElement("circle",{cx:12,cy:5,r:1}),C.createElement("circle",{cx:19,cy:5,r:1}),C.createElement("circle",{cx:5,cy:12,r:1}),C.createElement("circle",{cx:12,cy:12,r:1}),C.createElement("circle",{cx:19,cy:12,r:1}),C.createElement("circle",{cx:5,cy:19,r:1}),C.createElement("circle",{cx:12,cy:19,r:1}),C.createElement("circle",{cx:19,cy:19,r:1}))}var cM=["size","color","stroke"];function fM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,cM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-hash",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:5,y1:9,x2:19,y2:9}),C.createElement("line",{x1:5,y1:15,x2:19,y2:15}),C.createElement("line",{x1:11,y1:4,x2:7,y2:20}),C.createElement("line",{x1:17,y1:4,x2:13,y2:20}))}var dM=["size","color","stroke"];function d2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,dM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-heart",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"}))}var hM=["size","color","stroke"];function h2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,hM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-help",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:12,r:9}),C.createElement("line",{x1:12,y1:17,x2:12,y2:17.01}),C.createElement("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"}))}var pM=["size","color","stroke"];function gM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,pM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-indent-decrease",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:20,y1:6,x2:13,y2:6}),C.createElement("line",{x1:20,y1:12,x2:11,y2:12}),C.createElement("line",{x1:20,y1:18,x2:13,y2:18}),C.createElement("path",{d:"M8 8l-4 4l4 4"}))}var vM=["size","color","stroke"];function mM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,vM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-indent-increase",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:20,y1:6,x2:9,y2:6}),C.createElement("line",{x1:20,y1:12,x2:13,y2:12}),C.createElement("line",{x1:20,y1:18,x2:9,y2:18}),C.createElement("path",{d:"M4 8l4 4l-4 4"}))}var yM=["size","color","stroke"];function xm(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,yM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-info-circle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:12,r:9}),C.createElement("line",{x1:12,y1:8,x2:12.01,y2:8}),C.createElement("polyline",{points:"11 12 12 12 12 16 13 16"}))}var wM=["size","color","stroke"];function bM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,wM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-layout-grid",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("rect",{x:4,y:4,width:6,height:6,rx:1}),C.createElement("rect",{x:14,y:4,width:6,height:6,rx:1}),C.createElement("rect",{x:4,y:14,width:6,height:6,rx:1}),C.createElement("rect",{x:14,y:14,width:6,height:6,rx:1}))}var xM=["size","color","stroke"];function EM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,xM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-marquee",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M4 6a2 2 0 0 1 2 -2m3 0h1.5m3 0h1.5m3 0a2 2 0 0 1 2 2m0 3v1.5m0 3v1.5m0 3a2 2 0 0 1 -2 2m-3 0h-1.5m-3 0h-1.5m-3 0a2 2 0 0 1 -2 -2m0 -3v-1.5m0 -3v-1.5m0 -3"}))}var SM=["size","color","stroke"];function CM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,SM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-mood-smile",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:12,cy:12,r:9}),C.createElement("line",{x1:9,y1:10,x2:9.01,y2:10}),C.createElement("line",{x1:15,y1:10,x2:15.01,y2:10}),C.createElement("path",{d:"M9.5 15a3.5 3.5 0 0 0 5 0"}))}var kM=["size","color","stroke"];function TM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,kM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-package",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("polyline",{points:"12 3 20 7.5 20 16.5 12 21 4 16.5 4 7.5 12 3"}),C.createElement("line",{x1:12,y1:12,x2:20,y2:7.5}),C.createElement("line",{x1:12,y1:12,x2:12,y2:21}),C.createElement("line",{x1:12,y1:12,x2:4,y2:7.5}),C.createElement("line",{x1:16,y1:5.25,x2:8,y2:9.75}))}var OM=["size","color","stroke"];function PM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,OM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-player-play",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M7 4v16l13 -8z"}))}var LM=["size","color","stroke"];function Ks(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,LM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-plus",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:12,y1:5,x2:12,y2:19}),C.createElement("line",{x1:5,y1:12,x2:19,y2:12}))}var NM=["size","color","stroke"];function AM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,NM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-puzzle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M4 7h3a1 1 0 0 0 1 -1v-1a2 2 0 0 1 4 0v1a1 1 0 0 0 1 1h3a1 1 0 0 1 1 1v3a1 1 0 0 0 1 1h1a2 2 0 0 1 0 4h-1a1 1 0 0 0 -1 1v3a1 1 0 0 1 -1 1h-3a1 1 0 0 1 -1 -1v-1a2 2 0 0 0 -4 0v1a1 1 0 0 1 -1 1h-3a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h1a2 2 0 0 0 0 -4h-1a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1"}))}var jM=["size","color","stroke"];function IM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,jM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-replace",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("rect",{x:3,y:3,width:6,height:6,rx:1}),C.createElement("rect",{x:15,y:15,width:6,height:6,rx:1}),C.createElement("path",{d:"M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"}),C.createElement("path",{d:"M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"}))}var _M=["size","color","stroke"];function MM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,_M);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-resize",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M4 11v8a1 1 0 0 0 1 1h8m-9 -14v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1"}),C.createElement("path",{d:"M4 12h7a1 1 0 0 1 1 1v7"}))}var RM=["size","color","stroke"];function $M(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,RM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-rocket",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"}),C.createElement("path",{d:"M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"}),C.createElement("circle",{cx:15,cy:9,r:1}))}var FM=["size","color","stroke"];function DM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,FM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-search",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:10,cy:10,r:7}),C.createElement("line",{x1:21,y1:21,x2:15,y2:15}))}var zM=["size","color","stroke"];function BM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,zM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-settings",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),C.createElement("circle",{cx:12,cy:12,r:3}))}var HM=["size","color","stroke"];function Wx(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,HM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-space",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M4 10v3a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-3"}))}var UM=["size","color","stroke"];function WM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,UM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-check",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("rect",{x:4,y:4,width:16,height:16,rx:2}),C.createElement("path",{d:"M9 12l2 2l4 -4"}))}var KM=["size","color","stroke"];function p2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,KM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("rect",{x:4,y:4,width:16,height:16,rx:2}))}var GM=["size","color","stroke"];function qM(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,GM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-star",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"}))}var VM=["size","color","stroke"];function g2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,VM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-tag",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("circle",{cx:8.5,cy:8.5,r:1,fill:"currentColor"}),C.createElement("path",{d:"M4 7v3.859c0 .537 .213 1.052 .593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834 -4.834a2.025 2.025 0 0 0 0 -2.864l-8.117 -8.116a2.025 2.025 0 0 0 -1.431 -.593h-3.859a3 3 0 0 0 -3 3z"}))}var XM=["size","color","stroke"];function v2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,XM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-tags",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z"}),C.createElement("path",{d:"M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116"}),C.createElement("path",{d:"M6 9h-.01"}))}var YM=["size","color","stroke"];function m2(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,YM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-tool",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"}))}var QM=["size","color","stroke"];function Qd(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,QM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-trash",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:4,y1:7,x2:20,y2:7}),C.createElement("line",{x1:10,y1:11,x2:10,y2:17}),C.createElement("line",{x1:14,y1:11,x2:14,y2:17}),C.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),C.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}var JM=["size","color","stroke"];function Cc(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,JM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-writing",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),C.createElement("path",{d:"M16 7h4"}),C.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"}))}var ZM=["size","color","stroke"];function Rn(e){var t=e.size,r=t===void 0?24:t,n=e.color,i=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=Ke(e,ZM);return C.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-x",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),C.createElement("line",{x1:18,y1:6,x2:6,y2:18}),C.createElement("line",{x1:6,y1:6,x2:18,y2:18}))}const Do=({children:e})=>y.jsxs("div",{className:"error-message",children:[y.jsx(p_,{}),y.jsx("div",{className:"message",children:e})]});var eR=function(e){var t,r;function n(a){var l;return(l=e.call(this,a)||this).state={hasError:!1,error:null},l}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.getDerivedStateFromError=function(a){return{hasError:!0,error:a}};var i=n.prototype;return i.componentDidCatch=function(a,l){return this.props.onDidCatch(a,l)},i.render=function(){var a=this.state,l=this.props,u=l.render,d=l.children,p=l.renderError;return a.hasError?p?p({error:a.error}):null:u?u():d||null},n}(C.PureComponent),tR=function(e,t){switch(t.type){case"catch":return{didCatch:!0,error:t.error};case"reset":return{didCatch:!1,error:null};default:return e}};function Mh(e){var t=C.useReducer(tR,{didCatch:!1,error:null}),r=t[0],n=t[1],i=C.useRef(null);function a(){return d=function(p,g){n({type:"catch",error:p}),e&&e.onDidCatch&&e.onDidCatch(p,g)},function(p){return Ge.createElement(eR,{onDidCatch:d,children:p.children,render:p.render,renderError:p.renderError})};var d}var l,u=C.useCallback(function(){i.current=a(),n({type:"reset"})},[]);return{ErrorBoundary:(l=i.current,l!==null?l:(i.current=a(),i.current)),didCatch:r.didCatch,error:r.error,reset:u}}const rR=({children:e})=>{const{ErrorBoundary:t,didCatch:r,error:n}=Mh();return r?y.jsx("div",{className:"global-error-boundary",children:y.jsxs("div",{children:[y.jsxs(Do,{children:[y.jsx("p",{children:"Something went wrong and Twine can't continue."}),y.jsx("p",{children:"Please try restarting Twine or reloading the page."}),y.jsxs("p",{children:["If you see this message repeatedly, please"," ",y.jsx("a",{href:"https://twinery.org/2bugs",rel:"noreferrer",target:"_blank",children:"report a bug"}),"."]})]}),y.jsx("p",{children:"Details:"}),y.jsx("pre",{children:n.stack})]})}):y.jsx(t,{children:e})};function Ra(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Fn(e){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(e)}function nR(e,t){if(Fn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y2(e){var t=nR(e,"string");return Fn(t)==="symbol"?t:String(t)}function h0(e,t,r){return t=y2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y2(n.key),n)}}function Ei(e,t,r){return t&&Kx(e.prototype,t),r&&Kx(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gx(Object(r),!0).forEach(function(n){h0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Em={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},w2,iR=Ge.createContext();function oR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Em=qx(qx({},Em),e)}function aR(){return Em}var sR=function(){function e(){xi(this,e),this.usedNamespaces={}}return Ei(e,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function lR(e){w2=e}function uR(){return w2}var cR={type:"3rdParty",init:function(t){oR(t.options.react),lR(t)}};function fR(){if(console&&console.warn){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(e=console).warn.apply(e,r)}}var Vx={};function Sm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&Vx[t[0]]||(typeof t[0]=="string"&&(Vx[t[0]]=new Date),fR.apply(void 0,t))}function Xx(e,t,r){e.loadNamespaces(t,function(){if(e.isInitialized)r();else{var n=function i(){setTimeout(function(){e.off("initialized",i)},0),r()};e.on("initialized",n)}})}function dR(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t.languages||!t.languages.length)return Sm("i18n.languages were undefined or empty",t.languages),!0;var n=t.languages[0],i=t.options?t.options.fallbackLng:!1,a=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var l=function(d,p){var g=t.services.backendConnector.state["".concat(d,"|").concat(p)];return g===-1||g===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!l(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||l(n,e)&&(!i||l(a,e)))}function hR(e){if(Array.isArray(e))return e}function pR(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,l,u=[],d=!0,p=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(g){p=!0,i=g}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(p)throw i}}return u}}function Yx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gR(e,t){if(e){if(typeof e=="string")return Yx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yx(e,t)}}function vR(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mR(e,t){return hR(e)||pR(e,t)||gR(e,t)||vR()}function Qx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qx(Object(r),!0).forEach(function(n){h0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.i18n,n=C.useContext(iR)||{},i=n.i18n,a=n.defaultNS,l=r||i||uR();if(l&&!l.reportNamespaces&&(l.reportNamespaces=new sR),!l){Sm("You will need to pass in an i18next instance by using initReactI18next");var u=function(z){return Array.isArray(z)?z[z.length-1]:z},d=[u,{},!1];return d.t=u,d.i18n={},d.ready=!1,d}l.options.react&&l.options.react.wait!==void 0&&Sm("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var p=$g($g($g({},aR()),l.options.react),t),g=p.useSuspense,m=e||a||l.options&&l.options.defaultNS;m=typeof m=="string"?[m]:m||["translation"],l.reportNamespaces.addUsedNamespaces&&l.reportNamespaces.addUsedNamespaces(m);var w=(l.isInitialized||l.initializedStoreOnce)&&m.every(function($){return dR($,l,p)});function x(){return{t:l.getFixedT(null,p.nsMode==="fallback"?m:m[0])}}var O=C.useState(x()),I=mR(O,2),P=I[0],T=I[1],N=C.useRef(!0);C.useEffect(function(){var $=p.bindI18n,z=p.bindI18nStore;N.current=!0,!w&&!g&&Xx(l,m,function(){N.current&&T(x())});function H(){N.current&&T(x())}return $&&l&&l.on($,H),z&&l&&l.store.on(z,H),function(){N.current=!1,$&&l&&$.split(" ").forEach(function(q){return l.off(q,H)}),z&&l&&z.split(" ").forEach(function(q){return l.store.off(q,H)})}},[l,m.join()]);var R=C.useRef(!0);C.useEffect(function(){N.current&&!R.current&&T(x()),R.current=!1},[l]);var _=[P.t,l,w];if(_.t=P.t,_.i18n=l,_.ready=w,w||!w&&!g)return _;throw new Promise(function($){Xx(l,m,function(){$()})})}var Cm={exports:{}};(function(e,t){(function(r,n){var i="0.7.33",a="",l="?",u="function",d="undefined",p="object",g="string",m="major",w="model",x="name",O="type",I="vendor",P="version",T="architecture",N="console",R="mobile",_="tablet",$="smarttv",z="wearable",H="embedded",q=350,re="Amazon",oe="Apple",le="ASUS",we="BlackBerry",W="Browser",U="Chrome",F="Edge",be="Firefox",pe="Google",ce="Huawei",ue="LG",me="Microsoft",V="Motorola",ee="Opera",se="Samsung",X="Sharp",J="Sony",ne="Xiaomi",de="Zebra",xe="Facebook",Oe=function(he,ie){var Ne={};for(var nt in he)ie[nt]&&ie[nt].length%2===0?Ne[nt]=ie[nt].concat(he[nt]):Ne[nt]=he[nt];return Ne},$e=function(he){for(var ie={},Ne=0;Ne<he.length;Ne++)ie[he[Ne].toUpperCase()]=he[Ne];return ie},_e=function(he,ie){return typeof he===g?Ye(ie).indexOf(Ye(he))!==-1:!1},Ye=function(he){return he.toLowerCase()},ut=function(he){return typeof he===g?he.replace(/[^\d\.]/g,a).split(".")[0]:n},vt=function(he,ie){if(typeof he===g)return he=he.replace(/^\s\s*/,a),typeof ie===d?he:he.substring(0,q)},ze=function(he,ie){for(var Ne=0,nt,M,E,k,D,Y;Ne<ie.length&&!D;){var ae=ie[Ne],ge=ie[Ne+1];for(nt=M=0;nt<ae.length&&!D;)if(D=ae[nt++].exec(he),D)for(E=0;E<ge.length;E++)Y=D[++M],k=ge[E],typeof k===p&&k.length>0?k.length===2?typeof k[1]==u?this[k[0]]=k[1].call(this,Y):this[k[0]]=k[1]:k.length===3?typeof k[1]===u&&!(k[1].exec&&k[1].test)?this[k[0]]=Y?k[1].call(this,Y,k[2]):n:this[k[0]]=Y?Y.replace(k[1],k[2]):n:k.length===4&&(this[k[0]]=Y?k[3].call(this,Y.replace(k[1],k[2])):n):this[k]=Y||n;Ne+=2}},qe=function(he,ie){for(var Ne in ie)if(typeof ie[Ne]===p&&ie[Ne].length>0){for(var nt=0;nt<ie[Ne].length;nt++)if(_e(ie[Ne][nt],he))return Ne===l?n:Ne}else if(_e(ie[Ne],he))return Ne===l?n:Ne;return he},ct={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},at={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},st={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[P,[x,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[P,[x,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[x,P],[/opios[\/ ]+([\w\.]+)/i],[P,[x,ee+" Mini"]],[/\bopr\/([\w\.]+)/i],[P,[x,ee]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[x,P],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[P,[x,"UC"+W]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[P,[x,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[P,[x,"WeChat"]],[/konqueror\/([\w\.]+)/i],[P,[x,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[P,[x,"IE"]],[/yabrowser\/([\w\.]+)/i],[P,[x,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[x,/(.+)/,"$1 Secure "+W],P],[/\bfocus\/([\w\.]+)/i],[P,[x,be+" Focus"]],[/\bopt\/([\w\.]+)/i],[P,[x,ee+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[P,[x,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[P,[x,"Dolphin"]],[/coast\/([\w\.]+)/i],[P,[x,ee+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[P,[x,"MIUI "+W]],[/fxios\/([-\w\.]+)/i],[P,[x,be]],[/\bqihu|(qi?ho?o?|360)browser/i],[[x,"360 "+W]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[x,/(.+)/,"$1 "+W],P],[/(comodo_dragon)\/([\w\.]+)/i],[[x,/_/g," "],P],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[x,P],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[x],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[x,xe],P],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[x,P],[/\bgsa\/([\w\.]+) .*safari\//i],[P,[x,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[P,[x,U+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[x,U+" WebView"],P],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[P,[x,"Android "+W]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[x,P],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[P,[x,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[P,x],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[x,[P,qe,ct]],[/(webkit|khtml)\/([\w\.]+)/i],[x,P],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[x,"Netscape"],P],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[P,[x,be+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[x,P],[/(cobalt)\/([\w\.]+)/i],[x,[P,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[T,"amd64"]],[/(ia32(?=;))/i],[[T,Ye]],[/((?:i[346]|x)86)[;\)]/i],[[T,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[T,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[T,"armhf"]],[/windows (ce|mobile); ppc;/i],[[T,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[T,/ower/,a,Ye]],[/(sun4\w)[;\)]/i],[[T,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[T,Ye]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[I,se],[O,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[w,[I,se],[O,R]],[/\((ip(?:hone|od)[\w ]*);/i],[w,[I,oe],[O,R]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[I,oe],[O,_]],[/(macintosh);/i],[w,[I,oe]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[I,ce],[O,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[w,[I,ce],[O,R]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[w,/_/g," "],[I,ne],[O,R]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[I,ne],[O,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[I,"OPPO"],[O,R]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[I,"Vivo"],[O,R]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[w,[I,"Realme"],[O,R]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[I,V],[O,R]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[I,V],[O,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[I,ue],[O,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[I,ue],[O,R]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[I,"Lenovo"],[O,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[I,"Nokia"],[O,R]],[/(pixel c)\b/i],[w,[I,pe],[O,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[I,pe],[O,R]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[I,J],[O,R]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[I,J],[O,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[I,"OnePlus"],[O,R]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[I,re],[O,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[I,re],[O,R]],[/(playbook);[-\w\),; ]+(rim)/i],[w,I,[O,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[I,we],[O,R]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[I,le],[O,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[I,le],[O,R]],[/(nexus 9)/i],[w,[I,"HTC"],[O,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[I,[w,/_/g," "],[O,R]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[I,"Acer"],[O,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[I,"Meizu"],[O,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[I,X],[O,R]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[I,w,[O,R]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[I,w,[O,_]],[/(surface duo)/i],[w,[I,me],[O,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[I,"Fairphone"],[O,R]],[/(u304aa)/i],[w,[I,"AT&T"],[O,R]],[/\bsie-(\w*)/i],[w,[I,"Siemens"],[O,R]],[/\b(rct\w+) b/i],[w,[I,"RCA"],[O,_]],[/\b(venue[\d ]{2,7}) b/i],[w,[I,"Dell"],[O,_]],[/\b(q(?:mv|ta)\w+) b/i],[w,[I,"Verizon"],[O,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[w,[I,"Barnes & Noble"],[O,_]],[/\b(tm\d{3}\w+) b/i],[w,[I,"NuVision"],[O,_]],[/\b(k88) b/i],[w,[I,"ZTE"],[O,_]],[/\b(nx\d{3}j) b/i],[w,[I,"ZTE"],[O,R]],[/\b(gen\d{3}) b.+49h/i],[w,[I,"Swiss"],[O,R]],[/\b(zur\d{3}) b/i],[w,[I,"Swiss"],[O,_]],[/\b((zeki)?tb.*\b) b/i],[w,[I,"Zeki"],[O,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[I,"Dragon Touch"],w,[O,_]],[/\b(ns-?\w{0,9}) b/i],[w,[I,"Insignia"],[O,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[w,[I,"NextBook"],[O,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[I,"Voice"],w,[O,R]],[/\b(lvtel\-)?(v1[12]) b/i],[[I,"LvTel"],w,[O,R]],[/\b(ph-1) /i],[w,[I,"Essential"],[O,R]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[w,[I,"Envizen"],[O,_]],[/\b(trio[-\w\. ]+) b/i],[w,[I,"MachSpeed"],[O,_]],[/\btu_(1491) b/i],[w,[I,"Rotor"],[O,_]],[/(shield[\w ]+) b/i],[w,[I,"Nvidia"],[O,_]],[/(sprint) (\w+)/i],[I,w,[O,R]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[I,me],[O,R]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[I,de],[O,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[I,de],[O,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[I,w,[O,N]],[/droid.+; (shield) bui/i],[w,[I,"Nvidia"],[O,N]],[/(playstation [345portablevi]+)/i],[w,[I,J],[O,N]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[w,[I,me],[O,N]],[/smart-tv.+(samsung)/i],[I,[O,$]],[/hbbtv.+maple;(\d+)/i],[[w,/^/,"SmartTV"],[I,se],[O,$]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[I,ue],[O,$]],[/(apple) ?tv/i],[I,[w,oe+" TV"],[O,$]],[/crkey/i],[[w,U+"cast"],[I,pe],[O,$]],[/droid.+aft(\w)( bui|\))/i],[w,[I,re],[O,$]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[w,[I,X],[O,$]],[/(bravia[\w ]+)( bui|\))/i],[w,[I,J],[O,$]],[/(mitv-\w{5}) bui/i],[w,[I,ne],[O,$]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[I,vt],[w,vt],[O,$]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[O,$]],[/((pebble))app/i],[I,w,[O,z]],[/droid.+; (glass) \d/i],[w,[I,pe],[O,z]],[/droid.+; (wt63?0{2,3})\)/i],[w,[I,de],[O,z]],[/(quest( 2)?)/i],[w,[I,xe],[O,z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[I,[O,H]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[w,[O,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[O,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[O,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[O,R]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[I,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[P,[x,F+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[P,[x,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[x,P],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[P,x]],os:[[/microsoft (windows) (vista|xp)/i],[x,P],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[x,[P,qe,at]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[x,"Windows"],[P,qe,at]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[P,/_/g,"."],[x,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[x,"Mac OS"],[P,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[P,x],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[x,P],[/\(bb(10);/i],[P,[x,we]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[P,[x,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[P,[x,be+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[P,[x,"webOS"]],[/crkey\/([\d\.]+)/i],[P,[x,U+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[x,"Chromium OS"],P],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[x,P],[/(sunos) ?([\w\.\d]*)/i],[[x,"Solaris"],P],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[x,P]]},xt=function(he,ie){if(typeof he===p&&(ie=he,he=n),!(this instanceof xt))return new xt(he,ie).getResult();var Ne=he||(typeof r!==d&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:a),nt=ie?Oe(st,ie):st;return this.getBrowser=function(){var M={};return M[x]=n,M[P]=n,ze.call(M,Ne,nt.browser),M.major=ut(M.version),M},this.getCPU=function(){var M={};return M[T]=n,ze.call(M,Ne,nt.cpu),M},this.getDevice=function(){var M={};return M[I]=n,M[w]=n,M[O]=n,ze.call(M,Ne,nt.device),M},this.getEngine=function(){var M={};return M[x]=n,M[P]=n,ze.call(M,Ne,nt.engine),M},this.getOS=function(){var M={};return M[x]=n,M[P]=n,ze.call(M,Ne,nt.os),M},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ne},this.setUA=function(M){return Ne=typeof M===g&&M.length>q?vt(M,q):M,this},this.setUA(Ne),this};xt.VERSION=i,xt.BROWSER=$e([x,P,m]),xt.CPU=$e([T]),xt.DEVICE=$e([w,I,O,N,R,$,_,z,H]),xt.ENGINE=xt.OS=$e([x,P]),e.exports&&(t=e.exports=xt),t.UAParser=xt;var Qe=typeof r!==d&&(r.jQuery||r.Zepto);if(Qe&&!Qe.ua){var te=new xt;Qe.ua=te.getResult(),Qe.ua.get=function(){return te.getUA()},Qe.ua.set=function(he){te.setUA(he);var ie=te.getResult();for(var Ne in ie)Qe.ua[Ne]=ie[Ne]}}})(typeof window=="object"?window:dr)})(Cm,Cm.exports);var yR=Cm.exports;const wR=kt(yR);var b2={exports:{}};/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n=[],i=0;i<arguments.length;i++){var a=arguments[i];if(a){var l=typeof a;if(l==="string"||l==="number")n.push(a);else if(Array.isArray(a)&&a.length){var u=r.apply(null,a);u&&n.push(u)}else if(l==="object")for(var d in a)t.call(a,d)&&a[d]&&n.push(d)}}return n.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(b2);var x2=b2.exports;const Qt=kt(x2);const Ft=e=>{var t;return y.jsx("div",{className:Qt("button-bar","orientation-".concat((t=e.orientation)!=null?t:"horizontal")),children:e.children})};const bR=()=>y.jsx("div",{className:"button-bar-separator"});const zo=e=>{const{children:t,floating:r,highlighted:n}=e,i=Qt("card",{floating:r,highlighted:n});return y.jsx("div",{className:i,children:t})};const hr=({children:e})=>y.jsx("div",{className:"card-content",children:e});const qu=e=>{const{href:t,icon:r,label:n,target:i,variant:a}=e,l=Qt("icon-link","variant-".concat(a));return y.jsxs("a",{href:t,className:l,target:i!=null?i:"_blank",children:[y.jsx("span",{className:"icon",children:r}),n]})};const xR=e=>{const{t}=Ae(),r=new wR().getBrowser();if(r.name!=="Safari")return null;if(r.version){const a=parseInt(r.version.replace(/\..*/,""));if(Number.isFinite(a)&&a<13)return null}const n=window.navigator;if(n.standalone)return null;const i=n.standalone!==void 0;return y.jsx("div",{className:"safari-warning-card",children:y.jsxs(zo,{children:[y.jsxs(Do,{children:[y.jsx("p",{children:t("components.safariWarningCard.message")}),i&&y.jsx("p",{children:t("components.safariWarningCard.addToHomeScreen")}),y.jsx("p",{children:t("components.safariWarningCard.archiveAndUseAnotherBrowser")})]}),y.jsxs(Ft,{children:[y.jsx(qu,{href:"https://twinery.org/2ioslocalstorage",icon:y.jsx(xm,{}),label:t("components.safariWarningCard.learnMore"),variant:"primary"}),i&&y.jsx(qu,{href:"https://twinery.org/2ioshomescreen",icon:y.jsx(xm,{}),label:t("components.safariWarningCard.howToAddToHomeScreen")})]})]})})},Jx=()=>y.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"});const E2=()=>y.jsx("span",{className:"icon-loading",children:y.jsx(W_,{})}),ER=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),y.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),y.jsx("circle",{cx:"10",cy:"12",r:"0.5"}),y.jsx("circle",{cx:"14",cy:"12",r:"0.5"}),y.jsx("circle",{cx:"10",cy:"16",r:"0.5"}),y.jsx("circle",{cx:"14",cy:"16",r:"0.5"})]}),SR=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1200 1200",width:"1200",height:"1200",children:[y.jsxs("defs",{children:[y.jsxs("linearGradient",{id:"b",children:[y.jsx("stop",{offset:"0",stopColor:"#127aee"}),y.jsx("stop",{offset:"1",stopColor:"#117aef",stopOpacity:".251"})]}),y.jsxs("linearGradient",{id:"a",children:[y.jsx("stop",{offset:"0",stopColor:"#10f05e",stopOpacity:".251"}),y.jsx("stop",{offset:"1",stopColor:"#10f05e"})]}),y.jsx("linearGradient",{xlinkHref:"#a",id:"d",x1:"52",y1:"604.362",x2:"972",y2:"604.362",gradientUnits:"userSpaceOnUse"}),y.jsx("linearGradient",{xlinkHref:"#b",id:"c",x1:"256",y1:"0",x2:"231.987",y2:"725.548",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0 28.362)"})]}),y.jsx("path",{fill:"url(#c)",d:"M64 28.362h384v1024H64z",transform:"translate(88 59.638)"}),y.jsx("path",{d:"M64 860.362c0-704 896-704 896-704v384s-512 0-512 320v192H64z",fill:"url(#d)",transform:"translate(88 59.638)"})]});const S2=()=>y.jsx("div",{className:"loading-curtain",children:y.jsx(E2,{})});function tr(e,t){return{type:"update",name:e,value:t}}const Gs=()=>({appTheme:"system",codeEditorFontFamily:"var(--font-monospaced)",codeEditorFontScale:1,dialogWidth:600,disabledStoryFormatEditorExtensions:[],donateShown:!1,editorCursorBlinks:!0,firstRunTime:new Date().getTime(),lastUpdateSeen:"",lastUpdateCheckTime:new Date().getTime(),locale:window.navigator.userLanguage||window.navigator.language||window.navigator.browserLanguage||window.navigator.systemLanguage||"en-us",passageEditorFontFamily:"var(--font-system)",passageEditorFontScale:1,proofingFormat:{name:"Paperthin",version:"1.0.0"},storyFormat:{name:"Harlowe",version:"3.3.9"},storyFormatListFilter:"current",storyListSort:"name",storyListTagFilter:[],storyTagColors:{},welcomeSeen:!1});function p0(e,t,r){return e.disabledStoryFormatEditorExtensions.some(n=>n.name===t&&n.version===r)}async function CR(){const{twineElectron:e}=window,t={},r=Object.keys(Gs());if(!e)throw new Error("Electron bridge is not present on window.");const n=await e.loadPrefs();if(n&&typeof n=="object")for(const i in n)r.includes(i)&&(t[i]=n[i]);return t}function C2(e,t){const{twineElectron:r}=window;if(!r)throw new Error("Electron bridge is not present on window.");r.saveJson(e,t)}function kR(e,t){(t.type==="repair"||t.type==="update")&&C2("prefs.json",e)}function TR(e){return e}var Rh=TR;function OR(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var PR=OR,LR=PR,Zx=Math.max;function NR(e,t,r){return t=Zx(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Zx(n.length-t,0),l=Array(a);++i<a;)l[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=r(l),LR(e,this,u)}}var AR=NR;function jR(e){return function(){return e}}var IR=jR,_R=typeof dr=="object"&&dr&&dr.Object===Object&&dr,k2=_R,MR=k2,RR=typeof self=="object"&&self&&self.Object===Object&&self,$R=MR||RR||Function("return this")(),Si=$R,FR=Si,DR=FR.Symbol,kc=DR,eE=kc,T2=Object.prototype,zR=T2.hasOwnProperty,BR=T2.toString,ru=eE?eE.toStringTag:void 0;function HR(e){var t=zR.call(e,ru),r=e[ru];try{e[ru]=void 0;var n=!0}catch{}var i=BR.call(e);return n&&(t?e[ru]=r:delete e[ru]),i}var UR=HR,WR=Object.prototype,KR=WR.toString;function GR(e){return KR.call(e)}var qR=GR,tE=kc,VR=UR,XR=qR,YR="[object Null]",QR="[object Undefined]",rE=tE?tE.toStringTag:void 0;function JR(e){return e==null?e===void 0?QR:YR:rE&&rE in Object(e)?VR(e):XR(e)}var Tc=JR;function ZR(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $a=ZR,e$=Tc,t$=$a,r$="[object AsyncFunction]",n$="[object Function]",i$="[object GeneratorFunction]",o$="[object Proxy]";function a$(e){if(!t$(e))return!1;var t=e$(e);return t==n$||t==i$||t==r$||t==o$}var O2=a$,s$=Si,l$=s$["__core-js_shared__"],u$=l$,Fg=u$,nE=function(){var e=/[^.]+$/.exec(Fg&&Fg.keys&&Fg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function c$(e){return!!nE&&nE in e}var f$=c$,d$=Function.prototype,h$=d$.toString;function p$(e){if(e!=null){try{return h$.call(e)}catch{}try{return e+""}catch{}}return""}var P2=p$,g$=O2,v$=f$,m$=$a,y$=P2,w$=/[\\^$.*+?()[\]{}|]/g,b$=/^\[object .+?Constructor\]$/,x$=Function.prototype,E$=Object.prototype,S$=x$.toString,C$=E$.hasOwnProperty,k$=RegExp("^"+S$.call(C$).replace(w$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T$(e){if(!m$(e)||v$(e))return!1;var t=g$(e)?k$:b$;return t.test(y$(e))}var O$=T$;function P$(e,t){return e==null?void 0:e[t]}var L$=P$,N$=O$,A$=L$;function j$(e,t){var r=A$(e,t);return N$(r)?r:void 0}var Fa=j$,I$=Fa,_$=function(){try{var e=I$(Object,"defineProperty");return e({},"",{}),e}catch{}}(),M$=_$,R$=IR,iE=M$,$$=Rh,F$=iE?function(e,t){return iE(e,"toString",{configurable:!0,enumerable:!1,value:R$(t),writable:!0})}:$$,D$=F$,z$=800,B$=16,H$=Date.now;function U$(e){var t=0,r=0;return function(){var n=H$(),i=B$-(n-r);if(r=n,i>0){if(++t>=z$)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var W$=U$,K$=D$,G$=W$,q$=G$(K$),V$=q$,X$=Rh,Y$=AR,Q$=V$;function J$(e,t){return Q$(Y$(e,t,X$),e+"")}var L2=J$;function Z$(e,t){return e===t||e!==e&&t!==t}var $h=Z$,eF=9007199254740991;function tF(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=eF}var g0=tF,rF=O2,nF=g0;function iF(e){return e!=null&&nF(e.length)&&!rF(e)}var Oc=iF,oF=9007199254740991,aF=/^(?:0|[1-9]\d*)$/;function sF(e,t){var r=typeof e;return t=t==null?oF:t,!!t&&(r=="number"||r!="symbol"&&aF.test(e))&&e>-1&&e%1==0&&e<t}var v0=sF,lF=$h,uF=Oc,cF=v0,fF=$a;function dF(e,t,r){if(!fF(r))return!1;var n=typeof t;return(n=="number"?uF(r)&&cF(t,r.length):n=="string"&&t in r)?lF(r[t],e):!1}var N2=dF;function hF(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var pF=hF;function gF(e){return e!=null&&typeof e=="object"}var Pc=gF,vF=Tc,mF=Pc,yF="[object Arguments]";function wF(e){return mF(e)&&vF(e)==yF}var bF=wF,oE=bF,xF=Pc,A2=Object.prototype,EF=A2.hasOwnProperty,SF=A2.propertyIsEnumerable,CF=oE(function(){return arguments}())?oE:function(e){return xF(e)&&EF.call(e,"callee")&&!SF.call(e,"callee")},m0=CF,kF=Array.isArray,Wn=kF,Jd={exports:{}};function TF(){return!1}var OF=TF;Jd.exports;(function(e,t){var r=Si,n=OF,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,l=a&&a.exports===i,u=l?r.Buffer:void 0,d=u?u.isBuffer:void 0,p=d||n;e.exports=p})(Jd,Jd.exports);var j2=Jd.exports,PF=Tc,LF=g0,NF=Pc,AF="[object Arguments]",jF="[object Array]",IF="[object Boolean]",_F="[object Date]",MF="[object Error]",RF="[object Function]",$F="[object Map]",FF="[object Number]",DF="[object Object]",zF="[object RegExp]",BF="[object Set]",HF="[object String]",UF="[object WeakMap]",WF="[object ArrayBuffer]",KF="[object DataView]",GF="[object Float32Array]",qF="[object Float64Array]",VF="[object Int8Array]",XF="[object Int16Array]",YF="[object Int32Array]",QF="[object Uint8Array]",JF="[object Uint8ClampedArray]",ZF="[object Uint16Array]",eD="[object Uint32Array]",Pt={};Pt[GF]=Pt[qF]=Pt[VF]=Pt[XF]=Pt[YF]=Pt[QF]=Pt[JF]=Pt[ZF]=Pt[eD]=!0;Pt[AF]=Pt[jF]=Pt[WF]=Pt[IF]=Pt[KF]=Pt[_F]=Pt[MF]=Pt[RF]=Pt[$F]=Pt[FF]=Pt[DF]=Pt[zF]=Pt[BF]=Pt[HF]=Pt[UF]=!1;function tD(e){return NF(e)&&LF(e.length)&&!!Pt[PF(e)]}var rD=tD;function nD(e){return function(t){return e(t)}}var I2=nD,Zd={exports:{}};Zd.exports;(function(e,t){var r=k2,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,l=a&&r.process,u=function(){try{var d=i&&i.require&&i.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();e.exports=u})(Zd,Zd.exports);var iD=Zd.exports,oD=rD,aD=I2,aE=iD,sE=aE&&aE.isTypedArray,sD=sE?aD(sE):oD,_2=sD,lD=pF,uD=m0,cD=Wn,fD=j2,dD=v0,hD=_2,pD=Object.prototype,gD=pD.hasOwnProperty;function vD(e,t){var r=cD(e),n=!r&&uD(e),i=!r&&!n&&fD(e),a=!r&&!n&&!i&&hD(e),l=r||n||i||a,u=l?lD(e.length,String):[],d=u.length;for(var p in e)(t||gD.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||a&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||dD(p,d)))&&u.push(p);return u}var M2=vD,mD=Object.prototype;function yD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||mD;return e===r}var R2=yD;function wD(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var bD=wD,xD=$a,ED=R2,SD=bD,CD=Object.prototype,kD=CD.hasOwnProperty;function TD(e){if(!xD(e))return SD(e);var t=ED(e),r=[];for(var n in e)n=="constructor"&&(t||!kD.call(e,n))||r.push(n);return r}var OD=TD,PD=M2,LD=OD,ND=Oc;function AD(e){return ND(e)?PD(e,!0):LD(e)}var jD=AD,ID=L2,_D=$h,MD=N2,RD=jD,$2=Object.prototype,$D=$2.hasOwnProperty,FD=ID(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&MD(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],l=RD(a),u=-1,d=l.length;++u<d;){var p=l[u],g=e[p];(g===void 0||_D(g,$2[p])&&!$D.call(e,p))&&(e[p]=a[p])}return e}),DD=FD;const lE=kt(DD);var zD=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t};const Ct=kt(zD);function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&n.push.apply(n,Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.forEach(function(i){h0(e,i,r[i])})}return e}function Io(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vu(e,t){if(t&&(Fn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Io(e)}function qs(e){return qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qs(e)}function eh(e,t){return eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},eh(e,t)}function Fh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eh(e,t)}var BD={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,r){console&&console[t]&&console[t].apply(console,r)}},HD=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xi(this,e),this.init(t,r)}return Ei(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||BD,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,a){return a&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new e(this.logger,Cr({},{prefix:"".concat(this.prefix,":").concat(r,":")},this.options))}}]),e}(),Gi=new HD,_o=function(){function e(){xi(this,e),this.observers={}}return Ei(e,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(a){i.observers[a]=i.observers[a]||[],i.observers[a].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(this.observers[r]){var l=[].concat(this.observers[r]);l.forEach(function(d){d.apply(void 0,i)})}if(this.observers["*"]){var u=[].concat(this.observers["*"]);u.forEach(function(d){d.apply(d,[r].concat(i))})}}}]),e}();function nu(){var e,t,r=new Promise(function(n,i){e=n,t=i});return r.resolve=e,r.reject=t,r}function uE(e){return e==null?"":""+e}function UD(e,t,r){e.forEach(function(n){t[n]&&(r[n]=t[n])})}function y0(e,t,r){function n(u){return u&&u.indexOf("###")>-1?u.replace(/###/g,"."):u}function i(){return!e||typeof e=="string"}for(var a=typeof t!="string"?[].concat(t):t.split(".");a.length>1;){if(i())return{};var l=n(a.shift());!e[l]&&r&&(e[l]=new r),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={}}return i()?{}:{obj:e,k:n(a.shift())}}function cE(e,t,r){var n=y0(e,t,Object),i=n.obj,a=n.k;i[a]=r}function WD(e,t,r,n){var i=y0(e,t,Object),a=i.obj,l=i.k;a[l]=a[l]||[],n&&(a[l]=a[l].concat(r)),n||a[l].push(r)}function th(e,t){var r=y0(e,t),n=r.obj,i=r.k;if(n)return n[i]}function fE(e,t,r){var n=th(e,r);return n!==void 0?n:th(t,r)}function F2(e,t,r){for(var n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?typeof e[n]=="string"||e[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?r&&(e[n]=t[n]):F2(e[n],t[n],r):e[n]=t[n]);return e}function ds(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var KD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function GD(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return KD[t]}):e}var Dh=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,qD=function(e){Fh(t,e);function t(r){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return xi(this,t),n=Vu(this,qs(t).call(this)),Dh&&_o.call(Io(n)),n.data=r||{},n.options=i,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n}return Ei(t,[{key:"addNamespaces",value:function(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}},{key:"removeNamespaces",value:function(n){var i=this.options.ns.indexOf(n);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(n,i,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,d=[n,i];return a&&typeof a!="string"&&(d=d.concat(a)),a&&typeof a=="string"&&(d=d.concat(u?a.split(u):a)),n.indexOf(".")>-1&&(d=n.split(".")),th(this.data,d)}},{key:"addResource",value:function(n,i,a,l){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},d=this.options.keySeparator;d===void 0&&(d=".");var p=[n,i];a&&(p=p.concat(d?a.split(d):a)),n.indexOf(".")>-1&&(p=n.split("."),l=i,i=p[1]),this.addNamespaces(i),cE(this.data,p,l),u.silent||this.emit("added",n,i,a,l)}},{key:"addResources",value:function(n,i,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in a)(typeof a[u]=="string"||Object.prototype.toString.apply(a[u])==="[object Array]")&&this.addResource(n,i,u,a[u],{silent:!0});l.silent||this.emit("added",n,i,a)}},{key:"addResourceBundle",value:function(n,i,a,l,u){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},p=[n,i];n.indexOf(".")>-1&&(p=n.split("."),l=a,a=i,i=p[1]),this.addNamespaces(i);var g=th(this.data,p)||{};l?F2(g,a,u):g=Cr({},g,a),cE(this.data,p,g),d.silent||this.emit("added",n,i,a)}},{key:"removeResourceBundle",value:function(n,i){this.hasResourceBundle(n,i)&&delete this.data[n][i],this.removeNamespaces(i),this.emit("removed",n,i)}},{key:"hasResourceBundle",value:function(n,i){return this.getResource(n,i)!==void 0}},{key:"getResourceBundle",value:function(n,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Cr({},{},this.getResource(n,i)):this.getResource(n,i)}},{key:"getDataByLanguage",value:function(n){return this.data[n]}},{key:"toJSON",value:function(){return this.data}}]),t}(_o),D2={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,r,n,i,a){var l=this;return t.forEach(function(u){l.processors[u]&&(r=l.processors[u].process(r,n,i,a))}),r}},dE={},hE=function(e){Fh(t,e);function t(r){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xi(this,t),n=Vu(this,qs(t).call(this)),Dh&&_o.call(Io(n)),UD(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,Io(n)),n.options=i,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n.logger=Gi.create("translator"),n}return Ei(t,[{key:"changeLanguage",value:function(n){n&&(this.language=n)}},{key:"exists",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},a=this.resolve(n,i);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(n,i){var a=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,u=i.ns||this.options.defaultNS;if(a&&n.indexOf(a)>-1){var d=n.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:n,namespaces:u};var p=n.split(a);(a!==l||a===l&&this.options.ns.indexOf(p[0])>-1)&&(u=p.shift()),n=p.join(l)}return typeof u=="string"&&(u=[u]),{key:n,namespaces:u}}},{key:"translate",value:function(n,i,a){var l=this;if(Fn(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),i||(i={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);var u=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,d=this.extractFromKey(n[n.length-1],i),p=d.key,g=d.namespaces,m=g[g.length-1],w=i.lng||this.language,x=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(w&&w.toLowerCase()==="cimode"){if(x){var O=i.nsSeparator||this.options.nsSeparator;return m+O+p}return p}var I=this.resolve(n,i),P=I&&I.res,T=I&&I.usedKey||p,N=I&&I.exactUsedKey||p,R=Object.prototype.toString.apply(P),_=["[object Number]","[object Function]","[object RegExp]"],$=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,z=!this.i18nFormat||this.i18nFormat.handleAsObject,H=typeof P!="string"&&typeof P!="boolean"&&typeof P!="number";if(z&&P&&H&&_.indexOf(R)<0&&!(typeof $=="string"&&R==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,P,i):"key '".concat(p," (").concat(this.language,")' returned an object instead of string.");if(u){var q=R==="[object Array]",re=q?[]:{},oe=q?N:T;for(var le in P)if(Object.prototype.hasOwnProperty.call(P,le)){var we="".concat(oe).concat(u).concat(le);re[le]=this.translate(we,Cr({},i,{joinArrays:!1,ns:g})),re[le]===we&&(re[le]=P[le])}P=re}}else if(z&&typeof $=="string"&&R==="[object Array]")P=P.join($),P&&(P=this.extendTranslation(P,n,i,a));else{var W=!1,U=!1,F=i.count!==void 0&&typeof i.count!="string",be=t.hasDefaultValue(i),pe=F?this.pluralResolver.getSuffix(w,i.count):"",ce=i["defaultValue".concat(pe)]||i.defaultValue;!this.isValidLookup(P)&&be&&(W=!0,P=ce),this.isValidLookup(P)||(U=!0,P=p);var ue=be&&ce!==P&&this.options.updateMissing;if(U||W||ue){if(this.logger.log(ue?"updateKey":"missingKey",w,m,p,ue?ce:P),u){var me=this.resolve(p,Cr({},i,{keySeparator:!1}));me&&me.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var V=[],ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ee&&ee[0])for(var se=0;se<ee.length;se++)V.push(ee[se]);else this.options.saveMissingTo==="all"?V=this.languageUtils.toResolveHierarchy(i.lng||this.language):V.push(i.lng||this.language);var X=function(ne,de,xe){l.options.missingKeyHandler?l.options.missingKeyHandler(ne,m,de,ue?xe:P,ue,i):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(ne,m,de,ue?xe:P,ue,i),l.emit("missingKey",ne,m,de,P)};this.options.saveMissing&&(this.options.saveMissingPlurals&&F?V.forEach(function(J){l.pluralResolver.getSuffixes(J).forEach(function(ne){X([J],p+ne,i["defaultValue".concat(ne)]||ce)})}):X(V,p,ce))}P=this.extendTranslation(P,n,i,I,a),U&&P===p&&this.options.appendNamespaceToMissingKey&&(P="".concat(m,":").concat(p)),U&&this.options.parseMissingKeyHandler&&(P=this.options.parseMissingKeyHandler(P))}return P}},{key:"extendTranslation",value:function(n,i,a,l,u){var d=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,a,l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(Cr({},a,{interpolation:Cr({},this.options.interpolation,a.interpolation)}));var p=a.interpolation&&a.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,g;if(p){var m=n.match(this.interpolator.nestingRegexp);g=m&&m.length}var w=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(w=Cr({},this.options.interpolation.defaultVariables,w)),n=this.interpolator.interpolate(n,w,a.lng||this.language,a),p){var x=n.match(this.interpolator.nestingRegexp),O=x&&x.length;g<O&&(a.nest=!1)}a.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var T=arguments.length,N=new Array(T),R=0;R<T;R++)N[R]=arguments[R];return u&&u[0]===N[0]&&!a.context?(d.logger.warn("It seems you are nesting recursively key: ".concat(N[0]," in key: ").concat(i[0])),null):d.translate.apply(d,N.concat([i]))},a)),a.interpolation&&this.interpolator.reset()}var I=a.postProcess||this.options.postProcess,P=typeof I=="string"?[I]:I;return n!=null&&P&&P.length&&a.applyPostProcessor!==!1&&(n=D2.handle(P,n,i,this.options&&this.options.postProcessPassResolved?Cr({i18nResolved:l},a):a,this)),n}},{key:"resolve",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,u,d,p,g;return typeof n=="string"&&(n=[n]),n.forEach(function(m){if(!i.isValidLookup(l)){var w=i.extractFromKey(m,a),x=w.key;u=x;var O=w.namespaces;i.options.fallbackNS&&(O=O.concat(i.options.fallbackNS));var I=a.count!==void 0&&typeof a.count!="string",P=a.context!==void 0&&typeof a.context=="string"&&a.context!=="",T=a.lngs?a.lngs:i.languageUtils.toResolveHierarchy(a.lng||i.language,a.fallbackLng);O.forEach(function(N){i.isValidLookup(l)||(g=N,!dE["".concat(T[0],"-").concat(N)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(g)&&(dE["".concat(T[0],"-").concat(N)]=!0,i.logger.warn('key "'.concat(u,'" for languages "').concat(T.join(", "),'" won\'t get resolved as namespace "').concat(g,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(function(R){if(!i.isValidLookup(l)){p=R;var _=x,$=[_];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys($,x,R,N,a);else{var z;I&&(z=i.pluralResolver.getSuffix(R,a.count)),I&&P&&$.push(_+z),P&&$.push(_+="".concat(i.options.contextSeparator).concat(a.context)),I&&$.push(_+=z)}for(var H;H=$.pop();)i.isValidLookup(l)||(d=H,l=i.getResource(R,N,H,a))}}))})}}),{res:l,usedKey:u,exactUsedKey:d,usedLng:p,usedNS:g}}},{key:"isValidLookup",value:function(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}},{key:"getResource",value:function(n,i,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,i,a,l):this.resourceStore.getResource(n,i,a,l)}}],[{key:"hasDefaultValue",value:function(n){var i="defaultValue";for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&i===a.substring(0,i.length)&&n[a]!==void 0)return!0;return!1}}]),t}(_o);function Dg(e){return e.charAt(0).toUpperCase()+e.slice(1)}var VD=function(){function e(t){xi(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gi.create("languageUtils")}return Ei(e,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(a){return a.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=Dg(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=Dg(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=Dg(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isWhitelisted",value:function(r){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(r)}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(a){if(!i){var l=n.formatLanguageCode(a);(!n.options.supportedLngs||n.isSupportedCode(l))&&(i=l)}}),!i&&this.options.supportedLngs&&r.forEach(function(a){if(!i){var l=n.getLanguagePartFromCode(a);if(n.isSupportedCode(l))return i=l;i=n.options.supportedLngs.find(function(u){if(u.indexOf(l)===0)return u})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,a=this.getFallbackCodes(n||this.options.fallbackLng||[],r),l=[],u=function(p){p&&(i.isSupportedCode(p)?l.push(p):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(p)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(r))):typeof r=="string"&&u(this.formatLanguageCode(r)),a.forEach(function(d){l.indexOf(d)<0&&u(i.formatLanguageCode(d))}),l}}]),e}(),XD=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],YD={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};function QD(){var e={};return XD.forEach(function(t){t.lngs.forEach(function(r){e[r]={numbers:t.nr,plurals:YD[t.fc]}})}),e}var JD=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xi(this,e),this.languageUtils=t,this.options=r,this.logger=Gi.create("pluralResolver"),this.rules=QD()}return Ei(e,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=this.getRule(r);return n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){return this.getSuffixes(r).map(function(i){return n+i})}},{key:"getSuffixes",value:function(r){var n=this,i=this.getRule(r);return i?i.numbers.map(function(a){return n.getSuffix(r,a)}):[]}},{key:"getSuffix",value:function(r,n){var i=this,a=this.getRule(r);if(a){var l=a.noAbs?a.plurals(n):a.plurals(Math.abs(n)),u=a.numbers[l];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(u===2?u="plural":u===1&&(u=""));var d=function(){return i.options.prepend&&u.toString()?i.options.prepend+u.toString():u.toString()};return this.options.compatibilityJSON==="v1"?u===1?"":typeof u=="number"?"_plural_".concat(u.toString()):d():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?d():this.options.prepend&&l.toString()?this.options.prepend+l.toString():l.toString()}return this.logger.warn("no plural rule found for: ".concat(r)),""}}]),e}(),ZD=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xi(this,e),this.logger=Gi.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(r){return r},this.init(t)}return Ei(e,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:GD,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?ds(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?ds(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?ds(n.nestingPrefix):n.nestingPrefixEscaped||ds("$t("),this.nestingSuffix=n.nestingSuffix?ds(n.nestingSuffix):n.nestingSuffixEscaped||ds(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,a){var l=this,u,d,p,g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function m(P){return P.replace(/\$/g,"$$$$")}var w=function(T){if(T.indexOf(l.formatSeparator)<0){var N=fE(n,g,T);return l.alwaysFormat?l.format(N,void 0,i):N}var R=T.split(l.formatSeparator),_=R.shift().trim(),$=R.join(l.formatSeparator).trim();return l.format(fE(n,g,_),$,i,a)};this.resetRegExp();var x=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,O=a&&a.interpolation&&a.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,I=[{regex:this.regexpUnescape,safeValue:function(T){return m(T)}},{regex:this.regexp,safeValue:function(T){return l.escapeValue?m(l.escape(T)):m(T)}}];return I.forEach(function(P){for(p=0;u=P.regex.exec(r);){if(d=w(u[1].trim()),d===void 0)if(typeof x=="function"){var T=x(r,u,a);d=typeof T=="string"?T:""}else if(O){d=u[0];continue}else l.logger.warn("missed to pass in variable ".concat(u[1]," for interpolating ").concat(r)),d="";else typeof d!="string"&&!l.useRawValueToEscape&&(d=uE(d));if(r=r.replace(u[0],P.safeValue(d)),P.regex.lastIndex=0,p++,p>=l.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l,u,d=Cr({},a);d.applyPostProcessor=!1,delete d.defaultValue;function p(x,O){var I=this.nestingOptionsSeparator;if(x.indexOf(I)<0)return x;var P=x.split(new RegExp("".concat(I,"[ ]*{"))),T="{".concat(P[1]);x=P[0],T=this.interpolate(T,d),T=T.replace(/'/g,'"');try{d=JSON.parse(T),O&&(d=Cr({},O,d))}catch(N){return this.logger.warn("failed parsing options string in nesting for key ".concat(x),N),"".concat(x).concat(I).concat(T)}return delete d.defaultValue,x}for(;l=this.nestingRegexp.exec(r);){var g=[],m=!1;if(l[0].includes(this.formatSeparator)&&!/{.*}/.test(l[1])){var w=l[1].split(this.formatSeparator).map(function(x){return x.trim()});l[1]=w.shift(),g=w,m=!0}if(u=n(p.call(this,l[1].trim(),d),d),u&&l[0]===r&&typeof u!="string")return u;typeof u!="string"&&(u=uE(u)),u||(this.logger.warn("missed to resolve ".concat(l[1]," for nesting ").concat(r)),u=""),m&&(u=g.reduce(function(x,O){return i.format(x,O,a.lng,a)},u.trim())),r=r.replace(l[0],u),this.regexp.lastIndex=0}return r}}]),e}();function e3(e,t){for(var r=e.indexOf(t);r!==-1;)e.splice(r,1),r=e.indexOf(t)}var t3=function(e){Fh(t,e);function t(r,n,i){var a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return xi(this,t),a=Vu(this,qs(t).call(this)),Dh&&_o.call(Io(a)),a.backend=r,a.store=n,a.services=i,a.languageUtils=i.languageUtils,a.options=l,a.logger=Gi.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(i,l.backend,l),a}return Ei(t,[{key:"queueLoad",value:function(n,i,a,l){var u=this,d=[],p=[],g=[],m=[];return n.forEach(function(w){var x=!0;i.forEach(function(O){var I="".concat(w,"|").concat(O);!a.reload&&u.store.hasResourceBundle(w,O)?u.state[I]=2:u.state[I]<0||(u.state[I]===1?p.indexOf(I)<0&&p.push(I):(u.state[I]=1,x=!1,p.indexOf(I)<0&&p.push(I),d.indexOf(I)<0&&d.push(I),m.indexOf(O)<0&&m.push(O)))}),x||g.push(w)}),(d.length||p.length)&&this.queue.push({pending:p,loaded:{},errors:[],callback:l}),{toLoad:d,pending:p,toLoadLanguages:g,toLoadNamespaces:m}}},{key:"loaded",value:function(n,i,a){var l=n.split("|"),u=l[0],d=l[1];i&&this.emit("failedLoading",u,d,i),a&&this.store.addResourceBundle(u,d,a),this.state[n]=i?-1:2;var p={};this.queue.forEach(function(g){WD(g.loaded,[u],d),e3(g.pending,n),i&&g.errors.push(i),g.pending.length===0&&!g.done&&(Object.keys(g.loaded).forEach(function(m){p[m]||(p[m]=[]),g.loaded[m].length&&g.loaded[m].forEach(function(w){p[m].indexOf(w)<0&&p[m].push(w)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(function(g){return!g.done})}},{key:"read",value:function(n,i,a){var l=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,p=arguments.length>5?arguments[5]:void 0;return n.length?this.backend[a](n,i,function(g,m){if(g&&m&&u<5){setTimeout(function(){l.read.call(l,n,i,a,u+1,d*2,p)},d);return}p(g,m)}):p(null,{})}},{key:"prepareLoading",value:function(n,i){var a=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof i=="string"&&(i=[i]);var d=this.queueLoad(n,i,l,u);if(!d.toLoad.length)return d.pending.length||u(),null;d.toLoad.forEach(function(p){a.loadOne(p)})}},{key:"load",value:function(n,i,a){this.prepareLoading(n,i,{},a)}},{key:"reload",value:function(n,i,a){this.prepareLoading(n,i,{reload:!0},a)}},{key:"loadOne",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=n.split("|"),u=l[0],d=l[1];this.read(u,d,"read",void 0,void 0,function(p,g){p&&i.logger.warn("".concat(a,"loading namespace ").concat(d," for language ").concat(u," failed"),p),!p&&g&&i.logger.log("".concat(a,"loaded namespace ").concat(d," for language ").concat(u),g),i.loaded(n,p,g)})}},{key:"saveMissing",value:function(n,i,a,l,u){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}a==null||a===""||(this.backend&&this.backend.create&&this.backend.create(n,i,a,l,null,Cr({},d,{isUpdate:u})),!(!n||!n[0])&&this.store.addResource(n[0],i,a,l))}}]),t}(_o);function r3(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var r={};if(Fn(t[1])==="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),Fn(t[2])==="object"||Fn(t[3])==="object"){var n=t[3]||t[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(t,r,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function pE(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Af(){}var n3=function(e){Fh(t,e);function t(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(xi(this,t),r=Vu(this,qs(t).call(this)),Dh&&_o.call(Io(r)),r.options=pE(n),r.services={},r.logger=Gi,r.modules={external:[]},i&&!r.isInitialized&&!n.isClone){if(!r.options.initImmediate)return r.init(n,i),Vu(r,Io(r));setTimeout(function(){r.init(n,i)},0)}return r}return Ei(t,[{key:"init",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(a=i,i={}),i.whitelist&&!i.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),i.nonExplicitWhitelist&&!i.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=Cr({},r3(),this.options,pE(i)),this.format=this.options.interpolation.format,a||(a=Af);function l(O){return O?typeof O=="function"?new O:O:null}if(!this.options.isClone){this.modules.logger?Gi.init(l(this.modules.logger),this.options):Gi.init(null,this.options);var u=new VD(this.options);this.store=new qD(this.options.resources,this.options);var d=this.services;d.logger=Gi,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new JD(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d.interpolator=new ZD(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new t3(l(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(O){for(var I=arguments.length,P=new Array(I>1?I-1:0),T=1;T<I;T++)P[T-1]=arguments[T];n.emit.apply(n,[O].concat(P))}),this.modules.languageDetector&&(d.languageDetector=l(this.modules.languageDetector),d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=l(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new hE(this.services,this.options),this.translator.on("*",function(O){for(var I=arguments.length,P=new Array(I>1?I-1:0),T=1;T<I;T++)P[T-1]=arguments[T];n.emit.apply(n,[O].concat(P))}),this.modules.external.forEach(function(O){O.init&&O.init(n)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var g=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];g.forEach(function(O){n[O]=function(){var I;return(I=n.store)[O].apply(I,arguments)}});var m=["addResource","addResources","addResourceBundle","removeResourceBundle"];m.forEach(function(O){n[O]=function(){var I;return(I=n.store)[O].apply(I,arguments),n}});var w=nu(),x=function(){var I=function(T,N){n.isInitialized&&n.logger.warn("init: i18next is already initialized. You should call init just once!"),n.isInitialized=!0,n.options.isClone||n.logger.log("initialized",n.options),n.emit("initialized",n.options),w.resolve(N),a(T,N)};if(n.languages&&n.options.compatibilityAPI!=="v1"&&!n.isInitialized)return I(null,n.t.bind(n));n.changeLanguage(n.options.lng,I)};return this.options.resources||!this.options.initImmediate?x():setTimeout(x,0),w}},{key:"loadResources",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Af,l=a,u=typeof n=="string"?n:this.language;if(typeof n=="function"&&(l=n),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return l();var d=[],p=function(w){if(w){var x=i.services.languageUtils.toResolveHierarchy(w);x.forEach(function(O){d.indexOf(O)<0&&d.push(O)})}};if(u)p(u);else{var g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.forEach(function(m){return p(m)})}this.options.preload&&this.options.preload.forEach(function(m){return p(m)}),this.services.backendConnector.load(d,this.options.ns,l)}else l(null)}},{key:"reloadResources",value:function(n,i,a){var l=nu();return n||(n=this.languages),i||(i=this.options.ns),a||(a=Af),this.services.backendConnector.reload(n,i,function(u){l.resolve(),a(u)}),l}},{key:"use",value:function(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&D2.addPostProcessor(n),n.type==="3rdParty"&&this.modules.external.push(n),this}},{key:"changeLanguage",value:function(n,i){var a=this;this.isLanguageChangingTo=n;var l=nu();this.emit("languageChanging",n);var u=function(g,m){m?(a.language=m,a.languages=a.services.languageUtils.toResolveHierarchy(m),a.translator.changeLanguage(m),a.isLanguageChangingTo=void 0,a.emit("languageChanged",m),a.logger.log("languageChanged",m)):a.isLanguageChangingTo=void 0,l.resolve(function(){return a.t.apply(a,arguments)}),i&&i(g,function(){return a.t.apply(a,arguments)})},d=function(g){var m=typeof g=="string"?g:a.services.languageUtils.getBestMatchFromCodes(g);m&&(a.language||(a.language=m,a.languages=a.services.languageUtils.toResolveHierarchy(m)),a.translator.language||a.translator.changeLanguage(m),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage(m)),a.loadResources(m,function(w){u(w,m)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(d):d(n),l}},{key:"getFixedT",value:function(n,i){var a=this,l=function u(d,p){var g;if(Fn(p)!=="object"){for(var m=arguments.length,w=new Array(m>2?m-2:0),x=2;x<m;x++)w[x-2]=arguments[x];g=a.options.overloadTranslationOptionHandler([d,p].concat(w))}else g=Cr({},p);return g.lng=g.lng||u.lng,g.lngs=g.lngs||u.lngs,g.ns=g.ns||u.ns,a.t(d,g)};return typeof n=="string"?l.lng=n:l.lngs=n,l.ns=i,l}},{key:"t",value:function(){var n;return this.translator&&(n=this.translator).translate.apply(n,arguments)}},{key:"exists",value:function(){var n;return this.translator&&(n=this.translator).exists.apply(n,arguments)}},{key:"setDefaultNamespace",value:function(n){this.options.defaultNS=n}},{key:"hasLoadedNamespace",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.languages[0],u=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var p=function(w,x){var O=i.services.backendConnector.state["".concat(w,"|").concat(x)];return O===-1||O===2};if(a.precheck){var g=a.precheck(this,p);if(g!==void 0)return g}return!!(this.hasResourceBundle(l,n)||!this.services.backendConnector.backend||p(l,n)&&(!u||p(d,n)))}},{key:"loadNamespaces",value:function(n,i){var a=this,l=nu();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(function(u){a.options.ns.indexOf(u)<0&&a.options.ns.push(u)}),this.loadResources(function(u){l.resolve(),i&&i(u)}),l):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(n,i){var a=nu();typeof n=="string"&&(n=[n]);var l=this.options.preload||[],u=n.filter(function(d){return l.indexOf(d)<0});return u.length?(this.options.preload=l.concat(u),this.loadResources(function(d){a.resolve(),i&&i(d)}),a):(i&&i(),Promise.resolve())}},{key:"dir",value:function(n){if(n||(n=this.languages&&this.languages.length>0?this.languages[0]:this.language),!n)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return i.indexOf(this.services.languageUtils.getLanguagePartFromCode(n))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new t(n,i)}},{key:"cloneInstance",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Af,l=Cr({},this.options,i,{isClone:!0}),u=new t(l),d=["store","services","language"];return d.forEach(function(p){u[p]=n[p]}),u.services=Cr({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new hE(u.services,u.options),u.translator.on("*",function(p){for(var g=arguments.length,m=new Array(g>1?g-1:0),w=1;w<g;w++)m[w-1]=arguments[w];u.emit.apply(u,[p].concat(m))}),u.init(l,a),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}}]),t}(_o),i3=new n3;function gd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gd=function(r){return typeof r}:gd=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gd(e)}var z2=[],o3=z2.forEach,a3=z2.slice;function km(e){return o3.call(a3.call(arguments,1),function(t){if(t)for(var r in t)e[r]===void 0&&(e[r]=t[r])}),e}function B2(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":gd(XMLHttpRequest))==="object"}var or={},H2={},zh={};zh.byteLength=u3;zh.toByteArray=f3;zh.fromByteArray=p3;var si=[],vn=[],s3=typeof Uint8Array<"u"?Uint8Array:Array,zg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var hs=0,l3=zg.length;hs<l3;++hs)si[hs]=zg[hs],vn[zg.charCodeAt(hs)]=hs;vn["-".charCodeAt(0)]=62;vn["_".charCodeAt(0)]=63;function U2(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function u3(e){var t=U2(e),r=t[0],n=t[1];return(r+n)*3/4-n}function c3(e,t,r){return(t+r)*3/4-r}function f3(e){var t,r=U2(e),n=r[0],i=r[1],a=new s3(c3(e,n,i)),l=0,u=i>0?n-4:n,d;for(d=0;d<u;d+=4)t=vn[e.charCodeAt(d)]<<18|vn[e.charCodeAt(d+1)]<<12|vn[e.charCodeAt(d+2)]<<6|vn[e.charCodeAt(d+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=t&255;return i===2&&(t=vn[e.charCodeAt(d)]<<2|vn[e.charCodeAt(d+1)]>>4,a[l++]=t&255),i===1&&(t=vn[e.charCodeAt(d)]<<10|vn[e.charCodeAt(d+1)]<<4|vn[e.charCodeAt(d+2)]>>2,a[l++]=t>>8&255,a[l++]=t&255),a}function d3(e){return si[e>>18&63]+si[e>>12&63]+si[e>>6&63]+si[e&63]}function h3(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(d3(n));return i.join("")}function p3(e){for(var t,r=e.length,n=r%3,i=[],a=16383,l=0,u=r-n;l<u;l+=a)i.push(h3(e,l,l+a>u?u:l+a));return n===1?(t=e[r-1],i.push(si[t>>2]+si[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(si[t>>10]+si[t>>4&63]+si[t<<2&63]+"=")),i.join("")}var w0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w0.read=function(e,t,r,n,i){var a,l,u=i*8-n-1,d=(1<<u)-1,p=d>>1,g=-7,m=r?i-1:0,w=r?-1:1,x=e[t+m];for(m+=w,a=x&(1<<-g)-1,x>>=-g,g+=u;g>0;a=a*256+e[t+m],m+=w,g-=8);for(l=a&(1<<-g)-1,a>>=-g,g+=n;g>0;l=l*256+e[t+m],m+=w,g-=8);if(a===0)a=1-p;else{if(a===d)return l?NaN:(x?-1:1)*(1/0);l=l+Math.pow(2,n),a=a-p}return(x?-1:1)*l*Math.pow(2,a-n)};w0.write=function(e,t,r,n,i,a){var l,u,d,p=a*8-i-1,g=(1<<p)-1,m=g>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:a-1,O=n?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,l=g):(l=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+m>=1?t+=w/d:t+=w*Math.pow(2,1-m),t*d>=2&&(l++,d/=2),l+m>=g?(u=0,l=g):l+m>=1?(u=(t*d-1)*Math.pow(2,i),l=l+m):(u=t*Math.pow(2,m-1)*Math.pow(2,i),l=0));i>=8;e[r+x]=u&255,x+=O,u/=256,i-=8);for(l=l<<i|u,p+=i;p>0;e[r+x]=l&255,x+=O,l/=256,p-=8);e[r+x-O]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=zh,r=w0,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=N,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const M=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(M,E),M.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(M){if(M>i)throw new RangeError('The value "'+M+'" is invalid for option "size"');const E=new Uint8Array(M);return Object.setPrototypeOf(E,u.prototype),E}function u(M,E,k){if(typeof M=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(M)}return d(M,E,k)}u.poolSize=8192;function d(M,E,k){if(typeof M=="string")return w(M,E);if(ArrayBuffer.isView(M))return O(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(te(M,ArrayBuffer)||M&&te(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(M,SharedArrayBuffer)||M&&te(M.buffer,SharedArrayBuffer)))return I(M,E,k);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=M.valueOf&&M.valueOf();if(D!=null&&D!==M)return u.from(D,E,k);const Y=P(M);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return u.from(M[Symbol.toPrimitive]("string"),E,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}u.from=function(M,E,k){return d(M,E,k)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function g(M,E,k){return p(M),M<=0?l(M):E!==void 0?typeof k=="string"?l(M).fill(E,k):l(M).fill(E):l(M)}u.alloc=function(M,E,k){return g(M,E,k)};function m(M){return p(M),l(M<0?0:T(M)|0)}u.allocUnsafe=function(M){return m(M)},u.allocUnsafeSlow=function(M){return m(M)};function w(M,E){if((typeof E!="string"||E==="")&&(E="utf8"),!u.isEncoding(E))throw new TypeError("Unknown encoding: "+E);const k=R(M,E)|0;let D=l(k);const Y=D.write(M,E);return Y!==k&&(D=D.slice(0,Y)),D}function x(M){const E=M.length<0?0:T(M.length)|0,k=l(E);for(let D=0;D<E;D+=1)k[D]=M[D]&255;return k}function O(M){if(te(M,Uint8Array)){const E=new Uint8Array(M);return I(E.buffer,E.byteOffset,E.byteLength)}return x(M)}function I(M,E,k){if(E<0||M.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<E+(k||0))throw new RangeError('"length" is outside of buffer bounds');let D;return E===void 0&&k===void 0?D=new Uint8Array(M):k===void 0?D=new Uint8Array(M,E):D=new Uint8Array(M,E,k),Object.setPrototypeOf(D,u.prototype),D}function P(M){if(u.isBuffer(M)){const E=T(M.length)|0,k=l(E);return k.length===0||M.copy(k,0,0,E),k}if(M.length!==void 0)return typeof M.length!="number"||he(M.length)?l(0):x(M);if(M.type==="Buffer"&&Array.isArray(M.data))return x(M.data)}function T(M){if(M>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return M|0}function N(M){return+M!=M&&(M=0),u.alloc(+M)}u.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==u.prototype},u.compare=function(E,k){if(te(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),te(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(E)||!u.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===k)return 0;let D=E.length,Y=k.length;for(let ae=0,ge=Math.min(D,Y);ae<ge;++ae)if(E[ae]!==k[ae]){D=E[ae],Y=k[ae];break}return D<Y?-1:Y<D?1:0},u.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(E,k){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return u.alloc(0);let D;if(k===void 0)for(k=0,D=0;D<E.length;++D)k+=E[D].length;const Y=u.allocUnsafe(k);let ae=0;for(D=0;D<E.length;++D){let ge=E[D];if(te(ge,Uint8Array))ae+ge.length>Y.length?(u.isBuffer(ge)||(ge=u.from(ge)),ge.copy(Y,ae)):Uint8Array.prototype.set.call(Y,ge,ae);else if(u.isBuffer(ge))ge.copy(Y,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=ge.length}return Y};function R(M,E){if(u.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||te(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const k=M.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&k===0)return 0;let Y=!1;for(;;)switch(E){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return ct(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return xt(M).length;default:if(Y)return D?-1:ct(M).length;E=(""+E).toLowerCase(),Y=!0}}u.byteLength=R;function _(M,E,k){let D=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,E>>>=0,k<=E))return"";for(M||(M="utf8");;)switch(M){case"hex":return ue(this,E,k);case"utf8":case"utf-8":return U(this,E,k);case"ascii":return pe(this,E,k);case"latin1":case"binary":return ce(this,E,k);case"base64":return W(this,E,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,E,k);default:if(D)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),D=!0}}u.prototype._isBuffer=!0;function $(M,E,k){const D=M[E];M[E]=M[k],M[k]=D}u.prototype.swap16=function(){const E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<E;k+=2)$(this,k,k+1);return this},u.prototype.swap32=function(){const E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<E;k+=4)$(this,k,k+3),$(this,k+1,k+2);return this},u.prototype.swap64=function(){const E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<E;k+=8)$(this,k,k+7),$(this,k+1,k+6),$(this,k+2,k+5),$(this,k+3,k+4);return this},u.prototype.toString=function(){const E=this.length;return E===0?"":arguments.length===0?U(this,0,E):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(E){if(!u.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:u.compare(this,E)===0},u.prototype.inspect=function(){let E="";const k=e.INSPECT_MAX_BYTES;return E=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(E+=" ... "),"<Buffer "+E+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(E,k,D,Y,ae){if(te(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(k===void 0&&(k=0),D===void 0&&(D=E?E.length:0),Y===void 0&&(Y=0),ae===void 0&&(ae=this.length),k<0||D>E.length||Y<0||ae>this.length)throw new RangeError("out of range index");if(Y>=ae&&k>=D)return 0;if(Y>=ae)return-1;if(k>=D)return 1;if(k>>>=0,D>>>=0,Y>>>=0,ae>>>=0,this===E)return 0;let ge=ae-Y,ke=D-k;const mt=Math.min(ge,ke),it=this.slice(Y,ae),Me=E.slice(k,D);for(let Xe=0;Xe<mt;++Xe)if(it[Xe]!==Me[Xe]){ge=it[Xe],ke=Me[Xe];break}return ge<ke?-1:ke<ge?1:0};function z(M,E,k,D,Y){if(M.length===0)return-1;if(typeof k=="string"?(D=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,he(k)&&(k=Y?0:M.length-1),k<0&&(k=M.length+k),k>=M.length){if(Y)return-1;k=M.length-1}else if(k<0)if(Y)k=0;else return-1;if(typeof E=="string"&&(E=u.from(E,D)),u.isBuffer(E))return E.length===0?-1:H(M,E,k,D,Y);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(M,E,k):Uint8Array.prototype.lastIndexOf.call(M,E,k):H(M,[E],k,D,Y);throw new TypeError("val must be string, number or Buffer")}function H(M,E,k,D,Y){let ae=1,ge=M.length,ke=E.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(M.length<2||E.length<2)return-1;ae=2,ge/=2,ke/=2,k/=2}function mt(Me,Xe){return ae===1?Me[Xe]:Me.readUInt16BE(Xe*ae)}let it;if(Y){let Me=-1;for(it=k;it<ge;it++)if(mt(M,it)===mt(E,Me===-1?0:it-Me)){if(Me===-1&&(Me=it),it-Me+1===ke)return Me*ae}else Me!==-1&&(it-=it-Me),Me=-1}else for(k+ke>ge&&(k=ge-ke),it=k;it>=0;it--){let Me=!0;for(let Xe=0;Xe<ke;Xe++)if(mt(M,it+Xe)!==mt(E,Xe)){Me=!1;break}if(Me)return it}return-1}u.prototype.includes=function(E,k,D){return this.indexOf(E,k,D)!==-1},u.prototype.indexOf=function(E,k,D){return z(this,E,k,D,!0)},u.prototype.lastIndexOf=function(E,k,D){return z(this,E,k,D,!1)};function q(M,E,k,D){k=Number(k)||0;const Y=M.length-k;D?(D=Number(D),D>Y&&(D=Y)):D=Y;const ae=E.length;D>ae/2&&(D=ae/2);let ge;for(ge=0;ge<D;++ge){const ke=parseInt(E.substr(ge*2,2),16);if(he(ke))return ge;M[k+ge]=ke}return ge}function re(M,E,k,D){return Qe(ct(E,M.length-k),M,k,D)}function oe(M,E,k,D){return Qe(at(E),M,k,D)}function le(M,E,k,D){return Qe(xt(E),M,k,D)}function we(M,E,k,D){return Qe(st(E,M.length-k),M,k,D)}u.prototype.write=function(E,k,D,Y){if(k===void 0)Y="utf8",D=this.length,k=0;else if(D===void 0&&typeof k=="string")Y=k,D=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(D)?(D=D>>>0,Y===void 0&&(Y="utf8")):(Y=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-k;if((D===void 0||D>ae)&&(D=ae),E.length>0&&(D<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let ge=!1;for(;;)switch(Y){case"hex":return q(this,E,k,D);case"utf8":case"utf-8":return re(this,E,k,D);case"ascii":case"latin1":case"binary":return oe(this,E,k,D);case"base64":return le(this,E,k,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,E,k,D);default:if(ge)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(M,E,k){return E===0&&k===M.length?t.fromByteArray(M):t.fromByteArray(M.slice(E,k))}function U(M,E,k){k=Math.min(M.length,k);const D=[];let Y=E;for(;Y<k;){const ae=M[Y];let ge=null,ke=ae>239?4:ae>223?3:ae>191?2:1;if(Y+ke<=k){let mt,it,Me,Xe;switch(ke){case 1:ae<128&&(ge=ae);break;case 2:mt=M[Y+1],(mt&192)===128&&(Xe=(ae&31)<<6|mt&63,Xe>127&&(ge=Xe));break;case 3:mt=M[Y+1],it=M[Y+2],(mt&192)===128&&(it&192)===128&&(Xe=(ae&15)<<12|(mt&63)<<6|it&63,Xe>2047&&(Xe<55296||Xe>57343)&&(ge=Xe));break;case 4:mt=M[Y+1],it=M[Y+2],Me=M[Y+3],(mt&192)===128&&(it&192)===128&&(Me&192)===128&&(Xe=(ae&15)<<18|(mt&63)<<12|(it&63)<<6|Me&63,Xe>65535&&Xe<1114112&&(ge=Xe))}}ge===null?(ge=65533,ke=1):ge>65535&&(ge-=65536,D.push(ge>>>10&1023|55296),ge=56320|ge&1023),D.push(ge),Y+=ke}return be(D)}const F=4096;function be(M){const E=M.length;if(E<=F)return String.fromCharCode.apply(String,M);let k="",D=0;for(;D<E;)k+=String.fromCharCode.apply(String,M.slice(D,D+=F));return k}function pe(M,E,k){let D="";k=Math.min(M.length,k);for(let Y=E;Y<k;++Y)D+=String.fromCharCode(M[Y]&127);return D}function ce(M,E,k){let D="";k=Math.min(M.length,k);for(let Y=E;Y<k;++Y)D+=String.fromCharCode(M[Y]);return D}function ue(M,E,k){const D=M.length;(!E||E<0)&&(E=0),(!k||k<0||k>D)&&(k=D);let Y="";for(let ae=E;ae<k;++ae)Y+=ie[M[ae]];return Y}function me(M,E,k){const D=M.slice(E,k);let Y="";for(let ae=0;ae<D.length-1;ae+=2)Y+=String.fromCharCode(D[ae]+D[ae+1]*256);return Y}u.prototype.slice=function(E,k){const D=this.length;E=~~E,k=k===void 0?D:~~k,E<0?(E+=D,E<0&&(E=0)):E>D&&(E=D),k<0?(k+=D,k<0&&(k=0)):k>D&&(k=D),k<E&&(k=E);const Y=this.subarray(E,k);return Object.setPrototypeOf(Y,u.prototype),Y};function V(M,E,k){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+E>k)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(E,k,D){E=E>>>0,k=k>>>0,D||V(E,k,this.length);let Y=this[E],ae=1,ge=0;for(;++ge<k&&(ae*=256);)Y+=this[E+ge]*ae;return Y},u.prototype.readUintBE=u.prototype.readUIntBE=function(E,k,D){E=E>>>0,k=k>>>0,D||V(E,k,this.length);let Y=this[E+--k],ae=1;for(;k>0&&(ae*=256);)Y+=this[E+--k]*ae;return Y},u.prototype.readUint8=u.prototype.readUInt8=function(E,k){return E=E>>>0,k||V(E,1,this.length),this[E]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(E,k){return E=E>>>0,k||V(E,2,this.length),this[E]|this[E+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(E,k){return E=E>>>0,k||V(E,2,this.length),this[E]<<8|this[E+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(E,k){return E=E>>>0,k||V(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(E,k){return E=E>>>0,k||V(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},u.prototype.readBigUInt64LE=Ne(function(E){E=E>>>0,ut(E,"offset");const k=this[E],D=this[E+7];(k===void 0||D===void 0)&&vt(E,this.length-8);const Y=k+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24,ae=this[++E]+this[++E]*2**8+this[++E]*2**16+D*2**24;return BigInt(Y)+(BigInt(ae)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ne(function(E){E=E>>>0,ut(E,"offset");const k=this[E],D=this[E+7];(k===void 0||D===void 0)&&vt(E,this.length-8);const Y=k*2**24+this[++E]*2**16+this[++E]*2**8+this[++E],ae=this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+D;return(BigInt(Y)<<BigInt(32))+BigInt(ae)}),u.prototype.readIntLE=function(E,k,D){E=E>>>0,k=k>>>0,D||V(E,k,this.length);let Y=this[E],ae=1,ge=0;for(;++ge<k&&(ae*=256);)Y+=this[E+ge]*ae;return ae*=128,Y>=ae&&(Y-=Math.pow(2,8*k)),Y},u.prototype.readIntBE=function(E,k,D){E=E>>>0,k=k>>>0,D||V(E,k,this.length);let Y=k,ae=1,ge=this[E+--Y];for(;Y>0&&(ae*=256);)ge+=this[E+--Y]*ae;return ae*=128,ge>=ae&&(ge-=Math.pow(2,8*k)),ge},u.prototype.readInt8=function(E,k){return E=E>>>0,k||V(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},u.prototype.readInt16LE=function(E,k){E=E>>>0,k||V(E,2,this.length);const D=this[E]|this[E+1]<<8;return D&32768?D|4294901760:D},u.prototype.readInt16BE=function(E,k){E=E>>>0,k||V(E,2,this.length);const D=this[E+1]|this[E]<<8;return D&32768?D|4294901760:D},u.prototype.readInt32LE=function(E,k){return E=E>>>0,k||V(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},u.prototype.readInt32BE=function(E,k){return E=E>>>0,k||V(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},u.prototype.readBigInt64LE=Ne(function(E){E=E>>>0,ut(E,"offset");const k=this[E],D=this[E+7];(k===void 0||D===void 0)&&vt(E,this.length-8);const Y=this[E+4]+this[E+5]*2**8+this[E+6]*2**16+(D<<24);return(BigInt(Y)<<BigInt(32))+BigInt(k+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24)}),u.prototype.readBigInt64BE=Ne(function(E){E=E>>>0,ut(E,"offset");const k=this[E],D=this[E+7];(k===void 0||D===void 0)&&vt(E,this.length-8);const Y=(k<<24)+this[++E]*2**16+this[++E]*2**8+this[++E];return(BigInt(Y)<<BigInt(32))+BigInt(this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+D)}),u.prototype.readFloatLE=function(E,k){return E=E>>>0,k||V(E,4,this.length),r.read(this,E,!0,23,4)},u.prototype.readFloatBE=function(E,k){return E=E>>>0,k||V(E,4,this.length),r.read(this,E,!1,23,4)},u.prototype.readDoubleLE=function(E,k){return E=E>>>0,k||V(E,8,this.length),r.read(this,E,!0,52,8)},u.prototype.readDoubleBE=function(E,k){return E=E>>>0,k||V(E,8,this.length),r.read(this,E,!1,52,8)};function ee(M,E,k,D,Y,ae){if(!u.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>Y||E<ae)throw new RangeError('"value" argument is out of bounds');if(k+D>M.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(E,k,D,Y){if(E=+E,k=k>>>0,D=D>>>0,!Y){const ke=Math.pow(2,8*D)-1;ee(this,E,k,D,ke,0)}let ae=1,ge=0;for(this[k]=E&255;++ge<D&&(ae*=256);)this[k+ge]=E/ae&255;return k+D},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(E,k,D,Y){if(E=+E,k=k>>>0,D=D>>>0,!Y){const ke=Math.pow(2,8*D)-1;ee(this,E,k,D,ke,0)}let ae=D-1,ge=1;for(this[k+ae]=E&255;--ae>=0&&(ge*=256);)this[k+ae]=E/ge&255;return k+D},u.prototype.writeUint8=u.prototype.writeUInt8=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,1,255,0),this[k]=E&255,k+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,2,65535,0),this[k]=E&255,this[k+1]=E>>>8,k+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,2,65535,0),this[k]=E>>>8,this[k+1]=E&255,k+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,4,4294967295,0),this[k+3]=E>>>24,this[k+2]=E>>>16,this[k+1]=E>>>8,this[k]=E&255,k+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,4,4294967295,0),this[k]=E>>>24,this[k+1]=E>>>16,this[k+2]=E>>>8,this[k+3]=E&255,k+4};function se(M,E,k,D,Y){Ye(E,D,Y,M,k,7);let ae=Number(E&BigInt(4294967295));M[k++]=ae,ae=ae>>8,M[k++]=ae,ae=ae>>8,M[k++]=ae,ae=ae>>8,M[k++]=ae;let ge=Number(E>>BigInt(32)&BigInt(4294967295));return M[k++]=ge,ge=ge>>8,M[k++]=ge,ge=ge>>8,M[k++]=ge,ge=ge>>8,M[k++]=ge,k}function X(M,E,k,D,Y){Ye(E,D,Y,M,k,7);let ae=Number(E&BigInt(4294967295));M[k+7]=ae,ae=ae>>8,M[k+6]=ae,ae=ae>>8,M[k+5]=ae,ae=ae>>8,M[k+4]=ae;let ge=Number(E>>BigInt(32)&BigInt(4294967295));return M[k+3]=ge,ge=ge>>8,M[k+2]=ge,ge=ge>>8,M[k+1]=ge,ge=ge>>8,M[k]=ge,k+8}u.prototype.writeBigUInt64LE=Ne(function(E,k=0){return se(this,E,k,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ne(function(E,k=0){return X(this,E,k,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(E,k,D,Y){if(E=+E,k=k>>>0,!Y){const mt=Math.pow(2,8*D-1);ee(this,E,k,D,mt-1,-mt)}let ae=0,ge=1,ke=0;for(this[k]=E&255;++ae<D&&(ge*=256);)E<0&&ke===0&&this[k+ae-1]!==0&&(ke=1),this[k+ae]=(E/ge>>0)-ke&255;return k+D},u.prototype.writeIntBE=function(E,k,D,Y){if(E=+E,k=k>>>0,!Y){const mt=Math.pow(2,8*D-1);ee(this,E,k,D,mt-1,-mt)}let ae=D-1,ge=1,ke=0;for(this[k+ae]=E&255;--ae>=0&&(ge*=256);)E<0&&ke===0&&this[k+ae+1]!==0&&(ke=1),this[k+ae]=(E/ge>>0)-ke&255;return k+D},u.prototype.writeInt8=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,1,127,-128),E<0&&(E=255+E+1),this[k]=E&255,k+1},u.prototype.writeInt16LE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,2,32767,-32768),this[k]=E&255,this[k+1]=E>>>8,k+2},u.prototype.writeInt16BE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,2,32767,-32768),this[k]=E>>>8,this[k+1]=E&255,k+2},u.prototype.writeInt32LE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,4,2147483647,-2147483648),this[k]=E&255,this[k+1]=E>>>8,this[k+2]=E>>>16,this[k+3]=E>>>24,k+4},u.prototype.writeInt32BE=function(E,k,D){return E=+E,k=k>>>0,D||ee(this,E,k,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[k]=E>>>24,this[k+1]=E>>>16,this[k+2]=E>>>8,this[k+3]=E&255,k+4},u.prototype.writeBigInt64LE=Ne(function(E,k=0){return se(this,E,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ne(function(E,k=0){return X(this,E,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(M,E,k,D,Y,ae){if(k+D>M.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function ne(M,E,k,D,Y){return E=+E,k=k>>>0,Y||J(M,E,k,4),r.write(M,E,k,D,23,4),k+4}u.prototype.writeFloatLE=function(E,k,D){return ne(this,E,k,!0,D)},u.prototype.writeFloatBE=function(E,k,D){return ne(this,E,k,!1,D)};function de(M,E,k,D,Y){return E=+E,k=k>>>0,Y||J(M,E,k,8),r.write(M,E,k,D,52,8),k+8}u.prototype.writeDoubleLE=function(E,k,D){return de(this,E,k,!0,D)},u.prototype.writeDoubleBE=function(E,k,D){return de(this,E,k,!1,D)},u.prototype.copy=function(E,k,D,Y){if(!u.isBuffer(E))throw new TypeError("argument should be a Buffer");if(D||(D=0),!Y&&Y!==0&&(Y=this.length),k>=E.length&&(k=E.length),k||(k=0),Y>0&&Y<D&&(Y=D),Y===D||E.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),E.length-k<Y-D&&(Y=E.length-k+D);const ae=Y-D;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,D,Y):Uint8Array.prototype.set.call(E,this.subarray(D,Y),k),ae},u.prototype.fill=function(E,k,D,Y){if(typeof E=="string"){if(typeof k=="string"?(Y=k,k=0,D=this.length):typeof D=="string"&&(Y=D,D=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!u.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(E.length===1){const ge=E.charCodeAt(0);(Y==="utf8"&&ge<128||Y==="latin1")&&(E=ge)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(k<0||this.length<k||this.length<D)throw new RangeError("Out of range index");if(D<=k)return this;k=k>>>0,D=D===void 0?this.length:D>>>0,E||(E=0);let ae;if(typeof E=="number")for(ae=k;ae<D;++ae)this[ae]=E;else{const ge=u.isBuffer(E)?E:u.from(E,Y),ke=ge.length;if(ke===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(ae=0;ae<D-k;++ae)this[ae+k]=ge[ae%ke]}return this};const xe={};function Oe(M,E,k){xe[M]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(M,"]"),this.stack,delete this.name}get code(){return M}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return"".concat(this.name," [").concat(M,"]: ").concat(this.message)}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?"".concat(M," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(M,E){return'The "'.concat(M,'" argument must be of type number. Received type ').concat(typeof E)},TypeError),Oe("ERR_OUT_OF_RANGE",function(M,E,k){let D='The value of "'.concat(M,'" is out of range.'),Y=k;return Number.isInteger(k)&&Math.abs(k)>2**32?Y=$e(String(k)):typeof k=="bigint"&&(Y=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(Y=$e(Y)),Y+="n"),D+=" It must be ".concat(E,". Received ").concat(Y),D},RangeError);function $e(M){let E="",k=M.length;const D=M[0]==="-"?1:0;for(;k>=D+4;k-=3)E="_".concat(M.slice(k-3,k)).concat(E);return"".concat(M.slice(0,k)).concat(E)}function _e(M,E,k){ut(E,"offset"),(M[E]===void 0||M[E+k]===void 0)&&vt(E,M.length-(k+1))}function Ye(M,E,k,D,Y,ae){if(M>k||M<E){const ge=typeof E=="bigint"?"n":"";let ke;throw ae>3?E===0||E===BigInt(0)?ke=">= 0".concat(ge," and < 2").concat(ge," ** ").concat((ae+1)*8).concat(ge):ke=">= -(2".concat(ge," ** ").concat((ae+1)*8-1).concat(ge,") and < 2 ** ")+"".concat((ae+1)*8-1).concat(ge):ke=">= ".concat(E).concat(ge," and <= ").concat(k).concat(ge),new xe.ERR_OUT_OF_RANGE("value",ke,M)}_e(D,Y,ae)}function ut(M,E){if(typeof M!="number")throw new xe.ERR_INVALID_ARG_TYPE(E,"number",M)}function vt(M,E,k){throw Math.floor(M)!==M?(ut(M,k),new xe.ERR_OUT_OF_RANGE(k||"offset","an integer",M)):E<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE(k||"offset",">= ".concat(k?1:0," and <= ").concat(E),M)}const ze=/[^+/0-9A-Za-z-_]/g;function qe(M){if(M=M.split("=")[0],M=M.trim().replace(ze,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function ct(M,E){E=E||1/0;let k;const D=M.length;let Y=null;const ae=[];for(let ge=0;ge<D;++ge){if(k=M.charCodeAt(ge),k>55295&&k<57344){if(!Y){if(k>56319){(E-=3)>-1&&ae.push(239,191,189);continue}else if(ge+1===D){(E-=3)>-1&&ae.push(239,191,189);continue}Y=k;continue}if(k<56320){(E-=3)>-1&&ae.push(239,191,189),Y=k;continue}k=(Y-55296<<10|k-56320)+65536}else Y&&(E-=3)>-1&&ae.push(239,191,189);if(Y=null,k<128){if((E-=1)<0)break;ae.push(k)}else if(k<2048){if((E-=2)<0)break;ae.push(k>>6|192,k&63|128)}else if(k<65536){if((E-=3)<0)break;ae.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((E-=4)<0)break;ae.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return ae}function at(M){const E=[];for(let k=0;k<M.length;++k)E.push(M.charCodeAt(k)&255);return E}function st(M,E){let k,D,Y;const ae=[];for(let ge=0;ge<M.length&&!((E-=2)<0);++ge)k=M.charCodeAt(ge),D=k>>8,Y=k%256,ae.push(Y),ae.push(D);return ae}function xt(M){return t.toByteArray(qe(M))}function Qe(M,E,k,D){let Y;for(Y=0;Y<D&&!(Y+k>=E.length||Y>=M.length);++Y)E[Y+k]=M[Y];return Y}function te(M,E){return M instanceof E||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===E.name}function he(M){return M!==M}const ie=function(){const M="0123456789abcdef",E=new Array(256);for(let k=0;k<16;++k){const D=k*16;for(let Y=0;Y<16;++Y)E[D+Y]=M[k]+M[Y]}return E}();function Ne(M){return typeof BigInt>"u"?nt:M}function nt(){throw new Error("BigInt not supported")}})(H2);var W2={exports:{}},Ut=W2.exports={},oi,ai;function Tm(){throw new Error("setTimeout has not been defined")}function Om(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?oi=setTimeout:oi=Tm}catch{oi=Tm}try{typeof clearTimeout=="function"?ai=clearTimeout:ai=Om}catch{ai=Om}})();function K2(e){if(oi===setTimeout)return setTimeout(e,0);if((oi===Tm||!oi)&&setTimeout)return oi=setTimeout,setTimeout(e,0);try{return oi(e,0)}catch{try{return oi.call(null,e,0)}catch{return oi.call(this,e,0)}}}function g3(e){if(ai===clearTimeout)return clearTimeout(e);if((ai===Om||!ai)&&clearTimeout)return ai=clearTimeout,clearTimeout(e);try{return ai(e)}catch{try{return ai.call(null,e)}catch{return ai.call(this,e)}}}var qi=[],Rs=!1,va,vd=-1;function v3(){!Rs||!va||(Rs=!1,va.length?qi=va.concat(qi):vd=-1,qi.length&&G2())}function G2(){if(!Rs){var e=K2(v3);Rs=!0;for(var t=qi.length;t;){for(va=qi,qi=[];++vd<t;)va&&va[vd].run();vd=-1,t=qi.length}va=null,Rs=!1,g3(e)}}Ut.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];qi.push(new q2(e,t)),qi.length===1&&!Rs&&K2(G2)};function q2(e,t){this.fun=e,this.array=t}q2.prototype.run=function(){this.fun.apply(null,this.array)};Ut.title="browser";Ut.browser=!0;Ut.env={};Ut.argv=[];Ut.version="";Ut.versions={};function Zi(){}Ut.on=Zi;Ut.addListener=Zi;Ut.once=Zi;Ut.off=Zi;Ut.removeListener=Zi;Ut.removeAllListeners=Zi;Ut.emit=Zi;Ut.prependListener=Zi;Ut.prependOnceListener=Zi;Ut.listeners=function(e){return[]};Ut.binding=function(e){throw new Error("process.binding is not supported")};Ut.cwd=function(){return"/"};Ut.chdir=function(e){throw new Error("process.chdir is not supported")};Ut.umask=function(){return 0};var m3=W2.exports;(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H2,r=m3,n=l=>l&&l.__esModule?l:{default:l},i=n(r),a=globalThis||void 0||self;Object.defineProperty(e,"Buffer",{enumerable:!0,get:()=>t.Buffer}),Object.defineProperty(e,"process",{enumerable:!0,get:()=>i.default}),e.global=a})(or);function y3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pm={exports:{}},jf={exports:{}},gE;function w3(){return gE||(gE=1,function(e,t){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw new Error("unable to locate global object")},n=r();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response}(jf,jf.exports)),jf.exports}(function(e,t){var r;if(typeof fetch=="function"&&(typeof dr<"u"&&dr.fetch?r=dr.fetch:typeof window<"u"&&window.fetch&&(r=window.fetch)),typeof y3<"u"&&(typeof window>"u"||typeof window.document>"u")){var n=r||w3();n.default&&(n=n.default),t.default=n,e.exports=t.default}})(Pm,Pm.exports);var V2=Pm.exports;const X2=kt(V2),vE=QA({__proto__:null,default:X2},[V2]);function Nu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nu=function(r){return typeof r}:Nu=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nu(e)}var Mo;typeof fetch=="function"&&(typeof or.global<"u"&&or.global.fetch?Mo=or.global.fetch:typeof window<"u"&&window.fetch&&(Mo=window.fetch));var Xu;B2&&(typeof or.global<"u"&&or.global.XMLHttpRequest?Xu=or.global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Xu=window.XMLHttpRequest));var rh;typeof ActiveXObject=="function"&&(typeof or.global<"u"&&or.global.ActiveXObject?rh=or.global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(rh=window.ActiveXObject));!Mo&&vE&&!Xu&&!rh&&(Mo=X2||vE);typeof Mo!="function"&&(Mo=void 0);var Lm=function(t,r){if(r&&Nu(r)==="object"){var n="";for(var i in r)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r[i]);if(!n)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+n.slice(1)}return t},b3=function(t,r,n,i){t.queryStringParams&&(r=Lm(r,t.queryStringParams));var a=km({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);n&&(a["Content-Type"]="application/json"),Mo(r,km({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:a},typeof t.requestOptions=="function"?t.requestOptions(n):t.requestOptions)).then(function(l){if(!l.ok)return i(l.statusText||"Error",{status:l.status});l.text().then(function(u){i(null,{status:l.status,data:u})}).catch(i)}).catch(i)},x3=function(t,r,n,i){n&&Nu(n)==="object"&&(n=Lm("",n).slice(1)),t.queryStringParams&&(r=Lm(r,t.queryStringParams));try{var a;Xu?a=new Xu:a=new rh("MSXML2.XMLHTTP.3.0"),a.open(n?"POST":"GET",r,1),t.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!t.withCredentials,n&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var l=t.customHeaders;if(l=typeof l=="function"?l():l,l)for(var u in l)a.setRequestHeader(u,l[u]);a.onreadystatechange=function(){a.readyState>3&&i(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(n)}catch(d){console&&console.log(d)}},E3=function(t,r,n,i){if(typeof n=="function"&&(i=n,n=void 0),i=i||function(){},Mo)return b3(t,r,n,i);if(B2||typeof ActiveXObject=="function")return x3(t,r,n,i)};function S3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C3(e,t,r){return t&&mE(e.prototype,t),r&&mE(e,r),e}function k3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T3=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(r){return JSON.parse(r)},stringify:JSON.stringify,parsePayload:function(r,n,i){return k3({},n,i||"")},request:E3,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Y2=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S3(this,e),this.services=t,this.options=r,this.allOptions=n,this.type="backend",this.init(t,r,n)}return C3(e,[{key:"init",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r,this.options=km(i,this.options||{},T3()),this.allOptions=a,this.services&&this.options.reloadInterval&&setInterval(function(){return n.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(r,n,i){var a=this.options.loadPath;typeof this.options.loadPath=="function"&&(a=this.options.loadPath(r,n));var l=this.services.interpolator.interpolate(a,{lng:r.join("+"),ns:n.join("+")});this.loadUrl(l,i,r,n)}},{key:"read",value:function(r,n,i){var a=this.options.loadPath;typeof this.options.loadPath=="function"&&(a=this.options.loadPath([r],[n]));var l=this.services.interpolator.interpolate(a,{lng:r,ns:n});this.loadUrl(l,i,r,n)}},{key:"loadUrl",value:function(r,n,i,a){var l=this;this.options.request(this.options,r,void 0,function(u,d){if(d&&(d.status>=500&&d.status<600||!d.status))return n("failed loading "+r+"; status code: "+d.status,!0);if(d&&d.status>=400&&d.status<500)return n("failed loading "+r+"; status code: "+d.status,!1);if(!d&&u&&u.message&&u.message.indexOf("Failed to fetch")>-1)return n("failed loading "+r+": "+u.message,!0);if(u)return n(u,!1);var p,g;try{typeof d.data=="string"?p=l.options.parse(d.data,i,a):p=d.data}catch{g="failed parsing "+r+" to json"}if(g)return n(g,!1);n(null,p)})}},{key:"create",value:function(r,n,i,a,l){var u=this;if(this.options.addPath){typeof r=="string"&&(r=[r]);var d=this.options.parsePayload(n,i,a),p=0,g=[],m=[];r.forEach(function(w){var x=u.options.addPath;typeof u.options.addPath=="function"&&(x=u.options.addPath(w,n));var O=u.services.interpolator.interpolate(x,{lng:w,ns:n});u.options.request(u.options,O,d,function(I,P){p+=1,g.push(I),m.push(P),p===r.length&&l&&l(g,m)})})}}},{key:"reload",value:function(){var r=this,n=this.services,i=n.backendConnector,a=n.languageUtils,l=n.logger,u=i.language;if(!(u&&u.toLowerCase()==="cimode")){var d=[],p=function(m){var w=a.toResolveHierarchy(m);w.forEach(function(x){d.indexOf(x)<0&&d.push(x)})};p(u),this.allOptions.preload&&this.allOptions.preload.forEach(function(g){return p(g)}),d.forEach(function(g){r.allOptions.ns.forEach(function(m){i.read(g,m,"read",null,null,function(w,x){w&&l.warn("loading namespace ".concat(m," for language ").concat(g," failed"),w),!w&&x&&l.log("loaded namespace ".concat(m," for language ").concat(g),x),i.loaded("".concat(g,"|").concat(m),w,x)})})})}}}]),e}();Y2.type="backend";const Lc=i3.createInstance();Lc.use(Y2).use(cR).init({debug:!1,backend:{loadPath:"./locales/{{lng}}.json"},fallbackLng:"en-us",interpolation:{escapeValue:!1},load:"currentOnly"});const Bo=()=>({height:100,highlighted:!1,left:0,name:Lc.t("store.passageDefaults.name"),selected:!1,tags:[],text:"",top:0,width:100}),tl=()=>({ifid:"",lastUpdate:new Date,passages:[],name:Lc.t("store.storyDefaults.name"),script:"",selected:!1,snapToGrid:!0,startPassage:"",storyFormat:"",storyFormatVersion:"",stylesheet:"",tags:[],tagColors:{},zoom:1});function yE(e){return e*e}function Bg(e,t){return yE(e[0]-t[0])+yE(e[1]-t[1])}function O3(e,t,r){const n=Bg(t,r);if(n===0)return Bg(e,t);let i=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return i=Math.max(0,Math.min(1,i)),Bg(e,[t[0]+i*(r[0]-t[0]),t[1]+i*(r[1]-t[1])])}function If(e,t,r){return Math.sqrt(O3(e,t,r))<1}const wE=0,Q2=1,P3=2;function L3(e,t,r,n,i){let a=t[0],l=t[1],u=r[0],d=r[1],p=n[0],g=n[1],m=i[0],w=i[1],x,O,I,P,T,N,R,_,$,z,H,q,re;return x=d-l,I=a-u,T=u*l-a*d,$=x*p+I*g+T,z=x*m+I*w+T,$!==0&&z!==0&&($>=0&&z>=0||$<0&&z<0)||(O=w-g,P=p-m,N=m*g-p*w,R=O*a+P*l+N,_=O*u+P*d+N,R!==0&&_!==0&&(R>=0&&_>=0||R<0&&_<0))?wE:(H=x*P-O*I,H===0?P3:(q=I*N-P*T,re=O*T-x*N,e[0]=(q<0,q/H),e[1]=(re<0,re/H),Q2))}function _f(e,t,r,n,i){const a=L3(e,t,r,n,i);return a===Q2?a:If(t,n,i)?(e[0]=t[0],e[1]=t[1],!0):If(r,n,i)?(e[0]=r[0],e[1]=r[1],!0):If(n,t,r)?(e[0]=n[0],e[1]=n[1],!0):If(i,t,r)?(e[0]=i[0],e[1]=i[1],!0):!1}function N3(e,t){return Math.atan2(t.top-e.top,t.left-e.left)*180/Math.PI}function A3(e,t){return Math.hypot(e.left-t.left,e.top-t.top)}function bE(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function Hg(e,t){const r={height:0,left:0,top:0,width:0};return e.left<t.left?(r.left=e.left,r.width=t.left-e.left):(r.left=t.left,r.width=e.left-t.left),e.top<t.top?(r.top=e.top,r.height=t.top-e.top):(r.top=t.top,r.height=e.top-t.top),r}function Bh(e,t){return!(t.left>e.left+e.width||t.left+t.width<e.left||t.top>e.top+e.height||t.top+t.height<e.top)}function xE(e,t,r){let n=[NaN,NaN];return _f(n,[e.left,e.top],[e.left,e.top+e.height],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:_f(n,[e.left+e.width,e.top],[e.left+e.width,e.top+e.height],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:_f(n,[e.left,e.top],[e.left+e.width,e.top],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:_f(n,[e.left,e.top+e.height],[e.left+e.width,e.top+e.height],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:null}function j3(e){if(e.length===0)throw new Error("Can't calculate bounding rect for 0 rects");let t=e[0].left,r=e[0].left+e[0].width,n=e[0].top,i=e[0].top+e[0].height;for(let a=1;a<e.length;a++){const l=e[a].left+e[a].width,u=e[a].top+e[a].height;e[a].left<t&&(t=e[a].left),e[a].top<n&&(n=e[a].top),l>r&&(r=l),u>i&&(i=u)}return{left:t,top:n,height:i-n,width:r-t}}var I3=Fa,_3=I3(Object,"create"),Hh=_3,EE=Hh;function M3(){this.__data__=EE?EE(null):{},this.size=0}var R3=M3;function $3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var F3=$3,D3=Hh,z3="__lodash_hash_undefined__",B3=Object.prototype,H3=B3.hasOwnProperty;function U3(e){var t=this.__data__;if(D3){var r=t[e];return r===z3?void 0:r}return H3.call(t,e)?t[e]:void 0}var W3=U3,K3=Hh,G3=Object.prototype,q3=G3.hasOwnProperty;function V3(e){var t=this.__data__;return K3?t[e]!==void 0:q3.call(t,e)}var X3=V3,Y3=Hh,Q3="__lodash_hash_undefined__";function J3(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Y3&&t===void 0?Q3:t,this}var Z3=J3,e4=R3,t4=F3,r4=W3,n4=X3,i4=Z3;function rl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rl.prototype.clear=e4;rl.prototype.delete=t4;rl.prototype.get=r4;rl.prototype.has=n4;rl.prototype.set=i4;var o4=rl;function a4(){this.__data__=[],this.size=0}var s4=a4,l4=$h;function u4(e,t){for(var r=e.length;r--;)if(l4(e[r][0],t))return r;return-1}var Uh=u4,c4=Uh,f4=Array.prototype,d4=f4.splice;function h4(e){var t=this.__data__,r=c4(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():d4.call(t,r,1),--this.size,!0}var p4=h4,g4=Uh;function v4(e){var t=this.__data__,r=g4(t,e);return r<0?void 0:t[r][1]}var m4=v4,y4=Uh;function w4(e){return y4(this.__data__,e)>-1}var b4=w4,x4=Uh;function E4(e,t){var r=this.__data__,n=x4(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var S4=E4,C4=s4,k4=p4,T4=m4,O4=b4,P4=S4;function nl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nl.prototype.clear=C4;nl.prototype.delete=k4;nl.prototype.get=T4;nl.prototype.has=O4;nl.prototype.set=P4;var Wh=nl,L4=Fa,N4=Si,A4=L4(N4,"Map"),b0=A4,SE=o4,j4=Wh,I4=b0;function _4(){this.size=0,this.__data__={hash:new SE,map:new(I4||j4),string:new SE}}var M4=_4;function R4(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var $4=R4,F4=$4;function D4(e,t){var r=e.__data__;return F4(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Kh=D4,z4=Kh;function B4(e){var t=z4(this,e).delete(e);return this.size-=t?1:0,t}var H4=B4,U4=Kh;function W4(e){return U4(this,e).get(e)}var K4=W4,G4=Kh;function q4(e){return G4(this,e).has(e)}var V4=q4,X4=Kh;function Y4(e,t){var r=X4(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Q4=Y4,J4=M4,Z4=H4,ez=K4,tz=V4,rz=Q4;function il(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}il.prototype.clear=J4;il.prototype.delete=Z4;il.prototype.get=ez;il.prototype.has=tz;il.prototype.set=rz;var x0=il,nz="__lodash_hash_undefined__";function iz(e){return this.__data__.set(e,nz),this}var oz=iz;function az(e){return this.__data__.has(e)}var sz=az,lz=x0,uz=oz,cz=sz;function nh(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new lz;++t<r;)this.add(e[t])}nh.prototype.add=nh.prototype.push=uz;nh.prototype.has=cz;var J2=nh;function fz(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var dz=fz;function hz(e){return e!==e}var pz=hz;function gz(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var vz=gz,mz=dz,yz=pz,wz=vz;function bz(e,t,r){return t===t?wz(e,t,r):mz(e,yz,r)}var xz=bz,Ez=xz;function Sz(e,t){var r=e==null?0:e.length;return!!r&&Ez(e,t,0)>-1}var Cz=Sz;function kz(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Tz=kz;function Oz(e,t){return e.has(t)}var Z2=Oz,Pz=Fa,Lz=Si,Nz=Pz(Lz,"Set"),eO=Nz;function Az(){}var jz=Az;function Iz(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var E0=Iz,Ug=eO,_z=jz,Mz=E0,Rz=1/0,$z=Ug&&1/Mz(new Ug([,-0]))[1]==Rz?function(e){return new Ug(e)}:_z,Fz=$z,Dz=J2,zz=Cz,Bz=Tz,Hz=Z2,Uz=Fz,Wz=E0,Kz=200;function Gz(e,t,r){var n=-1,i=zz,a=e.length,l=!0,u=[],d=u;if(r)l=!1,i=Bz;else if(a>=Kz){var p=t?null:Uz(e);if(p)return Wz(p);l=!1,i=Hz,d=new Dz}else d=t?[]:u;e:for(;++n<a;){var g=e[n],m=t?t(g):g;if(g=r||g!==0?g:0,l&&m===m){for(var w=d.length;w--;)if(d[w]===m)continue e;t&&d.push(m),u.push(g)}else i(d,m,r)||(d!==u&&d.push(m),u.push(g))}return u}var qz=Gz,Vz=qz;function Xz(e){return e&&e.length?Vz(e):[]}var Yz=Xz;const tO=kt(Yz),Qz=e=>e.match(/\[\[.*?\]\]/g)||[],Jz=e=>!/^\w+:\/\/\/?\w/i.test(e),Zz=e=>e!=="",eB=e=>{const t=md(e,"][",0);return t!=null?t:e},tB=e=>e.substr(2,e.length-4),md=(e,t,r)=>{const n=e.split(t);if(n.length!==1)return r<0?n[n.length+r]:n[r]},rB=e=>md(e,"->",-1)||md(e,"<-",0)||md(e,"|",-1)||e;function ka(e,t){let r=tO(Qz(e).map(tB).map(eB).map(rB).filter(Zz));return t&&(r=r.filter(Jz)),r}function nB(e,t,r,n){if(!e.passages.some(i=>i.id===t.id))throw new Error("This passage does not belong to this story.");return i=>{const a=ka(n),l=ka(r).filter(x=>!a.includes(x)&&!e.passages.some(O=>O.name===x));if(l.length===0)return;const u=Bo(),d=25;let p=t.top+t.height+d;const g=l.length*u.width+(l.length-1)*d;let m=t.left+(t.width-g)/2;const w=()=>e.passages.some(x=>Bh(x,{left:m,top:p,height:u.height,width:g}));for(;w()&&(m+=u.width+d,!(!w()||(m-=2*(u.width+d),!w())));)m+=u.width+d,p+=u.height+d;i({type:"createPassages",storyId:e.id,props:l.map(x=>{const O={left:m,name:x,top:p};return m+=u.width+d,O})})}}function iB(e,t,r){const n=Ct();if(r.name.trim()==="")throw new Error("Story name cannot be empty");if(e.some(i=>i.name.toLowerCase()===r.name.toLowerCase()))throw new Error('There is already a story named "'.concat(r.name,'"'));return i=>(i({type:"createStory",props:{id:n,storyFormat:t.storyFormat.name,storyFormatVersion:t.storyFormat.version,...r}}),n)}function Yu(e,t){if(t.includes(e)){let r=1;for(;t.includes("".concat(e," ").concat(r));)r++;return"".concat(e," ").concat(r)}return e}function rO(e,t,r){if(!Number.isFinite(t)||!Number.isFinite(r))throw new Error("Center must be a finite coordinate pair");const n=Bo(),i=Yu(n.name,e.passages.map(d=>d.name)),a=25,l={height:n.height,left:Math.max(t-n.width/2,0),top:Math.max(r-n.height/2,0),width:n.width};e.snapToGrid&&(l.left=Math.round(l.left/a)*a,l.top=Math.round(l.top/a)*a);const u=()=>e.passages.some(d=>Bh(d,l));for(;u()&&(l.left+=l.width+a,!(!u()||(l.left-=l.width+a,l.top+=l.height+a,!u())));){if(l.left>=l.width+a){if(l.left-=l.width+a,!u())break;l.left+=l.width+a}l.top+=l.height+a}return{type:"createPassage",storyId:e.id,props:{...l,story:e.id,name:i}}}function oB(e,t){return{type:"deletePassages",storyId:e.id,passageIds:t.map(r=>r.id)}}function aB(e){return{type:"deleteStory",storyId:e.id}}function sB(e,t){const r=Ct();return{type:"createStory",props:{...e,id:r,ifid:Ct(),name:Yu(e.name,t.map(n=>n.name)),passages:e.passages.map(n=>({...n,id:Ct(),story:r}))}}}function lB(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var nO=lB,uB=Tc,cB=Pc,fB="[object Symbol]";function dB(e){return typeof e=="symbol"||cB(e)&&uB(e)==fB}var Nc=dB,CE=kc,hB=nO,pB=Wn,gB=Nc,vB=1/0,kE=CE?CE.prototype:void 0,TE=kE?kE.toString:void 0;function iO(e){if(typeof e=="string")return e;if(pB(e))return hB(e,iO)+"";if(gB(e))return TE?TE.call(e):"";var t=e+"";return t=="0"&&1/e==-vB?"-0":t}var mB=iO,yB=mB;function wB(e){return e==null?"":yB(e)}var S0=wB,bB=S0,oO=/[\\^$.*+?()[\]{}|]/g,xB=RegExp(oO.source);function EB(e){return e=bB(e),e&&xB.test(e)?e.replace(oO,"\\$&"):e}var SB=EB;const aO=kt(SB);function sO(e,t){return new RegExp(t.useRegexes?e:aO(e),t.matchCase?"g":"gi")}function CB(e){return e.replace(/\$/g,"$$$$")}function Qi(e){return Array.isArray?Array.isArray(e):cO(e)==="[object Array]"}const kB=1/0;function TB(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-kB?"-0":t}function OB(e){return e==null?"":TB(e)}function di(e){return typeof e=="string"}function lO(e){return typeof e=="number"}function PB(e){return e===!0||e===!1||LB(e)&&cO(e)=="[object Boolean]"}function uO(e){return typeof e=="object"}function LB(e){return uO(e)&&e!==null}function rn(e){return e!=null}function Wg(e){return!e.trim().length}function cO(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const NB="Incorrect 'index' type",AB=e=>"Invalid value for key ".concat(e),jB=e=>"Pattern length exceeds max of ".concat(e,"."),IB=e=>"Missing ".concat(e," property in key"),_B=e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"),OE=Object.prototype.hasOwnProperty;class MB{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let i=fO(n);r+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function fO(e){let t=null,r=null,n=null,i=1,a=null;if(di(e)||Qi(e))n=e,t=PE(e),r=Nm(e);else{if(!OE.call(e,"name"))throw new Error(IB("name"));const l=e.name;if(n=l,OE.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(_B(l));t=PE(l),r=Nm(l),a=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:a}}function PE(e){return Qi(e)?e:e.split(".")}function Nm(e){return Qi(e)?e.join("."):e}function RB(e,t){let r=[],n=!1;const i=(a,l,u)=>{if(rn(a))if(!l[u])r.push(a);else{let d=l[u];const p=a[d];if(!rn(p))return;if(u===l.length-1&&(di(p)||lO(p)||PB(p)))r.push(OB(p));else if(Qi(p)){n=!0;for(let g=0,m=p.length;g<m;g+=1)i(p[g],l,u+1)}else l.length&&i(p,l,u+1)}};return i(e,di(t)?t.split("."):t,0),n?r:r[0]}const $B={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},FB={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},DB={location:0,threshold:.6,distance:100},zB={useExtendedSearch:!1,getFn:RB,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Je={...FB,...$B,...DB,...zB};const BB=/[^ ]+/g;function HB(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(i){const a=i.match(BB).length;if(r.has(a))return r.get(a);const l=1/Math.pow(a,.5*e),u=parseFloat(Math.round(l*n)/n);return r.set(a,u),u},clear(){r.clear()}}}class C0{constructor({getFn:t=Je.getFn,fieldNormWeight:r=Je.fieldNormWeight}={}){this.norm=HB(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,di(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();di(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!rn(t)||Wg(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((i,a)=>{let l=i.getFn?i.getFn(t):this.getFn(t,i.path);if(rn(l)){if(Qi(l)){let u=[];const d=[{nestedArrIndex:-1,value:l}];for(;d.length;){const{nestedArrIndex:p,value:g}=d.pop();if(rn(g))if(di(g)&&!Wg(g)){let m={v:g,i:p,n:this.norm.get(g)};u.push(m)}else Qi(g)&&g.forEach((m,w)=>{d.push({nestedArrIndex:w,value:m})})}n.$[a]=u}else if(di(l)&&!Wg(l)){let u={v:l,n:this.norm.get(l)};n.$[a]=u}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function dO(e,t,{getFn:r=Je.getFn,fieldNormWeight:n=Je.fieldNormWeight}={}){const i=new C0({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(fO)),i.setSources(t),i.create(),i}function UB(e,{getFn:t=Je.getFn,fieldNormWeight:r=Je.fieldNormWeight}={}){const{keys:n,records:i}=e,a=new C0({getFn:t,fieldNormWeight:r});return a.setKeys(n),a.setIndexRecords(i),a}function Mf(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=Je.distance,ignoreLocation:a=Je.ignoreLocation}={}){const l=t/e.length;if(a)return l;const u=Math.abs(n-r);return i?l+u/i:u?1:l}function WB(e=[],t=Je.minMatchCharLength){let r=[],n=-1,i=-1,a=0;for(let l=e.length;a<l;a+=1){let u=e[a];u&&n===-1?n=a:!u&&n!==-1&&(i=a-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[a-1]&&a-n>=t&&r.push([n,a-1]),r}const ua=32;function KB(e,t,r,{location:n=Je.location,distance:i=Je.distance,threshold:a=Je.threshold,findAllMatches:l=Je.findAllMatches,minMatchCharLength:u=Je.minMatchCharLength,includeMatches:d=Je.includeMatches,ignoreLocation:p=Je.ignoreLocation}={}){if(t.length>ua)throw new Error(jB(ua));const g=t.length,m=e.length,w=Math.max(0,Math.min(n,m));let x=a,O=w;const I=u>1||d,P=I?Array(m):[];let T;for(;(T=e.indexOf(t,O))>-1;){let H=Mf(t,{currentLocation:T,expectedLocation:w,distance:i,ignoreLocation:p});if(x=Math.min(H,x),O=T+g,I){let q=0;for(;q<g;)P[T+q]=1,q+=1}}O=-1;let N=[],R=1,_=g+m;const $=1<<g-1;for(let H=0;H<g;H+=1){let q=0,re=_;for(;q<re;)Mf(t,{errors:H,currentLocation:w+re,expectedLocation:w,distance:i,ignoreLocation:p})<=x?q=re:_=re,re=Math.floor((_-q)/2+q);_=re;let oe=Math.max(1,w-re+1),le=l?m:Math.min(w+re,m)+g,we=Array(le+2);we[le+1]=(1<<H)-1;for(let U=le;U>=oe;U-=1){let F=U-1,be=r[e.charAt(F)];if(I&&(P[F]=+!!be),we[U]=(we[U+1]<<1|1)&be,H&&(we[U]|=(N[U+1]|N[U])<<1|1|N[U+1]),we[U]&$&&(R=Mf(t,{errors:H,currentLocation:F,expectedLocation:w,distance:i,ignoreLocation:p}),R<=x)){if(x=R,O=F,O<=w)break;oe=Math.max(1,2*w-O)}}if(Mf(t,{errors:H+1,currentLocation:w,expectedLocation:w,distance:i,ignoreLocation:p})>x)break;N=we}const z={isMatch:O>=0,score:Math.max(.001,R)};if(I){const H=WB(P,u);H.length?d&&(z.indices=H):z.isMatch=!1}return z}function GB(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}class hO{constructor(t,{location:r=Je.location,threshold:n=Je.threshold,distance:i=Je.distance,includeMatches:a=Je.includeMatches,findAllMatches:l=Je.findAllMatches,minMatchCharLength:u=Je.minMatchCharLength,isCaseSensitive:d=Je.isCaseSensitive,ignoreLocation:p=Je.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:a,findAllMatches:l,minMatchCharLength:u,isCaseSensitive:d,ignoreLocation:p},this.pattern=d?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const g=(w,x)=>{this.chunks.push({pattern:w,alphabet:GB(w),startIndex:x})},m=this.pattern.length;if(m>ua){let w=0;const x=m%ua,O=m-x;for(;w<O;)g(this.pattern.substr(w,ua),w),w+=ua;if(x){const I=m-ua;g(this.pattern.substr(I),I)}}else g(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let O={isMatch:!0,score:0};return n&&(O.indices=[[0,t.length-1]]),O}const{location:i,distance:a,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:p}=this.options;let g=[],m=0,w=!1;this.chunks.forEach(({pattern:O,alphabet:I,startIndex:P})=>{const{isMatch:T,score:N,indices:R}=KB(t,O,I,{location:i+P,distance:a,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:n,ignoreLocation:p});T&&(w=!0),m+=N,T&&R&&(g=[...g,...R])});let x={isMatch:w,score:w?m/this.chunks.length:1};return w&&n&&(x.indices=g),x}}class Ho{constructor(t){this.pattern=t}static isMultiMatch(t){return LE(t,this.multiRegex)}static isSingleMatch(t){return LE(t,this.singleRegex)}search(){}}function LE(e,t){const r=e.match(t);return r?r[1]:null}class qB extends Ho{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class VB extends Ho{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class XB extends Ho{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class YB extends Ho{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class QB extends Ho{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class JB extends Ho{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class pO extends Ho{constructor(t,{location:r=Je.location,threshold:n=Je.threshold,distance:i=Je.distance,includeMatches:a=Je.includeMatches,findAllMatches:l=Je.findAllMatches,minMatchCharLength:u=Je.minMatchCharLength,isCaseSensitive:d=Je.isCaseSensitive,ignoreLocation:p=Je.ignoreLocation}={}){super(t),this._bitapSearch=new hO(t,{location:r,threshold:n,distance:i,includeMatches:a,findAllMatches:l,minMatchCharLength:u,isCaseSensitive:d,ignoreLocation:p})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class gO extends Ho{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const i=[],a=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+a,i.push([n,r-1]);const l=!!i.length;return{isMatch:l,score:l?0:1,indices:i}}}const Am=[qB,gO,XB,YB,JB,QB,VB,pO],NE=Am.length,ZB=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,eH="|";function tH(e,t={}){return e.split(eH).map(r=>{let n=r.trim().split(ZB).filter(a=>a&&!!a.trim()),i=[];for(let a=0,l=n.length;a<l;a+=1){const u=n[a];let d=!1,p=-1;for(;!d&&++p<NE;){const g=Am[p];let m=g.isMultiMatch(u);m&&(i.push(new g(m,t)),d=!0)}if(!d)for(p=-1;++p<NE;){const g=Am[p];let m=g.isSingleMatch(u);if(m){i.push(new g(m,t));break}}}return i})}const rH=new Set([pO.type,gO.type]);class nH{constructor(t,{isCaseSensitive:r=Je.isCaseSensitive,includeMatches:n=Je.includeMatches,minMatchCharLength:i=Je.minMatchCharLength,ignoreLocation:a=Je.ignoreLocation,findAllMatches:l=Je.findAllMatches,location:u=Je.location,threshold:d=Je.threshold,distance:p=Je.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:i,findAllMatches:l,ignoreLocation:a,location:u,threshold:d,distance:p},this.pattern=r?t:t.toLowerCase(),this.query=tH(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let a=0,l=[],u=0;for(let d=0,p=r.length;d<p;d+=1){const g=r[d];l.length=0,a=0;for(let m=0,w=g.length;m<w;m+=1){const x=g[m],{isMatch:O,indices:I,score:P}=x.search(t);if(O){if(a+=1,u+=P,n){const T=x.constructor.type;rH.has(T)?l=[...l,...I]:l.push(I)}}else{u=0,a=0,l.length=0;break}}if(a){let m={isMatch:!0,score:u/a};return n&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const jm=[];function iH(...e){jm.push(...e)}function Im(e,t){for(let r=0,n=jm.length;r<n;r+=1){let i=jm[r];if(i.condition(e,t))return new i(e,t)}return new hO(e,t)}const ih={AND:"$and",OR:"$or"},_m={PATH:"$path",PATTERN:"$val"},Mm=e=>!!(e[ih.AND]||e[ih.OR]),oH=e=>!!e[_m.PATH],aH=e=>!Qi(e)&&uO(e)&&!Mm(e),AE=e=>({[ih.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function vO(e,t,{auto:r=!0}={}){const n=i=>{let a=Object.keys(i);const l=oH(i);if(!l&&a.length>1&&!Mm(i))return n(AE(i));if(aH(i)){const d=l?i[_m.PATH]:a[0],p=l?i[_m.PATTERN]:i[d];if(!di(p))throw new Error(AB(d));const g={keyId:Nm(d),pattern:p};return r&&(g.searcher=Im(p,t)),g}let u={children:[],operator:a[0]};return a.forEach(d=>{const p=i[d];Qi(p)&&p.forEach(g=>{u.children.push(n(g))})}),u};return Mm(e)||(e=AE(e)),n(e)}function sH(e,{ignoreFieldNorm:t=Je.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:a,score:l})=>{const u=i?i.weight:null;n*=Math.pow(l===0&&u?Number.EPSILON:l,(u||1)*(t?1:a))}),r.score=n})}function lH(e,t){const r=e.matches;t.matches=[],rn(r)&&r.forEach(n=>{if(!rn(n.indices)||!n.indices.length)return;const{indices:i,value:a}=n;let l={indices:i,value:a};n.key&&(l.key=n.key.src),n.idx>-1&&(l.refIndex=n.idx),t.matches.push(l)})}function uH(e,t){t.score=e.score}function cH(e,t,{includeMatches:r=Je.includeMatches,includeScore:n=Je.includeScore}={}){const i=[];return r&&i.push(lH),n&&i.push(uH),e.map(a=>{const{idx:l}=a,u={item:t[l],refIndex:l};return i.length&&i.forEach(d=>{d(a,u)}),u})}class ol{constructor(t,r={},n){this.options={...Je,...r},this.options.useExtendedSearch,this._keyStore=new MB(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof C0))throw new Error(NB);this._myIndex=r||dO(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){rn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,i=this._docs.length;n<i;n+=1){const a=this._docs[n];t(a,n)&&(this.removeAt(n),n-=1,i-=1,r.push(a))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:a,sortFn:l,ignoreFieldNorm:u}=this.options;let d=di(t)?di(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return sH(d,{ignoreFieldNorm:u}),a&&d.sort(l),lO(r)&&r>-1&&(d=d.slice(0,r)),cH(d,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){const r=Im(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:a,i:l,n:u})=>{if(!rn(a))return;const{isMatch:d,score:p,indices:g}=r.searchIn(a);d&&i.push({item:a,idx:l,matches:[{score:p,value:a,norm:u,indices:g}]})}),i}_searchLogical(t){const r=vO(t,this.options),n=(u,d,p)=>{if(!u.children){const{keyId:m,searcher:w}=u,x=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(d,m),searcher:w});return x&&x.length?[{idx:p,item:d,matches:x}]:[]}const g=[];for(let m=0,w=u.children.length;m<w;m+=1){const x=u.children[m],O=n(x,d,p);if(O.length)g.push(...O);else if(u.operator===ih.AND)return[]}return g},i=this._myIndex.records,a={},l=[];return i.forEach(({$:u,i:d})=>{if(rn(u)){let p=n(r,u,d);p.length&&(a[d]||(a[d]={idx:d,item:u,matches:[]},l.push(a[d])),p.forEach(({matches:g})=>{a[d].matches.push(...g)}))}}),l}_searchObjectList(t){const r=Im(t,this.options),{keys:n,records:i}=this._myIndex,a=[];return i.forEach(({$:l,i:u})=>{if(!rn(l))return;let d=[];n.forEach((p,g)=>{d.push(...this._findMatches({key:p,value:l[g],searcher:r}))}),d.length&&a.push({idx:u,item:l,matches:d})}),a}_findMatches({key:t,value:r,searcher:n}){if(!rn(r))return[];let i=[];if(Qi(r))r.forEach(({v:a,i:l,n:u})=>{if(!rn(a))return;const{isMatch:d,score:p,indices:g}=n.searchIn(a);d&&i.push({score:p,key:t,value:a,idx:l,norm:u,indices:g})});else{const{v:a,n:l}=r,{isMatch:u,score:d,indices:p}=n.searchIn(a);u&&i.push({score:d,key:t,value:a,norm:l,indices:p})}return i}}ol.version="6.6.2";ol.createIndex=dO;ol.parseIndex=UB;ol.config=Je;ol.parseQuery=vO;iH(nH);function Vi(e,t,r){const i=yt(e,t).passages.find(a=>a.id===r);if(i)return i;throw new Error('There is no passage with ID "'.concat(r,'" in a story with ID "').concat(t,'".'))}function oh(e,t,r){const i=yt(e,t).passages.find(a=>a.name===r);if(i)return i;throw new Error('There is no passage with name "'.concat(r,'" in a story with ID "').concat(t,'".'))}function jE(e,t){const r=t!=null?t:a=>ka(a,!0),n=new Map(e.map(a=>[a.name,a])),i={draggable:{broken:new Set,connections:new Map,self:new Set},fixed:{broken:new Set,connections:new Map,self:new Set}};return e.forEach(a=>r(a.text).forEach(l=>{if(l===a.name)(a.selected?i.draggable:i.fixed).self.add(a);else{const u=n.get(l);if(u){const d=a.selected||u.selected?i.draggable:i.fixed;d.connections.has(a)?d.connections.get(a).add(u):d.connections.set(a,new Set([u]))}else(a.selected?i.draggable:i.fixed).broken.add(a)}})),i}function fH(e,t,r=5){return t.trim()===""?[]:new ol(e,{ignoreLocation:!0,keys:[{name:"name",weight:.6},{name:"text",weight:.4}]}).search(t,{limit:r}).map(({item:i})=>i)}function dH(e,t,r){if(t==="")return[];const{includePassageNames:n,matchCase:i,useRegexes:a}=r;let l;try{l=sO(t,{matchCase:i,useRegexes:a})}catch{return[]}return e.reduce((u,d)=>l.test(d.text)||n&&l.test(d.name)?[...u,d]:u,[])}function mO(e){return Array.from(e.passages.reduce((t,r)=>(r.tags&&r.tags.forEach(n=>t.add(n)),t),new Set)).sort()}function hH(e){const t=e.passages.reduce((n,i)=>[...n,...ka(i.text).filter(a=>n.indexOf(a)===-1)],[]);return{brokenLinks:tO(t).filter(n=>!e.passages.some(i=>i.name===n)),links:t,characters:e.passages.reduce((n,i)=>n+i.text.length,0),passages:e.passages.length,words:e.passages.reduce((n,i)=>n+i.text.split(/\s+/).length,0)}}function k0(e){return Array.from(e.reduce((t,r)=>(r.tags&&r.tags.forEach(n=>t.add(n)),t),new Set)).sort()}function yt(e,t){const r=e.find(n=>n.id===t);if(r)return r;throw new Error('There is no story with ID "'.concat(t,'".'))}function yO(e,t){const r=e.find(n=>n.name===t);if(r)return r;throw new Error('There is no story with name "'.concat(t,'".'))}function wO(e){return e.text===""&&e.tags.length===0&&e.width===100&&e.height===100}function pH(e,t,r,n){if(!e.passages.some(i=>i.id===t.id))throw new Error("This passage does not belong to this story.");return i=>{const a=ka(n),l=ka(r),d=a.filter(p=>!l.includes(p)).reduce((p,g)=>{const m=e.passages.find(w=>w.name===g);return!m||!wO(m)||e.startPassage===m.id||e.passages.some(w=>w.id!==t.id&&ka(w.text).includes(g))?p:[...p,m.id]},[]);d.length>0&&i({type:"deletePassages",passageIds:d,storyId:e.id})}}function Ro(e,t,r,n={}){if(!e.passages.some(i=>i.id===t.id))throw new Error("This passage does not belong to this story.");if("name"in r&&e.passages.filter(i=>i.name===r.name).some(i=>i.id!==t.id))throw new Error('There is already a passage named "'.concat(r.name,'".'));return(i,a)=>{const l=t.name,u=t.text;if(i({props:r,type:"updatePassage",passageId:t.id,storyId:e.id}),!n.dontUpdateOthers&&r.text){i(pH(e,t,r.text,u));const d=yt(a(),e.id);i(nB(d,t,r.text,u))}if(r.name){const d=aO(l),p=r.name.replace(/\$/g,"$$$$"),g=new RegExp("\\[\\["+d+"(\\]\\[.*?)?\\]\\]","g"),m=new RegExp("\\[\\[(.*?)(\\||->)"+d+"(\\]\\[.*?)?\\]\\]","g"),w=new RegExp("\\[\\["+d+"(<-.*?)(\\]\\[.*?)?\\]\\]","g");e.passages.forEach(x=>{if(g.test(x.text)||m.test(x.text)||w.test(x.text)){let O=x.text;O=O.replace(g,"[["+p+"$1]]"),O=O.replace(m,"[[$1$2"+p+"$3]]"),O=O.replace(w,"[["+p+"$1$2]]"),Ro(e,x,{text:O},n)(i,a)}})}}}function ah(e,t,r,n){const{matchCase:i,useRegexes:a}=n,l=sO(t,{matchCase:i,useRegexes:a}),u=a?r:CB(r);return e.replace(l,u)}function gH(e,t,r,n,i){return(a,l)=>{if(r==="")throw new Error("Can't replace an empty string");if(t.story!==e.id)throw new Error("Passage does not belong to story");const{includePassageNames:u}=i,d={},p=ah(t.text,r,n,i);if(p!==t.text&&(d.text=p),u){const g=ah(t.name,r,n,i);g!==t.name&&(d.name=g)}Object.keys(d).length>0&&Ro(e,t,d)(a,l)}}function vH(e,t,r,n){return(i,a)=>{if(t==="")throw new Error("Can't replace an empty string");if(n.includePassageNames){for(const l of e.passages){const u=ah(l.name,t,r,n);u!==l.name&&Ro(e,l,{name:u})(i,a)}for(const l of e.passages){const u=ah(l.text,t,r,n);u!==l.text&&Ro(e,l,{text:u})(i,a)}}else for(const l of e.passages)gH(e,l,t,r,n)(i,a)}}function IE(e,t){return r=>{let n={};for(const i of e.passages){const a=i.highlighted,l=t.includes(i.id);l!==a&&(n[i.id]={highlighted:l})}Object.keys(n).length>0&&r({passageUpdates:n,type:"updatePassages",storyId:e.id})}}function zr(e,t=".html"){return e.name.replace(/[^\w. -]/g,"_")+t}function mH(e,t){return e.forEach(r=>{if(e.some(n=>n!==r&&zr(n)===zr(r)))throw new Error('Stories to import cannot have the same name: "'.concat(r.name,'"'))}),r=>{e.forEach(n=>{const i={...n};delete i.id;const a=t.find(l=>zr(l)===zr(n));a?(i.passages&&(i.passages=i.passages.map(l=>({...l,story:a.id}))),r({props:i,type:"updateStory",storyId:a.id})):r({props:i,type:"createStory"})})}}function yH(e,t,r,n){const i={};if(!Number.isFinite(r)||!Number.isFinite(n))throw new Error("Offset must be a finite number.");return t.forEach(a=>{const l=e.passages.find(p=>p.id===a);if(!l)throw new Error('There is no passage in this story with ID "'.concat(a,'".'));let u=Math.max(l.left+r,0),d=Math.max(l.top+n,0);e.snapToGrid&&(u=Math.round(u/25)*25,d=Math.round(d/25)*25),i[l.id]={left:u,top:d}}),{type:"updatePassages",passageUpdates:i,storyId:e.id}}function al(e){return e.length>0&&!/\s/.test(e)}function wH(e,t,r){if(!al(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));return n=>{const i={};if(e.passages.forEach(a=>{a.tags.includes(t)&&(i[a.id]={tags:a.tags.map(l=>l===t?r:l)})}),Object.keys(i).length>0){n({type:"updatePassages",passageUpdates:i,storyId:e.id});const a={...e.tagColors};delete a[t],a[r]=e.tagColors[t],n({type:"updateStory",props:{tagColors:a},storyId:e.id})}}}function bH(e,t,r){if(!al(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));return n=>{e.forEach(i=>{i.tags.includes(t)&&n({type:"updateStory",storyId:i.id,props:{tags:i.tags.map(a=>a===t?r:a)}})})}}function xH(e,t){if(t.story!==e.id)throw new Error("This passage does not belong to this story");return r=>{t.selected&&r({type:"updatePassage",passageId:t.id,props:{selected:!1},storyId:e.id})}}function EH(e){return t=>{const r={};e.passages.forEach(n=>{n.selected||(r[n.id]={selected:!0})}),Object.keys(r).length>0&&t({passageUpdates:r,type:"updatePassages",storyId:e.id})}}function bO(e,t,r){if(t.story!==e.id)throw new Error("This passage does not belong to this story");return n=>{const i={};t.selected||(i[t.id]={selected:!0}),r&&e.passages.forEach(a=>{a.id!==t.id&&a.selected&&(i[a.id]={selected:!1})}),Object.keys(i).length>0&&n({type:"updatePassages",passageUpdates:i,storyId:e.id})}}function SH(e,t,r=[]){return n=>{const i={};e.passages.forEach(a=>{if(r.find(u=>u===a.id))return;const l=Bh(t,a);a.selected!==l&&(i[a.id]={selected:l})}),Object.keys(i).length>0&&n({type:"updatePassages",passageUpdates:i,storyId:e.id})}}function CH(e){return(t,r)=>{e.selected||t({type:"updateStory",storyId:e.id,props:{selected:!1}})}}function kH(){return(e,t)=>{for(const r of t())r.selected&&e({type:"updateStory",storyId:r.id,props:{selected:!1}})}}function TH(e,t){return(r,n)=>{if(e.selected||r({type:"updateStory",storyId:e.id,props:{selected:!0}}),t)for(const i of n())i.id!==e.id&&i.selected&&r({type:"updateStory",storyId:i.id,props:{selected:!1}})}}function xO(e,t,r){if(!al(t))throw new Error('"'.concat(t,'" is not a valid tag name.'));return n=>{if(r==="none"){if(t in e.tagColors){const i={...e.tagColors};delete i[t],n({type:"updateStory",props:{tagColors:i},storyId:e.id})}}else n({type:"updateStory",props:{tagColors:{...e.tagColors,[t]:r}},storyId:e.id})}}function OH(e,t,r){if(t.story!==e.id)throw new Error("This passage does not belong to this story.");if(!al(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));if(t.tags.includes(r))throw new Error('This passage already has the tag "'.concat(r,'".'));return{type:"updatePassage",passageId:t.id,storyId:e.id,props:{tags:[...t.tags,r]}}}function PH(e,t,r){if(t.story!==e.id)throw new Error("This passage does not belong to this story.");if(!al(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));if(!t.tags.includes(r))throw new Error('This passage does not have the tag "'.concat(r,'".'));return{type:"updatePassage",passageId:t.id,storyId:e.id,props:{tags:t.tags.filter(n=>n!==r)}}}function jr(e,t,r){if(r.name&&e.filter(n=>zr(n)===zr({...n,...r})).some(n=>n.id!==t.id))throw new Error('There is already a story named "'.concat(r.name,'".'));return{props:r,storyId:t.id,type:"updateStory"}}var EO={exports:{}};(function(e,t){(function(n,i){e.exports=i(C)})(typeof self<"u"?self:dr,function(r){return function(n){var i={};function a(l){if(i[l])return i[l].exports;var u=i[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=n,a.c=i,a.d=function(l,u,d){a.o(l,u)||Object.defineProperty(l,u,{enumerable:!0,get:d})},a.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},a.t=function(l,u){if(u&1&&(l=a(l)),u&8||u&4&&typeof l=="object"&&l&&l.__esModule)return l;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:l}),u&2&&typeof l!="string")for(var p in l)a.d(d,p,(function(g){return l[g]}).bind(null,p));return d},a.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(u,"a",u),u},a.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},a.p="/dist/",a(a.s="./src/thunk-reducer.js")}({"./src/thunk-reducer.js":function(n,i,a){a.r(i),a.d(i,"useThunkReducer",function(){return m});var l=a("react");function u(w,x){return g(w)||p(w,x)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(w,x){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]"){var O=[],I=!0,P=!1,T=void 0;try{for(var N=w[Symbol.iterator](),R;!(I=(R=N.next()).done)&&(O.push(R.value),!(x&&O.length===x));I=!0);}catch(_){P=!0,T=_}finally{try{!I&&N.return!=null&&N.return()}finally{if(P)throw T}}return O}}function g(w){if(Array.isArray(w))return w}function m(w,x){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(q){return q},I=Object(l.useState)(O(x)),P=u(I,2),T=P[0],N=P[1],R=Object(l.useRef)(T),_=Object(l.useCallback)(function(){return R.current},[R]),$=Object(l.useCallback)(function(q){R.current=q,N(q)},[R,N]),z=Object(l.useCallback)(function(q){return w(_(),q)},[w,_]),H=Object(l.useCallback)(function(q){return typeof q=="function"?q(H,_):$(z(q))},[_,$,z]);return[T,H]}i.default=m},react:function(n,i){n.exports=r}})})})(EO);var LH=EO.exports;const T0=kt(LH);function SO(e,t,r){let n=!1,i=!1;const a=e.map(l=>{if(l.id!==t)return l;if(n=!0,l.passages.some(p=>p.id===r.id))return console.warn('There is already a passage in this story with ID "'.concat(r.id,'", taking no action')),l;if("name"in r&&l.passages.some(p=>p.name===r.name))return console.warn('There is already a passage in this story with name "'.concat(r.name,'", taking no action')),l;const u={...Bo(),id:Ct(),...r,story:l.id},d={...l,lastUpdate:new Date,passages:[...l.passages,u]};return d.passages.length===1&&(d.startPassage=u.id),i=!0,d});return n?i?a:e:(console.warn('No story in state with ID "'.concat(t,'", taking no action')),e)}function NH(e,t,r){return r.reduce((n,i)=>SO(n,t,i),e)}function AH(e,t){if("id"in t&&e.some(n=>n.id===t.id))return console.warn('There is already a story in state with ID "'.concat(t.id,'", taking no action')),e;if("name"in t&&e.some(n=>n.name===t.name))return console.warn('There is already a story in state with name "'.concat(t.name,'", taking no action')),e;let r={id:Ct(),...tl(),ifid:Ct().toUpperCase(),lastUpdate:new Date,passages:[],tags:[],tagColors:{},...t};return r.passages=r.passages.map(n=>({...Bo,...n,story:r.id})),[...e,r]}function CO(e,t,r){let n=!1,i=!1;const a=e.map(l=>{if(l.id!==t)return l;n=!0;const u={...l,passages:l.passages.filter(d=>d.id===r?(i=!0,!1):!0)};return i?(u.lastUpdate=new Date,u):l});return n?i?a:(console.warn('Asked to delete a passage with ID "'.concat(r,'", but it does not exist in story ID ').concat(t,", taking no action")),e):(console.warn('No story in state with ID "'.concat(t,'", taking no action')),e)}function jH(e,t,r){return r.reduce((n,i)=>CO(n,t,i),e)}function IH(e,t){let r=!1;const n=e.filter(i=>i.id===t?(r=!0,!1):!0);return r?n:(console.warn('Asked to delete a story with ID "'.concat(t,'", but it does not exist in state')),e)}function _H(e,t){return[...t]}var Rm={exports:{}};const MH="2.0.0",kO=256,RH=Number.MAX_SAFE_INTEGER||9007199254740991,$H=16,FH=kO-6,DH=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Gh={MAX_LENGTH:kO,MAX_SAFE_COMPONENT_LENGTH:$H,MAX_SAFE_BUILD_LENGTH:FH,MAX_SAFE_INTEGER:RH,RELEASE_TYPES:DH,SEMVER_SPEC_VERSION:MH,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const zH=typeof or.process=="object"&&or.process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var qh=zH;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=Gh,a=qh;t=e.exports={};const l=t.re=[],u=t.safeRe=[],d=t.src=[],p=t.t={};let g=0;const m="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",i],[m,n]],x=I=>{for(const[P,T]of w)I=I.split("".concat(P,"*")).join("".concat(P,"{0,").concat(T,"}")).split("".concat(P,"+")).join("".concat(P,"{1,").concat(T,"}"));return I},O=(I,P,T)=>{const N=x(P),R=g++;a(I,R,P),p[I]=R,d[R]=P,l[R]=new RegExp(P,T?"g":void 0),u[R]=new RegExp(N,T?"g":void 0)};O("NUMERICIDENTIFIER","0|[1-9]\\d*"),O("NUMERICIDENTIFIERLOOSE","\\d+"),O("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(m,"*")),O("MAINVERSION","(".concat(d[p.NUMERICIDENTIFIER],")\\.")+"(".concat(d[p.NUMERICIDENTIFIER],")\\.")+"(".concat(d[p.NUMERICIDENTIFIER],")")),O("MAINVERSIONLOOSE","(".concat(d[p.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(d[p.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(d[p.NUMERICIDENTIFIERLOOSE],")")),O("PRERELEASEIDENTIFIER","(?:".concat(d[p.NUMERICIDENTIFIER],"|").concat(d[p.NONNUMERICIDENTIFIER],")")),O("PRERELEASEIDENTIFIERLOOSE","(?:".concat(d[p.NUMERICIDENTIFIERLOOSE],"|").concat(d[p.NONNUMERICIDENTIFIER],")")),O("PRERELEASE","(?:-(".concat(d[p.PRERELEASEIDENTIFIER],"(?:\\.").concat(d[p.PRERELEASEIDENTIFIER],")*))")),O("PRERELEASELOOSE","(?:-?(".concat(d[p.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(d[p.PRERELEASEIDENTIFIERLOOSE],")*))")),O("BUILDIDENTIFIER","".concat(m,"+")),O("BUILD","(?:\\+(".concat(d[p.BUILDIDENTIFIER],"(?:\\.").concat(d[p.BUILDIDENTIFIER],")*))")),O("FULLPLAIN","v?".concat(d[p.MAINVERSION]).concat(d[p.PRERELEASE],"?").concat(d[p.BUILD],"?")),O("FULL","^".concat(d[p.FULLPLAIN],"$")),O("LOOSEPLAIN","[v=\\s]*".concat(d[p.MAINVERSIONLOOSE]).concat(d[p.PRERELEASELOOSE],"?").concat(d[p.BUILD],"?")),O("LOOSE","^".concat(d[p.LOOSEPLAIN],"$")),O("GTLT","((?:<|>)?=?)"),O("XRANGEIDENTIFIERLOOSE","".concat(d[p.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),O("XRANGEIDENTIFIER","".concat(d[p.NUMERICIDENTIFIER],"|x|X|\\*")),O("XRANGEPLAIN","[v=\\s]*(".concat(d[p.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(d[p.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(d[p.XRANGEIDENTIFIER],")")+"(?:".concat(d[p.PRERELEASE],")?").concat(d[p.BUILD],"?")+")?)?"),O("XRANGEPLAINLOOSE","[v=\\s]*(".concat(d[p.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(d[p.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(d[p.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(d[p.PRERELEASELOOSE],")?").concat(d[p.BUILD],"?")+")?)?"),O("XRANGE","^".concat(d[p.GTLT],"\\s*").concat(d[p.XRANGEPLAIN],"$")),O("XRANGELOOSE","^".concat(d[p.GTLT],"\\s*").concat(d[p.XRANGEPLAINLOOSE],"$")),O("COERCE","(^|[^\\d])(\\d{1,".concat(r,"})")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:$|[^\\d])"),O("COERCERTL",d[p.COERCE],!0),O("LONETILDE","(?:~>?)"),O("TILDETRIM","(\\s*)".concat(d[p.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",O("TILDE","^".concat(d[p.LONETILDE]).concat(d[p.XRANGEPLAIN],"$")),O("TILDELOOSE","^".concat(d[p.LONETILDE]).concat(d[p.XRANGEPLAINLOOSE],"$")),O("LONECARET","(?:\\^)"),O("CARETTRIM","(\\s*)".concat(d[p.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",O("CARET","^".concat(d[p.LONECARET]).concat(d[p.XRANGEPLAIN],"$")),O("CARETLOOSE","^".concat(d[p.LONECARET]).concat(d[p.XRANGEPLAINLOOSE],"$")),O("COMPARATORLOOSE","^".concat(d[p.GTLT],"\\s*(").concat(d[p.LOOSEPLAIN],")$|^$")),O("COMPARATOR","^".concat(d[p.GTLT],"\\s*(").concat(d[p.FULLPLAIN],")$|^$")),O("COMPARATORTRIM","(\\s*)".concat(d[p.GTLT],"\\s*(").concat(d[p.LOOSEPLAIN],"|").concat(d[p.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",O("HYPHENRANGE","^\\s*(".concat(d[p.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(d[p.XRANGEPLAIN],")")+"\\s*$"),O("HYPHENRANGELOOSE","^\\s*(".concat(d[p.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(d[p.XRANGEPLAINLOOSE],")")+"\\s*$"),O("STAR","(<|>)?=?\\s*\\*"),O("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),O("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Rm,Rm.exports);var Ac=Rm.exports;const BH=Object.freeze({loose:!0}),HH=Object.freeze({}),UH=e=>e?typeof e!="object"?BH:e:HH;var O0=UH;const _E=/^[0-9]+$/,TO=(e,t)=>{const r=_E.test(e),n=_E.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},WH=(e,t)=>TO(t,e);var OO={compareIdentifiers:TO,rcompareIdentifiers:WH};const Rf=qh,{MAX_LENGTH:ME,MAX_SAFE_INTEGER:$f}=Gh,{safeRe:RE,t:$E}=Ac,KH=O0,{compareIdentifiers:ps}=OO;let GH=class ii{constructor(t,r){if(r=KH(r),t instanceof ii){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof t,'".'));if(t.length>ME)throw new TypeError("version is longer than ".concat(ME," characters"));Rf("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?RE[$E.LOOSE]:RE[$E.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>$f||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$f||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$f||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<$f)return a}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(Rf("SemVer.compare",this.version,this.options,t),!(t instanceof ii)){if(typeof t=="string"&&t===this.version)return 0;t=new ii(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ii||(t=new ii(t,this.options)),ps(this.major,t.major)||ps(this.minor,t.minor)||ps(this.patch,t.patch)}comparePre(t){if(t instanceof ii||(t=new ii(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(Rf("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return ps(n,i)}while(++r)}compareBuild(t){t instanceof ii||(t=new ii(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(Rf("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return ps(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let a=[r,i];n===!1&&(a=[r]),ps(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error("invalid increment argument: ".concat(t))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};var Mr=GH;const FE=Mr,qH=(e,t,r=!1)=>{if(e instanceof FE)return e;try{return new FE(e,t)}catch(n){if(!r)return null;throw n}};var sl=qH;const VH=sl,XH=(e,t)=>{const r=VH(e,t);return r?r.version:null};var YH=XH;const QH=sl,JH=(e,t)=>{const r=QH(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var ZH=JH;const DE=Mr,e6=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new DE(e instanceof DE?e.version:e,r).inc(t,n,i).version}catch{return null}};var t6=e6;const zE=sl,r6=(e,t)=>{const r=zE(e,null,!0),n=zE(t,null,!0),i=r.compare(n);if(i===0)return null;const a=i>0,l=a?r:n,u=a?n:r,d=!!l.prerelease.length;if(!!u.prerelease.length&&!d)return!u.patch&&!u.minor?"major":l.patch?"patch":l.minor?"minor":"major";const g=d?"pre":"";return r.major!==n.major?g+"major":r.minor!==n.minor?g+"minor":r.patch!==n.patch?g+"patch":"prerelease"};var n6=r6;const i6=Mr,o6=(e,t)=>new i6(e,t).major;var a6=o6;const s6=Mr,l6=(e,t)=>new s6(e,t).minor;var u6=l6;const c6=Mr,f6=(e,t)=>new c6(e,t).patch;var d6=f6;const h6=sl,p6=(e,t)=>{const r=h6(e,t);return r&&r.prerelease.length?r.prerelease:null};var g6=p6;const BE=Mr,v6=(e,t,r)=>new BE(e,r).compare(new BE(t,r));var Kn=v6;const m6=Kn,y6=(e,t,r)=>m6(t,e,r);var w6=y6;const b6=Kn,x6=(e,t)=>b6(e,t,!0);var E6=x6;const HE=Mr,S6=(e,t,r)=>{const n=new HE(e,r),i=new HE(t,r);return n.compare(i)||n.compareBuild(i)};var P0=S6;const C6=P0,k6=(e,t)=>e.sort((r,n)=>C6(r,n,t));var T6=k6;const O6=P0,P6=(e,t)=>e.sort((r,n)=>O6(n,r,t));var L6=P6;const N6=Kn,A6=(e,t,r)=>N6(e,t,r)>0;var Vh=A6;const j6=Kn,I6=(e,t,r)=>j6(e,t,r)<0;var Xh=I6;const PO=kt(Xh),_6=Kn,M6=(e,t,r)=>_6(e,t,r)===0;var LO=M6;const R6=Kn,$6=(e,t,r)=>R6(e,t,r)!==0;var NO=$6;const F6=Kn,D6=(e,t,r)=>F6(e,t,r)>=0;var L0=D6;const z6=Kn,B6=(e,t,r)=>z6(e,t,r)<=0;var N0=B6;const H6=LO,U6=NO,W6=Vh,K6=L0,G6=Xh,q6=N0,V6=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return H6(e,r,n);case"!=":return U6(e,r,n);case">":return W6(e,r,n);case">=":return K6(e,r,n);case"<":return G6(e,r,n);case"<=":return q6(e,r,n);default:throw new TypeError("Invalid operator: ".concat(t))}};var AO=V6;const X6=Mr,Y6=sl,{safeRe:Ff,t:Df}=Ac,Q6=(e,t)=>{if(e instanceof X6)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Ff[Df.COERCE]);else{let n;for(;(n=Ff[Df.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Ff[Df.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ff[Df.COERCERTL].lastIndex=-1}return r===null?null:Y6("".concat(r[2],".").concat(r[3]||"0",".").concat(r[4]||"0"),t)};var J6=Q6,Kg,UE;function Z6(){return UE||(UE=1,Kg=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Kg}var eU=ht;ht.Node=Aa;ht.create=ht;function ht(e){var t=this;if(t instanceof ht||(t=new ht),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}ht.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ht.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ht.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ht.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)rU(this,arguments[e]);return this.length};ht.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)nU(this,arguments[e]);return this.length};ht.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ht.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ht.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};ht.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};ht.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};ht.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};ht.prototype.map=function(e,t){t=t||this;for(var r=new ht,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};ht.prototype.mapReverse=function(e,t){t=t||this;for(var r=new ht,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};ht.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};ht.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};ht.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};ht.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};ht.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new ht;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};ht.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new ht;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};ht.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var a=[],n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=tU(this,i,r[n]);return a};ht.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function tU(e,t,r){var n=t===e.head?new Aa(r,null,t,e):new Aa(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function rU(e,t){e.tail=new Aa(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function nU(e,t){e.head=new Aa(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Aa(e,t,r,n){if(!(this instanceof Aa))return new Aa(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Z6()(ht)}catch{}const iU=eU,ca=Symbol("max"),Hi=Symbol("length"),gs=Symbol("lengthCalculator"),Au=Symbol("allowStale"),ma=Symbol("maxAge"),zi=Symbol("dispose"),WE=Symbol("noDisposeOnSet"),er=Symbol("lruList"),_n=Symbol("cache"),jO=Symbol("updateAgeOnGet"),Gg=()=>1;class oU{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ca]=t.max||1/0;const r=t.length||Gg;if(this[gs]=typeof r!="function"?Gg:r,this[Au]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[ma]=t.maxAge||0,this[zi]=t.dispose,this[WE]=t.noDisposeOnSet||!1,this[jO]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ca]=t||1/0,iu(this)}get max(){return this[ca]}set allowStale(t){this[Au]=!!t}get allowStale(){return this[Au]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[ma]=t,iu(this)}get maxAge(){return this[ma]}set lengthCalculator(t){typeof t!="function"&&(t=Gg),t!==this[gs]&&(this[gs]=t,this[Hi]=0,this[er].forEach(r=>{r.length=this[gs](r.value,r.key),this[Hi]+=r.length})),iu(this)}get lengthCalculator(){return this[gs]}get length(){return this[Hi]}get itemCount(){return this[er].length}rforEach(t,r){r=r||this;for(let n=this[er].tail;n!==null;){const i=n.prev;KE(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[er].head;n!==null;){const i=n.next;KE(this,t,n,r),n=i}}keys(){return this[er].toArray().map(t=>t.key)}values(){return this[er].toArray().map(t=>t.value)}reset(){this[zi]&&this[er]&&this[er].length&&this[er].forEach(t=>this[zi](t.key,t.value)),this[_n]=new Map,this[er]=new iU,this[Hi]=0}dump(){return this[er].map(t=>sh(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[er]}set(t,r,n){if(n=n||this[ma],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,a=this[gs](r,t);if(this[_n].has(t)){if(a>this[ca])return $s(this,this[_n].get(t)),!1;const d=this[_n].get(t).value;return this[zi]&&(this[WE]||this[zi](t,d.value)),d.now=i,d.maxAge=n,d.value=r,this[Hi]+=a-d.length,d.length=a,this.get(t),iu(this),!0}const l=new aU(t,r,a,i,n);return l.length>this[ca]?(this[zi]&&this[zi](t,r),!1):(this[Hi]+=l.length,this[er].unshift(l),this[_n].set(t,this[er].head),iu(this),!0)}has(t){if(!this[_n].has(t))return!1;const r=this[_n].get(t).value;return!sh(this,r)}get(t){return qg(this,t,!0)}peek(t){return qg(this,t,!1)}pop(){const t=this[er].tail;return t?($s(this,t),t.value):null}del(t){$s(this,this[_n].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const i=t[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{const l=a-r;l>0&&this.set(i.k,i.v,l)}}}prune(){this[_n].forEach((t,r)=>qg(this,r,!1))}}const qg=(e,t,r)=>{const n=e[_n].get(t);if(n){const i=n.value;if(sh(e,i)){if($s(e,n),!e[Au])return}else r&&(e[jO]&&(n.value.now=Date.now()),e[er].unshiftNode(n));return i.value}},sh=(e,t)=>{if(!t||!t.maxAge&&!e[ma])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[ma]&&r>e[ma]},iu=e=>{if(e[Hi]>e[ca])for(let t=e[er].tail;e[Hi]>e[ca]&&t!==null;){const r=t.prev;$s(e,t),t=r}},$s=(e,t)=>{if(t){const r=t.value;e[zi]&&e[zi](r.key,r.value),e[Hi]-=r.length,e[_n].delete(r.key),e[er].removeNode(t)}};class aU{constructor(t,r,n,i,a){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}}const KE=(e,t,r,n)=>{let i=r.value;sh(e,i)&&($s(e,r),e[Au]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var sU=oU,Vg,GE;function Gn(){if(GE)return Vg;GE=1;class e{constructor(U,F){if(F=n(F),U instanceof e)return U.loose===!!F.loose&&U.includePrerelease===!!F.includePrerelease?U:new e(U.raw,F);if(U instanceof i)return this.raw=U.value,this.set=[[U]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=U.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(be=>this.parseRange(be.trim())).filter(be=>be.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){const be=this.set[0];if(this.set=this.set.filter(pe=>!O(pe[0])),this.set.length===0)this.set=[be];else if(this.set.length>1){for(const pe of this.set)if(pe.length===1&&I(pe[0])){this.set=[pe];break}}}this.format()}format(){return this.range=this.set.map(U=>U.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(U){const be=((this.options.includePrerelease&&w)|(this.options.loose&&x))+":"+U,pe=r.get(be);if(pe)return pe;const ce=this.options.loose,ue=ce?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];U=U.replace(ue,le(this.options.includePrerelease)),a("hyphen replace",U),U=U.replace(u[d.COMPARATORTRIM],p),a("comparator trim",U),U=U.replace(u[d.TILDETRIM],g),a("tilde trim",U),U=U.replace(u[d.CARETTRIM],m),a("caret trim",U);let me=U.split(" ").map(X=>T(X,this.options)).join(" ").split(/\s+/).map(X=>oe(X,this.options));ce&&(me=me.filter(X=>(a("loose invalid filter",X,this.options),!!X.match(u[d.COMPARATORLOOSE])))),a("range list",me);const V=new Map,ee=me.map(X=>new i(X,this.options));for(const X of ee){if(O(X))return[X];V.set(X.value,X)}V.size>1&&V.has("")&&V.delete("");const se=[...V.values()];return r.set(be,se),se}intersects(U,F){if(!(U instanceof e))throw new TypeError("a Range is required");return this.set.some(be=>P(be,F)&&U.set.some(pe=>P(pe,F)&&be.every(ce=>pe.every(ue=>ce.intersects(ue,F)))))}test(U){if(!U)return!1;if(typeof U=="string")try{U=new l(U,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(we(this.set[F],U,this.options))return!0;return!1}}Vg=e;const t=sU,r=new t({max:1e3}),n=O0,i=Yh(),a=qh,l=Mr,{safeRe:u,t:d,comparatorTrimReplace:p,tildeTrimReplace:g,caretTrimReplace:m}=Ac,{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:x}=Gh,O=W=>W.value==="<0.0.0-0",I=W=>W.value==="",P=(W,U)=>{let F=!0;const be=W.slice();let pe=be.pop();for(;F&&be.length;)F=be.every(ce=>pe.intersects(ce,U)),pe=be.pop();return F},T=(W,U)=>(a("comp",W,U),W=$(W,U),a("caret",W),W=R(W,U),a("tildes",W),W=H(W,U),a("xrange",W),W=re(W,U),a("stars",W),W),N=W=>!W||W.toLowerCase()==="x"||W==="*",R=(W,U)=>W.trim().split(/\s+/).map(F=>_(F,U)).join(" "),_=(W,U)=>{const F=U.loose?u[d.TILDELOOSE]:u[d.TILDE];return W.replace(F,(be,pe,ce,ue,me)=>{a("tilde",W,be,pe,ce,ue,me);let V;return N(pe)?V="":N(ce)?V=">=".concat(pe,".0.0 <").concat(+pe+1,".0.0-0"):N(ue)?V=">=".concat(pe,".").concat(ce,".0 <").concat(pe,".").concat(+ce+1,".0-0"):me?(a("replaceTilde pr",me),V=">=".concat(pe,".").concat(ce,".").concat(ue,"-").concat(me," <").concat(pe,".").concat(+ce+1,".0-0")):V=">=".concat(pe,".").concat(ce,".").concat(ue," <").concat(pe,".").concat(+ce+1,".0-0"),a("tilde return",V),V})},$=(W,U)=>W.trim().split(/\s+/).map(F=>z(F,U)).join(" "),z=(W,U)=>{a("caret",W,U);const F=U.loose?u[d.CARETLOOSE]:u[d.CARET],be=U.includePrerelease?"-0":"";return W.replace(F,(pe,ce,ue,me,V)=>{a("caret",W,pe,ce,ue,me,V);let ee;return N(ce)?ee="":N(ue)?ee=">=".concat(ce,".0.0").concat(be," <").concat(+ce+1,".0.0-0"):N(me)?ce==="0"?ee=">=".concat(ce,".").concat(ue,".0").concat(be," <").concat(ce,".").concat(+ue+1,".0-0"):ee=">=".concat(ce,".").concat(ue,".0").concat(be," <").concat(+ce+1,".0.0-0"):V?(a("replaceCaret pr",V),ce==="0"?ue==="0"?ee=">=".concat(ce,".").concat(ue,".").concat(me,"-").concat(V," <").concat(ce,".").concat(ue,".").concat(+me+1,"-0"):ee=">=".concat(ce,".").concat(ue,".").concat(me,"-").concat(V," <").concat(ce,".").concat(+ue+1,".0-0"):ee=">=".concat(ce,".").concat(ue,".").concat(me,"-").concat(V," <").concat(+ce+1,".0.0-0")):(a("no pr"),ce==="0"?ue==="0"?ee=">=".concat(ce,".").concat(ue,".").concat(me).concat(be," <").concat(ce,".").concat(ue,".").concat(+me+1,"-0"):ee=">=".concat(ce,".").concat(ue,".").concat(me).concat(be," <").concat(ce,".").concat(+ue+1,".0-0"):ee=">=".concat(ce,".").concat(ue,".").concat(me," <").concat(+ce+1,".0.0-0")),a("caret return",ee),ee})},H=(W,U)=>(a("replaceXRanges",W,U),W.split(/\s+/).map(F=>q(F,U)).join(" ")),q=(W,U)=>{W=W.trim();const F=U.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return W.replace(F,(be,pe,ce,ue,me,V)=>{a("xRange",W,be,pe,ce,ue,me,V);const ee=N(ce),se=ee||N(ue),X=se||N(me),J=X;return pe==="="&&J&&(pe=""),V=U.includePrerelease?"-0":"",ee?pe===">"||pe==="<"?be="<0.0.0-0":be="*":pe&&J?(se&&(ue=0),me=0,pe===">"?(pe=">=",se?(ce=+ce+1,ue=0,me=0):(ue=+ue+1,me=0)):pe==="<="&&(pe="<",se?ce=+ce+1:ue=+ue+1),pe==="<"&&(V="-0"),be="".concat(pe+ce,".").concat(ue,".").concat(me).concat(V)):se?be=">=".concat(ce,".0.0").concat(V," <").concat(+ce+1,".0.0-0"):X&&(be=">=".concat(ce,".").concat(ue,".0").concat(V," <").concat(ce,".").concat(+ue+1,".0-0")),a("xRange return",be),be})},re=(W,U)=>(a("replaceStars",W,U),W.trim().replace(u[d.STAR],"")),oe=(W,U)=>(a("replaceGTE0",W,U),W.trim().replace(u[U.includePrerelease?d.GTE0PRE:d.GTE0],"")),le=W=>(U,F,be,pe,ce,ue,me,V,ee,se,X,J,ne)=>(N(be)?F="":N(pe)?F=">=".concat(be,".0.0").concat(W?"-0":""):N(ce)?F=">=".concat(be,".").concat(pe,".0").concat(W?"-0":""):ue?F=">=".concat(F):F=">=".concat(F).concat(W?"-0":""),N(ee)?V="":N(se)?V="<".concat(+ee+1,".0.0-0"):N(X)?V="<".concat(ee,".").concat(+se+1,".0-0"):J?V="<=".concat(ee,".").concat(se,".").concat(X,"-").concat(J):W?V="<".concat(ee,".").concat(se,".").concat(+X+1,"-0"):V="<=".concat(V),"".concat(F," ").concat(V).trim()),we=(W,U,F)=>{for(let be=0;be<W.length;be++)if(!W[be].test(U))return!1;if(U.prerelease.length&&!F.includePrerelease){for(let be=0;be<W.length;be++)if(a(W[be].semver),W[be].semver!==i.ANY&&W[be].semver.prerelease.length>0){const pe=W[be].semver;if(pe.major===U.major&&pe.minor===U.minor&&pe.patch===U.patch)return!0}return!1}return!0};return Vg}var Xg,qE;function Yh(){if(qE)return Xg;qE=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(g,m){if(m=r(m),g instanceof t){if(g.loose===!!m.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),l("comparator",g,m),this.options=m,this.loose=!!m.loose,this.parse(g),this.semver===e?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(g){const m=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],w=g.match(m);if(!w)throw new TypeError("Invalid comparator: ".concat(g));this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new u(w[2],this.options.loose):this.semver=e}toString(){return this.value}test(g){if(l("Comparator.test",g,this.options.loose),this.semver===e||g===e)return!0;if(typeof g=="string")try{g=new u(g,this.options)}catch{return!1}return a(g,this.operator,this.semver,this.options)}intersects(g,m){if(!(g instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(g.value,m).test(this.value):g.operator===""?g.value===""?!0:new d(this.value,m).test(g.semver):(m=r(m),m.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||a(this.semver,"<",g.semver,m)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||a(this.semver,">",g.semver,m)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Xg=t;const r=O0,{safeRe:n,t:i}=Ac,a=AO,l=qh,u=Mr,d=Gn();return Xg}const lU=Gn(),uU=(e,t,r)=>{try{t=new lU(t,r)}catch{return!1}return t.test(e)};var Qh=uU;const cU=Gn(),fU=(e,t)=>new cU(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var dU=fU;const hU=Mr,pU=Gn(),gU=(e,t,r)=>{let n=null,i=null,a=null;try{a=new pU(t,r)}catch{return null}return e.forEach(l=>{a.test(l)&&(!n||i.compare(l)===-1)&&(n=l,i=new hU(n,r))}),n};var vU=gU;const mU=Mr,yU=Gn(),wU=(e,t,r)=>{let n=null,i=null,a=null;try{a=new yU(t,r)}catch{return null}return e.forEach(l=>{a.test(l)&&(!n||i.compare(l)===1)&&(n=l,i=new mU(n,r))}),n};var bU=wU;const Yg=Mr,xU=Gn(),VE=Vh,EU=(e,t)=>{e=new xU(e,t);let r=new Yg("0.0.0");if(e.test(r)||(r=new Yg("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let a=null;i.forEach(l=>{const u=new Yg(l.semver.version);switch(l.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!a||VE(u,a))&&(a=u);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(l.operator))}}),a&&(!r||VE(r,a))&&(r=a)}return r&&e.test(r)?r:null};var SU=EU;const CU=Gn(),kU=(e,t)=>{try{return new CU(e,t).range||"*"}catch{return null}};var TU=kU;const OU=Mr,IO=Yh(),{ANY:PU}=IO,LU=Gn(),NU=Qh,XE=Vh,YE=Xh,AU=N0,jU=L0,IU=(e,t,r,n)=>{e=new OU(e,n),t=new LU(t,n);let i,a,l,u,d;switch(r){case">":i=XE,a=AU,l=YE,u=">",d=">=";break;case"<":i=YE,a=jU,l=XE,u="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(NU(e,t,n))return!1;for(let p=0;p<t.set.length;++p){const g=t.set[p];let m=null,w=null;if(g.forEach(x=>{x.semver===PU&&(x=new IO(">=0.0.0")),m=m||x,w=w||x,i(x.semver,m.semver,n)?m=x:l(x.semver,w.semver,n)&&(w=x)}),m.operator===u||m.operator===d||(!w.operator||w.operator===u)&&a(e,w.semver))return!1;if(w.operator===d&&l(e,w.semver))return!1}return!0};var A0=IU;const _U=A0,MU=(e,t,r)=>_U(e,t,">",r);var RU=MU;const $U=A0,FU=(e,t,r)=>$U(e,t,"<",r);var DU=FU;const QE=Gn(),zU=(e,t,r)=>(e=new QE(e,r),t=new QE(t,r),e.intersects(t,r));var BU=zU;const HU=Qh,UU=Kn;var WU=(e,t,r)=>{const n=[];let i=null,a=null;const l=e.sort((g,m)=>UU(g,m,r));for(const g of l)HU(g,t,r)?(a=g,i||(i=g)):(a&&n.push([i,a]),a=null,i=null);i&&n.push([i,null]);const u=[];for(const[g,m]of n)g===m?u.push(g):!m&&g===l[0]?u.push("*"):m?g===l[0]?u.push("<=".concat(m)):u.push("".concat(g," - ").concat(m)):u.push(">=".concat(g));const d=u.join(" || "),p=typeof t.raw=="string"?t.raw:String(t);return d.length<p.length?d:t};const JE=Gn(),j0=Yh(),{ANY:Qg}=j0,ou=Qh,I0=Kn,KU=(e,t,r={})=>{if(e===t)return!0;e=new JE(e,r),t=new JE(t,r);let n=!1;e:for(const i of e.set){for(const a of t.set){const l=qU(i,a,r);if(n=n||l!==null,l)continue e}if(n)return!1}return!0},GU=[new j0(">=0.0.0-0")],ZE=[new j0(">=0.0.0")],qU=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Qg){if(t.length===1&&t[0].semver===Qg)return!0;r.includePrerelease?e=GU:e=ZE}if(t.length===1&&t[0].semver===Qg){if(r.includePrerelease)return!0;t=ZE}const n=new Set;let i,a;for(const x of e)x.operator===">"||x.operator===">="?i=eS(i,x,r):x.operator==="<"||x.operator==="<="?a=tS(a,x,r):n.add(x.semver);if(n.size>1)return null;let l;if(i&&a){if(l=I0(i.semver,a.semver,r),l>0)return null;if(l===0&&(i.operator!==">="||a.operator!=="<="))return null}for(const x of n){if(i&&!ou(x,String(i),r)||a&&!ou(x,String(a),r))return null;for(const O of t)if(!ou(x,String(O),r))return!1;return!0}let u,d,p,g,m=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,w=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&a.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(const x of t){if(g=g||x.operator===">"||x.operator===">=",p=p||x.operator==="<"||x.operator==="<=",i){if(w&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===w.major&&x.semver.minor===w.minor&&x.semver.patch===w.patch&&(w=!1),x.operator===">"||x.operator===">="){if(u=eS(i,x,r),u===x&&u!==i)return!1}else if(i.operator===">="&&!ou(i.semver,String(x),r))return!1}if(a){if(m&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===m.major&&x.semver.minor===m.minor&&x.semver.patch===m.patch&&(m=!1),x.operator==="<"||x.operator==="<="){if(d=tS(a,x,r),d===x&&d!==a)return!1}else if(a.operator==="<="&&!ou(a.semver,String(x),r))return!1}if(!x.operator&&(a||i)&&l!==0)return!1}return!(i&&p&&!a&&l!==0||a&&g&&!i&&l!==0||w||m)},eS=(e,t,r)=>{if(!e)return t;const n=I0(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},tS=(e,t,r)=>{if(!e)return t;const n=I0(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var VU=KU;const Jg=Ac,rS=Gh,XU=Mr,nS=OO,YU=sl,QU=YH,JU=ZH,ZU=t6,eW=n6,tW=a6,rW=u6,nW=d6,iW=g6,oW=Kn,aW=w6,sW=E6,lW=P0,uW=T6,cW=L6,fW=Vh,dW=Xh,hW=LO,pW=NO,gW=L0,vW=N0,mW=AO,yW=J6,wW=Yh(),bW=Gn(),xW=Qh,EW=dU,SW=vU,CW=bU,kW=SU,TW=TU,OW=A0,PW=RU,LW=DU,NW=BU,AW=WU,jW=VU;var _0={parse:YU,valid:QU,clean:JU,inc:ZU,diff:eW,major:tW,minor:rW,patch:nW,prerelease:iW,compare:oW,rcompare:aW,compareLoose:sW,compareBuild:lW,sort:uW,rsort:cW,gt:fW,lt:dW,eq:hW,neq:pW,gte:gW,lte:vW,cmp:mW,coerce:yW,Comparator:wW,Range:bW,satisfies:xW,toComparators:EW,maxSatisfying:SW,minSatisfying:CW,minVersion:kW,validRange:TW,outside:OW,gtr:PW,ltr:LW,intersects:NW,simplifyRange:AW,subset:jW,SemVer:XU,re:Jg.re,src:Jg.src,tokens:Jg.t,SEMVER_SPEC_VERSION:rS.SEMVER_SPEC_VERSION,RELEASE_TYPES:rS.RELEASE_TYPES,compareIdentifiers:nS.compareIdentifiers,rcompareIdentifiers:nS.rcompareIdentifiers};function vs(e,t,r,n){let i='Repairing passage (name: "'.concat(e.name,'", id: ').concat(e.id,"): setting ").concat(t," to ").concat(r,", was ").concat(e[t]);n&&(i+=" (".concat(n,")")),console.info(i)}function IW(e,t){const r=Bo(),n={};if(typeof e.id!="string"||e.id===""){const i=Ct();vs(e,"id",i,"was undefined or empty string"),n.id=Ct()}if(Object.entries(r).forEach(([i,a])=>{const l=i;(typeof a=="number"&&!Number.isFinite(e[l])||typeof a!=typeof e[l])&&(vs(e,l,r[l]),n[l]=r[l])}),["left","top"].forEach(i=>{const a=i;typeof e[a]=="number"&&e[a]<0&&(vs(e,a,0,"was negative"),n[a]=0)}),["height","width"].forEach(i=>{const a=i;typeof e[a]=="number"&&e[a]<5&&(vs(e,a,0,"was less than 5"),n[a]=5)}),e.story!==t.id&&(vs(e,"story",t.id,"didn't match parent story"),n.story=t.id),t.passages.some(i=>i===e?!1:i.id===e.id)){const i=Ct();vs(e,"id",i,"conflicted with another passage in the story"),n.id=i}return Object.keys(n).length>0?{...e,...n}:e}function ni(e,t,r,n){let i='Repairing story (name: "'.concat(e.name,'", id: ').concat(e.id,") by setting ").concat(t," to ").concat(r,", was ").concat(e[t]);n&&(i+=" (".concat(n,")")),console.info(i)}function _W(e,t,r,n){const i=tl(),a={};if(typeof e.id!="string"||e.id===""){const d=Ct();ni(e,"id",d,"was bad type or empty string"),a.id=d}if(typeof e.ifid!="string"||e.id===""){const d=Ct();ni(e,"ifid",d,"was bad type or empty string"),a.ifid=d}if(Object.entries(i).forEach(([d,p])=>{const g=d;(typeof p=="number"&&!Number.isFinite(e[g])||typeof p!=typeof e[g])&&(ni(e,g,i[g]),a[g]=i[g])}),typeof e.storyFormat!="string"||e.storyFormat===""||typeof e.storyFormatVersion!="string"||e.storyFormatVersion==="")ni(e,"storyFormat",n.name,"was bad type or unset"),ni(e,"storyFormatVersion",n.version,"was bad type or unset"),a.storyFormat=n.name,a.storyFormatVersion=n.version;else if(!r.some(d=>d.name===e.storyFormat&&d.version===e.storyFormatVersion)){const d=r.find(p=>p.name===e.storyFormat&&_0.satisfies(p.version,"^"+e.storyFormatVersion));d?(ni(e,"storyFormat",d.name,"no match in existing formats but found one that satisfies semver"),ni(e,"storyFormatVersion",d.version,"no match in existing formats but found one that satisfies semver"),a.storyFormat=d.name,a.storyFormatVersion=d.version):(ni(e,"storyFormat",n.name,"no match in existing formats and could not find one that satisfies semver"),ni(e,"storyFormatVersion",n.version,"no match in existing formats and could not find one that satisfies semver"),a.storyFormat=n.name,a.storyFormatVersion=n.version)}if(t.some(d=>d===e?!1:d.id===e.id)){const d=Ct();ni(e,"id",d,"conflicted with another story's ID"),a.id=d}let l=!1;const u=e.passages.map(d=>{const p=IW(d,{...e,...a});return p!==d?(l=!0,p):d});return l&&(a.passages=u),Object.keys(a).length>0?{...e,...a}:e}function MW(e,t,r){return e.map(n=>_W(n,e,t,r))}const RW=["highlighted","selected"],$W=["lastUpdate","selected"],FW=["loadError","loadState","properties","selected"];function Qu(e){return Object.keys(e).some(t=>!RW.includes(t))}function _O(e){return Object.keys(e).some(t=>!$W.includes(t))}function MO(e){return Object.keys(e).some(t=>!FW.includes(t))}function RO(e,t,r,n){let i=!1,a=!1;const l=e.map(u=>{if(u.id!==t)return u;if(i=!0,"name"in n&&u.passages.some(p=>p.name===n.name&&p.id!==r))return console.warn('There is already a passage in this story with name "'.concat(n.name,'", taking no action')),u;const d={...u,passages:u.passages.map(p=>p.id!==r?p:(a=!0,{...p,...n}))};return a?(Qu(n)&&(d.lastUpdate=new Date),d):(console.warn('Asked to update a passage with ID "'.concat(r,'", but it does not exist in story ID ').concat(t,", taking no action")),u)});return i?a?l:e:(console.warn('No story in state with ID "'.concat(t,'", taking no action')),e)}function DW(e,t,r){return Object.keys(r).reduce((n,i)=>RO(n,t,i,r[i]),e)}function zW(e,t,r){if("name"in r&&e.some(a=>a.name===r.name&&a.id!==t))return console.warn('There is another story in state with name "'.concat(r.name,'", taking no action')),e;let n=!1;const i=e.map(a=>{if(a.id!==t)return a;n=!0;const l={...a,...r};return _O(r)&&(l.lastUpdate=new Date),l});return n?i:(console.warn('Asked to update a story with ID "'.concat(t,'", but it does not exist in state')),e)}const BW=(e,t)=>{switch(t.type){case"createPassage":return SO(e,t.storyId,t.props);case"createPassages":return NH(e,t.storyId,t.props);case"createStory":return AH(e,t.props);case"deletePassage":return CO(e,t.storyId,t.passageId);case"deletePassages":return jH(e,t.storyId,t.passageIds);case"deleteStory":return IH(e,t.storyId);case"init":return _H(e,t.state);case"repair":return MW(e,t.allFormats,t.defaultFormat);case"updatePassage":return RO(e,t.storyId,t.passageId,t.props);case"updatePassages":return DW(e,t.storyId,t.passageUpdates);case"updateStory":return zW(e,t.storyId,t.props);default:console.warn("".concat(t.type," not implemented yet"))}return e};var $m={exports:{}},Fm={exports:{}},Ju=1e3,Zu=Ju*60,ec=Zu*60,tc=ec*24,HW=tc*365.25,UW=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return WW(e);if(r==="number"&&isNaN(e)===!1)return t.long?GW(e):KW(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function WW(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*HW;case"days":case"day":case"d":return r*tc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ec;case"minutes":case"minute":case"mins":case"min":case"m":return r*Zu;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ju;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function KW(e){return e>=tc?Math.round(e/tc)+"d":e>=ec?Math.round(e/ec)+"h":e>=Zu?Math.round(e/Zu)+"m":e>=Ju?Math.round(e/Ju)+"s":e+"ms"}function GW(e){return zf(e,tc,"day")||zf(e,ec,"hour")||zf(e,Zu,"minute")||zf(e,Ju,"second")||e+" ms"}function zf(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=d,t.disable=l,t.enable=a,t.enabled=u,t.humanize=UW,t.names=[],t.skips=[],t.formatters={};var r;function n(p){var g=0,m;for(m in p)g=(g<<5)-g+p.charCodeAt(m),g|=0;return t.colors[Math.abs(g)%t.colors.length]}function i(p){function g(){if(g.enabled){var m=g,w=+new Date,x=w-(r||w);m.diff=x,m.prev=r,m.curr=w,r=w;for(var O=new Array(arguments.length),I=0;I<O.length;I++)O[I]=arguments[I];O[0]=t.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");var P=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(N,R){if(N==="%%")return N;P++;var _=t.formatters[R];if(typeof _=="function"){var $=O[P];N=_.call(m,$),O.splice(P,1),P--}return N}),t.formatArgs.call(m,O);var T=g.log||t.log||console.log.bind(console);T.apply(m,O)}}return g.namespace=p,g.enabled=t.enabled(p),g.useColors=t.useColors(),g.color=n(p),typeof t.init=="function"&&t.init(g),g}function a(p){t.save(p),t.names=[],t.skips=[];for(var g=(typeof p=="string"?p:"").split(/[\s,]+/),m=g.length,w=0;w<m;w++)g[w]&&(p=g[w].replace(/\*/g,".*?"),p[0]==="-"?t.skips.push(new RegExp("^"+p.substr(1)+"$")):t.names.push(new RegExp("^"+p+"$")))}function l(){t.enable("")}function u(p){var g,m;for(g=0,m=t.skips.length;g<m;g++)if(t.skips[g].test(p))return!1;for(g=0,m=t.names.length;g<m;g++)if(t.names[g].test(p))return!0;return!1}function d(p){return p instanceof Error?p.stack||p.message:p}})(Fm,Fm.exports);var qW=Fm.exports;(function(e,t){t=e.exports=qW,t.log=i,t.formatArgs=n,t.save=a,t.load=l,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}};function n(d){var p=this.useColors;if(d[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+d[0]+(p?"%c ":" ")+"+"+t.humanize(this.diff),!!p){var g="color: "+this.color;d.splice(1,0,g,"color: inherit");var m=0,w=0;d[0].replace(/%[a-zA-Z%]/g,function(x){x!=="%%"&&(m++,x==="%c"&&(w=m))}),d.splice(w,0,g)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(d){try{d==null?t.storage.removeItem("debug"):t.storage.debug=d}catch{}}function l(){var d;try{d=t.storage.debug}catch{}return!d&&typeof or.process<"u"&&"env"in or.process&&(d={}.DEBUG),d}t.enable(l());function u(){try{return window.localStorage}catch{}}})($m,$m.exports);var VW=$m.exports,iS=VW("jsonp"),XW=JW,YW=0;function QW(){}function JW(e,t,r){typeof t=="function"&&(r=t,t={}),t||(t={});var n=t.prefix||"__jp",i=t.name||n+YW++,a=t.param||"callback",l=t.timeout!=null?t.timeout:6e4,u=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head,p,g;l&&(g=setTimeout(function(){m(),r&&r(new Error("Timeout"))},l));function m(){p.parentNode&&p.parentNode.removeChild(p),window[i]=QW,g&&clearTimeout(g)}function w(){window[i]&&m()}return window[i]=function(x){iS("jsonp got",x),m(),r&&r(null,x)},e+=(~e.indexOf("?")?"&":"?")+a+"="+u(i),e=e.replace("?&","?"),iS('jsonp req "%s"',e),p=document.createElement("script"),p.src=e,d.parentNode.insertBefore(p,d),w}const ZW=kt(XW);let oS=Promise.resolve();async function lh(e,t=2e3){return new Promise((r,n)=>oS=oS.then(()=>new Promise(i=>{ZW(e,{timeout:t,name:"storyFormat"},(a,l)=>{a?n(a):r(l),i()})})))}function e8(e,t){if(!t.name||!t.version)throw new Error("Missing required properties for a new story format");return{type:"create",props:{url:e,name:t.name,selected:!1,userAdded:!0,version:t.version}}}function t8(e){return{type:"delete",id:e.id}}function r8(){return(e,t)=>{for(const r of t())r.selected&&e({type:"update",id:r.id,props:{selected:!1}})}}function n8(e){return{type:"update",id:e.id,props:{selected:!1}}}async function $O(e,t){t({type:"update",id:e.id,props:{loadState:"loading"}});try{let r=await lh(e.url);if(r.hydrate)try{const n={};new Function(r.hydrate).call(n),r={...n,...r}}catch(n){console.error("Format ".concat(e.id," has a hydrate property but it threw an error when called"),n)}return t({type:"update",id:e.id,props:{properties:r,loadState:"loaded"}}),r}catch(r){t({type:"update",id:e.id,props:{loadError:r,loadState:"error"}})}}function i8(e){const t=e.filter(r=>r.loadState!=="loaded"&&r.loadState!=="loading");return t?async r=>{await Promise.allSettled(t.map(n=>$O(n,r)))}:()=>{}}function rc(e){return e.loadState==="loaded"?()=>e.properties:async t=>await $O(e,t)}function o8(e,t){return(r,n)=>{if(e.selected||r({type:"update",id:e.id,props:{selected:!0}}),t)for(const i of n())i.id!==e.id&&i.selected&&r({type:"update",id:i.id,props:{selected:!1}})}}const FO=()=>[{name:"Chapbook",url:"story-formats/chapbook-1.2.3/format.js",version:"1.2.3"},{name:"Harlowe",url:"story-formats/harlowe-1.2.4/format.js",version:"1.2.4"},{name:"Harlowe",url:"story-formats/harlowe-2.1.0/format.js",version:"2.1.0"},{name:"Harlowe",url:"story-formats/harlowe-3.3.9/format.js",version:"3.3.9"},{name:"Paperthin",url:"story-formats/paperthin-1.0.0/format.js",version:"1.0.0"},{name:"Snowman",url:"story-formats/snowman-1.4.0/format.js",version:"1.4.0"},{name:"Snowman",url:"story-formats/snowman-2.0.2/format.js",version:"2.0.2",userAdded:!1},{name:"SugarCube",url:"story-formats/sugarcube-1.0.35/format.js",version:"1.0.35"},{name:"SugarCube",url:"story-formats/sugarcube-2.36.1/format.js",version:"2.36.1"}];var a8=e=>{if(typeof e!="string")throw new TypeError("Expected a `string`, got `".concat(typeof e,"`"));return/^[a-zA-Z]:\\/.test(e)?!1:/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e)};const s8=kt(a8);function l8(e,t){switch(t){case"all":return e;case"current":return Object.values(e.reduce((r,n)=>!r[n.name]||PO(r[n.name].version,n.version)?{...r,[n.name]:n}:r,{}));case"user":return e.filter(r=>r.userAdded)}}function u8(e){if(e.loadState!=="loaded"||!e.properties.image)throw new Error("Format has no image property");return s8(e.properties.image)?e.properties.image:e.url.replace(/\/[^/]*?$/,"/")+e.properties.image}function c8(e,t){const r=e.find(n=>n.id===t);if(r)return r;throw new Error('There is no story format with ID "'.concat(t,'".'))}function cn(e,t,r){const n=e.find(i=>i.name===t&&i.version===r);if(n)return n;throw new Error('There is no story format with name "'.concat(t,'" and version "').concat(r,'".'))}function aS(e,t){return e.reduce((r,n)=>n.name!==t?r:!r||_0.gt(n.version,r.version)?n:r,void 0)}function DO(e){return e.sort((t,r)=>t.name<r.name?-1:t.name>r.name?1:t.version===r.version?0:PO(r.version,t.version)?-1:1)}const Da=()=>window.navigator.userAgent.indexOf("Electron")!==-1;function M0(){const{t:e,ready:t}=Ae("",{useSuspense:!1});return{reportError(r,n){console.error("Twine store error",r),t?window.alert(e(n,{error:r.message})+" "+e("store.errors.".concat(Da()?"electron":"web","Remediation"))):window.alert("An error occurred while saving (".concat(r.message,"). Reloading or restarting the application may help."))}}}const f8=(e,t)=>{switch(t.type){case"init":return[...t.state];case"repair":const r=FO(),n=e.filter(i=>{const a=i.userAdded||r.some(l=>l.name===i.name&&l.version===i.version);return a||console.info("Repairing story formats by removing ".concat(i.name," ").concat(i.version," (outdated version of built-in format)")),a});return r.forEach(i=>{n.some(a=>a.name===i.name&&a.version===i.version)||(console.info("Repairing story formats by adding built-in ".concat(i.name," ").concat(i.version)),n.push({...i,id:Ct(),loadState:"unloaded",selected:!1,userAdded:!1}))}),n;case"create":return e.some(i=>i.name===t.props.name&&i.version===t.props.version)?e:[...e,{...t.props,id:Ct(),loadState:"unloaded"}];case"delete":return e.filter(i=>i.id!==t.id);case"update":return e.some(i=>i.id!==t.id&&i.name===t.props.name&&i.version===t.props.version)?e:e.map(i=>i.id!==t.id?i:{...i,...t.props})}return e},d8=FO().map(e=>({...e,id:Ct(),loadState:"unloaded",selected:!1,userAdded:!1})),R0=C.createContext({dispatch:()=>{},formats:[]});R0.displayName="StoryFormats";const zO=(e,t)=>{const{dispatch:r,formats:n}=Kr();return{format:cn(n,e,t),dispatch:r}},Kr=()=>C.useContext(R0),h8=e=>{const{storyFormats:t}=Zh(),{reportError:r}=M0(),n=C.useCallback((l,u)=>{const d=f8(l,u);try{t.saveMiddleware(d,u)}catch(p){r(p,"store.errors.cantPersistStoryFormats")}return d},[r,t]),[i,a]=T0(n,d8);return y.jsx(R0.Provider,{value:{dispatch:a,formats:i},children:e.children})},$0=C.createContext({dispatch:()=>{},stories:[]});$0.displayName="Stories";const Tt=()=>C.useContext($0),p8=e=>{const{stories:t}=Zh(),{formats:r}=Kr(),{reportError:n}=M0(),i=C.useMemo(()=>(u,d)=>{const p=BW(u,d);try{t.saveMiddleware(p,d,r)}catch(g){n(g,"store.errors.cantPersistStories")}return p},[r,n,t]),[a,l]=T0(i,[]);return y.jsx($0.Provider,{value:{dispatch:l,stories:a},children:e.children})},yu={passage:"tw-passage",story:"tw-story",script:"[role=script]",stylesheet:"[role=stylesheet]",storyData:"tw-storydata",tagColors:"tw-tag",passageData:"tw-passagedata"};function Bf(e){return parseFloat(e)}function wu(e,t){return Array.from(e.querySelectorAll(t))}function sS(e){if(typeof e!="string")return;const t=e.split(",");if(t.length===2)return[t[0],t[1]]}function g8(e){var i,a,l,u,d;const t=e.getAttribute("startnode");let r;const n={ifid:(i=e.getAttribute("ifid"))!=null?i:Ct(),id:Ct(),lastUpdate:void 0,name:(a=e.getAttribute("name"))!=null?a:void 0,storyFormat:(l=e.getAttribute("format"))!=null?l:void 0,storyFormatVersion:(u=e.getAttribute("format-version"))!=null?u:void 0,script:wu(e,yu.script).map(p=>p.textContent).join("\n"),stylesheet:wu(e,yu.stylesheet).map(p=>p.textContent).join("\n"),tags:e.getAttribute("tags")?e.getAttribute("tags").split(/\s+/):[],zoom:parseFloat((d=e.getAttribute("zoom"))!=null?d:"1"),tagColors:wu(e,yu.tagColors).reduce((p,g)=>{const m=g.getAttribute("name");return typeof m!="string"?p:{...p,[m]:g.getAttribute("color")}},{}),passages:wu(e,yu.passageData).map(p=>{var x,O;const g=Ct(),m=sS(p.getAttribute("position")),w=sS(p.getAttribute("size"));return p.getAttribute("pid")===t&&(r=g),{id:g,left:m?Bf(m[0]):void 0,top:m?Bf(m[1]):void 0,width:w?Bf(w[0]):void 0,height:w?Bf(w[1]):void 0,tags:p.getAttribute("tags")?p.getAttribute("tags").split(/\s+/):[],name:(x=p.getAttribute("name"))!=null?x:void 0,text:(O=p.textContent)!=null?O:void 0}})};return n.startPassage=r,n}function BO(e,t){const r=document.createElement("div");return r.innerHTML=e,wu(r,yu.storyData).map(n=>{const i=g8(n),a=lE(i,{id:Ct()},tl());return t&&(a.lastUpdate=t),a.passages=a.passages.map(l=>lE(l,Bo(),{story:a.id})),a})}async function v8(){const{twineElectron:e}=window;if(!e)throw new Error("Electron bridge is not present on window.");const t=await e.loadStories();return t&&Array.isArray(t)?t.reduce((r,n)=>{const i=BO(n.htmlSource,n.mtime);return i[0]?[...r,i[0]]:(console.warn("Could not hydrate story: ",n.htmlSource),r)},[]):(console.warn("No stories to hydrate in Electron bridge"),[])}function m8(e){return function(t){return e==null?void 0:e[t]}}var y8=m8,w8=y8,b8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},x8=w8(b8),E8=x8,S8=E8,C8=S0,HO=/[&<>"']/g,k8=RegExp(HO.source);function T8(e){return e=C8(e),e&&k8.test(e)?e.replace(HO,S8):e}var O8=T8;const xr=kt(O8);function P8(){const e=new Date().toLocaleString().replace(/[/:\\]/g,".");return Lc.t("store.archiveFilename",{timestamp:e})}function UO(e,t){return e.reduce((r,n)=>r+Jh(n,t,{startOptional:!0})+"\n\n","")}function L8(e,t){return'<tw-passagedata pid="'.concat(xr(t.toString()),'" name="').concat(xr(e.name),'" tags="').concat(xr(e.tags.join(" ")),'" position="').concat(e.left,",").concat(e.top,'" size="').concat(e.width,",").concat(e.height,'">').concat(xr(e.text),"</tw-passagedata>")}function Jh(e,t,{formatOptions:r,startId:n,startOptional:i}={}){if(n=n!=null?n:e.startPassage,!i){if(!n)throw new Error("There is no starting point set for this story and none was set manually.");if(!e.passages.find(d=>d.id===n))throw new Error("The passage set as starting point for this story does not exist.")}let a,l="";e.passages.forEach((d,p)=>{l+=L8(d,p+1),d.id===n&&(a=p+1)});const u=Object.keys(e.tagColors).reduce((d,p)=>d+'<tw-tag name="'.concat(xr(p),'" color="').concat(xr(e.tagColors[p]),'"></tw-tag>'),"");return'<tw-storydata name="'.concat(xr(e.name),'" startnode="').concat(a||"",'" creator="').concat(xr(t.name),'" creator-version="').concat(xr(t.version),'" format="').concat(xr(e.storyFormat),'" format-version="').concat(xr(e.storyFormatVersion),'" ifid="').concat(xr(e.ifid),'" options="').concat(xr(r),'" tags="').concat(xr(e.tags.join(" ")),'" zoom="').concat(xr(e.zoom.toString()),'" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">')+e.stylesheet+'</style><script role="script" id="twine-user-script" type="text/twine-javascript">'+e.script+"<\/script>"+u+l+"</tw-storydata>"}function uh(e,t,r,{formatOptions:n,startId:i}={}){if(!t)throw new Error("Story format source cannot be empty.");let a=t;return a=a.replace(/{{STORY_NAME}}/g,()=>xr(e.name)),a=a.replace(/{{STORY_DATA}}/g,()=>Jh(e,r,{formatOptions:n,startId:i})),a}function bn(){return{name:"Twine",version:"2.8.1"}}async function ms(e,t){const{twineElectron:r}=window;if(!r)throw new Error("Electron bridge is not present on window.");try{const n=cn(t,e.storyFormat,e.storyFormatVersion);if(n.loadState==="loaded")r.saveStoryHtml(e,uh(e,n.properties.source,bn(),{startOptional:!0}));else{const{source:i}=await lh(n.url);r.saveStoryHtml(e,uh(e,i,bn(),{startOptional:!0}))}}catch(n){console.warn("Could not save full story (".concat(n.message,"). Trying to save story data only.")),r.saveStoryHtml(e,Jh(e,bn(),{startOptional:!0}))}}let Zg;function N8(e,t,r){const{twineElectron:n}=window;if(!n)throw new Error("Electron bridge is not present on window.");switch(t.type){case"init":case"repair":break;case"createStory":if(!t.props.name)throw new Error("Passage was created but with no name specified");ms(yO(e,t.props.name),r);break;case"deleteStory":{n.deleteStory(yt(Zg,t.storyId));break}case"updateStory":if(_O(t.props))if(t.props.name){const i=yt(Zg,t.storyId),a=yt(e,t.storyId);n.onceStoryRenamed(()=>ms(a,r)),n.renameStory(i,a)}else ms(yt(e,t.storyId),r);break;case"createPassage":case"createPassages":case"deletePassage":case"deletePassages":ms(yt(e,t.storyId),r);break;case"updatePassage":Qu(t.props)&&ms(yt(e,t.storyId),r);break;case"updatePassages":Object.keys(t.passageUpdates).some(i=>Qu(t.passageUpdates[i]))&&ms(yt(e,t.storyId),r);break;default:console.warn("Story action ".concat(t.type," has no Electron persistence handler"))}Zg=[...e]}async function A8(){const{twineElectron:e}=window;if(!e)throw new Error("Electron bridge is not present on window.");const t=await e.loadStoryFormats();return!t||!Array.isArray(t)?[]:t.map(r=>({id:Ct(),loadState:"unloaded",name:r.name,selected:!1,version:r.version,url:r.url,userAdded:r.userAdded}))}function j8(e,t){(t.type==="create"||t.type==="delete"||t.type==="repair"||t.type==="update"&&MO(t.props))&&C2("story-formats.json",e.map(n=>({id:n.id,name:n.name,selected:void 0,version:n.version,url:n.url,userAdded:n.userAdded})))}function I8(){return C.useMemo(()=>({prefs:{load:CR,saveMiddleware:kR},stories:{load:v8,saveMiddleware:N8},storyFormats:{load:A8,saveMiddleware:j8}}),[])}async function _8(){const e=window.localStorage.getItem("twine-prefs"),t={};return e?(e.split(",").forEach(r=>{try{const n=window.localStorage.getItem("twine-prefs-".concat(r));if(!n){console.warn("No preference stored at twine-prefs-".concat(r));return}const i=JSON.parse(n);t[i.name]=i.value}catch(n){console.warn("Preference ".concat(r," had corrupt serialized value, skipping"),window.localStorage.getItem("twine-prefs-".concat(r)),n)}}),t):{}}function M8(e){const t=window.localStorage.getItem("twine-prefs");t&&t.split(",").forEach(n=>{window.localStorage.removeItem("twine-prefs-".concat(n))});let r=[];for(const n in e){const i=Ct();r.push(i),window.localStorage.setItem("twine-prefs-".concat(i),JSON.stringify({id:i,name:n,value:e[n]}))}window.localStorage.setItem("twine-prefs",r.join(","))}function R8(e,t){(t.type==="repair"||t.type==="update")&&M8(e)}async function $8(){const e={},t=window.localStorage.getItem("twine-stories");if(!t)return[];t.split(",").forEach(n=>{const i=window.localStorage.getItem("twine-stories-".concat(n));if(!i){console.warn("Story list contained ID ".concat(n,", but twine-stories-").concat(n," does not exist, skipping"));return}try{const a=JSON.parse(i);if(!a.id){console.warn("Story in local storage had no ID, skipping",a);return}e[a.id]={...tl(),...a,lastUpdate:a.lastUpdate?new Date(Date.parse(a.lastUpdate)):new Date,passages:[]}}catch{console.warn("Could not parse story as JSON, skipping: ".concat(i))}});const r=window.localStorage.getItem("twine-passages");return r&&r.split(",").forEach(n=>{const i=window.localStorage.getItem("twine-passages-".concat(n));if(!i){console.warn("Passage list contained ID ".concat(n,", but twine-passages-").concat(n," does not exist, skipping"));return}try{const a=JSON.parse(i);if(!a||!a.story){console.warn("Passage ".concat(n," did not have parent story ID, skipping"),a);return}if(!e[a.story]){console.warn("Passage ".concat(n," is orphaned (looking for story ID ").concat(a.story,"), skipping"));return}e[a.story].passages.push({...Bo,...a,tags:a.tags?a.tags.filter(l=>l.trim()!==""):[]})}catch{console.warn("Could not parse passage as JSON, skipping: ".concat(i))}}),Object.values(e)}function F8(e,t){return new RegExp("\\b"+t+"\\b").test(e)}function WO(e,t){return e===""?t:F8(e,t)?e:e+","+t}function KO(e,t){return e=e.replace(new RegExp(",?"+t),""),e[0]===","?e.substring(1):e}function Mi(e){var r,n;const t={passageIds:(r=window.localStorage.getItem("twine-passages"))!=null?r:"",storyIds:(n=window.localStorage.getItem("twine-stories"))!=null?n:""};e(t),window.localStorage.setItem("twine-stories",t.storyIds),window.localStorage.setItem("twine-passages",t.passageIds)}function ho(e,t){if(!t.id)throw new Error("Story has no ID");e.storyIds=WO(e.storyIds,t.id),window.localStorage.setItem("twine-stories-".concat(t.id),JSON.stringify({...t,passages:void 0}))}function D8(e,t){if(!t.id)throw new Error("Story has no ID");e.storyIds=KO(e.storyIds,t.id),window.localStorage.removeItem("twine-stories-".concat(t.id))}function ys(e,t){if(!t.id)throw new Error("Passage has no ID");e.passageIds=WO(e.passageIds,t.id),window.localStorage.setItem("twine-passages-".concat(t.id),JSON.stringify(t))}function ev(e,t){e.passageIds=KO(e.passageIds,t),window.localStorage.removeItem("twine-passages-".concat(t))}let lS;function z8(e,t){switch(t.type){case"init":case"repair":break;case"createPassage":{if(!t.props.name)throw new Error("Passage was created but with no name specified");const n=yt(e,t.storyId),i=oh(e,n.id,t.props.name);Mi(a=>{ho(a,n),ys(a,i)});break}case"createPassages":{const n=yt(e,t.storyId);Mi(i=>{ho(i,n),t.props.forEach(a=>{if(!a.name)throw new Error("Passage was created but with no name specified");ys(i,oh(e,n.id,a.name))})});break}case"createStory":if(!t.props.name)throw new Error("Story was created but with no name specified");const r=yO(e,t.props.name);Mi(n=>{ho(n,r),r.passages.forEach(i=>ys(n,i))});break;case"deletePassage":{const n=yt(e,t.storyId);Mi(i=>{ho(i,n),ev(i,t.passageId)});break}case"deletePassages":{const n=yt(e,t.storyId);Mi(i=>{ho(i,n),t.passageIds.forEach(a=>ev(i,a))});break}case"deleteStory":{const n=yt(lS,t.storyId);Mi(i=>{n.passages.forEach(a=>ev(i,a.id)),D8(i,n)});break}case"updatePassage":if(Qu(t.props)){const n=yt(e,t.storyId),i=Vi(e,t.storyId,t.passageId);Mi(a=>{ho(a,n),ys(a,i)});break}break;case"updatePassages":{const n=yt(e,t.storyId);Mi(i=>{ho(i,n),Object.keys(t.passageUpdates).filter(a=>Qu(t.passageUpdates[a])).forEach(a=>ys(i,Vi(e,t.storyId,a)))});break}case"updateStory":{const n=yt(e,t.storyId);Mi(i=>{ho(i,n),n.passages.forEach(a=>ys(i,a))});break}default:console.warn("Story action ".concat(t.type," has no local storage persistence handler"))}lS=e}async function B8(){const e=[],t=window.localStorage.getItem("twine-storyformats");return t?(t.split(",").forEach(r=>{try{const n=window.localStorage.getItem("twine-storyformats-".concat(r));if(!n){console.warn("No story format stored at twine-storyformats-".concat(r,", skipping"));return}e.push({...JSON.parse(n),loadState:"unloaded"})}catch{console.warn("Story format ".concat(r," had corrupt serialized value, skipping"),window.localStorage.getItem("twine-storyformats-".concat(r)))}}),e):[]}function uS(e){const t=window.localStorage.getItem("twine-storyformats");t&&t.split(",").forEach(n=>{window.localStorage.removeItem("twine-storyformats-".concat(n))});let r=[];e.forEach(n=>{const i=Ct();r.push(i),window.localStorage.setItem("twine-storyformats-".concat(i),JSON.stringify({...n,loadError:void 0,loadState:void 0,properties:void 0,selected:void 0}))}),window.localStorage.setItem("twine-storyformats",r.join(","))}function H8(e,t){switch(t.type){case"create":case"delete":case"repair":uS(e);break;case"update":MO(t.props)&&uS(e);break}}function U8(){return C.useMemo(()=>({prefs:{load:_8,saveMiddleware:R8},stories:{load:$8,saveMiddleware:z8},storyFormats:{load:B8,saveMiddleware:H8}}),[])}function Zh(){const e=I8(),t=U8();return C.useMemo(()=>Da()?e:t,[e,t])}const W8=(e,t)=>{switch(t.type){case"init":return{...e,...t.state};case"repair":const r=Gs();let n=Object.entries(r).reduce((u,[d,p])=>{const g=d;return typeof p=="number"&&!Number.isFinite(e[g])||typeof p!=typeof e[g]?(console.info('Repairing preference "'.concat(d,'" by setting it to ').concat(p,", was ").concat(e[g]," (bad type)")),{...u,[g]:p}):u},{});const{proofingFormat:i,storyFormat:a}=e,{allFormats:l}=t;try{cn(l,i.name,i.version)}catch{const u=aS(l,i.name);u?(console.info("Repairing proofing format preference (version doesn't exist) by setting to ".concat(u.name," ").concat(u.version,", was ").concat(i.name," ").concat(i.version)),n.proofingFormat={name:u.name,version:u.version}):(console.info("Repairing proofing format preference (format doesn't exist at all) by setting to default ".concat(r.proofingFormat.name," ").concat(r.proofingFormat.version,", was ").concat(i.name," ").concat(i.version)),n.proofingFormat={name:r.proofingFormat.name,version:r.proofingFormat.version})}try{cn(l,a.name,a.version)}catch{const u=aS(l,a.name);u?(console.info("Repairing story format preference (version doesn't exist) by setting to ".concat(u.name," ").concat(u.version,", was ").concat(a.name," ").concat(a.version)),n.storyFormat={name:u.name,version:u.version}):(console.info("Repairing story format preference (format doesn't exist at all) by setting to default ".concat(r.storyFormat.name," ").concat(r.storyFormat.version,", was ").concat(a.name," ").concat(i.version)),n.storyFormat={name:r.storyFormat.name,version:r.storyFormat.version})}return{...e,...n};case"update":return{...e,[t.name]:t.value}}},F0=C.createContext({dispatch:()=>{},prefs:Gs()});F0.displayName="Prefs";const pt=()=>C.useContext(F0),K8=e=>{const{prefs:t}=Zh(),{reportError:r}=M0(),n=C.useCallback((l,u)=>{const d=W8(l,u);try{t.saveMiddleware(d,u)}catch(p){r(p,"store.errors.cantPersistPrefs")}return d},[t,r]),[i,a]=C.useReducer(n,Gs());return y.jsx(F0.Provider,{value:{dispatch:a,prefs:i},children:e.children})},G8=()=>{const{prefs:e}=pt();return C.useEffect(()=>{Lc.changeLanguage(e.locale)},[e.locale]),null};function fn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,eh(e,t)}var GO={exports:{}},q8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",V8=q8,X8=V8;function qO(){}function VO(){}VO.resetWarningCache=qO;var Y8=function(){function e(n,i,a,l,u,d){if(d!==X8){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:VO,resetWarningCache:qO};return r.PropTypes=r,r};GO.exports=Y8();var ep=GO.exports;const St=kt(ep);function vr(){return vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vr.apply(this,arguments)}function Hf(e){return e.charAt(0)==="/"}function tv(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function Q8(e,t){t===void 0&&(t="");var r=e&&e.split("/")||[],n=t&&t.split("/")||[],i=e&&Hf(e),a=t&&Hf(t),l=i||a;if(e&&Hf(e)?n=r:r.length&&(n.pop(),n=n.concat(r)),!n.length)return"/";var u;if(n.length){var d=n[n.length-1];u=d==="."||d===".."||d===""}else u=!1;for(var p=0,g=n.length;g>=0;g--){var m=n[g];m==="."?tv(n,g):m===".."?(tv(n,g),p++):p&&(tv(n,g),p--)}if(!l)for(;p--;p)n.unshift("..");l&&n[0]!==""&&(!n[0]||!Hf(n[0]))&&n.unshift("");var w=n.join("/");return u&&w.substr(-1)!=="/"&&(w+="/"),w}var J8=!0,rv="Invariant failed";function za(e,t){if(!e){if(J8)throw new Error(rv);var r=typeof t=="function"?t():t,n=r?"".concat(rv,": ").concat(r):rv;throw new Error(n)}}function ju(e){return e.charAt(0)==="/"?e:"/"+e}function cS(e){return e.charAt(0)==="/"?e.substr(1):e}function Z8(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function XO(e,t){return Z8(e,t)?e.substr(t.length):e}function YO(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function e5(e){var t=e||"/",r="",n="",i=t.indexOf("#");i!==-1&&(n=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return a!==-1&&(r=t.substr(a),t=t.substr(0,a)),{pathname:t,search:r==="?"?"":r,hash:n==="#"?"":n}}function mn(e){var t=e.pathname,r=e.search,n=e.hash,i=t||"/";return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function on(e,t,r,n){var i;typeof e=="string"?(i=e5(e),i.state=t):(i=vr({},e),i.pathname===void 0&&(i.pathname=""),i.search?i.search.charAt(0)!=="?"&&(i.search="?"+i.search):i.search="",i.hash?i.hash.charAt(0)!=="#"&&(i.hash="#"+i.hash):i.hash="",t!==void 0&&i.state===void 0&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return r&&(i.key=r),n?i.pathname?i.pathname.charAt(0)!=="/"&&(i.pathname=Q8(i.pathname,n.pathname)):i.pathname=n.pathname:i.pathname||(i.pathname="/"),i}function D0(){var e=null;function t(l){return e=l,function(){e===l&&(e=null)}}function r(l,u,d,p){if(e!=null){var g=typeof e=="function"?e(l,u):e;typeof g=="string"?typeof d=="function"?d(g,p):p(!0):p(g!==!1)}else p(!0)}var n=[];function i(l){var u=!0;function d(){u&&l.apply(void 0,arguments)}return n.push(d),function(){u=!1,n=n.filter(function(p){return p!==d})}}function a(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];n.forEach(function(p){return p.apply(void 0,u)})}return{setPrompt:t,confirmTransitionTo:r,appendListener:i,notifyListeners:a}}var QO=!!(typeof window<"u"&&window.document&&window.document.createElement);function JO(e,t){t(window.confirm(e))}function t5(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function r5(){return window.navigator.userAgent.indexOf("Trident")===-1}function n5(){return window.navigator.userAgent.indexOf("Firefox")===-1}function i5(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var fS="popstate",dS="hashchange";function hS(){try{return window.history.state||{}}catch{return{}}}function o5(e){e===void 0&&(e={}),QO||za(!1);var t=window.history,r=t5(),n=!r5(),i=e,a=i.forceRefresh,l=a===void 0?!1:a,u=i.getUserConfirmation,d=u===void 0?JO:u,p=i.keyLength,g=p===void 0?6:p,m=e.basename?YO(ju(e.basename)):"";function w(ue){var me=ue||{},V=me.key,ee=me.state,se=window.location,X=se.pathname,J=se.search,ne=se.hash,de=X+J+ne;return m&&(de=XO(de,m)),on(de,ee,V)}function x(){return Math.random().toString(36).substr(2,g)}var O=D0();function I(ue){vr(ce,ue),ce.length=t.length,O.notifyListeners(ce.location,ce.action)}function P(ue){i5(ue)||R(w(ue.state))}function T(){R(w(hS()))}var N=!1;function R(ue){if(N)N=!1,I();else{var me="POP";O.confirmTransitionTo(ue,me,d,function(V){V?I({action:me,location:ue}):_(ue)})}}function _(ue){var me=ce.location,V=z.indexOf(me.key);V===-1&&(V=0);var ee=z.indexOf(ue.key);ee===-1&&(ee=0);var se=V-ee;se&&(N=!0,oe(se))}var $=w(hS()),z=[$.key];function H(ue){return m+mn(ue)}function q(ue,me){var V="PUSH",ee=on(ue,me,x(),ce.location);O.confirmTransitionTo(ee,V,d,function(se){if(se){var X=H(ee),J=ee.key,ne=ee.state;if(r)if(t.pushState({key:J,state:ne},null,X),l)window.location.href=X;else{var de=z.indexOf(ce.location.key),xe=z.slice(0,de+1);xe.push(ee.key),z=xe,I({action:V,location:ee})}else window.location.href=X}})}function re(ue,me){var V="REPLACE",ee=on(ue,me,x(),ce.location);O.confirmTransitionTo(ee,V,d,function(se){if(se){var X=H(ee),J=ee.key,ne=ee.state;if(r)if(t.replaceState({key:J,state:ne},null,X),l)window.location.replace(X);else{var de=z.indexOf(ce.location.key);de!==-1&&(z[de]=ee.key),I({action:V,location:ee})}else window.location.replace(X)}})}function oe(ue){t.go(ue)}function le(){oe(-1)}function we(){oe(1)}var W=0;function U(ue){W+=ue,W===1&&ue===1?(window.addEventListener(fS,P),n&&window.addEventListener(dS,T)):W===0&&(window.removeEventListener(fS,P),n&&window.removeEventListener(dS,T))}var F=!1;function be(ue){ue===void 0&&(ue=!1);var me=O.setPrompt(ue);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),me()}}function pe(ue){var me=O.appendListener(ue);return U(1),function(){U(-1),me()}}var ce={length:t.length,action:"POP",location:$,createHref:H,push:q,replace:re,go:oe,goBack:le,goForward:we,block:be,listen:pe};return ce}var pS="hashchange",a5={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+cS(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:cS,decodePath:ju},slash:{encodePath:ju,decodePath:ju}};function ZO(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function au(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function s5(e){window.location.hash=e}function nv(e){window.location.replace(ZO(window.location.href)+"#"+e)}function l5(e){e===void 0&&(e={}),QO||za(!1);var t=window.history;n5();var r=e,n=r.getUserConfirmation,i=n===void 0?JO:n,a=r.hashType,l=a===void 0?"slash":a,u=e.basename?YO(ju(e.basename)):"",d=a5[l],p=d.encodePath,g=d.decodePath;function m(){var me=g(au());return u&&(me=XO(me,u)),on(me)}var w=D0();function x(me){vr(ue,me),ue.length=t.length,w.notifyListeners(ue.location,ue.action)}var O=!1,I=null;function P(me,V){return me.pathname===V.pathname&&me.search===V.search&&me.hash===V.hash}function T(){var me=au(),V=p(me);if(me!==V)nv(V);else{var ee=m(),se=ue.location;if(!O&&P(se,ee)||I===mn(ee))return;I=null,N(ee)}}function N(me){if(O)O=!1,x();else{var V="POP";w.confirmTransitionTo(me,V,i,function(ee){ee?x({action:V,location:me}):R(me)})}}function R(me){var V=ue.location,ee=H.lastIndexOf(mn(V));ee===-1&&(ee=0);var se=H.lastIndexOf(mn(me));se===-1&&(se=0);var X=ee-se;X&&(O=!0,le(X))}var _=au(),$=p(_);_!==$&&nv($);var z=m(),H=[mn(z)];function q(me){var V=document.querySelector("base"),ee="";return V&&V.getAttribute("href")&&(ee=ZO(window.location.href)),ee+"#"+p(u+mn(me))}function re(me,V){var ee="PUSH",se=on(me,void 0,void 0,ue.location);w.confirmTransitionTo(se,ee,i,function(X){if(X){var J=mn(se),ne=p(u+J),de=au()!==ne;if(de){I=J,s5(ne);var xe=H.lastIndexOf(mn(ue.location)),Oe=H.slice(0,xe+1);Oe.push(J),H=Oe,x({action:ee,location:se})}else x()}})}function oe(me,V){var ee="REPLACE",se=on(me,void 0,void 0,ue.location);w.confirmTransitionTo(se,ee,i,function(X){if(X){var J=mn(se),ne=p(u+J),de=au()!==ne;de&&(I=J,nv(ne));var xe=H.indexOf(mn(ue.location));xe!==-1&&(H[xe]=J),x({action:ee,location:se})}})}function le(me){t.go(me)}function we(){le(-1)}function W(){le(1)}var U=0;function F(me){U+=me,U===1&&me===1?window.addEventListener(pS,T):U===0&&window.removeEventListener(pS,T)}var be=!1;function pe(me){me===void 0&&(me=!1);var V=w.setPrompt(me);return be||(F(1),be=!0),function(){return be&&(be=!1,F(-1)),V()}}function ce(me){var V=w.appendListener(me);return F(1),function(){F(-1),V()}}var ue={length:t.length,action:"POP",location:z,createHref:q,push:re,replace:oe,go:le,goBack:we,goForward:W,block:pe,listen:ce};return ue}function gS(e,t,r){return Math.min(Math.max(e,t),r)}function u5(e){e===void 0&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,i=n===void 0?["/"]:n,a=t.initialIndex,l=a===void 0?0:a,u=t.keyLength,d=u===void 0?6:u,p=D0();function g(q){vr(H,q),H.length=H.entries.length,p.notifyListeners(H.location,H.action)}function m(){return Math.random().toString(36).substr(2,d)}var w=gS(l,0,i.length-1),x=i.map(function(q){return typeof q=="string"?on(q,void 0,m()):on(q,void 0,q.key||m())}),O=mn;function I(q,re){var oe="PUSH",le=on(q,re,m(),H.location);p.confirmTransitionTo(le,oe,r,function(we){if(we){var W=H.index,U=W+1,F=H.entries.slice(0);F.length>U?F.splice(U,F.length-U,le):F.push(le),g({action:oe,location:le,index:U,entries:F})}})}function P(q,re){var oe="REPLACE",le=on(q,re,m(),H.location);p.confirmTransitionTo(le,oe,r,function(we){we&&(H.entries[H.index]=le,g({action:oe,location:le}))})}function T(q){var re=gS(H.index+q,0,H.entries.length-1),oe="POP",le=H.entries[re];p.confirmTransitionTo(le,oe,r,function(we){we?g({action:oe,location:le,index:re}):g()})}function N(){T(-1)}function R(){T(1)}function _(q){var re=H.index+q;return re>=0&&re<H.entries.length}function $(q){return q===void 0&&(q=!1),p.setPrompt(q)}function z(q){return p.appendListener(q)}var H={length:x.length,action:"POP",location:x[w],index:w,entries:x,createHref:O,push:I,replace:P,go:T,goBack:N,goForward:R,canGo:_,block:$,listen:z};return H}var iv=1073741823,vS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof or.global<"u"?or.global:{};function c5(){var e="__global_unique_id__";return vS[e]=(vS[e]||0)+1}function f5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function d5(e){var t=[];return{on:function(n){t.push(n)},off:function(n){t=t.filter(function(i){return i!==n})},get:function(){return e},set:function(n,i){e=n,t.forEach(function(a){return a(e,i)})}}}function h5(e){return Array.isArray(e)?e[0]:e}function p5(e,t){var r,n,i="__create-react-context-"+c5()+"__",a=function(u){fn(d,u);function d(){var g;return g=u.apply(this,arguments)||this,g.emitter=d5(g.props.value),g}var p=d.prototype;return p.getChildContext=function(){var m;return m={},m[i]=this.emitter,m},p.componentWillReceiveProps=function(m){if(this.props.value!==m.value){var w=this.props.value,x=m.value,O;f5(w,x)?O=0:(O=typeof t=="function"?t(w,x):iv,O|=0,O!==0&&this.emitter.set(m.value,O))}},p.render=function(){return this.props.children},d}(C.Component);a.childContextTypes=(r={},r[i]=St.object.isRequired,r);var l=function(u){fn(d,u);function d(){var g;return g=u.apply(this,arguments)||this,g.state={value:g.getValue()},g.onUpdate=function(m,w){var x=g.observedBits|0;x&w&&g.setState({value:g.getValue()})},g}var p=d.prototype;return p.componentWillReceiveProps=function(m){var w=m.observedBits;this.observedBits=w==null?iv:w},p.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var m=this.props.observedBits;this.observedBits=m==null?iv:m},p.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},p.getValue=function(){return this.context[i]?this.context[i].get():e},p.render=function(){return h5(this.props.children)(this.state.value)},d}(C.Component);return l.contextTypes=(n={},n[i]=St.object,n),{Provider:a,Consumer:l}}var eP=Ge.createContext||p5,ll={exports:{}},g5=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},ch=g5;ll.exports=nP;ll.exports.parse=z0;ll.exports.compile=m5;ll.exports.tokensToFunction=tP;ll.exports.tokensToRegExp=rP;var v5=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function z0(e,t){for(var r=[],n=0,i=0,a="",l=t&&t.delimiter||"/",u;(u=v5.exec(e))!=null;){var d=u[0],p=u[1],g=u.index;if(a+=e.slice(i,g),i=g+d.length,p){a+=p[1];continue}var m=e[i],w=u[2],x=u[3],O=u[4],I=u[5],P=u[6],T=u[7];a&&(r.push(a),a="");var N=w!=null&&m!=null&&m!==w,R=P==="+"||P==="*",_=P==="?"||P==="*",$=u[2]||l,z=O||I;r.push({name:x||n++,prefix:w||"",delimiter:$,optional:_,repeat:R,partial:N,asterisk:!!T,pattern:z?b5(z):T?".*":"[^"+yd($)+"]+?"})}return i<e.length&&(a+=e.substr(i)),a&&r.push(a),r}function m5(e,t){return tP(z0(e,t),t)}function y5(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function w5(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function tP(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(r[n]=new RegExp("^(?:"+e[n].pattern+")$",H0(t)));return function(i,a){for(var l="",u=i||{},d=a||{},p=d.pretty?y5:encodeURIComponent,g=0;g<e.length;g++){var m=e[g];if(typeof m=="string"){l+=m;continue}var w=u[m.name],x;if(w==null)if(m.optional){m.partial&&(l+=m.prefix);continue}else throw new TypeError('Expected "'+m.name+'" to be defined');if(ch(w)){if(!m.repeat)throw new TypeError('Expected "'+m.name+'" to not repeat, but received `'+JSON.stringify(w)+"`");if(w.length===0){if(m.optional)continue;throw new TypeError('Expected "'+m.name+'" to not be empty')}for(var O=0;O<w.length;O++){if(x=p(w[O]),!r[g].test(x))throw new TypeError('Expected all "'+m.name+'" to match "'+m.pattern+'", but received `'+JSON.stringify(x)+"`");l+=(O===0?m.prefix:m.delimiter)+x}continue}if(x=m.asterisk?w5(w):p(w),!r[g].test(x))throw new TypeError('Expected "'+m.name+'" to match "'+m.pattern+'", but received "'+x+'"');l+=m.prefix+x}return l}}function yd(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function b5(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function B0(e,t){return e.keys=t,e}function H0(e){return e&&e.sensitive?"":"i"}function x5(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return B0(e,t)}function E5(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(nP(e[i],t,r).source);var a=new RegExp("(?:"+n.join("|")+")",H0(r));return B0(a,t)}function S5(e,t,r){return rP(z0(e,r),t,r)}function rP(e,t,r){ch(t)||(r=t||r,t=[]),r=r||{};for(var n=r.strict,i=r.end!==!1,a="",l=0;l<e.length;l++){var u=e[l];if(typeof u=="string")a+=yd(u);else{var d=yd(u.prefix),p="(?:"+u.pattern+")";t.push(u),u.repeat&&(p+="(?:"+d+p+")*"),u.optional?u.partial?p=d+"("+p+")?":p="(?:"+d+"("+p+"))?":p=d+"("+p+")",a+=p}}var g=yd(r.delimiter||"/"),m=a.slice(-g.length)===g;return n||(a=(m?a.slice(0,-g.length):a)+"(?:"+g+"(?=$))?"),i?a+="$":a+=n&&m?"":"(?="+g+"|$)",B0(new RegExp("^"+a,H0(r)),t)}function nP(e,t,r){return ch(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?x5(e,t):ch(e)?E5(e,t,r):S5(e,t,r)}var C5=ll.exports;const k5=kt(C5);var iP={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ar=typeof Symbol=="function"&&Symbol.for,U0=ar?Symbol.for("react.element"):60103,W0=ar?Symbol.for("react.portal"):60106,tp=ar?Symbol.for("react.fragment"):60107,rp=ar?Symbol.for("react.strict_mode"):60108,np=ar?Symbol.for("react.profiler"):60114,ip=ar?Symbol.for("react.provider"):60109,op=ar?Symbol.for("react.context"):60110,K0=ar?Symbol.for("react.async_mode"):60111,ap=ar?Symbol.for("react.concurrent_mode"):60111,sp=ar?Symbol.for("react.forward_ref"):60112,lp=ar?Symbol.for("react.suspense"):60113,T5=ar?Symbol.for("react.suspense_list"):60120,up=ar?Symbol.for("react.memo"):60115,cp=ar?Symbol.for("react.lazy"):60116,O5=ar?Symbol.for("react.block"):60121,P5=ar?Symbol.for("react.fundamental"):60117,L5=ar?Symbol.for("react.responder"):60118,N5=ar?Symbol.for("react.scope"):60119;function hn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case U0:switch(e=e.type,e){case K0:case ap:case tp:case np:case rp:case lp:return e;default:switch(e=e&&e.$$typeof,e){case op:case sp:case cp:case up:case ip:return e;default:return t}}case W0:return t}}}function oP(e){return hn(e)===ap}bt.AsyncMode=K0;bt.ConcurrentMode=ap;bt.ContextConsumer=op;bt.ContextProvider=ip;bt.Element=U0;bt.ForwardRef=sp;bt.Fragment=tp;bt.Lazy=cp;bt.Memo=up;bt.Portal=W0;bt.Profiler=np;bt.StrictMode=rp;bt.Suspense=lp;bt.isAsyncMode=function(e){return oP(e)||hn(e)===K0};bt.isConcurrentMode=oP;bt.isContextConsumer=function(e){return hn(e)===op};bt.isContextProvider=function(e){return hn(e)===ip};bt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===U0};bt.isForwardRef=function(e){return hn(e)===sp};bt.isFragment=function(e){return hn(e)===tp};bt.isLazy=function(e){return hn(e)===cp};bt.isMemo=function(e){return hn(e)===up};bt.isPortal=function(e){return hn(e)===W0};bt.isProfiler=function(e){return hn(e)===np};bt.isStrictMode=function(e){return hn(e)===rp};bt.isSuspense=function(e){return hn(e)===lp};bt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===tp||e===ap||e===np||e===rp||e===lp||e===T5||typeof e=="object"&&e!==null&&(e.$$typeof===cp||e.$$typeof===up||e.$$typeof===ip||e.$$typeof===op||e.$$typeof===sp||e.$$typeof===P5||e.$$typeof===L5||e.$$typeof===N5||e.$$typeof===O5)};bt.typeOf=hn;iP.exports=bt;var A5=iP.exports,aP=A5,j5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},I5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sP={};sP[aP.ForwardRef]=j5;sP[aP.Memo]=I5;var _5=function(t){var r=eP();return r.displayName=t,r},lP=_5("Router-History"),M5=function(t){var r=eP();return r.displayName=t,r},ja=M5("Router"),fp=function(e){fn(t,e),t.computeRootMatch=function(i){return{path:"/",url:"/",params:{},isExact:i==="/"}};function t(n){var i;return i=e.call(this,n)||this,i.state={location:n.history.location},i._isMounted=!1,i._pendingLocation=null,n.staticContext||(i.unlisten=n.history.listen(function(a){i._isMounted?i.setState({location:a}):i._pendingLocation=a})),i}var r=t.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return Ge.createElement(ja.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},Ge.createElement(lP.Provider,{children:this.props.children||null,value:this.props.history}))},t}(Ge.Component);Ge.Component;Ge.Component;var mS={},R5=1e4,yS=0;function $5(e,t){var r=""+t.end+t.strict+t.sensitive,n=mS[r]||(mS[r]={});if(n[e])return n[e];var i=[],a=k5(e,i,t),l={regexp:a,keys:i};return yS<R5&&(n[e]=l,yS++),l}function G0(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var r=t,n=r.path,i=r.exact,a=i===void 0?!1:i,l=r.strict,u=l===void 0?!1:l,d=r.sensitive,p=d===void 0?!1:d,g=[].concat(n);return g.reduce(function(m,w){if(!w&&w!=="")return null;if(m)return m;var x=$5(w,{end:a,strict:u,sensitive:p}),O=x.regexp,I=x.keys,P=O.exec(e);if(!P)return null;var T=P[0],N=P.slice(1),R=e===T;return a&&!R?null:{path:w,url:w==="/"&&T===""?"/":T,isExact:R,params:I.reduce(function(_,$,z){return _[$.name]=N[z],_},{})}},null)}var Ri=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this;return Ge.createElement(ja.Consumer,null,function(a){a||za(!1);var l=i.props.location||a.location,u=i.props.computedMatch?i.props.computedMatch:i.props.path?G0(l.pathname,i.props):a.match,d=vr({},a,{location:l,match:u}),p=i.props,g=p.children,m=p.component,w=p.render;return Array.isArray(g)&&g.length===0&&(g=null),Ge.createElement(ja.Provider,{value:d},d.match?g?typeof g=="function"?g(d):g:m?Ge.createElement(m,d):w?w(d):null:typeof g=="function"?g(d):null)})},t}(Ge.Component);function q0(e){return e.charAt(0)==="/"?e:"/"+e}function F5(e,t){return e?vr({},t,{pathname:q0(e)+t.pathname}):t}function D5(e,t){if(!e)return t;var r=q0(e);return t.pathname.indexOf(r)!==0?t:vr({},t,{pathname:t.pathname.substr(r.length)})}function wS(e){return typeof e=="string"?e:mn(e)}function ov(e){return function(){za(!1)}}function bS(){}Ge.Component;var z5=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this;return Ge.createElement(ja.Consumer,null,function(a){a||za(!1);var l=i.props.location||a.location,u,d;return Ge.Children.forEach(i.props.children,function(p){if(d==null&&Ge.isValidElement(p)){u=p;var g=p.props.path||p.props.from;d=g?G0(l.pathname,vr({},p.props,{path:g})):a.match}}),d?Ge.cloneElement(u,{location:l,computedMatch:d}):null})},t}(Ge.Component),uP=Ge.useContext;function ul(){return uP(lP)}function dp(){var e=uP(ja).match;return e?e.params:{}}Ge.Component;var B5=function(e){fn(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,n.history=l5(n.props),n}var r=t.prototype;return r.render=function(){return Ge.createElement(fp,{history:this.history,children:this.props.children})},t}(Ge.Component),Dm=function(t,r){return typeof t=="function"?t(r):t},cP=function(t,r){return typeof t=="string"?on(t,null,null,r):t},V0=function(t){return t},Vs=Ge.forwardRef;typeof Vs>"u"&&(Vs=V0);function H5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var U5=Vs(function(e,t){var r=e.innerRef,n=e.navigate,i=e.onClick,a=Ra(e,["innerRef","navigate","onClick"]),l=a.target,u=vr({},a,{onClick:function(p){try{i&&i(p)}catch(g){throw p.preventDefault(),g}!p.defaultPrevented&&p.button===0&&(!l||l==="_self")&&!H5(p)&&(p.preventDefault(),n())}});return V0!==Vs?u.ref=t||r:u.ref=r,Ge.createElement("a",u)}),W5=Vs(function(e,t){var r=e.component,n=r===void 0?U5:r,i=e.replace,a=e.to,l=e.innerRef,u=Ra(e,["component","replace","to","innerRef"]);return Ge.createElement(ja.Consumer,null,function(d){d||za(!1);var p=d.history,g=cP(Dm(a,d.location),d.location),m=g?p.createHref(g):"",w=vr({},u,{href:m,navigate:function(){var O=Dm(a,d.location),I=i?p.replace:p.push;I(O)}});return V0!==Vs?w.ref=t||l:w.innerRef=l,Ge.createElement(n,w)})}),fP=function(t){return t},fh=Ge.forwardRef;typeof fh>"u"&&(fh=fP);function K5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n}).join(" ")}fh(function(e,t){var r=e["aria-current"],n=r===void 0?"page":r,i=e.activeClassName,a=i===void 0?"active":i,l=e.activeStyle,u=e.className,d=e.exact,p=e.isActive,g=e.location,m=e.sensitive,w=e.strict,x=e.style,O=e.to,I=e.innerRef,P=Ra(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return Ge.createElement(ja.Consumer,null,function(T){T||za(!1);var N=g||T.location,R=cP(Dm(O,N),N),_=R.pathname,$=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),z=$?G0(N.pathname,{path:$,exact:d,sensitive:m,strict:w}):null,H=!!(p?p(z,N):z),q=H?K5(u,a):u,re=H?vr({},x,{},l):x,oe=vr({"aria-current":H&&n||null,className:q,style:re,to:R},P);return fP!==fh?oe.ref=t||I:oe.innerRef=I,Ge.createElement(W5,oe)})});function G5(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function q5(e,t){e.classList?e.classList.add(t):G5(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function xS(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function V5(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=xS(e.className,t):e.setAttribute("class",xS(e.className&&e.className.baseVal||"",t))}const ES={disabled:!1},dh=Ge.createContext(null);var bu="unmounted",oa="exited",aa="entering",xs="entered",zm="exiting",eo=function(e){fn(t,e);function t(n,i){var a;a=e.call(this,n,i)||this;var l=i,u=l&&!l.isMounting?n.enter:n.appear,d;return a.appearStatus=null,n.in?u?(d=oa,a.appearStatus=aa):d=xs:n.unmountOnExit||n.mountOnEnter?d=bu:d=oa,a.state={status:d},a.nextCallback=null,a}t.getDerivedStateFromProps=function(i,a){var l=i.in;return l&&a.status===bu?{status:oa}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var a=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==aa&&l!==xs&&(a=aa):(l===aa||l===xs)&&(a=zm)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,a,l,u;return a=l=u=i,i!=null&&typeof i!="number"&&(a=i.exit,l=i.enter,u=i.appear!==void 0?i.appear:l),{exit:a,enter:l,appear:u}},r.updateStatus=function(i,a){i===void 0&&(i=!1),a!==null?(this.cancelNextCallback(),a===aa?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===oa&&this.setState({status:bu})},r.performEnter=function(i){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:i,d=this.props.nodeRef?[u]:[Rg.findDOMNode(this),u],p=d[0],g=d[1],m=this.getTimeouts(),w=u?m.appear:m.enter;if(!i&&!l||ES.disabled){this.safeSetState({status:xs},function(){a.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:aa},function(){a.props.onEntering(p,g),a.onTransitionEnd(w,function(){a.safeSetState({status:xs},function(){a.props.onEntered(p,g)})})})},r.performExit=function(){var i=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Rg.findDOMNode(this);if(!a||ES.disabled){this.safeSetState({status:oa},function(){i.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:zm},function(){i.props.onExiting(u),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:oa},function(){i.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},r.setNextCallback=function(i){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,i(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(i,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:Rg.findDOMNode(this),u=i==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],g=d[1];this.props.addEndListener(p,g)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===bu)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=Ra(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ge.createElement(dh.Provider,{value:null},typeof l=="function"?l(i,u):Ge.cloneElement(Ge.Children.only(l),u))},t}(Ge.Component);eo.contextType=dh;eo.propTypes={};function ws(){}eo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ws,onEntering:ws,onEntered:ws,onExit:ws,onExiting:ws,onExited:ws};eo.UNMOUNTED=bu;eo.EXITED=oa;eo.ENTERING=aa;eo.ENTERED=xs;eo.EXITING=zm;const X5=eo;var Y5=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return q5(t,n)})},av=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return V5(t,n)})},X0=function(e){fn(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(u,d){var p=n.resolveArguments(u,d),g=p[0],m=p[1];n.removeClasses(g,"exit"),n.addClass(g,m?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(u,d)},n.onEntering=function(u,d){var p=n.resolveArguments(u,d),g=p[0],m=p[1],w=m?"appear":"enter";n.addClass(g,w,"active"),n.props.onEntering&&n.props.onEntering(u,d)},n.onEntered=function(u,d){var p=n.resolveArguments(u,d),g=p[0],m=p[1],w=m?"appear":"enter";n.removeClasses(g,w),n.addClass(g,w,"done"),n.props.onEntered&&n.props.onEntered(u,d)},n.onExit=function(u){var d=n.resolveArguments(u),p=d[0];n.removeClasses(p,"appear"),n.removeClasses(p,"enter"),n.addClass(p,"exit","base"),n.props.onExit&&n.props.onExit(u)},n.onExiting=function(u){var d=n.resolveArguments(u),p=d[0];n.addClass(p,"exit","active"),n.props.onExiting&&n.props.onExiting(u)},n.onExited=function(u){var d=n.resolveArguments(u),p=d[0];n.removeClasses(p,"exit"),n.addClass(p,"exit","done"),n.props.onExited&&n.props.onExited(u)},n.resolveArguments=function(u,d){return n.props.nodeRef?[n.props.nodeRef.current,u]:[u,d]},n.getClassNames=function(u){var d=n.props.classNames,p=typeof d=="string",g=p&&d?d+"-":"",m=p?""+g+u:d[u],w=p?m+"-active":d[u+"Active"],x=p?m+"-done":d[u+"Done"];return{baseClassName:m,activeClassName:w,doneClassName:x}},n}var r=t.prototype;return r.addClass=function(i,a,l){var u=this.getClassNames(a)[l+"ClassName"],d=this.getClassNames("enter"),p=d.doneClassName;a==="appear"&&l==="done"&&p&&(u+=" "+p),l==="active"&&i&&i.scrollTop,u&&(this.appliedClasses[a][l]=u,Y5(i,u))},r.removeClasses=function(i,a){var l=this.appliedClasses[a],u=l.base,d=l.active,p=l.done;this.appliedClasses[a]={},u&&av(i,u),d&&av(i,d),p&&av(i,p)},r.render=function(){var i=this.props;i.classNames;var a=Ra(i,["classNames"]);return Ge.createElement(X5,vr({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Ge.Component);X0.defaultProps={classNames:""};X0.propTypes={};const Ci=X0;function Y0(e,t){var r=function(a){return t&&C.isValidElement(a)?t(a):a},n=Object.create(null);return e&&C.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function Q5(e,t){e=e||{},t=t||{};function r(g){return g in t?t[g]:e[g]}var n=Object.create(null),i=[];for(var a in e)a in t?i.length&&(n[a]=i,i=[]):i.push(a);var l,u={};for(var d in t){if(n[d])for(l=0;l<n[d].length;l++){var p=n[d][l];u[n[d][l]]=r(p)}u[d]=r(d)}for(l=0;l<i.length;l++)u[i[l]]=r(i[l]);return u}function ya(e,t,r){return r[t]!=null?r[t]:e.props[t]}function J5(e,t){return Y0(e.children,function(r){return C.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:ya(r,"appear",e),enter:ya(r,"enter",e),exit:ya(r,"exit",e)})})}function Z5(e,t,r){var n=Y0(e.children),i=Q5(t,n);return Object.keys(i).forEach(function(a){var l=i[a];if(C.isValidElement(l)){var u=a in t,d=a in n,p=t[a],g=C.isValidElement(p)&&!p.props.in;d&&(!u||g)?i[a]=C.cloneElement(l,{onExited:r.bind(null,l),in:!0,exit:ya(l,"exit",e),enter:ya(l,"enter",e)}):!d&&u&&!g?i[a]=C.cloneElement(l,{in:!1}):d&&u&&C.isValidElement(p)&&(i[a]=C.cloneElement(l,{onExited:r.bind(null,l),in:p.props.in,exit:ya(l,"exit",e),enter:ya(l,"enter",e)}))}}),i}var e7=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},t7={component:"div",childFactory:function(t){return t}},Q0=function(e){fn(t,e);function t(n,i){var a;a=e.call(this,n,i)||this;var l=a.handleExited.bind(Io(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,a){var l=a.children,u=a.handleExited,d=a.firstRender;return{children:d?J5(i,u):Z5(i,l,u),firstRender:!1}},r.handleExited=function(i,a){var l=Y0(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(u){var d=vr({},u.children);return delete d[i.key],{children:d}}))},r.render=function(){var i=this.props,a=i.component,l=i.childFactory,u=Ra(i,["component","childFactory"]),d=this.state.contextValue,p=e7(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,a===null?Ge.createElement(dh.Provider,{value:d},p):Ge.createElement(dh.Provider,{value:d},Ge.createElement(a,u,p))},t}(Ge.Component);Q0.propTypes={};Q0.defaultProps=t7;const cl=Q0,dP=e=>{const{children:t,ignoreSelector:r,onClickAway:n}=e,i=a=>{var l;r&&(l=a.target)!=null&&l.closest(r)||n()};return y.jsx("div",{onClick:i,children:t})};const hP=e=>{var r;const t={gridTemplateColumns:"columnWidth"in e?"repeat(auto-fit, ".concat(typeof e.columnWidth=="number"?e.columnWidth+"px":e.columnWidth,")"):"repeat(".concat(e.columns,", 1fr)"),maxWidth:(r=e.maxWidth)!=null?r:"auto"};return y.jsx("div",{className:"card-group",style:t,children:e.children})};function r7(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var pP=C,n7=r7(pP);function SS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i7(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o7=!!(typeof window<"u"&&window.document&&window.document.createElement);function a7(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(a){if(typeof a!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],u;function d(){u=e(l.map(function(g){return g.props})),p.canUseDOM?t(u):r&&(u=r(u))}var p=function(g){i7(m,g);function m(){return g.apply(this,arguments)||this}m.peek=function(){return u},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var O=u;return u=void 0,l=[],O};var w=m.prototype;return w.UNSAFE_componentWillMount=function(){l.push(this),d()},w.componentDidUpdate=function(){d()},w.componentWillUnmount=function(){var O=l.indexOf(this);l.splice(O,1),d()},w.render=function(){return n7.createElement(a,this.props)},m}(pP.PureComponent);return SS(p,"displayName","SideEffect("+n(a)+")"),SS(p,"canUseDOM",o7),p}}var s7=a7;const l7=kt(s7);var u7=typeof Element<"u",c7=typeof Map=="function",f7=typeof Set=="function",d7=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function wd(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!wd(e[n],t[n]))return!1;return!0}var a;if(c7&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!wd(n.value[1],t.get(n.value[0])))return!1;return!0}if(f7&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(d7&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(u7&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!wd(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var h7=function(t,r){try{return wd(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const gP=kt(h7);var Ta={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},et={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(et).map(function(e){return et[e]});var At={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},hh={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},nc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},p7=Object.keys(hh).reduce(function(e,t){return e[hh[t]]=t,e},{}),g7=[et.NOSCRIPT,et.SCRIPT,et.STYLE],$n="data-react-helmet",v7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m7=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},y7=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w7=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},CS=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},b7=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Bm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},x7=function(t){var r=Fs(t,et.TITLE),n=Fs(t,nc.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var i=Fs(t,nc.DEFAULT_TITLE);return r||i||void 0},E7=function(t){return Fs(t,nc.ON_CHANGE_CLIENT_STATE)||function(){}},sv=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,i){return Dr({},n,i)},{})},S7=function(t,r){return r.filter(function(n){return typeof n[et.BASE]<"u"}).map(function(n){return n[et.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var a=Object.keys(i),l=0;l<a.length;l++){var u=a[l],d=u.toLowerCase();if(t.indexOf(d)!==-1&&i[d])return n.concat(i)}return n},[])},su=function(t,r,n){var i={};return n.filter(function(a){return Array.isArray(a[t])?!0:(typeof a[t]<"u"&&O7("Helmet: "+t+' should be of type "Array". Instead found type "'+v7(a[t])+'"'),!1)}).map(function(a){return a[t]}).reverse().reduce(function(a,l){var u={};l.filter(function(w){for(var x=void 0,O=Object.keys(w),I=0;I<O.length;I++){var P=O[I],T=P.toLowerCase();r.indexOf(T)!==-1&&!(x===At.REL&&w[x].toLowerCase()==="canonical")&&!(T===At.REL&&w[T].toLowerCase()==="stylesheet")&&(x=T),r.indexOf(P)!==-1&&(P===At.INNER_HTML||P===At.CSS_TEXT||P===At.ITEM_PROP)&&(x=P)}if(!x||!w[x])return!1;var N=w[x].toLowerCase();return i[x]||(i[x]={}),u[x]||(u[x]={}),i[x][N]?!1:(u[x][N]=!0,!0)}).reverse().forEach(function(w){return a.push(w)});for(var d=Object.keys(u),p=0;p<d.length;p++){var g=d[p],m=nj({},i[g],u[g]);i[g]=m}return a},[]).reverse()},Fs=function(t,r){for(var n=t.length-1;n>=0;n--){var i=t[n];if(i.hasOwnProperty(r))return i[r]}return null},C7=function(t){return{baseTag:S7([At.HREF,At.TARGET],t),bodyAttributes:sv(Ta.BODY,t),defer:Fs(t,nc.DEFER),encode:Fs(t,nc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:sv(Ta.HTML,t),linkTags:su(et.LINK,[At.REL,At.HREF],t),metaTags:su(et.META,[At.NAME,At.CHARSET,At.HTTPEQUIV,At.PROPERTY,At.ITEM_PROP],t),noscriptTags:su(et.NOSCRIPT,[At.INNER_HTML],t),onChangeClientState:E7(t),scriptTags:su(et.SCRIPT,[At.SRC,At.INNER_HTML],t),styleTags:su(et.STYLE,[At.CSS_TEXT],t),title:x7(t),titleAttributes:sv(Ta.TITLE,t)}},Hm=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){Hm(t)},0)}}(),kS=function(t){return clearTimeout(t)},k7=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Hm:or.global.requestAnimationFrame||Hm,T7=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||kS:or.global.cancelAnimationFrame||kS,O7=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},lu=null,P7=function(t){lu&&T7(lu),t.defer?lu=k7(function(){TS(t,function(){lu=null})}):(TS(t),lu=null)},TS=function(t,r){var n=t.baseTag,i=t.bodyAttributes,a=t.htmlAttributes,l=t.linkTags,u=t.metaTags,d=t.noscriptTags,p=t.onChangeClientState,g=t.scriptTags,m=t.styleTags,w=t.title,x=t.titleAttributes;Um(et.BODY,i),Um(et.HTML,a),L7(w,x);var O={baseTag:bs(et.BASE,n),linkTags:bs(et.LINK,l),metaTags:bs(et.META,u),noscriptTags:bs(et.NOSCRIPT,d),scriptTags:bs(et.SCRIPT,g),styleTags:bs(et.STYLE,m)},I={},P={};Object.keys(O).forEach(function(T){var N=O[T],R=N.newTags,_=N.oldTags;R.length&&(I[T]=R),_.length&&(P[T]=O[T].oldTags)}),r&&r(),p(t,I,P)},vP=function(t){return Array.isArray(t)?t.join(""):t},L7=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=vP(t)),Um(et.TITLE,r)},Um=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var i=n.getAttribute($n),a=i?i.split(","):[],l=[].concat(a),u=Object.keys(r),d=0;d<u.length;d++){var p=u[d],g=r[p]||"";n.getAttribute(p)!==g&&n.setAttribute(p,g),a.indexOf(p)===-1&&a.push(p);var m=l.indexOf(p);m!==-1&&l.splice(m,1)}for(var w=l.length-1;w>=0;w--)n.removeAttribute(l[w]);a.length===l.length?n.removeAttribute($n):n.getAttribute($n)!==u.join(",")&&n.setAttribute($n,u.join(","))}},bs=function(t,r){var n=document.head||document.querySelector(et.HEAD),i=n.querySelectorAll(t+"["+$n+"]"),a=Array.prototype.slice.call(i),l=[],u=void 0;return r&&r.length&&r.forEach(function(d){var p=document.createElement(t);for(var g in d)if(d.hasOwnProperty(g))if(g===At.INNER_HTML)p.innerHTML=d.innerHTML;else if(g===At.CSS_TEXT)p.styleSheet?p.styleSheet.cssText=d.cssText:p.appendChild(document.createTextNode(d.cssText));else{var m=typeof d[g]>"u"?"":d[g];p.setAttribute(g,m)}p.setAttribute($n,"true"),a.some(function(w,x){return u=x,p.isEqualNode(w)})?a.splice(u,1):l.push(p)}),a.forEach(function(d){return d.parentNode.removeChild(d)}),l.forEach(function(d){return n.appendChild(d)}),{oldTags:a,newTags:l}},mP=function(t){return Object.keys(t).reduce(function(r,n){var i=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+i:i},"")},N7=function(t,r,n,i){var a=mP(n),l=vP(r);return a?"<"+t+" "+$n+'="true" '+a+">"+Bm(l,i)+"</"+t+">":"<"+t+" "+$n+'="true">'+Bm(l,i)+"</"+t+">"},A7=function(t,r,n){return r.reduce(function(i,a){var l=Object.keys(a).filter(function(p){return!(p===At.INNER_HTML||p===At.CSS_TEXT)}).reduce(function(p,g){var m=typeof a[g]>"u"?g:g+'="'+Bm(a[g],n)+'"';return p?p+" "+m:m},""),u=a.innerHTML||a.cssText||"",d=g7.indexOf(t)===-1;return i+"<"+t+" "+$n+'="true" '+l+(d?"/>":">"+u+"</"+t+">")},"")},yP=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,i){return n[hh[i]||i]=t[i],n},r)},j7=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,i){return n[p7[i]||i]=t[i],n},r)},I7=function(t,r,n){var i,a=(i={key:r},i[$n]=!0,i),l=yP(n,a);return[Ge.createElement(et.TITLE,l,r)]},_7=function(t,r){return r.map(function(n,i){var a,l=(a={key:i},a[$n]=!0,a);return Object.keys(n).forEach(function(u){var d=hh[u]||u;if(d===At.INNER_HTML||d===At.CSS_TEXT){var p=n.innerHTML||n.cssText;l.dangerouslySetInnerHTML={__html:p}}else l[d]=n[u]}),Ge.createElement(t,l)})},$i=function(t,r,n){switch(t){case et.TITLE:return{toComponent:function(){return I7(t,r.title,r.titleAttributes)},toString:function(){return N7(t,r.title,r.titleAttributes,n)}};case Ta.BODY:case Ta.HTML:return{toComponent:function(){return yP(r)},toString:function(){return mP(r)}};default:return{toComponent:function(){return _7(t,r)},toString:function(){return A7(t,r,n)}}}},wP=function(t){var r=t.baseTag,n=t.bodyAttributes,i=t.encode,a=t.htmlAttributes,l=t.linkTags,u=t.metaTags,d=t.noscriptTags,p=t.scriptTags,g=t.styleTags,m=t.title,w=m===void 0?"":m,x=t.titleAttributes;return{base:$i(et.BASE,r,i),bodyAttributes:$i(Ta.BODY,n,i),htmlAttributes:$i(Ta.HTML,a,i),link:$i(et.LINK,l,i),meta:$i(et.META,u,i),noscript:$i(et.NOSCRIPT,d,i),script:$i(et.SCRIPT,p,i),style:$i(et.STYLE,g,i),title:$i(et.TITLE,{title:w,titleAttributes:x},i)}},M7=function(t){var r,n;return n=r=function(i){w7(a,i);function a(){return m7(this,a),b7(this,i.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(u){return!gP(this.props,u)},a.prototype.mapNestedChildrenToProps=function(u,d){if(!d)return null;switch(u.type){case et.SCRIPT:case et.NOSCRIPT:return{innerHTML:d};case et.STYLE:return{cssText:d}}throw new Error("<"+u.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(u){var d,p=u.child,g=u.arrayTypeChildren,m=u.newChildProps,w=u.nestedChildren;return Dr({},g,(d={},d[p.type]=[].concat(g[p.type]||[],[Dr({},m,this.mapNestedChildrenToProps(p,w))]),d))},a.prototype.mapObjectTypeChildren=function(u){var d,p,g=u.child,m=u.newProps,w=u.newChildProps,x=u.nestedChildren;switch(g.type){case et.TITLE:return Dr({},m,(d={},d[g.type]=x,d.titleAttributes=Dr({},w),d));case et.BODY:return Dr({},m,{bodyAttributes:Dr({},w)});case et.HTML:return Dr({},m,{htmlAttributes:Dr({},w)})}return Dr({},m,(p={},p[g.type]=Dr({},w),p))},a.prototype.mapArrayTypeChildrenToProps=function(u,d){var p=Dr({},d);return Object.keys(u).forEach(function(g){var m;p=Dr({},p,(m={},m[g]=u[g],m))}),p},a.prototype.warnOnInvalidChildren=function(u,d){return!0},a.prototype.mapChildrenToProps=function(u,d){var p=this,g={};return Ge.Children.forEach(u,function(m){if(!(!m||!m.props)){var w=m.props,x=w.children,O=CS(w,["children"]),I=j7(O);switch(p.warnOnInvalidChildren(m,x),m.type){case et.LINK:case et.META:case et.NOSCRIPT:case et.SCRIPT:case et.STYLE:g=p.flattenArrayTypeChildren({child:m,arrayTypeChildren:g,newChildProps:I,nestedChildren:x});break;default:d=p.mapObjectTypeChildren({child:m,newProps:d,newChildProps:I,nestedChildren:x});break}}}),d=this.mapArrayTypeChildrenToProps(g,d),d},a.prototype.render=function(){var u=this.props,d=u.children,p=CS(u,["children"]),g=Dr({},p);return d&&(g=this.mapChildrenToProps(d,g)),Ge.createElement(t,g)},y7(a,null,[{key:"canUseDOM",set:function(u){t.canUseDOM=u}}]),a}(Ge.Component),r.propTypes={base:St.object,bodyAttributes:St.object,children:St.oneOfType([St.arrayOf(St.node),St.node]),defaultTitle:St.string,defer:St.bool,encodeSpecialCharacters:St.bool,htmlAttributes:St.object,link:St.arrayOf(St.object),meta:St.arrayOf(St.object),noscript:St.arrayOf(St.object),onChangeClientState:St.func,script:St.arrayOf(St.object),style:St.arrayOf(St.object),title:St.string,titleAttributes:St.object,titleTemplate:St.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var i=t.rewind();return i||(i=wP({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},R7=function(){return null},$7=l7(C7,P7,wP)(R7),ph=M7($7);ph.renderStatic=ph.rewind;const bP=({title:e})=>(C.useEffect(()=>{if(Da()){const t=window.setTimeout(()=>{document.querySelector("title").innerHTML=e},0);return()=>window.clearTimeout(t)}},[e]),y.jsx(ph,{children:y.jsx("title",{children:e})}));const J0=C.forwardRef((e,t)=>{var u;const{children:r,grabbable:n,title:i}=e,a=C.useRef(null),l=Qt("main-content",{padded:(u=e.padded)!=null?u:!0});return C.useImperativeHandle(t,()=>a.current),C.useEffect(()=>{a.current&&a.current.focus()},[]),C.useEffect(()=>{const d=a.current;let p,g;function m(P){d&&(d.scrollLeft=p.left+(g.left-P.clientX),d.scrollTop=p.top+(g.top-P.clientY))}function w(P){d&&(d.releasePointerCapture(P.pointerId),d.removeEventListener("pointerleave",w),d.removeEventListener("pointermove",m),d.style.cursor="",P.preventDefault())}function x(P){P.button===2&&w(P)}function O(P){P.button!==2||!d||(d.setPointerCapture(P.pointerId),d.addEventListener("pointerleave",w),d.addEventListener("pointermove",m),d.addEventListener("pointerup",x),d.style.cursor="grabbing",p={left:d.scrollLeft,top:d.scrollTop},g={left:P.clientX,top:P.clientY},P.preventDefault())}function I(P){P.preventDefault()}if(n&&d)return d.addEventListener("pointerdown",O),d.addEventListener("contextmenu",I),()=>{d.removeEventListener("pointerdown",O),d.removeEventListener("contextmenu",I)}},[n]),y.jsxs("div",{className:l,ref:a,children:[i&&y.jsxs(y.Fragment,{children:[y.jsx(bP,{title:i}),y.jsx("h1",{children:i})]}),r]})});const uu=({label:e})=>y.jsx("span",{className:"badge",children:e});const Z0=e=>{const{label:t,onDoubleClick:r,onSelect:n,selected:i,...a}=e,l=C.useCallback(d=>{d.ctrlKey||d.shiftKey?n(!i,!1):n(!0,!0)},[n,i]),u=C.useCallback(d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),d.ctrlKey||d.shiftKey?n(!i,!1):n(!0,!0))},[n,i]);return y.jsx("div",{className:Qt("selectable-card",{selected:i}),role:"button","aria-label":t,"aria-pressed":i,onClick:l,onDoubleClick:r,onKeyDown:u,tabIndex:0,children:y.jsx(zo,{...a})})},F7=({format:e})=>{const{t}=Ae();return e.loadState==="unloaded"||e.loadState==="loading"?y.jsx("div",{className:"story-format-card-details",children:y.jsx("p",{children:t("components.storyFormatCard.loadingFormat")})}):e.loadState==="error"?y.jsx("div",{className:"story-format-card-details",children:y.jsx("p",{children:t("components.storyFormatCard.loadError",{errorMessage:e.loadError.message})})}):y.jsxs("div",{className:"story-format-card-details",children:[e.properties.author&&y.jsx("p",{className:"story-format-card-author",dangerouslySetInnerHTML:{__html:t("components.storyFormatCard.author",{author:e.properties.author})}}),e.properties.description&&y.jsx("div",{className:"story-format-card-description",dangerouslySetInnerHTML:{__html:e.properties.description}}),e.properties.license&&y.jsx("p",{className:"story-format-card-license",children:t("components.storyFormatCard.license",{license:e.properties.license})})]})};const D7=e=>{const{defaultFormat:t,editorExtensionsDisabled:r,format:n,onSelect:i,proofingFormat:a}=e,{t:l}=Ae();let u=y.jsx(y.Fragment,{});return n.loadState==="error"?u=y.jsx(v_,{}):n.loadState==="unloaded"||n.loadState==="loading"?u=y.jsx(E2,{}):n.loadState==="loaded"&&n.properties.image&&(u=y.jsx("img",{src:u8(n),alt:""})),y.jsx("div",{className:"story-format-card",children:y.jsx(Z0,{label:l("components.storyFormatCard.name",{name:n.name,version:n.version}),onSelect:i,selected:n.selected,children:y.jsxs(hr,{children:[y.jsx("div",{className:"story-format-image",children:u}),y.jsxs("div",{className:"story-format-description",children:[y.jsx("h2",{children:l("components.storyFormatCard.name",{name:n.name,version:n.version})}),y.jsx(F7,{format:n})]}),y.jsxs("div",{className:"story-format-badges",children:[!n.userAdded&&y.jsx(uu,{label:l("components.storyFormatCard.builtIn")}),t&&y.jsx(uu,{label:l("components.storyFormatCard.defaultFormat")}),r&&y.jsx(uu,{label:l("components.storyFormatCard.editorExtensionsDisabled")}),n.loadState==="loaded"&&n.properties.proofing&&y.jsx(uu,{label:l("components.storyFormatCard.proofing")}),a&&y.jsx(uu,{label:l("components.storyFormatCard.proofingFormat")})]})]})})})};var OS=function(t){return t.reduce(function(r,n){var i=n[0],a=n[1];return r[i]=a,r},{})},PS=typeof window<"u"&&window.document&&window.document.createElement?C.useLayoutEffect:C.useEffect,Sn="top",Bn="bottom",Hn="right",Cn="left",ew="auto",jc=[Sn,Bn,Hn,Cn],Xs="start",tw="end",z7="clippingParents",xP="viewport",cu="popper",B7="reference",LS=jc.reduce(function(e,t){return e.concat([t+"-"+Xs,t+"-"+tw])},[]),EP=[].concat(jc,[ew]).reduce(function(e,t){return e.concat([t,t+"-"+Xs,t+"-"+tw])},[]),H7="beforeRead",U7="read",W7="afterRead",K7="beforeMain",G7="main",q7="afterMain",V7="beforeWrite",X7="write",Y7="afterWrite",Q7=[H7,U7,W7,K7,G7,q7,V7,X7,Y7];function yi(e){return e?(e.nodeName||"").toLowerCase():null}function qn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ic(e){var t=qn(e).Element;return e instanceof t||e instanceof Element}function wi(e){var t=qn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function SP(e){if(typeof ShadowRoot>"u")return!1;var t=qn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function J7(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!wi(a)||!yi(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(l){var u=i[l];u===!1?a.removeAttribute(l):a.setAttribute(l,u===!0?"":u)}))})}function Z7(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),u=l.reduce(function(d,p){return d[p]="",d},{});!wi(i)||!yi(i)||(Object.assign(i.style,u),Object.keys(a).forEach(function(d){i.removeAttribute(d)}))})}}const e9={name:"applyStyles",enabled:!0,phase:"write",fn:J7,effect:Z7,requires:["computeStyles"]};function gi(e){return e.split("-")[0]}function Ys(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function rw(e){var t=Ys(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function CP(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&SP(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function $o(e){return qn(e).getComputedStyle(e)}function t9(e){return["table","td","th"].indexOf(yi(e))>=0}function Uo(e){return((ic(e)?e.ownerDocument:e.document)||window.document).documentElement}function hp(e){return yi(e)==="html"?e:e.assignedSlot||e.parentNode||(SP(e)?e.host:null)||Uo(e)}function NS(e){return!wi(e)||$o(e).position==="fixed"?null:e.offsetParent}function r9(e){for(var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=hp(e);wi(r)&&["html","body"].indexOf(yi(r))<0;){var n=$o(r);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return r;r=r.parentNode}return null}function Ic(e){for(var t=qn(e),r=NS(e);r&&t9(r)&&$o(r).position==="static";)r=NS(r);return r&&(yi(r)==="html"||yi(r)==="body"&&$o(r).position==="static")?t:r||r9(e)||t}function nw(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var Lo=Math.max,oc=Math.min,Uf=Math.round;function bd(e,t,r){return Lo(e,oc(t,r))}function kP(){return{top:0,right:0,bottom:0,left:0}}function TP(e){return Object.assign({},kP(),e)}function OP(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var n9=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,TP(typeof t!="number"?t:OP(t,jc))};function i9(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,l=r.modifiersData.popperOffsets,u=gi(r.placement),d=nw(u),p=[Cn,Hn].indexOf(u)>=0,g=p?"height":"width";if(!(!a||!l)){var m=n9(i.padding,r),w=rw(a),x=d==="y"?Sn:Cn,O=d==="y"?Bn:Hn,I=r.rects.reference[g]+r.rects.reference[d]-l[d]-r.rects.popper[g],P=l[d]-r.rects.reference[d],T=Ic(a),N=T?d==="y"?T.clientHeight||0:T.clientWidth||0:0,R=I/2-P/2,_=m[x],$=N-w[g]-m[O],z=N/2-w[g]/2+R,H=bd(_,z,$),q=d;r.modifiersData[n]=(t={},t[q]=H,t.centerOffset=H-z,t)}}function o9(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||CP(t.elements.popper,i)&&(t.elements.arrow=i))}const a9={name:"arrow",enabled:!0,phase:"main",fn:i9,effect:o9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var s9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function l9(e){var t=e.x,r=e.y,n=window,i=n.devicePixelRatio||1;return{x:Uf(Uf(t*i)/i)||0,y:Uf(Uf(r*i)/i)||0}}function AS(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.offsets,l=e.position,u=e.gpuAcceleration,d=e.adaptive,p=e.roundOffsets,g=p===!0?l9(a):typeof p=="function"?p(a):a,m=g.x,w=m===void 0?0:m,x=g.y,O=x===void 0?0:x,I=a.hasOwnProperty("x"),P=a.hasOwnProperty("y"),T=Cn,N=Sn,R=window;if(d){var _=Ic(r),$="clientHeight",z="clientWidth";_===qn(r)&&(_=Uo(r),$o(_).position!=="static"&&($="scrollHeight",z="scrollWidth")),_=_,i===Sn&&(N=Bn,O-=_[$]-n.height,O*=u?1:-1),i===Cn&&(T=Hn,w-=_[z]-n.width,w*=u?1:-1)}var H=Object.assign({position:l},d&&s9);if(u){var q;return Object.assign({},H,(q={},q[N]=P?"0":"",q[T]=I?"0":"",q.transform=(R.devicePixelRatio||1)<2?"translate("+w+"px, "+O+"px)":"translate3d("+w+"px, "+O+"px, 0)",q))}return Object.assign({},H,(t={},t[N]=P?O+"px":"",t[T]=I?w+"px":"",t.transform="",t))}function u9(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,l=a===void 0?!0:a,u=r.roundOffsets,d=u===void 0?!0:u,p={placement:gi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,AS(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,AS(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const c9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:u9,data:{}};var Wf={passive:!0};function f9(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,l=n.resize,u=l===void 0?!0:l,d=qn(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&p.forEach(function(g){g.addEventListener("scroll",r.update,Wf)}),u&&d.addEventListener("resize",r.update,Wf),function(){a&&p.forEach(function(g){g.removeEventListener("scroll",r.update,Wf)}),u&&d.removeEventListener("resize",r.update,Wf)}}const d9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:f9,data:{}};var h9={left:"right",right:"left",bottom:"top",top:"bottom"};function xd(e){return e.replace(/left|right|bottom|top/g,function(t){return h9[t]})}var p9={start:"end",end:"start"};function jS(e){return e.replace(/start|end/g,function(t){return p9[t]})}function iw(e){var t=qn(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ow(e){return Ys(Uo(e)).left+iw(e).scrollLeft}function g9(e){var t=qn(e),r=Uo(e),n=t.visualViewport,i=r.clientWidth,a=r.clientHeight,l=0,u=0;return n&&(i=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(l=n.offsetLeft,u=n.offsetTop)),{width:i,height:a,x:l+ow(e),y:u}}function v9(e){var t,r=Uo(e),n=iw(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=Lo(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=Lo(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-n.scrollLeft+ow(e),d=-n.scrollTop;return $o(i||r).direction==="rtl"&&(u+=Lo(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:u,y:d}}function aw(e){var t=$o(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function PP(e){return["html","body","#document"].indexOf(yi(e))>=0?e.ownerDocument.body:wi(e)&&aw(e)?e:PP(hp(e))}function Iu(e,t){var r;t===void 0&&(t=[]);var n=PP(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=qn(n),l=i?[a].concat(a.visualViewport||[],aw(n)?n:[]):n,u=t.concat(l);return i?u:u.concat(Iu(hp(l)))}function Wm(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function m9(e){var t=Ys(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function IS(e,t){return t===xP?Wm(g9(e)):wi(t)?m9(t):Wm(v9(Uo(e)))}function y9(e){var t=Iu(hp(e)),r=["absolute","fixed"].indexOf($o(e).position)>=0,n=r&&wi(e)?Ic(e):e;return ic(n)?t.filter(function(i){return ic(i)&&CP(i,n)&&yi(i)!=="body"}):[]}function w9(e,t,r){var n=t==="clippingParents"?y9(e):[].concat(t),i=[].concat(n,[r]),a=i[0],l=i.reduce(function(u,d){var p=IS(e,d);return u.top=Lo(p.top,u.top),u.right=oc(p.right,u.right),u.bottom=oc(p.bottom,u.bottom),u.left=Lo(p.left,u.left),u},IS(e,a));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function ac(e){return e.split("-")[1]}function LP(e){var t=e.reference,r=e.element,n=e.placement,i=n?gi(n):null,a=n?ac(n):null,l=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,d;switch(i){case Sn:d={x:l,y:t.y-r.height};break;case Bn:d={x:l,y:t.y+t.height};break;case Hn:d={x:t.x+t.width,y:u};break;case Cn:d={x:t.x-r.width,y:u};break;default:d={x:t.x,y:t.y}}var p=i?nw(i):null;if(p!=null){var g=p==="y"?"height":"width";switch(a){case Xs:d[p]=d[p]-(t[g]/2-r[g]/2);break;case tw:d[p]=d[p]+(t[g]/2-r[g]/2);break}}return d}function sc(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.boundary,l=a===void 0?z7:a,u=r.rootBoundary,d=u===void 0?xP:u,p=r.elementContext,g=p===void 0?cu:p,m=r.altBoundary,w=m===void 0?!1:m,x=r.padding,O=x===void 0?0:x,I=TP(typeof O!="number"?O:OP(O,jc)),P=g===cu?B7:cu,T=e.elements.reference,N=e.rects.popper,R=e.elements[w?P:g],_=w9(ic(R)?R:R.contextElement||Uo(e.elements.popper),l,d),$=Ys(T),z=LP({reference:$,element:N,strategy:"absolute",placement:i}),H=Wm(Object.assign({},N,z)),q=g===cu?H:$,re={top:_.top-q.top+I.top,bottom:q.bottom-_.bottom+I.bottom,left:_.left-q.left+I.left,right:q.right-_.right+I.right},oe=e.modifiersData.offset;if(g===cu&&oe){var le=oe[i];Object.keys(re).forEach(function(we){var W=[Hn,Bn].indexOf(we)>=0?1:-1,U=[Sn,Bn].indexOf(we)>=0?"y":"x";re[we]+=le[U]*W})}return re}function b9(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,l=r.padding,u=r.flipVariations,d=r.allowedAutoPlacements,p=d===void 0?EP:d,g=ac(n),m=g?u?LS:LS.filter(function(O){return ac(O)===g}):jc,w=m.filter(function(O){return p.indexOf(O)>=0});w.length===0&&(w=m);var x=w.reduce(function(O,I){return O[I]=sc(e,{placement:I,boundary:i,rootBoundary:a,padding:l})[gi(I)],O},{});return Object.keys(x).sort(function(O,I){return x[O]-x[I]})}function x9(e){if(gi(e)===ew)return[];var t=xd(e);return[jS(e),t,jS(t)]}function E9(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,l=r.altAxis,u=l===void 0?!0:l,d=r.fallbackPlacements,p=r.padding,g=r.boundary,m=r.rootBoundary,w=r.altBoundary,x=r.flipVariations,O=x===void 0?!0:x,I=r.allowedAutoPlacements,P=t.options.placement,T=gi(P),N=T===P,R=d||(N||!O?[xd(P)]:x9(P)),_=[P].concat(R).reduce(function(X,J){return X.concat(gi(J)===ew?b9(t,{placement:J,boundary:g,rootBoundary:m,padding:p,flipVariations:O,allowedAutoPlacements:I}):J)},[]),$=t.rects.reference,z=t.rects.popper,H=new Map,q=!0,re=_[0],oe=0;oe<_.length;oe++){var le=_[oe],we=gi(le),W=ac(le)===Xs,U=[Sn,Bn].indexOf(we)>=0,F=U?"width":"height",be=sc(t,{placement:le,boundary:g,rootBoundary:m,altBoundary:w,padding:p}),pe=U?W?Hn:Cn:W?Bn:Sn;$[F]>z[F]&&(pe=xd(pe));var ce=xd(pe),ue=[];if(a&&ue.push(be[we]<=0),u&&ue.push(be[pe]<=0,be[ce]<=0),ue.every(function(X){return X})){re=le,q=!1;break}H.set(le,ue)}if(q)for(var me=O?3:1,V=function(J){var ne=_.find(function(de){var xe=H.get(de);if(xe)return xe.slice(0,J).every(function(Oe){return Oe})});if(ne)return re=ne,"break"},ee=me;ee>0;ee--){var se=V(ee);if(se==="break")break}t.placement!==re&&(t.modifiersData[n]._skip=!0,t.placement=re,t.reset=!0)}}const S9={name:"flip",enabled:!0,phase:"main",fn:E9,requiresIfExists:["offset"],data:{_skip:!1}};function _S(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function MS(e){return[Sn,Hn,Bn,Cn].some(function(t){return e[t]>=0})}function C9(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,l=sc(t,{elementContext:"reference"}),u=sc(t,{altBoundary:!0}),d=_S(l,n),p=_S(u,i,a),g=MS(d),m=MS(p);t.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":m})}const k9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:C9};function T9(e,t,r){var n=gi(e),i=[Cn,Sn].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=a[0],u=a[1];return l=l||0,u=(u||0)*i,[Cn,Hn].indexOf(n)>=0?{x:u,y:l}:{x:l,y:u}}function O9(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,l=EP.reduce(function(g,m){return g[m]=T9(m,t.rects,a),g},{}),u=l[t.placement],d=u.x,p=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=p),t.modifiersData[n]=l}const P9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:O9};function L9(e){var t=e.state,r=e.name;t.modifiersData[r]=LP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const N9={name:"popperOffsets",enabled:!0,phase:"read",fn:L9,data:{}};function A9(e){return e==="x"?"y":"x"}function j9(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,l=r.altAxis,u=l===void 0?!1:l,d=r.boundary,p=r.rootBoundary,g=r.altBoundary,m=r.padding,w=r.tether,x=w===void 0?!0:w,O=r.tetherOffset,I=O===void 0?0:O,P=sc(t,{boundary:d,rootBoundary:p,padding:m,altBoundary:g}),T=gi(t.placement),N=ac(t.placement),R=!N,_=nw(T),$=A9(_),z=t.modifiersData.popperOffsets,H=t.rects.reference,q=t.rects.popper,re=typeof I=="function"?I(Object.assign({},t.rects,{placement:t.placement})):I,oe={x:0,y:0};if(z){if(a||u){var le=_==="y"?Sn:Cn,we=_==="y"?Bn:Hn,W=_==="y"?"height":"width",U=z[_],F=z[_]+P[le],be=z[_]-P[we],pe=x?-q[W]/2:0,ce=N===Xs?H[W]:q[W],ue=N===Xs?-q[W]:-H[W],me=t.elements.arrow,V=x&&me?rw(me):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:kP(),se=ee[le],X=ee[we],J=bd(0,H[W],V[W]),ne=R?H[W]/2-pe-J-se-re:ce-J-se-re,de=R?-H[W]/2+pe+J+X+re:ue+J+X+re,xe=t.elements.arrow&&Ic(t.elements.arrow),Oe=xe?_==="y"?xe.clientTop||0:xe.clientLeft||0:0,$e=t.modifiersData.offset?t.modifiersData.offset[t.placement][_]:0,_e=z[_]+ne-$e-Oe,Ye=z[_]+de-$e;if(a){var ut=bd(x?oc(F,_e):F,U,x?Lo(be,Ye):be);z[_]=ut,oe[_]=ut-U}if(u){var vt=_==="x"?Sn:Cn,ze=_==="x"?Bn:Hn,qe=z[$],ct=qe+P[vt],at=qe-P[ze],st=bd(x?oc(ct,_e):ct,qe,x?Lo(at,Ye):at);z[$]=st,oe[$]=st-qe}}t.modifiersData[n]=oe}}const I9={name:"preventOverflow",enabled:!0,phase:"main",fn:j9,requiresIfExists:["offset"]};function _9(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function M9(e){return e===qn(e)||!wi(e)?iw(e):_9(e)}function R9(e,t,r){r===void 0&&(r=!1);var n=Uo(t),i=Ys(e),a=wi(t),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(a||!a&&!r)&&((yi(t)!=="body"||aw(n))&&(l=M9(t)),wi(t)?(u=Ys(t),u.x+=t.clientLeft,u.y+=t.clientTop):n&&(u.x=ow(n))),{x:i.left+l.scrollLeft-u.x,y:i.top+l.scrollTop-u.y,width:i.width,height:i.height}}function $9(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(u){if(!r.has(u)){var d=t.get(u);d&&i(d)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function F9(e){var t=$9(e);return Q7.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function D9(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function z9(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var RS={placement:"bottom",modifiers:[],strategy:"absolute"};function $S(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function B9(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?RS:i;return function(u,d,p){p===void 0&&(p=a);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},RS,a),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],w=!1,x={state:g,setOptions:function(T){I(),g.options=Object.assign({},a,g.options,T),g.scrollParents={reference:ic(u)?Iu(u):u.contextElement?Iu(u.contextElement):[],popper:Iu(d)};var N=F9(z9([].concat(n,g.options.modifiers)));return g.orderedModifiers=N.filter(function(R){return R.enabled}),O(),x.update()},forceUpdate:function(){if(!w){var T=g.elements,N=T.reference,R=T.popper;if($S(N,R)){g.rects={reference:R9(N,Ic(R),g.options.strategy==="fixed"),popper:rw(R)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(oe){return g.modifiersData[oe.name]=Object.assign({},oe.data)});for(var _=0;_<g.orderedModifiers.length;_++){if(g.reset===!0){g.reset=!1,_=-1;continue}var $=g.orderedModifiers[_],z=$.fn,H=$.options,q=H===void 0?{}:H,re=$.name;typeof z=="function"&&(g=z({state:g,options:q,name:re,instance:x})||g)}}}},update:D9(function(){return new Promise(function(P){x.forceUpdate(),P(g)})}),destroy:function(){I(),w=!0}};if(!$S(u,d))return x;x.setOptions(p).then(function(P){!w&&p.onFirstUpdate&&p.onFirstUpdate(P)});function O(){g.orderedModifiers.forEach(function(P){var T=P.name,N=P.options,R=N===void 0?{}:N,_=P.effect;if(typeof _=="function"){var $=_({state:g,name:T,instance:x,options:R}),z=function(){};m.push($||z)}})}function I(){m.forEach(function(P){return P()}),m=[]}return x}}var H9=[d9,N9,c9,e9,P9,S9,I9,a9,k9],U9=B9({defaultModifiers:H9}),W9=[],sw=function(t,r,n){n===void 0&&(n={});var i=C.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||W9},l=C.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"}},attributes:{}}),u=l[0],d=l[1],p=C.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(x){var O=x.state,I=Object.keys(O.elements);d({styles:OS(I.map(function(P){return[P,O.styles[P]||{}]})),attributes:OS(I.map(function(P){return[P,O.attributes[P]]}))})},requires:["computeStyles"]}},[]),g=C.useMemo(function(){var w={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[p,{name:"applyStyles",enabled:!1}])};return gP(i.current,w)?i.current||w:(i.current=w,w)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,p]),m=C.useRef();return PS(function(){m.current&&m.current.setOptions(g)},[g]),PS(function(){if(!(t==null||r==null)){var w=n.createPopper||U9,x=w(t,r,g);return m.current=x,function(){x.destroy(),m.current=null}}},[t,r,n.createPopper]),{state:m.current?m.current.state:null,styles:u.styles,attributes:u.attributes,update:m.current?m.current.update:null,forceUpdate:m.current?m.current.forceUpdate:null}};const K9=e=>{const{anchor:t,label:r,position:n="top"}=e,[i,a]=C.useState(null),[l,u]=C.useState(null),[d,p]=C.useState(!1),[g,m]=C.useState(),{styles:w,attributes:x}=sw(t,i,{modifiers:[{name:"arrow",options:{element:l}},{name:"flip"}],placement:n,strategy:"fixed"});return C.useEffect(()=>{const O=()=>m(window.setTimeout(()=>p(!0),500)),I=()=>{g&&window.clearTimeout(g),p(!1)};if(t)return t.addEventListener("pointerenter",O),t.addEventListener("pointerleave",I),()=>{t.removeEventListener("pointerenter",O),t.removeEventListener("pointerleave",I)}},[t,g]),y.jsx(Ci,{classNames:"fade-in-out",in:d,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:y.jsxs("div",{"aria-hidden":!0,className:"tooltip",ref:a,role:"tooltip",style:w.popper,...x.popper,children:[y.jsx("div",{className:"tooltip-arrow",ref:u,style:w.arrow}),y.jsx("div",{className:"tooltip-label",children:r})]})})},De=C.forwardRef((e,t)=>{var N;const{ariaChecked:r,disabled:n,icon:i,iconOnly:a,iconPosition:l="start",onClick:u,preventDefault:d,role:p,selectable:g=!1,selected:m=!1,tooltipPosition:w,variant:x="secondary"}=e,O=Qt("icon-button","icon-position-".concat(l),{selected:m},"variant-".concat(x),{"icon-only":a}),[I,P]=C.useState(null);C.useImperativeHandle(t,()=>I);const T=R=>{u&&u(R),d&&R.preventDefault()};return y.jsxs(y.Fragment,{children:[y.jsxs("button",{"aria-checked":r,"aria-label":a?e.label:void 0,"aria-pressed":g?m:void 0,disabled:n,className:O,onClick:T,ref:P,role:p,children:[y.jsx("span",{className:"icon",children:i}),!a&&((N=e.displayLabel)!=null?N:e.label)]}),a&&y.jsx(K9,{anchor:I,label:e.label,position:w})]})});const G9=e=>{const{children:t,headerDisplayLabel:r,headerLabel:n,onClose:i,onRaise:a}=e,{didCatch:l,ErrorBoundary:u,error:d}=Mh(),{t:p}=Ae();return C.useEffect(()=>{d&&console.error(d)},[d]),y.jsx("div",{"aria-label":n,className:"dialog-card background",children:y.jsxs(zo,{floating:!0,children:[y.jsxs("h2",{children:[y.jsx("div",{className:"dialog-card-header",children:y.jsx(De,{displayLabel:r,icon:null,label:n,onClick:a})}),y.jsx("div",{className:"dialog-card-header-controls",children:y.jsx(De,{icon:y.jsx(Rn,{}),iconOnly:!0,label:p("common.close"),onClick:i,tooltipPosition:"bottom"})})]}),l?y.jsx(Do,{children:p("components.dialogCard.contentsCrashed")}):y.jsx(u,{children:t})]})})},Vn=e=>{const{children:t,className:r,collapsed:n,fixedSize:i,headerDisplayLabel:a,headerLabel:l,highlighted:u,maximizable:d,maximized:p,onChangeCollapsed:g,onChangeHighlighted:m,onChangeMaximized:w,onClose:x}=e,{didCatch:O,ErrorBoundary:I,error:P}=Mh(),{t:T}=Ae();C.useEffect(()=>{P&&console.error(P)},[P]),C.useEffect(()=>{if(u){const _=window.setTimeout(()=>m(!1),400);return()=>window.clearTimeout(_)}},[u,m]);const N=Qt("dialog-card",r,{collapsed:n,highlighted:u,"fixed-size":i,maximized:p});function R(_){_.key==="Escape"&&x(_)}return y.jsx("div",{"aria-label":l,role:"dialog",className:N,onKeyDown:R,children:y.jsxs(zo,{floating:!0,children:[y.jsxs("h2",{children:[y.jsx("div",{className:"dialog-card-header",children:y.jsx(De,{icon:n?y.jsx(z_,{}):y.jsx(u2,{}),displayLabel:a,label:l,onClick:()=>g(!n)})}),y.jsxs("div",{className:"dialog-card-header-controls",children:[d&&y.jsx(De,{icon:p?y.jsx(T_,{}):y.jsx(P_,{}),iconOnly:!0,label:T(p?"common.unmaximize":"common.maximize"),onClick:()=>w(!p),tooltipPosition:"bottom"}),y.jsx(De,{icon:y.jsx(Rn,{}),iconOnly:!0,label:T("common.close"),onClick:x,tooltipPosition:"bottom"})]})]}),O?y.jsx(Do,{children:T("components.dialogCard.contentsCrashed")}):y.jsx(I,{children:!n&&t})]})})};const lw=e=>y.jsx("div",{className:"dialog-editor",children:e.children}),q9=["Chris Klimas","Lorenzo Ancora","Siham Argaw","Leon Arnott","Ingrid Cheung","Daithi O Crualaoich","Thomas Michael Edwards","Micah Fitch","Kate Fractal","Juhana Leinonen","Ngoc Nguyen","Michael Savich","Ross Smith"],V9=["David Marchand (Castellano)","Jordi Mallach (català)","MasterStudioCZ, Svatopluk Vít (Čeština)","Kristian Torgard (Dansk)","Julian Brehmer, Moritz Rebbert (Deutsch)","Flavien Robert, Valentin Rocher (Français)","Marco Secchi (Italiano)","MinariHak (한국어)","SjoerdHekking, Stefan Peeters (Nederlands)","José Carlos Dias (Português)","Alliah, Rafael Games (Português Brasileiro)","Anton Zhuchkov (Русский)","Mika Letonsaari (Suomi)","Désirée Nordlund (Svenska)","H. Utku Maden (Türkçe)","Serhii Mozhaiskyi (українська)","Shitake & SEN1 & 快乐的老鼠宝宝 (简体中文)"],FS={code:q9,localizations:V9};const X9=e=>{const{t}=Ae(),r=bn();return y.jsx(Vn,{...e,className:"about-twine-dialog",fixedSize:!0,headerLabel:t("dialogs.aboutTwine.title",{version:r.version}),children:y.jsxs("div",{className:"content",children:[y.jsx("p",{children:t("dialogs.aboutTwine.twineDescription")}),y.jsx("p",{dangerouslySetInnerHTML:{__html:t("dialogs.aboutTwine.license")}}),y.jsxs("div",{className:"credits",children:[y.jsxs("div",{className:"code",children:[y.jsx("h3",{children:t("dialogs.aboutTwine.codeHeader")}),y.jsx("ul",{children:FS.code.map(n=>y.jsx("li",{children:n},n))})]}),y.jsxs("div",{className:"localizations",children:[y.jsx("h3",{children:t("dialogs.aboutTwine.localizationHeader")}),y.jsx("ul",{children:FS.localizations.map(n=>y.jsx("li",{children:n},n))})]})]}),y.jsxs(Ft,{children:[y.jsx(qu,{href:"https://twinery.org/donate",icon:y.jsx(d2,{}),label:t("dialogs.aboutTwine.donateToTwine"),variant:"primary"}),y.jsx(qu,{href:"https://github.com/klembot/twinejs",icon:y.jsx(G_,{}),label:t("dialogs.aboutTwine.codeRepo")})]})]})})},Y9=e=>{const{dispatch:t}=pt(),{t:r}=Ae();return C.useEffect(()=>t(tr("donateShown",!0)),[t]),y.jsxs(Vn,{...e,className:"app-donation-dialog",fixedSize:!0,headerLabel:r("dialogs.appDonation.title"),children:[y.jsx(hr,{children:y.jsxs("div",{className:"text",children:[y.jsx("p",{children:r("dialogs.appDonation.supportMessage")}),y.jsx("p",{children:r("dialogs.appDonation.onlyOnce")})]})}),y.jsxs(Ft,{children:[y.jsx(qu,{href:"https://twinery.org/donate",icon:y.jsx(d2,{}),label:r("dialogs.appDonation.donate"),variant:"primary"}),y.jsx(De,{icon:y.jsx(Rn,{}),label:r("dialogs.appDonation.noThanks"),onClick:e.onClose})]})]})},vi=e=>{const{checkedIcon:t,icon:r,onChange:n,uncheckedIcon:i,value:a,...l}=e,u=a?t!=null?t:y.jsx(WM,{}):i!=null?i:y.jsx(p2,{});return y.jsx(De,{icon:r!=null?r:u,onClick:()=>n(!a),role:"checkbox",ariaChecked:a,...l})};const lc=C.forwardRef((e,t)=>{var n;const r=Qt("text-input","orientation-".concat(e.orientation),"type-".concat(e.type));return y.jsx("span",{className:r,children:y.jsxs("label",{children:[y.jsx("span",{className:"text-input-label",children:e.children}),y.jsx("input",{onChange:e.onChange,onInput:e.onInput,placeholder:e.placeholder,ref:t,type:(n=e.type)!=null?n:"text",value:e.value})]})})});const Yi=e=>{const{children:t,onChange:r,options:n,orientation:i,value:a}=e,l=Qt("text-select","orientation-".concat(i!=null?i:"horizontal"));return y.jsx("span",{className:l,children:y.jsxs("label",{children:[y.jsx("span",{className:"text-select-label",children:t}),y.jsx("span",{className:"text-select-control",children:y.jsx("select",{onChange:r,value:a,children:n.map(u=>y.jsx("option",{disabled:u.disabled,value:u.value,children:u.label},u.value))})})]})})};const DS=["var(--font-monospaced)","var(--font-system)"],zS=[.8,.9,1,1.25,1.5,2],BS=e=>{const{familyLabel:t,fontFamily:r,fontScale:n,onChangeFamily:i,onChangeScale:a,scaleLabel:l}=e,[u,d]=C.useState(!zS.includes(n)),[p,g]=C.useState(!DS.includes(r)),[m,w]=C.useState(r),[x,O]=C.useState((n*100).toString()),{t:I}=Ae();function P(_){_.target.value==="custom"?(g(!0),DS.includes(m)&&w("")):(g(!1),i(_.target.value))}function T(_){_.target.value==="custom"?d(!0):(d(!1),a(parseFloat(_.target.value)))}function N(_){w(_.target.value),_.target.value.trim()!==""&&i(_.target.value)}function R(_){O(_.target.value);const $=parseInt(_.target.value);Number.isFinite($)&&a($/100)}return y.jsxs("div",{className:"font-select",children:[y.jsx(Yi,{onChange:P,options:[{label:I("components.fontSelect.fonts.system"),value:"var(--font-system)"},{label:I("components.fontSelect.fonts.monospaced"),value:"var(--font-monospaced)"},{label:I("common.custom"),value:"custom"}],value:p?"custom":r,children:t}),p&&y.jsx(lc,{onChange:N,orientation:"vertical",value:m,children:I("components.fontSelect.customFamilyDetail")}),y.jsx(Yi,{onChange:T,options:[...zS.map(_=>({label:I("components.fontSelect.percentage",{percent:_*100}),value:_.toString()})),{label:I("common.custom"),value:"custom"}],value:u?"custom":n.toString(),children:l}),u&&y.jsx(lc,{onChange:R,orientation:"vertical",value:x,children:I("components.fontSelect.customScaleDetail")})]})},Km=[{code:"ca",name:"Català"},{code:"cs",name:"Čeština"},{code:"da",name:"Dansk"},{code:"de",name:"Deutsch"},{code:"en",name:"English"},{code:"es",name:"Castellano"},{code:"fi",name:"Suomi"},{code:"fr",name:"Français"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"ms",name:"Bahasa Melayu"},{code:"nb",name:"Norsk bokmål"},{code:"nl",name:"Nederlands"},{code:"pt-br",name:"Português Brasileiro"},{code:"pt-pt",name:"Português"},{code:"ru",name:"русский"},{code:"sv",name:"Svenska"},{code:"tr",name:"Türkçe"},{code:"uk",name:"Українська"},{code:"zh-cn",name:"中文(简体)"}];function Q9(e){if(Km.some(t=>t.code===e))return e;if(e.includes("-")){const t=e.replace(/-.+/,""),r=Km.find(n=>n.code===t||n.code.replace(/-.+/,"")===t);if(r)return r.code}return"en"}const J9=e=>{const{dispatch:t,prefs:r}=pt(),{t:n}=Ae();return y.jsx(Vn,{...e,className:"app-prefs-dialog",fixedSize:!0,headerLabel:n("dialogs.appPrefs.title"),children:y.jsxs(hr,{children:[y.jsx(Yi,{onChange:i=>t(tr("locale",i.target.value)),options:Km.map(i=>({label:i.name,value:i.code})),value:Q9(r.locale),children:n("dialogs.appPrefs.language")}),y.jsx(Yi,{onChange:i=>t(tr("appTheme",i.target.value)),options:[{label:n("dialogs.appPrefs.themeSystem"),value:"system"},{label:n("dialogs.appPrefs.themeLight"),value:"light"},{label:n("dialogs.appPrefs.themeDark"),value:"dark"}],value:r.appTheme,children:n("dialogs.appPrefs.theme")}),y.jsx(Yi,{onChange:i=>t(tr("dialogWidth",parseInt(i.target.value))),options:[{label:n("dialogs.appPrefs.dialogWidths.default"),value:"600"},{label:n("dialogs.appPrefs.dialogWidths.wider"),value:"700"},{label:n("dialogs.appPrefs.dialogWidths.widest"),value:"800"}],value:r.dialogWidth.toString(),children:n("dialogs.appPrefs.dialogWidth")}),y.jsx(vi,{label:n("dialogs.appPrefs.editorCursorBlinks"),onChange:i=>t(tr("editorCursorBlinks",i)),value:r.editorCursorBlinks}),y.jsx("p",{className:"font-explanation",children:n("dialogs.appPrefs.fontExplanation")}),y.jsx(BS,{familyLabel:n("dialogs.appPrefs.passageEditorFont"),fontFamily:r.passageEditorFontFamily,fontScale:r.passageEditorFontScale,onChangeFamily:i=>t(tr("passageEditorFontFamily",i)),onChangeScale:i=>t(tr("passageEditorFontScale",i)),scaleLabel:n("dialogs.appPrefs.passageEditorFontScale")}),y.jsx(BS,{familyLabel:n("dialogs.appPrefs.codeEditorFont"),fontFamily:r.codeEditorFontFamily,fontScale:r.codeEditorFontScale,onChangeFamily:i=>t(tr("codeEditorFontFamily",i)),onChangeScale:i=>t(tr("codeEditorFontScale",i)),scaleLabel:n("dialogs.appPrefs.codeEditorFontScale")})]})})};const Z9=e=>{const{dialogLength:t,expanded:r,onChangeExpanded:n}=e,[i,a]=C.useState(!1);return C.useEffect(()=>{function l(){r&&(n(!1),a(!1))}return window.addEventListener("touchstart",l),()=>window.removeEventListener("touchstart",l)},[r,n]),r&&i?null:y.jsx("div",{"aria-hidden":!0,className:"dialog-stack-expander",onMouseEnter:()=>n(!r),onTouchEnd:l=>{n(!0),a(!0),l.preventDefault()},style:{bottom:r?0:"auto",height:r?"auto":"var(--control-height)",top:r?"calc(var(--control-height) * ".concat(t,")"):0}})};const Kf=3,Gf="var(--control-height)",eK=({children:e,childKeys:t})=>{const r=C.useRef(null),[n,i]=C.useState(!1),a=C.useMemo(()=>[...e].reverse(),[e]),l=C.useMemo(()=>[...t].reverse(),[t]),u=C.useRef();C.useEffect(()=>{u.current=l},[l]);const d=C.useMemo(()=>{var x,O;return l.length===((x=u.current)==null?void 0:x.length)&&l[l.length-1]!==((O=u.current)==null?void 0:O[l.length-1])},[l]),p=Math.min(e.length,Kf),g=e.length>p,m="".concat(Gf," / ").concat(e.length+1-Kf),w="calc(100% - (".concat(Gf," * ").concat(p-1,"))");return y.jsxs("div",{className:"dialog-stack",onMouseLeave:()=>i(!1),onClick:()=>i(!1),ref:r,children:[g&&y.jsx(Z9,{dialogLength:e.length,expanded:n,onChangeExpanded:i}),y.jsx(cl,{component:null,children:a.map((x,O)=>{const I=g&&O<=e.length-Kf,P=I?"calc(".concat(m," * ").concat(O,")"):"calc(".concat(Gf," * ").concat(g?O-(e.length-Kf):O,")"),T="calc(".concat(Gf," * ").concat(O,")"),N=I&&{onBlur:()=>i(!1),onFocus:()=>i(!0)};return y.jsx(Ci,{classNames:"pop",timeout:200,children:y.jsx("div",{className:Qt("dialog-height-setter",{rising:d&&O===a.length-1}),style:{height:w},...N,children:y.jsx("div",{className:"dialog-transform-setter",style:{transform:"translateY(".concat(n?T:P,")")},children:x})})},l[O])})})]})};function NP(e,t){switch(e.type){case"createPassage":if(e.props.id)return{type:"deletePassage",passageId:e.props.id,storyId:e.storyId};if(e.props.name)return(n,i)=>{n({type:"deletePassage",passageId:oh(i(),e.storyId,e.props.name).id,storyId:e.storyId})};throw new Error("Can't reverse a createPassage action without either name or ID");case"createPassages":if(e.props.some(r=>!r.id&&!r.name))throw new Error("Can't reverse a createPassages action where a prop set doesn't have either name or ID");return(r,n)=>{e.props.forEach(i=>{i.id?r({type:"deletePassage",passageId:i.id,storyId:e.storyId}):i.name&&r({type:"deletePassage",passageId:oh(n(),e.storyId,i.name).id,storyId:e.storyId})})};case"deletePassage":return{type:"createPassage",props:Vi(t,e.storyId,e.passageId),storyId:e.storyId};case"deletePassages":return{type:"createPassages",props:e.passageIds.map(r=>Vi(t,e.storyId,r)),storyId:e.storyId};case"updatePassage":{const r=Vi(t,e.storyId,e.passageId);return{type:"updatePassage",props:Object.keys(e.props).reduce((i,a)=>({...i,[a]:r[a]}),{}),passageId:e.passageId,storyId:e.storyId}}case"updatePassages":return{type:"updatePassages",passageUpdates:Object.keys(e.passageUpdates).reduce((r,n)=>{const i=Vi(t,e.storyId,n);return{...r,[n]:Object.keys(e.passageUpdates[n]).reduce((a,l)=>({...a,[l]:i[l]}),{})}},{}),storyId:e.storyId};case"updateStory":{const r=yt(t,e.storyId);return{type:"updateStory",props:Object.keys(e.props).reduce((i,a)=>({...i,[a]:r[a]}),{}),storyId:e.storyId}}}throw new Error("Don't know how to reverse action type \"".concat(e.type,'"'))}function AP(e,t){const r=[];return e(i=>{typeof i=="function"?r.push(AP(i,t)):r.push(NP(i,t))},()=>t),i=>r.forEach(i)}const tK=(e,t)=>{switch(t.type){case"addChange":const r={description:t.description,redo:t.action,undo:typeof t.action=="function"?AP(t.action,t.storiesState):NP(t.action,t.storiesState)},n=[...e.changes.slice(0,e.currentChange+1),r];return{changes:n,currentChange:n.length-1};case"updateCurrent":return{...e,currentChange:Math.min(Math.max(e.currentChange+t.change,-1),e.changes.length-1)}}},uw=C.createContext({dispatch:()=>{},stories:[]});uw.displayName="UndoableStories";const pn=()=>C.useContext(uw),jP=e=>{const{dispatch:t,stories:r}=Tt(),[n,i]=C.useReducer(tK,{changes:[],currentChange:-1}),a=C.useCallback((m,w)=>(w&&i({type:"addChange",action:m,description:w,storiesState:r}),t(m)),[r,t]),{t:l}=Ae();let u,d,p,g;return n.changes.length>0&&(n.currentChange>=0&&(p=()=>{t(n.changes[n.currentChange].undo),i({type:"updateCurrent",change:-1})},g=l("common.undoChange",{change:l(n.changes[n.currentChange].description)})),n.currentChange<n.changes.length-1&&(u=()=>{t(n.changes[n.currentChange+1].redo),i({type:"updateCurrent",change:1})},d=l("common.redoChange",{change:l(n.changes[n.currentChange+1].description)}))),y.jsx(uw.Provider,{value:{dispatch:a,redo:u,redoLabel:d,stories:r,undo:p,undoLabel:g},children:e.children})};var rK=Object.defineProperty,_c=(e,t)=>rK(e,"name",{value:t,configurable:!0});function Gm(e){return typeof e=="string"?[...e]:e}_c(Gm,"decodeUtf8");function cw(e,t){const r=Gm(e),n=Gm(t),i=r.length,a=n.length,l=new Uint8Array(i),u=new Uint8Array(a),d=IP(r,n,l,u);if(d<=0)return 0;const p=_P(r,n,l,u),g=(d/i+d/a+(d-p)/d)/3,m=.1,w=MP(r,n);return g+w*m*(1-g)}_c(cw,"jaroWinkler");function IP(e,t,r,n){const i=Math.floor(Math.max(e.length,t.length)/2);let a=0,l=0,u=0;for(l=0;l<e.length;l++){const d=Math.max(0,l-i),p=Math.min(l+i+1,t.length);for(u=d;u<p;u++)if(!n[u]&&e[l]===t[u]){r[l]=1,n[u]=1,++a;break}}return a}_c(IP,"getMatching");function _P(e,t,r,n){let i=0;for(let a=0,l=0;a<e.length;a++)if(r[a]!==0){for(;l<n.length&&n[l]===0;)l++;e[a]!==t[l]&&i++,l++}return Math.floor(i/2)}_c(_P,"getTranspositions");function MP(e,t){let n=0;for(;n<4;n++)if(e[n]!==t[n])return n;return++n}_c(MP,"getPrefix");var uc={},lv={exports:{}},HS;function fl(){return HS||(HS=1,function(e,t){(function(r,n){e.exports=n()})(dr,function(){var r=navigator.userAgent,n=navigator.platform,i=/gecko\/\d/i.test(r),a=/MSIE \d/.test(r),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),u=/Edge\/(\d+)/.exec(r),d=a||l||u,p=d&&(a?document.documentMode||6:+(u||l)[1]),g=!u&&/WebKit\//.test(r),m=g&&/Qt\/\d+\.\d+/.test(r),w=!u&&/Chrome\//.test(r),x=/Opera\//.test(r),O=/Apple Computer/.test(navigator.vendor),I=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),P=/PhantomJS/.test(r),T=O&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),N=/Android/.test(r),R=T||N||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),_=T||/Mac/.test(n),$=/\bCrOS\b/.test(r),z=/win/i.test(n),H=x&&r.match(/Version\/(\d*\.\d*)/);H&&(H=Number(H[1])),H&&H>=15&&(x=!1,g=!0);var q=_&&(m||x&&(H==null||H<12.11)),re=i||d&&p>=9;function oe(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var le=function(o,s){var f=o.className,c=oe(s).exec(f);if(c){var h=f.slice(c.index+c[0].length);o.className=f.slice(0,c.index)+(h?c[1]+h:"")}};function we(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function W(o,s){return we(o).appendChild(s)}function U(o,s,f,c){var h=document.createElement(o);if(f&&(h.className=f),c&&(h.style.cssText=c),typeof s=="string")h.appendChild(document.createTextNode(s));else if(s)for(var v=0;v<s.length;++v)h.appendChild(s[v]);return h}function F(o,s,f,c){var h=U(o,s,f,c);return h.setAttribute("role","presentation"),h}var be;document.createRange?be=function(o,s,f,c){var h=document.createRange();return h.setEnd(c||o,f),h.setStart(o,s),h}:be=function(o,s,f){var c=document.body.createTextRange();try{c.moveToElementText(o.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",f),c.moveStart("character",s),c};function pe(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function ce(){var o;try{o=document.activeElement}catch{o=document.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function ue(o,s){var f=o.className;oe(s).test(f)||(o.className+=(f?" ":"")+s)}function me(o,s){for(var f=o.split(" "),c=0;c<f.length;c++)f[c]&&!oe(f[c]).test(s)&&(s+=" "+f[c]);return s}var V=function(o){o.select()};T?V=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:d&&(V=function(o){try{o.select()}catch{}});function ee(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function se(o,s,f){s||(s={});for(var c in o)o.hasOwnProperty(c)&&(f!==!1||!s.hasOwnProperty(c))&&(s[c]=o[c]);return s}function X(o,s,f,c,h){s==null&&(s=o.search(/[^\s\u00a0]/),s==-1&&(s=o.length));for(var v=c||0,b=h||0;;){var S=o.indexOf("	",v);if(S<0||S>=s)return b+(s-v);b+=S-v,b+=f-b%f,v=S+1}}var J=function(){this.id=null,this.f=null,this.time=0,this.handler=ee(this.onTimeout,this)};J.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},J.prototype.set=function(o,s){this.f=s;var f=+new Date+o;(!this.id||f<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=f)};function ne(o,s){for(var f=0;f<o.length;++f)if(o[f]==s)return f;return-1}var de=50,xe={toString:function(){return"CodeMirror.Pass"}},Oe={scroll:!1},$e={origin:"*mouse"},_e={origin:"+move"};function Ye(o,s,f){for(var c=0,h=0;;){var v=o.indexOf("	",c);v==-1&&(v=o.length);var b=v-c;if(v==o.length||h+b>=s)return c+Math.min(b,s-h);if(h+=v-c,h+=f-h%f,c=v+1,h>=s)return c}}var ut=[""];function vt(o){for(;ut.length<=o;)ut.push(ze(ut)+" ");return ut[o]}function ze(o){return o[o.length-1]}function qe(o,s){for(var f=[],c=0;c<o.length;c++)f[c]=s(o[c],c);return f}function ct(o,s,f){for(var c=0,h=f(s);c<o.length&&f(o[c])<=h;)c++;o.splice(c,0,s)}function at(){}function st(o,s){var f;return Object.create?f=Object.create(o):(at.prototype=o,f=new at),s&&se(s,f),f}var xt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Qe(o){return/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||xt.test(o))}function te(o,s){return s?s.source.indexOf("\\w")>-1&&Qe(o)?!0:s.test(o):Qe(o)}function he(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ne(o){return o.charCodeAt(0)>=768&&ie.test(o)}function nt(o,s,f){for(;(f<0?s>0:s<o.length)&&Ne(o.charAt(s));)s+=f;return s}function M(o,s,f){for(var c=s>f?-1:1;;){if(s==f)return s;var h=(s+f)/2,v=c<0?Math.ceil(h):Math.floor(h);if(v==s)return o(v)?s:f;o(v)?f=v:s=v+c}}function E(o,s,f,c){if(!o)return c(s,f,"ltr",0);for(var h=!1,v=0;v<o.length;++v){var b=o[v];(b.from<f&&b.to>s||s==f&&b.to==s)&&(c(Math.max(b.from,s),Math.min(b.to,f),b.level==1?"rtl":"ltr",v),h=!0)}h||c(s,f,"ltr")}var k=null;function D(o,s,f){var c;k=null;for(var h=0;h<o.length;++h){var v=o[h];if(v.from<s&&v.to>s)return h;v.to==s&&(v.from!=v.to&&f=="before"?c=h:k=h),v.from==s&&(v.from!=v.to&&f!="before"?c=h:k=h)}return c!=null?c:k}var Y=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function f(A){return A<=247?o.charAt(A):1424<=A&&A<=1524?"R":1536<=A&&A<=1785?s.charAt(A-1536):1774<=A&&A<=2220?"r":8192<=A&&A<=8203?"w":A==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,h=/[stwN]/,v=/[LRr]/,b=/[Lb1n]/,S=/[1n]/;function L(A,B,K){this.level=A,this.from=B,this.to=K}return function(A,B){var K=B=="ltr"?"L":"R";if(A.length==0||B=="ltr"&&!c.test(A))return!1;for(var Z=A.length,Q=[],fe=0;fe<Z;++fe)Q.push(f(A.charCodeAt(fe)));for(var ye=0,Ce=K;ye<Z;++ye){var Pe=Q[ye];Pe=="m"?Q[ye]=Ce:Ce=Pe}for(var je=0,Le=K;je<Z;++je){var Re=Q[je];Re=="1"&&Le=="r"?Q[je]="n":v.test(Re)&&(Le=Re,Re=="r"&&(Q[je]="R"))}for(var We=1,Be=Q[0];We<Z-1;++We){var tt=Q[We];tt=="+"&&Be=="1"&&Q[We+1]=="1"?Q[We]="1":tt==","&&Be==Q[We+1]&&(Be=="1"||Be=="n")&&(Q[We]=Be),Be=tt}for(var Et=0;Et<Z;++Et){var Vt=Q[Et];if(Vt==",")Q[Et]="N";else if(Vt=="%"){var Lt=void 0;for(Lt=Et+1;Lt<Z&&Q[Lt]=="%";++Lt);for(var Fr=Et&&Q[Et-1]=="!"||Lt<Z&&Q[Lt]=="1"?"1":"N",Lr=Et;Lr<Lt;++Lr)Q[Lr]=Fr;Et=Lt-1}}for(var zt=0,Nr=K;zt<Z;++zt){var Zt=Q[zt];Nr=="L"&&Zt=="1"?Q[zt]="L":v.test(Zt)&&(Nr=Zt)}for(var Wt=0;Wt<Z;++Wt)if(h.test(Q[Wt])){var Bt=void 0;for(Bt=Wt+1;Bt<Z&&h.test(Q[Bt]);++Bt);for(var _t=(Wt?Q[Wt-1]:K)=="L",Ar=(Bt<Z?Q[Bt]:K)=="L",cs=_t==Ar?_t?"L":"R":K,fo=Wt;fo<Bt;++fo)Q[fo]=cs;Wt=Bt-1}for(var cr=[],ri,Xt=0;Xt<Z;)if(b.test(Q[Xt])){var yg=Xt;for(++Xt;Xt<Z&&b.test(Q[Xt]);++Xt);cr.push(new L(0,yg,Xt))}else{var Ii=Xt,ea=cr.length,ta=B=="rtl"?1:0;for(++Xt;Xt<Z&&Q[Xt]!="L";++Xt);for(var yr=Ii;yr<Xt;)if(S.test(Q[yr])){Ii<yr&&(cr.splice(ea,0,new L(1,Ii,yr)),ea+=ta);var fs=yr;for(++yr;yr<Xt&&S.test(Q[yr]);++yr);cr.splice(ea,0,new L(2,fs,yr)),ea+=ta,Ii=yr}else++yr;Ii<Xt&&cr.splice(ea,0,new L(1,Ii,Xt))}return B=="ltr"&&(cr[0].level==1&&(ri=A.match(/^\s+/))&&(cr[0].from=ri[0].length,cr.unshift(new L(0,0,ri[0].length))),ze(cr).level==1&&(ri=A.match(/\s+$/))&&(ze(cr).to-=ri[0].length,cr.push(new L(0,Z-ri[0].length,Z)))),B=="rtl"?cr.reverse():cr}}();function ae(o,s){var f=o.order;return f==null&&(f=o.order=Y(o.text,s)),f}var ge=[],ke=function(o,s,f){if(o.addEventListener)o.addEventListener(s,f,!1);else if(o.attachEvent)o.attachEvent("on"+s,f);else{var c=o._handlers||(o._handlers={});c[s]=(c[s]||ge).concat(f)}};function mt(o,s){return o._handlers&&o._handlers[s]||ge}function it(o,s,f){if(o.removeEventListener)o.removeEventListener(s,f,!1);else if(o.detachEvent)o.detachEvent("on"+s,f);else{var c=o._handlers,h=c&&c[s];if(h){var v=ne(h,f);v>-1&&(c[s]=h.slice(0,v).concat(h.slice(v+1)))}}}function Me(o,s){var f=mt(o,s);if(f.length)for(var c=Array.prototype.slice.call(arguments,2),h=0;h<f.length;++h)f[h].apply(null,c)}function Xe(o,s,f){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),Me(o,f||s.type,o,s),qr(s)||s.codemirrorIgnore}function Ha(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var f=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)ne(f,s[c])==-1&&f.push(s[c])}function Jt(o,s){return mt(o,s).length>0}function Xn(o){o.prototype.on=function(s,f){ke(this,s,f)},o.prototype.off=function(s,f){it(this,s,f)}}function sr(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Ua(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function qr(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==!1}function Wo(o){sr(o),Ua(o)}function to(o){return o.target||o.srcElement}function Dc(o){var s=o.which;return s==null&&(o.button&1?s=1:o.button&2?s=3:o.button&4&&(s=2)),_&&o.ctrlKey&&s==1&&(s=3),s}var pl=function(){if(d&&p<9)return!1;var o=U("div");return"draggable"in o||"dragDrop"in o}(),Tr;function zc(o){if(Tr==null){var s=U("span","​");W(o,U("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(Tr=s.offsetWidth<=1&&s.offsetHeight>2&&!(d&&p<8))}var f=Tr?U("span","​"):U("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return f.setAttribute("cm-text",""),f}var gl;function Yn(o){if(gl!=null)return gl;var s=W(o,document.createTextNode("AخA")),f=be(s,0,1).getBoundingClientRect(),c=be(s,1,2).getBoundingClientRect();return we(o),!f||f.left==f.right?!1:gl=c.right-f.right<3}var vl="\n\nb".split(/\n/).length!=3?function(o){for(var s=0,f=[],c=o.length;s<=c;){var h=o.indexOf("\n",s);h==-1&&(h=o.length);var v=o.slice(s,o.charAt(h-1)=="\r"?h-1:h),b=v.indexOf("\r");b!=-1?(f.push(v.slice(0,b)),s+=b+1):(f.push(v),s=h+1)}return f}:function(o){return o.split(/\r\n?|\n/)},Bc=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=o?!1:s.compareEndPoints("StartToEnd",s)!=0},Hc=function(){var o=U("div");return"oncopy"in o?!0:(o.setAttribute("oncopy","return;"),typeof o.oncopy=="function")}(),ml=null;function ro(o){if(ml!=null)return ml;var s=W(o,U("span","x")),f=s.getBoundingClientRect(),c=be(s,0,1).getBoundingClientRect();return ml=Math.abs(f.left-c.left)>1}var gn={},Vr={};function Uc(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),gn[o]=s}function Oi(o,s){Vr[o]=s}function Wa(o){if(typeof o=="string"&&Vr.hasOwnProperty(o))o=Vr[o];else if(o&&typeof o.name=="string"&&Vr.hasOwnProperty(o.name)){var s=Vr[o.name];typeof s=="string"&&(s={name:s}),o=st(s,o),o.name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return Wa("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return Wa("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function Ka(o,s){s=Wa(s);var f=gn[s.name];if(!f)return Ka(o,"text/plain");var c=f(o,s);if(On.hasOwnProperty(s.name)){var h=On[s.name];for(var v in h)h.hasOwnProperty(v)&&(c.hasOwnProperty(v)&&(c["_"+v]=c[v]),c[v]=h[v])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var b in s.modeProps)c[b]=s.modeProps[b];return c}var On={};function Pn(o,s){var f=On.hasOwnProperty(o)?On[o]:On[o]={};se(s,f)}function Xr(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var f={};for(var c in s){var h=s[c];h instanceof Array&&(h=h.concat([])),f[c]=h}return f}function yl(o,s){for(var f;o.innerMode&&(f=o.innerMode(s),!(!f||f.mode==o));)s=f.state,o=f.mode;return f||{mode:o,state:s}}function wl(o,s,f){return o.startState?o.startState(s,f):!0}var It=function(o,s,f){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=f};It.prototype.eol=function(){return this.pos>=this.string.length},It.prototype.sol=function(){return this.pos==this.lineStart},It.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},It.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},It.prototype.eat=function(o){var s=this.string.charAt(this.pos),f;if(typeof o=="string"?f=s==o:f=s&&(o.test?o.test(s):o(s)),f)return++this.pos,s},It.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},It.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},It.prototype.skipToEnd=function(){this.pos=this.string.length},It.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},It.prototype.backUp=function(o){this.pos-=o},It.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=X(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?X(this.string,this.lineStart,this.tabSize):0)},It.prototype.indentation=function(){return X(this.string,null,this.tabSize)-(this.lineStart?X(this.string,this.lineStart,this.tabSize):0)},It.prototype.match=function(o,s,f){if(typeof o=="string"){var c=function(b){return f?b.toLowerCase():b},h=this.string.substr(this.pos,o.length);if(c(h)==c(o))return s!==!1&&(this.pos+=o.length),!0}else{var v=this.string.slice(this.pos).match(o);return v&&v.index>0?null:(v&&s!==!1&&(this.pos+=v[0].length),v)}},It.prototype.current=function(){return this.string.slice(this.start,this.pos)},It.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},It.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},It.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};function Fe(o,s){if(s-=o.first,s<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var f=o;!f.lines;)for(var c=0;;++c){var h=f.children[c],v=h.chunkSize();if(s<v){f=h;break}s-=v}return f.lines[s]}function Qn(o,s,f){var c=[],h=s.line;return o.iter(s.line,f.line+1,function(v){var b=v.text;h==f.line&&(b=b.slice(0,f.ch)),h==s.line&&(b=b.slice(s.ch)),c.push(b),++h}),c}function bl(o,s,f){var c=[];return o.iter(s,f,function(h){c.push(h.text)}),c}function Rr(o,s){var f=s-o.height;if(f)for(var c=o;c;c=c.parent)c.height+=f}function ft(o){if(o.parent==null)return null;for(var s=o.parent,f=ne(s.lines,o),c=s.parent;c;s=c,c=c.parent)for(var h=0;c.children[h]!=s;++h)f+=c.children[h].chunkSize();return f+s.first}function Jn(o,s){var f=o.first;e:do{for(var c=0;c<o.children.length;++c){var h=o.children[c],v=h.height;if(s<v){o=h;continue e}s-=v,f+=h.chunkSize()}return f}while(!o.lines);for(var b=0;b<o.lines.length;++b){var S=o.lines[b],L=S.height;if(s<L)break;s-=L}return f+b}function Ko(o,s){return s>=o.first&&s<o.first+o.size}function xl(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function Ee(o,s,f){if(f===void 0&&(f=null),!(this instanceof Ee))return new Ee(o,s,f);this.line=o,this.ch=s,this.sticky=f}function j(o,s){return o.line-s.line||o.ch-s.ch}function G(o,s){return o.sticky==s.sticky&&j(o,s)==0}function ve(o){return Ee(o.line,o.ch)}function Se(o,s){return j(o,s)<0?s:o}function Ve(o,s){return j(o,s)<0?o:s}function lt(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function Ie(o,s){if(s.line<o.first)return Ee(o.first,0);var f=o.first+o.size-1;return s.line>f?Ee(f,Fe(o,f).text.length):lr(s,Fe(o,s.line).text.length)}function lr(o,s){var f=o.ch;return f==null||f>s?Ee(o.line,s):f<0?Ee(o.line,0):o}function Yr(o,s){for(var f=[],c=0;c<s.length;c++)f[c]=Ie(o,s[c]);return f}var Ga=function(o,s){this.state=o,this.lookAhead=s},Zn=function(o,s,f,c){this.state=s,this.doc=o,this.line=f,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};Zn.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},Zn.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},Zn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Zn.fromSaved=function(o,s,f){return s instanceof Ga?new Zn(o,Xr(o.mode,s.state),f,s.lookAhead):new Zn(o,Xr(o.mode,s),f)},Zn.prototype.save=function(o){var s=o!==!1?Xr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ga(s,this.maxLookAhead):s};function Fw(o,s,f,c){var h=[o.state.modeGen],v={};Ww(o,s.text,o.doc.mode,f,function(A,B){return h.push(A,B)},v,c);for(var b=f.state,S=function(A){f.baseTokens=h;var B=o.state.overlays[A],K=1,Z=0;f.state=!0,Ww(o,s.text,B.mode,f,function(Q,fe){for(var ye=K;Z<Q;){var Ce=h[K];Ce>Q&&h.splice(K,1,Q,h[K+1],Ce),K+=2,Z=Math.min(Q,Ce)}if(fe)if(B.opaque)h.splice(ye,K-ye,Q,"overlay "+fe),K=ye+2;else for(;ye<K;ye+=2){var Pe=h[ye+1];h[ye+1]=(Pe?Pe+" ":"")+"overlay "+fe}},v),f.state=b,f.baseTokens=null,f.baseTokenPos=1},L=0;L<o.state.overlays.length;++L)S(L);return{styles:h,classes:v.bgClass||v.textClass?v:null}}function Dw(o,s,f){if(!s.styles||s.styles[0]!=o.state.modeGen){var c=El(o,ft(s)),h=s.text.length>o.options.maxHighlightLength&&Xr(o.doc.mode,c.state),v=Fw(o,s,c);h&&(c.state=h),s.stateAfter=c.save(!h),s.styles=v.styles,v.classes?s.styleClasses=v.classes:s.styleClasses&&(s.styleClasses=null),f===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function El(o,s,f){var c=o.doc,h=o.display;if(!c.mode.startState)return new Zn(c,!0,s);var v=QL(o,s,f),b=v>c.first&&Fe(c,v-1).stateAfter,S=b?Zn.fromSaved(c,b,v):new Zn(c,wl(c.mode),v);return c.iter(v,s,function(L){Pp(o,L.text,S);var A=S.line;L.stateAfter=A==s-1||A%5==0||A>=h.viewFrom&&A<h.viewTo?S.save():null,S.nextLine()}),f&&(c.modeFrontier=S.line),S}function Pp(o,s,f,c){var h=o.doc.mode,v=new It(s,o.options.tabSize,f);for(v.start=v.pos=c||0,s==""&&zw(h,f.state);!v.eol();)Lp(h,v,f.state),v.start=v.pos}function zw(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var f=yl(o,s);if(f.mode.blankLine)return f.mode.blankLine(f.state)}}function Lp(o,s,f,c){for(var h=0;h<10;h++){c&&(c[0]=yl(o,f).mode);var v=o.token(s,f);if(s.pos>s.start)return v}throw new Error("Mode "+o.name+" failed to advance stream.")}var Bw=function(o,s,f){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=f};function Hw(o,s,f,c){var h=o.doc,v=h.mode,b;s=Ie(h,s);var S=Fe(h,s.line),L=El(o,s.line,f),A=new It(S.text,o.options.tabSize,L),B;for(c&&(B=[]);(c||A.pos<s.ch)&&!A.eol();)A.start=A.pos,b=Lp(v,A,L.state),c&&B.push(new Bw(A,b,Xr(h.mode,L.state)));return c?B:new Bw(A,b,L.state)}function Uw(o,s){if(o)for(;;){var f=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f)break;o=o.slice(0,f.index)+o.slice(f.index+f[0].length);var c=f[1]?"bgClass":"textClass";s[c]==null?s[c]=f[2]:new RegExp("(?:^|\\s)"+f[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+f[2])}return o}function Ww(o,s,f,c,h,v,b){var S=f.flattenSpans;S==null&&(S=o.options.flattenSpans);var L=0,A=null,B=new It(s,o.options.tabSize,c),K,Z=o.options.addModeClass&&[null];for(s==""&&Uw(zw(f,c.state),v);!B.eol();){if(B.pos>o.options.maxHighlightLength?(S=!1,b&&Pp(o,s,c,B.pos),B.pos=s.length,K=null):K=Uw(Lp(f,B,c.state,Z),v),Z){var Q=Z[0].name;Q&&(K="m-"+(K?Q+" "+K:Q))}if(!S||A!=K){for(;L<B.start;)L=Math.min(B.start,L+5e3),h(L,A);A=K}B.start=B.pos}for(;L<B.pos;){var fe=Math.min(B.pos,L+5e3);h(fe,A),L=fe}}function QL(o,s,f){for(var c,h,v=o.doc,b=f?-1:s-(o.doc.mode.innerMode?1e3:100),S=s;S>b;--S){if(S<=v.first)return v.first;var L=Fe(v,S-1),A=L.stateAfter;if(A&&(!f||S+(A instanceof Ga?A.lookAhead:0)<=v.modeFrontier))return S;var B=X(L.text,null,o.options.tabSize);(h==null||c>B)&&(h=S-1,c=B)}return h}function JL(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var f=o.first,c=s-1;c>f;c--){var h=Fe(o,c).stateAfter;if(h&&(!(h instanceof Ga)||c+h.lookAhead<s)){f=c+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,f)}}var Kw=!1,Pi=!1;function ZL(){Kw=!0}function eN(){Pi=!0}function Wc(o,s,f){this.marker=o,this.from=s,this.to=f}function Sl(o,s){if(o)for(var f=0;f<o.length;++f){var c=o[f];if(c.marker==s)return c}}function tN(o,s){for(var f,c=0;c<o.length;++c)o[c]!=s&&(f||(f=[])).push(o[c]);return f}function rN(o,s,f){var c=f&&window.WeakSet&&(f.markedSpans||(f.markedSpans=new WeakSet));c&&c.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],c&&c.add(o.markedSpans)),s.marker.attachLine(o)}function nN(o,s,f){var c;if(o)for(var h=0;h<o.length;++h){var v=o[h],b=v.marker,S=v.from==null||(b.inclusiveLeft?v.from<=s:v.from<s);if(S||v.from==s&&b.type=="bookmark"&&(!f||!v.marker.insertLeft)){var L=v.to==null||(b.inclusiveRight?v.to>=s:v.to>s);(c||(c=[])).push(new Wc(b,v.from,L?null:v.to))}}return c}function iN(o,s,f){var c;if(o)for(var h=0;h<o.length;++h){var v=o[h],b=v.marker,S=v.to==null||(b.inclusiveRight?v.to>=s:v.to>s);if(S||v.from==s&&b.type=="bookmark"&&(!f||v.marker.insertLeft)){var L=v.from==null||(b.inclusiveLeft?v.from<=s:v.from<s);(c||(c=[])).push(new Wc(b,L?null:v.from-s,v.to==null?null:v.to-s))}}return c}function Np(o,s){if(s.full)return null;var f=Ko(o,s.from.line)&&Fe(o,s.from.line).markedSpans,c=Ko(o,s.to.line)&&Fe(o,s.to.line).markedSpans;if(!f&&!c)return null;var h=s.from.ch,v=s.to.ch,b=j(s.from,s.to)==0,S=nN(f,h,b),L=iN(c,v,b),A=s.text.length==1,B=ze(s.text).length+(A?h:0);if(S)for(var K=0;K<S.length;++K){var Z=S[K];if(Z.to==null){var Q=Sl(L,Z.marker);Q?A&&(Z.to=Q.to==null?null:Q.to+B):Z.to=h}}if(L)for(var fe=0;fe<L.length;++fe){var ye=L[fe];if(ye.to!=null&&(ye.to+=B),ye.from==null){var Ce=Sl(S,ye.marker);Ce||(ye.from=B,A&&(S||(S=[])).push(ye))}else ye.from+=B,A&&(S||(S=[])).push(ye)}S&&(S=Gw(S)),L&&L!=S&&(L=Gw(L));var Pe=[S];if(!A){var je=s.text.length-2,Le;if(je>0&&S)for(var Re=0;Re<S.length;++Re)S[Re].to==null&&(Le||(Le=[])).push(new Wc(S[Re].marker,null,null));for(var We=0;We<je;++We)Pe.push(Le);Pe.push(L)}return Pe}function Gw(o){for(var s=0;s<o.length;++s){var f=o[s];f.from!=null&&f.from==f.to&&f.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function oN(o,s,f){var c=null;if(o.iter(s.line,f.line+1,function(Q){if(Q.markedSpans)for(var fe=0;fe<Q.markedSpans.length;++fe){var ye=Q.markedSpans[fe].marker;ye.readOnly&&(!c||ne(c,ye)==-1)&&(c||(c=[])).push(ye)}}),!c)return null;for(var h=[{from:s,to:f}],v=0;v<c.length;++v)for(var b=c[v],S=b.find(0),L=0;L<h.length;++L){var A=h[L];if(!(j(A.to,S.from)<0||j(A.from,S.to)>0)){var B=[L,1],K=j(A.from,S.from),Z=j(A.to,S.to);(K<0||!b.inclusiveLeft&&!K)&&B.push({from:A.from,to:S.from}),(Z>0||!b.inclusiveRight&&!Z)&&B.push({from:S.to,to:A.to}),h.splice.apply(h,B),L+=B.length-3}}return h}function qw(o){var s=o.markedSpans;if(s){for(var f=0;f<s.length;++f)s[f].marker.detachLine(o);o.markedSpans=null}}function Vw(o,s){if(s){for(var f=0;f<s.length;++f)s[f].marker.attachLine(o);o.markedSpans=s}}function Kc(o){return o.inclusiveLeft?-1:0}function Gc(o){return o.inclusiveRight?1:0}function Ap(o,s){var f=o.lines.length-s.lines.length;if(f!=0)return f;var c=o.find(),h=s.find(),v=j(c.from,h.from)||Kc(o)-Kc(s);if(v)return-v;var b=j(c.to,h.to)||Gc(o)-Gc(s);return b||s.id-o.id}function Xw(o,s){var f=Pi&&o.markedSpans,c;if(f)for(var h=void 0,v=0;v<f.length;++v)h=f[v],h.marker.collapsed&&(s?h.from:h.to)==null&&(!c||Ap(c,h.marker)<0)&&(c=h.marker);return c}function Yw(o){return Xw(o,!0)}function qc(o){return Xw(o,!1)}function aN(o,s){var f=Pi&&o.markedSpans,c;if(f)for(var h=0;h<f.length;++h){var v=f[h];v.marker.collapsed&&(v.from==null||v.from<s)&&(v.to==null||v.to>s)&&(!c||Ap(c,v.marker)<0)&&(c=v.marker)}return c}function Qw(o,s,f,c,h){var v=Fe(o,s),b=Pi&&v.markedSpans;if(b)for(var S=0;S<b.length;++S){var L=b[S];if(L.marker.collapsed){var A=L.marker.find(0),B=j(A.from,f)||Kc(L.marker)-Kc(h),K=j(A.to,c)||Gc(L.marker)-Gc(h);if(!(B>=0&&K<=0||B<=0&&K>=0)&&(B<=0&&(L.marker.inclusiveRight&&h.inclusiveLeft?j(A.to,f)>=0:j(A.to,f)>0)||B>=0&&(L.marker.inclusiveRight&&h.inclusiveLeft?j(A.from,c)<=0:j(A.from,c)<0)))return!0}}}function Ln(o){for(var s;s=Yw(o);)o=s.find(-1,!0).line;return o}function sN(o){for(var s;s=qc(o);)o=s.find(1,!0).line;return o}function lN(o){for(var s,f;s=qc(o);)o=s.find(1,!0).line,(f||(f=[])).push(o);return f}function jp(o,s){var f=Fe(o,s),c=Ln(f);return f==c?s:ft(c)}function Jw(o,s){if(s>o.lastLine())return s;var f=Fe(o,s),c;if(!no(o,f))return s;for(;c=qc(f);)f=c.find(1,!0).line;return ft(f)+1}function no(o,s){var f=Pi&&s.markedSpans;if(f){for(var c=void 0,h=0;h<f.length;++h)if(c=f[h],!!c.marker.collapsed){if(c.from==null)return!0;if(!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&Ip(o,s,c))return!0}}}function Ip(o,s,f){if(f.to==null){var c=f.marker.find(1,!0);return Ip(o,c.line,Sl(c.line.markedSpans,f.marker))}if(f.marker.inclusiveRight&&f.to==s.text.length)return!0;for(var h=void 0,v=0;v<s.markedSpans.length;++v)if(h=s.markedSpans[v],h.marker.collapsed&&!h.marker.widgetNode&&h.from==f.to&&(h.to==null||h.to!=f.from)&&(h.marker.inclusiveLeft||f.marker.inclusiveRight)&&Ip(o,s,h))return!0}function Li(o){o=Ln(o);for(var s=0,f=o.parent,c=0;c<f.lines.length;++c){var h=f.lines[c];if(h==o)break;s+=h.height}for(var v=f.parent;v;f=v,v=f.parent)for(var b=0;b<v.children.length;++b){var S=v.children[b];if(S==f)break;s+=S.height}return s}function Vc(o){if(o.height==0)return 0;for(var s=o.text.length,f,c=o;f=Yw(c);){var h=f.find(0,!0);c=h.from.line,s+=h.from.ch-h.to.ch}for(c=o;f=qc(c);){var v=f.find(0,!0);s-=c.text.length-v.from.ch,c=v.to.line,s+=c.text.length-v.to.ch}return s}function _p(o){var s=o.display,f=o.doc;s.maxLine=Fe(f,f.first),s.maxLineLength=Vc(s.maxLine),s.maxLineChanged=!0,f.iter(function(c){var h=Vc(c);h>s.maxLineLength&&(s.maxLineLength=h,s.maxLine=c)})}var qa=function(o,s,f){this.text=o,Vw(this,s),this.height=f?f(this):1};qa.prototype.lineNo=function(){return ft(this)},Xn(qa);function uN(o,s,f,c){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),qw(o),Vw(o,f);var h=c?c(o):1;h!=o.height&&Rr(o,h)}function cN(o){o.parent=null,qw(o)}var fN={},dN={};function Zw(o,s){if(!o||/^\s*$/.test(o))return null;var f=s.addModeClass?dN:fN;return f[o]||(f[o]=o.replace(/\S+/g,"cm-$&"))}function e1(o,s){var f=F("span",null,null,g?"padding-right: .1px":null),c={pre:F("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var h=0;h<=(s.rest?s.rest.length:0);h++){var v=h?s.rest[h-1]:s.line,b=void 0;c.pos=0,c.addToken=pN,Yn(o.display.measure)&&(b=ae(v,o.doc.direction))&&(c.addToken=vN(c.addToken,b)),c.map=[];var S=s!=o.display.externalMeasured&&ft(v);mN(v,c,Dw(o,v,S)),v.styleClasses&&(v.styleClasses.bgClass&&(c.bgClass=me(v.styleClasses.bgClass,c.bgClass||"")),v.styleClasses.textClass&&(c.textClass=me(v.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(zc(o.display.measure))),h==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(g){var L=c.content.lastChild;(/\bcm-tab\b/.test(L.className)||L.querySelector&&L.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return Me(o,"renderLine",o,s.line,c.pre),c.pre.className&&(c.textClass=me(c.pre.className,c.textClass||"")),c}function hN(o){var s=U("span","•","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function pN(o,s,f,c,h,v,b){if(s){var S=o.splitSpaces?gN(s,o.trailingSpace):s,L=o.cm.state.specialChars,A=!1,B;if(!L.test(s))o.col+=s.length,B=document.createTextNode(S),o.map.push(o.pos,o.pos+s.length,B),d&&p<9&&(A=!0),o.pos+=s.length;else{B=document.createDocumentFragment();for(var K=0;;){L.lastIndex=K;var Z=L.exec(s),Q=Z?Z.index-K:s.length-K;if(Q){var fe=document.createTextNode(S.slice(K,K+Q));d&&p<9?B.appendChild(U("span",[fe])):B.appendChild(fe),o.map.push(o.pos,o.pos+Q,fe),o.col+=Q,o.pos+=Q}if(!Z)break;K+=Q+1;var ye=void 0;if(Z[0]=="	"){var Ce=o.cm.options.tabSize,Pe=Ce-o.col%Ce;ye=B.appendChild(U("span",vt(Pe),"cm-tab")),ye.setAttribute("role","presentation"),ye.setAttribute("cm-text","	"),o.col+=Pe}else Z[0]=="\r"||Z[0]=="\n"?(ye=B.appendChild(U("span",Z[0]=="\r"?"␍":"␤","cm-invalidchar")),ye.setAttribute("cm-text",Z[0]),o.col+=1):(ye=o.cm.options.specialCharPlaceholder(Z[0]),ye.setAttribute("cm-text",Z[0]),d&&p<9?B.appendChild(U("span",[ye])):B.appendChild(ye),o.col+=1);o.map.push(o.pos,o.pos+1,ye),o.pos++}}if(o.trailingSpace=S.charCodeAt(s.length-1)==32,f||c||h||A||v||b){var je=f||"";c&&(je+=c),h&&(je+=h);var Le=U("span",[B],je,v);if(b)for(var Re in b)b.hasOwnProperty(Re)&&Re!="style"&&Re!="class"&&Le.setAttribute(Re,b[Re]);return o.content.appendChild(Le)}o.content.appendChild(B)}}function gN(o,s){if(o.length>1&&!/  /.test(o))return o;for(var f=s,c="",h=0;h<o.length;h++){var v=o.charAt(h);v==" "&&f&&(h==o.length-1||o.charCodeAt(h+1)==32)&&(v=" "),c+=v,f=v==" "}return c}function vN(o,s){return function(f,c,h,v,b,S,L){h=h?h+" cm-force-border":"cm-force-border";for(var A=f.pos,B=A+c.length;;){for(var K=void 0,Z=0;Z<s.length&&(K=s[Z],!(K.to>A&&K.from<=A));Z++);if(K.to>=B)return o(f,c,h,v,b,S,L);o(f,c.slice(0,K.to-A),h,v,null,S,L),v=null,c=c.slice(K.to-A),A=K.to}}}function t1(o,s,f,c){var h=!c&&f.widgetNode;h&&o.map.push(o.pos,o.pos+s,h),!c&&o.cm.display.input.needsContentAttribute&&(h||(h=o.content.appendChild(document.createElement("span"))),h.setAttribute("cm-marker",f.id)),h&&(o.cm.display.input.setUneditable(h),o.content.appendChild(h)),o.pos+=s,o.trailingSpace=!1}function mN(o,s,f){var c=o.markedSpans,h=o.text,v=0;if(!c){for(var b=1;b<f.length;b+=2)s.addToken(s,h.slice(v,v=f[b]),Zw(f[b+1],s.cm.options));return}for(var S=h.length,L=0,A=1,B="",K,Z,Q=0,fe,ye,Ce,Pe,je;;){if(Q==L){fe=ye=Ce=Z="",je=null,Pe=null,Q=1/0;for(var Le=[],Re=void 0,We=0;We<c.length;++We){var Be=c[We],tt=Be.marker;if(tt.type=="bookmark"&&Be.from==L&&tt.widgetNode)Le.push(tt);else if(Be.from<=L&&(Be.to==null||Be.to>L||tt.collapsed&&Be.to==L&&Be.from==L)){if(Be.to!=null&&Be.to!=L&&Q>Be.to&&(Q=Be.to,ye=""),tt.className&&(fe+=" "+tt.className),tt.css&&(Z=(Z?Z+";":"")+tt.css),tt.startStyle&&Be.from==L&&(Ce+=" "+tt.startStyle),tt.endStyle&&Be.to==Q&&(Re||(Re=[])).push(tt.endStyle,Be.to),tt.title&&((je||(je={})).title=tt.title),tt.attributes)for(var Et in tt.attributes)(je||(je={}))[Et]=tt.attributes[Et];tt.collapsed&&(!Pe||Ap(Pe.marker,tt)<0)&&(Pe=Be)}else Be.from>L&&Q>Be.from&&(Q=Be.from)}if(Re)for(var Vt=0;Vt<Re.length;Vt+=2)Re[Vt+1]==Q&&(ye+=" "+Re[Vt]);if(!Pe||Pe.from==L)for(var Lt=0;Lt<Le.length;++Lt)t1(s,0,Le[Lt]);if(Pe&&(Pe.from||0)==L){if(t1(s,(Pe.to==null?S+1:Pe.to)-L,Pe.marker,Pe.from==null),Pe.to==null)return;Pe.to==L&&(Pe=!1)}}if(L>=S)break;for(var Fr=Math.min(S,Q);;){if(B){var Lr=L+B.length;if(!Pe){var zt=Lr>Fr?B.slice(0,Fr-L):B;s.addToken(s,zt,K?K+fe:fe,Ce,L+zt.length==Q?ye:"",Z,je)}if(Lr>=Fr){B=B.slice(Fr-L),L=Fr;break}L=Lr,Ce=""}B=h.slice(v,v=f[A++]),K=Zw(f[A++],s.cm.options)}}}function r1(o,s,f){this.line=s,this.rest=lN(s),this.size=this.rest?ft(ze(this.rest))-f+1:1,this.node=this.text=null,this.hidden=no(o,s)}function Xc(o,s,f){for(var c=[],h,v=s;v<f;v=h){var b=new r1(o.doc,Fe(o.doc,v),v);h=v+b.size,c.push(b)}return c}var Va=null;function yN(o){Va?Va.ops.push(o):o.ownsGroup=Va={ops:[o],delayedCallbacks:[]}}function wN(o){var s=o.delayedCallbacks,f=0;do{for(;f<s.length;f++)s[f].call(null);for(var c=0;c<o.ops.length;c++){var h=o.ops[c];if(h.cursorActivityHandlers)for(;h.cursorActivityCalled<h.cursorActivityHandlers.length;)h.cursorActivityHandlers[h.cursorActivityCalled++].call(null,h.cm)}}while(f<s.length)}function bN(o,s){var f=o.ownsGroup;if(f)try{wN(f)}finally{Va=null,s(f)}}var Cl=null;function Kt(o,s){var f=mt(o,s);if(f.length){var c=Array.prototype.slice.call(arguments,2),h;Va?h=Va.delayedCallbacks:Cl?h=Cl:(h=Cl=[],setTimeout(xN,0));for(var v=function(S){h.push(function(){return f[S].apply(null,c)})},b=0;b<f.length;++b)v(b)}}function xN(){var o=Cl;Cl=null;for(var s=0;s<o.length;++s)o[s]()}function n1(o,s,f,c){for(var h=0;h<s.changes.length;h++){var v=s.changes[h];v=="text"?SN(o,s):v=="gutter"?o1(o,s,f,c):v=="class"?Mp(o,s):v=="widget"&&CN(o,s,c)}s.changes=null}function kl(o){return o.node==o.text&&(o.node=U("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),d&&p<8&&(o.node.style.zIndex=2)),o.node}function EN(o,s){var f=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(f&&(f+=" CodeMirror-linebackground"),s.background)f?s.background.className=f:(s.background.parentNode.removeChild(s.background),s.background=null);else if(f){var c=kl(s);s.background=c.insertBefore(U("div",null,f),c.firstChild),o.display.input.setUneditable(s.background)}}function i1(o,s){var f=o.display.externalMeasured;return f&&f.line==s.line?(o.display.externalMeasured=null,s.measure=f.measure,f.built):e1(o,s)}function SN(o,s){var f=s.text.className,c=i1(o,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,Mp(o,s)):f&&(s.text.className=f)}function Mp(o,s){EN(o,s),s.line.wrapClass?kl(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var f=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=f||""}function o1(o,s,f,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var h=kl(s);s.gutterBackground=U("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),h.insertBefore(s.gutterBackground,s.text)}var v=s.line.gutterMarkers;if(o.options.lineNumbers||v){var b=kl(s),S=s.gutter=U("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(S.setAttribute("aria-hidden","true"),o.display.input.setUneditable(S),b.insertBefore(S,s.text),s.line.gutterClass&&(S.className+=" "+s.line.gutterClass),o.options.lineNumbers&&(!v||!v["CodeMirror-linenumbers"])&&(s.lineNumber=S.appendChild(U("div",xl(o.options,f),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),v)for(var L=0;L<o.display.gutterSpecs.length;++L){var A=o.display.gutterSpecs[L].className,B=v.hasOwnProperty(A)&&v[A];B&&S.appendChild(U("div",[B],"CodeMirror-gutter-elt","left: "+c.gutterLeft[A]+"px; width: "+c.gutterWidth[A]+"px"))}}}function CN(o,s,f){s.alignable&&(s.alignable=null);for(var c=oe("CodeMirror-linewidget"),h=s.node.firstChild,v=void 0;h;h=v)v=h.nextSibling,c.test(h.className)&&s.node.removeChild(h);a1(o,s,f)}function kN(o,s,f,c){var h=i1(o,s);return s.text=s.node=h.pre,h.bgClass&&(s.bgClass=h.bgClass),h.textClass&&(s.textClass=h.textClass),Mp(o,s),o1(o,s,f,c),a1(o,s,c),s.node}function a1(o,s,f){if(s1(o,s.line,s,f,!0),s.rest)for(var c=0;c<s.rest.length;c++)s1(o,s.rest[c],s,f,!1)}function s1(o,s,f,c,h){if(s.widgets)for(var v=kl(f),b=0,S=s.widgets;b<S.length;++b){var L=S[b],A=U("div",[L.node],"CodeMirror-linewidget"+(L.className?" "+L.className:""));L.handleMouseEvents||A.setAttribute("cm-ignore-events","true"),TN(L,A,f,c),o.display.input.setUneditable(A),h&&L.above?v.insertBefore(A,f.gutter||f.text):v.appendChild(A),Kt(L,"redraw")}}function TN(o,s,f,c){if(o.noHScroll){(f.alignable||(f.alignable=[])).push(s);var h=c.wrapperWidth;s.style.left=c.fixedPos+"px",o.coverGutter||(h-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=h+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function Tl(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!pe(document.body,o.node)){var f="position: relative;";o.coverGutter&&(f+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(f+="width: "+s.display.wrapper.clientWidth+"px;"),W(s.display.measure,U("div",[o.node],null,f))}return o.height=o.node.parentNode.offsetHeight}function Ni(o,s){for(var f=to(s);f!=o.wrapper;f=f.parentNode)if(!f||f.nodeType==1&&f.getAttribute("cm-ignore-events")=="true"||f.parentNode==o.sizer&&f!=o.mover)return!0}function Yc(o){return o.lineSpace.offsetTop}function Rp(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function l1(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=W(o.measure,U("pre","x","CodeMirror-line-like")),f=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(f.paddingLeft),right:parseInt(f.paddingRight)};return!isNaN(c.left)&&!isNaN(c.right)&&(o.cachedPaddingH=c),c}function ei(o){return de-o.display.nativeBarWidth}function Go(o){return o.display.scroller.clientWidth-ei(o)-o.display.barWidth}function $p(o){return o.display.scroller.clientHeight-ei(o)-o.display.barHeight}function ON(o,s,f){var c=o.options.lineWrapping,h=c&&Go(o);if(!s.measure.heights||c&&s.measure.width!=h){var v=s.measure.heights=[];if(c){s.measure.width=h;for(var b=s.text.firstChild.getClientRects(),S=0;S<b.length-1;S++){var L=b[S],A=b[S+1];Math.abs(L.bottom-A.bottom)>2&&v.push((L.bottom+A.top)/2-f.top)}}v.push(f.bottom-f.top)}}function u1(o,s,f){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var c=0;c<o.rest.length;c++)if(o.rest[c]==s)return{map:o.measure.maps[c],cache:o.measure.caches[c]};for(var h=0;h<o.rest.length;h++)if(ft(o.rest[h])>f)return{map:o.measure.maps[h],cache:o.measure.caches[h],before:!0}}}function PN(o,s){s=Ln(s);var f=ft(s),c=o.display.externalMeasured=new r1(o.doc,s,f);c.lineN=f;var h=c.built=e1(o,c);return c.text=h.pre,W(o.display.lineMeasure,h.pre),c}function c1(o,s,f,c){return ti(o,Xa(o,s),f,c)}function Fp(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[Xo(o,s)];var f=o.display.externalMeasured;if(f&&s>=f.lineN&&s<f.lineN+f.size)return f}function Xa(o,s){var f=ft(s),c=Fp(o,f);c&&!c.text?c=null:c&&c.changes&&(n1(o,c,f,Up(o)),o.curOp.forceUpdate=!0),c||(c=PN(o,s));var h=u1(c,s,f);return{line:s,view:c,rect:null,map:h.map,cache:h.cache,before:h.before,hasHeights:!1}}function ti(o,s,f,c,h){s.before&&(f=-1);var v=f+(c||""),b;return s.cache.hasOwnProperty(v)?b=s.cache[v]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(ON(o,s.view,s.rect),s.hasHeights=!0),b=NN(o,s,f,c),b.bogus||(s.cache[v]=b)),{left:b.left,right:b.right,top:h?b.rtop:b.top,bottom:h?b.rbottom:b.bottom}}var f1={left:0,right:0,top:0,bottom:0};function d1(o,s,f){for(var c,h,v,b,S,L,A=0;A<o.length;A+=3)if(S=o[A],L=o[A+1],s<S?(h=0,v=1,b="left"):s<L?(h=s-S,v=h+1):(A==o.length-3||s==L&&o[A+3]>s)&&(v=L-S,h=v-1,s>=L&&(b="right")),h!=null){if(c=o[A+2],S==L&&f==(c.insertLeft?"left":"right")&&(b=f),f=="left"&&h==0)for(;A&&o[A-2]==o[A-3]&&o[A-1].insertLeft;)c=o[(A-=3)+2],b="left";if(f=="right"&&h==L-S)for(;A<o.length-3&&o[A+3]==o[A+4]&&!o[A+5].insertLeft;)c=o[(A+=3)+2],b="right";break}return{node:c,start:h,end:v,collapse:b,coverStart:S,coverEnd:L}}function LN(o,s){var f=f1;if(s=="left")for(var c=0;c<o.length&&(f=o[c]).left==f.right;c++);else for(var h=o.length-1;h>=0&&(f=o[h]).left==f.right;h--);return f}function NN(o,s,f,c){var h=d1(s.map,f,c),v=h.node,b=h.start,S=h.end,L=h.collapse,A;if(v.nodeType==3){for(var B=0;B<4;B++){for(;b&&Ne(s.line.text.charAt(h.coverStart+b));)--b;for(;h.coverStart+S<h.coverEnd&&Ne(s.line.text.charAt(h.coverStart+S));)++S;if(d&&p<9&&b==0&&S==h.coverEnd-h.coverStart?A=v.parentNode.getBoundingClientRect():A=LN(be(v,b,S).getClientRects(),c),A.left||A.right||b==0)break;S=b,b=b-1,L="right"}d&&p<11&&(A=AN(o.display.measure,A))}else{b>0&&(L=c="right");var K;o.options.lineWrapping&&(K=v.getClientRects()).length>1?A=K[c=="right"?K.length-1:0]:A=v.getBoundingClientRect()}if(d&&p<9&&!b&&(!A||!A.left&&!A.right)){var Z=v.parentNode.getClientRects()[0];Z?A={left:Z.left,right:Z.left+Qa(o.display),top:Z.top,bottom:Z.bottom}:A=f1}for(var Q=A.top-s.rect.top,fe=A.bottom-s.rect.top,ye=(Q+fe)/2,Ce=s.view.measure.heights,Pe=0;Pe<Ce.length-1&&!(ye<Ce[Pe]);Pe++);var je=Pe?Ce[Pe-1]:0,Le=Ce[Pe],Re={left:(L=="right"?A.right:A.left)-s.rect.left,right:(L=="left"?A.left:A.right)-s.rect.left,top:je,bottom:Le};return!A.left&&!A.right&&(Re.bogus=!0),o.options.singleCursorHeightPerLine||(Re.rtop=Q,Re.rbottom=fe),Re}function AN(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ro(o))return s;var f=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*f,right:s.right*f,top:s.top*c,bottom:s.bottom*c}}function h1(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function p1(o){o.display.externalMeasure=null,we(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)h1(o.display.view[s])}function Ol(o){p1(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function g1(){return w&&N?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function v1(){return w&&N?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Dp(o){var s=Ln(o),f=s.widgets,c=0;if(f)for(var h=0;h<f.length;++h)f[h].above&&(c+=Tl(f[h]));return c}function Qc(o,s,f,c,h){if(!h){var v=Dp(s);f.top+=v,f.bottom+=v}if(c=="line")return f;c||(c="local");var b=Li(s);if(c=="local"?b+=Yc(o.display):b-=o.display.viewOffset,c=="page"||c=="window"){var S=o.display.lineSpace.getBoundingClientRect();b+=S.top+(c=="window"?0:v1());var L=S.left+(c=="window"?0:g1());f.left+=L,f.right+=L}return f.top+=b,f.bottom+=b,f}function m1(o,s,f){if(f=="div")return s;var c=s.left,h=s.top;if(f=="page")c-=g1(),h-=v1();else if(f=="local"||!f){var v=o.display.sizer.getBoundingClientRect();c+=v.left,h+=v.top}var b=o.display.lineSpace.getBoundingClientRect();return{left:c-b.left,top:h-b.top}}function Jc(o,s,f,c,h){return c||(c=Fe(o.doc,s.line)),Qc(o,c,c1(o,c,s.ch,h),f)}function Nn(o,s,f,c,h,v){c=c||Fe(o.doc,s.line),h||(h=Xa(o,c));function b(fe,ye){var Ce=ti(o,h,fe,ye?"right":"left",v);return ye?Ce.left=Ce.right:Ce.right=Ce.left,Qc(o,c,Ce,f)}var S=ae(c,o.doc.direction),L=s.ch,A=s.sticky;if(L>=c.text.length?(L=c.text.length,A="before"):L<=0&&(L=0,A="after"),!S)return b(A=="before"?L-1:L,A=="before");function B(fe,ye,Ce){var Pe=S[ye],je=Pe.level==1;return b(Ce?fe-1:fe,je!=Ce)}var K=D(S,L,A),Z=k,Q=B(L,K,A=="before");return Z!=null&&(Q.other=B(L,Z,A!="before")),Q}function y1(o,s){var f=0;s=Ie(o.doc,s),o.options.lineWrapping||(f=Qa(o.display)*s.ch);var c=Fe(o.doc,s.line),h=Li(c)+Yc(o.display);return{left:f,right:f,top:h,bottom:h+c.height}}function zp(o,s,f,c,h){var v=Ee(o,s,f);return v.xRel=h,c&&(v.outside=c),v}function Bp(o,s,f){var c=o.doc;if(f+=o.display.viewOffset,f<0)return zp(c.first,0,null,-1,-1);var h=Jn(c,f),v=c.first+c.size-1;if(h>v)return zp(c.first+c.size-1,Fe(c,v).text.length,null,1,1);s<0&&(s=0);for(var b=Fe(c,h);;){var S=jN(o,b,h,s,f),L=aN(b,S.ch+(S.xRel>0||S.outside>0?1:0));if(!L)return S;var A=L.find(1);if(A.line==h)return A;b=Fe(c,h=A.line)}}function w1(o,s,f,c){c-=Dp(s);var h=s.text.length,v=M(function(b){return ti(o,f,b-1).bottom<=c},h,0);return h=M(function(b){return ti(o,f,b).top>c},v,h),{begin:v,end:h}}function b1(o,s,f,c){f||(f=Xa(o,s));var h=Qc(o,s,ti(o,f,c),"line").top;return w1(o,s,f,h)}function Hp(o,s,f,c){return o.bottom<=f?!1:o.top>f?!0:(c?o.left:o.right)>s}function jN(o,s,f,c,h){h-=Li(s);var v=Xa(o,s),b=Dp(s),S=0,L=s.text.length,A=!0,B=ae(s,o.doc.direction);if(B){var K=(o.options.lineWrapping?_N:IN)(o,s,f,v,B,c,h);A=K.level!=1,S=A?K.from:K.to-1,L=A?K.to:K.from-1}var Z=null,Q=null,fe=M(function(We){var Be=ti(o,v,We);return Be.top+=b,Be.bottom+=b,Hp(Be,c,h,!1)?(Be.top<=h&&Be.left<=c&&(Z=We,Q=Be),!0):!1},S,L),ye,Ce,Pe=!1;if(Q){var je=c-Q.left<Q.right-c,Le=je==A;fe=Z+(Le?0:1),Ce=Le?"after":"before",ye=je?Q.left:Q.right}else{!A&&(fe==L||fe==S)&&fe++,Ce=fe==0?"after":fe==s.text.length?"before":ti(o,v,fe-(A?1:0)).bottom+b<=h==A?"after":"before";var Re=Nn(o,Ee(f,fe,Ce),"line",s,v);ye=Re.left,Pe=h<Re.top?-1:h>=Re.bottom?1:0}return fe=nt(s.text,fe,1),zp(f,fe,Ce,Pe,c-ye)}function IN(o,s,f,c,h,v,b){var S=M(function(K){var Z=h[K],Q=Z.level!=1;return Hp(Nn(o,Ee(f,Q?Z.to:Z.from,Q?"before":"after"),"line",s,c),v,b,!0)},0,h.length-1),L=h[S];if(S>0){var A=L.level!=1,B=Nn(o,Ee(f,A?L.from:L.to,A?"after":"before"),"line",s,c);Hp(B,v,b,!0)&&B.top>b&&(L=h[S-1])}return L}function _N(o,s,f,c,h,v,b){var S=w1(o,s,c,b),L=S.begin,A=S.end;/\s/.test(s.text.charAt(A-1))&&A--;for(var B=null,K=null,Z=0;Z<h.length;Z++){var Q=h[Z];if(!(Q.from>=A||Q.to<=L)){var fe=Q.level!=1,ye=ti(o,c,fe?Math.min(A,Q.to)-1:Math.max(L,Q.from)).right,Ce=ye<v?v-ye+1e9:ye-v;(!B||K>Ce)&&(B=Q,K=Ce)}}return B||(B=h[h.length-1]),B.from<L&&(B={from:L,to:B.to,level:B.level}),B.to>A&&(B={from:B.from,to:A,level:B.level}),B}var qo;function Ya(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(qo==null){qo=U("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)qo.appendChild(document.createTextNode("x")),qo.appendChild(U("br"));qo.appendChild(document.createTextNode("x"))}W(o.measure,qo);var f=qo.offsetHeight/50;return f>3&&(o.cachedTextHeight=f),we(o.measure),f||1}function Qa(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=U("span","xxxxxxxxxx"),f=U("pre",[s],"CodeMirror-line-like");W(o.measure,f);var c=s.getBoundingClientRect(),h=(c.right-c.left)/10;return h>2&&(o.cachedCharWidth=h),h||10}function Up(o){for(var s=o.display,f={},c={},h=s.gutters.clientLeft,v=s.gutters.firstChild,b=0;v;v=v.nextSibling,++b){var S=o.display.gutterSpecs[b].className;f[S]=v.offsetLeft+v.clientLeft+h,c[S]=v.clientWidth}return{fixedPos:Wp(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:f,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function Wp(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function x1(o){var s=Ya(o.display),f=o.options.lineWrapping,c=f&&Math.max(5,o.display.scroller.clientWidth/Qa(o.display)-3);return function(h){if(no(o.doc,h))return 0;var v=0;if(h.widgets)for(var b=0;b<h.widgets.length;b++)h.widgets[b].height&&(v+=h.widgets[b].height);return f?v+(Math.ceil(h.text.length/c)||1)*s:v+s}}function Kp(o){var s=o.doc,f=x1(o);s.iter(function(c){var h=f(c);h!=c.height&&Rr(c,h)})}function Vo(o,s,f,c){var h=o.display;if(!f&&to(s).getAttribute("cm-not-content")=="true")return null;var v,b,S=h.lineSpace.getBoundingClientRect();try{v=s.clientX-S.left,b=s.clientY-S.top}catch{return null}var L=Bp(o,v,b),A;if(c&&L.xRel>0&&(A=Fe(o.doc,L.line).text).length==L.ch){var B=X(A,A.length,o.options.tabSize)-A.length;L=Ee(L.line,Math.max(0,Math.round((v-l1(o.display).left)/Qa(o.display))-B))}return L}function Xo(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom,s<0))return null;for(var f=o.display.view,c=0;c<f.length;c++)if(s-=f[c].size,s<0)return c}function Or(o,s,f,c){s==null&&(s=o.doc.first),f==null&&(f=o.doc.first+o.doc.size),c||(c=0);var h=o.display;if(c&&f<h.viewTo&&(h.updateLineNumbers==null||h.updateLineNumbers>s)&&(h.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=h.viewTo)Pi&&jp(o.doc,s)<h.viewTo&&oo(o);else if(f<=h.viewFrom)Pi&&Jw(o.doc,f+c)>h.viewFrom?oo(o):(h.viewFrom+=c,h.viewTo+=c);else if(s<=h.viewFrom&&f>=h.viewTo)oo(o);else if(s<=h.viewFrom){var v=Zc(o,f,f+c,1);v?(h.view=h.view.slice(v.index),h.viewFrom=v.lineN,h.viewTo+=c):oo(o)}else if(f>=h.viewTo){var b=Zc(o,s,s,-1);b?(h.view=h.view.slice(0,b.index),h.viewTo=b.lineN):oo(o)}else{var S=Zc(o,s,s,-1),L=Zc(o,f,f+c,1);S&&L?(h.view=h.view.slice(0,S.index).concat(Xc(o,S.lineN,L.lineN)).concat(h.view.slice(L.index)),h.viewTo+=c):oo(o)}var A=h.externalMeasured;A&&(f<A.lineN?A.lineN+=c:s<A.lineN+A.size&&(h.externalMeasured=null))}function io(o,s,f){o.curOp.viewChanged=!0;var c=o.display,h=o.display.externalMeasured;if(h&&s>=h.lineN&&s<h.lineN+h.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var v=c.view[Xo(o,s)];if(v.node!=null){var b=v.changes||(v.changes=[]);ne(b,f)==-1&&b.push(f)}}}function oo(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function Zc(o,s,f,c){var h=Xo(o,s),v,b=o.display.view;if(!Pi||f==o.doc.first+o.doc.size)return{index:h,lineN:f};for(var S=o.display.viewFrom,L=0;L<h;L++)S+=b[L].size;if(S!=s){if(c>0){if(h==b.length-1)return null;v=S+b[h].size-s,h++}else v=S-s;s+=v,f+=v}for(;jp(o.doc,f)!=f;){if(h==(c<0?0:b.length-1))return null;f+=c*b[h-(c<0?1:0)].size,h+=c}return{index:h,lineN:f}}function MN(o,s,f){var c=o.display,h=c.view;h.length==0||s>=c.viewTo||f<=c.viewFrom?(c.view=Xc(o,s,f),c.viewFrom=s):(c.viewFrom>s?c.view=Xc(o,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(Xo(o,s))),c.viewFrom=s,c.viewTo<f?c.view=c.view.concat(Xc(o,c.viewTo,f)):c.viewTo>f&&(c.view=c.view.slice(0,Xo(o,f)))),c.viewTo=f}function E1(o){for(var s=o.display.view,f=0,c=0;c<s.length;c++){var h=s[c];!h.hidden&&(!h.node||h.changes)&&++f}return f}function Pl(o){o.display.input.showSelection(o.display.input.prepareSelection())}function S1(o,s){s===void 0&&(s=!0);var f=o.doc,c={},h=c.cursors=document.createDocumentFragment(),v=c.selection=document.createDocumentFragment(),b=o.options.$customCursor;b&&(s=!0);for(var S=0;S<f.sel.ranges.length;S++)if(!(!s&&S==f.sel.primIndex)){var L=f.sel.ranges[S];if(!(L.from().line>=o.display.viewTo||L.to().line<o.display.viewFrom)){var A=L.empty();if(b){var B=b(o,L);B&&Gp(o,B,h)}else(A||o.options.showCursorWhenSelecting)&&Gp(o,L.head,h);A||RN(o,L,v)}}return c}function Gp(o,s,f){var c=Nn(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),h=f.appendChild(U("div"," ","CodeMirror-cursor"));if(h.style.left=c.left+"px",h.style.top=c.top+"px",h.style.height=Math.max(0,c.bottom-c.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var v=Jc(o,s,"div",null,null),b=v.right-v.left;h.style.width=(b>0?b:o.defaultCharWidth())+"px"}if(c.other){var S=f.appendChild(U("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));S.style.display="",S.style.left=c.other.left+"px",S.style.top=c.other.top+"px",S.style.height=(c.other.bottom-c.other.top)*.85+"px"}}function ef(o,s){return o.top-s.top||o.left-s.left}function RN(o,s,f){var c=o.display,h=o.doc,v=document.createDocumentFragment(),b=l1(o.display),S=b.left,L=Math.max(c.sizerWidth,Go(o)-c.sizer.offsetLeft)-b.right,A=h.direction=="ltr";function B(Le,Re,We,Be){Re<0&&(Re=0),Re=Math.round(Re),Be=Math.round(Be),v.appendChild(U("div",null,"CodeMirror-selected","position: absolute; left: "+Le+"px;\n                             top: "+Re+"px; width: "+(We==null?L-Le:We)+"px;\n                             height: "+(Be-Re)+"px"))}function K(Le,Re,We){var Be=Fe(h,Le),tt=Be.text.length,Et,Vt;function Lt(zt,Nr){return Jc(o,Ee(Le,zt),"div",Be,Nr)}function Fr(zt,Nr,Zt){var Wt=b1(o,Be,null,zt),Bt=Nr=="ltr"==(Zt=="after")?"left":"right",_t=Zt=="after"?Wt.begin:Wt.end-(/\s/.test(Be.text.charAt(Wt.end-1))?2:1);return Lt(_t,Bt)[Bt]}var Lr=ae(Be,h.direction);return E(Lr,Re||0,We==null?tt:We,function(zt,Nr,Zt,Wt){var Bt=Zt=="ltr",_t=Lt(zt,Bt?"left":"right"),Ar=Lt(Nr-1,Bt?"right":"left"),cs=Re==null&&zt==0,fo=We==null&&Nr==tt,cr=Wt==0,ri=!Lr||Wt==Lr.length-1;if(Ar.top-_t.top<=3){var Xt=(A?cs:fo)&&cr,yg=(A?fo:cs)&&ri,Ii=Xt?S:(Bt?_t:Ar).left,ea=yg?L:(Bt?Ar:_t).right;B(Ii,_t.top,ea-Ii,_t.bottom)}else{var ta,yr,fs,wg;Bt?(ta=A&&cs&&cr?S:_t.left,yr=A?L:Fr(zt,Zt,"before"),fs=A?S:Fr(Nr,Zt,"after"),wg=A&&fo&&ri?L:Ar.right):(ta=A?Fr(zt,Zt,"before"):S,yr=!A&&cs&&cr?L:_t.right,fs=!A&&fo&&ri?S:Ar.left,wg=A?Fr(Nr,Zt,"after"):L),B(ta,_t.top,yr-ta,_t.bottom),_t.bottom<Ar.top&&B(S,_t.bottom,null,Ar.top),B(fs,Ar.top,wg-fs,Ar.bottom)}(!Et||ef(_t,Et)<0)&&(Et=_t),ef(Ar,Et)<0&&(Et=Ar),(!Vt||ef(_t,Vt)<0)&&(Vt=_t),ef(Ar,Vt)<0&&(Vt=Ar)}),{start:Et,end:Vt}}var Z=s.from(),Q=s.to();if(Z.line==Q.line)K(Z.line,Z.ch,Q.ch);else{var fe=Fe(h,Z.line),ye=Fe(h,Q.line),Ce=Ln(fe)==Ln(ye),Pe=K(Z.line,Z.ch,Ce?fe.text.length+1:null).end,je=K(Q.line,Ce?0:null,Q.ch).start;Ce&&(Pe.top<je.top-2?(B(Pe.right,Pe.top,null,Pe.bottom),B(S,je.top,je.left,je.bottom)):B(Pe.right,Pe.top,je.left-Pe.right,Pe.bottom)),Pe.bottom<je.top&&B(S,Pe.bottom,null,je.top)}f.appendChild(v)}function qp(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var f=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||Ja(o),s.cursorDiv.style.visibility=(f=!f)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function C1(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||Xp(o))}function Vp(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&Ja(o))},100)}function Xp(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(Me(o,"focus",o,s),o.state.focused=!0,ue(o.display.wrapper,"CodeMirror-focused"),!o.curOp&&o.display.selForContextMenu!=o.doc.sel&&(o.display.input.reset(),g&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),qp(o))}function Ja(o,s){o.state.delayingBlurEvent||(o.state.focused&&(Me(o,"blur",o,s),o.state.focused=!1,le(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function tf(o){for(var s=o.display,f=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),h=s.lineDiv.getBoundingClientRect().top,v=0,b=0;b<s.view.length;b++){var S=s.view[b],L=o.options.lineWrapping,A=void 0,B=0;if(!S.hidden){if(h+=S.line.height,d&&p<8){var K=S.node.offsetTop+S.node.offsetHeight;A=K-f,f=K}else{var Z=S.node.getBoundingClientRect();A=Z.bottom-Z.top,!L&&S.text.firstChild&&(B=S.text.firstChild.getBoundingClientRect().right-Z.left-1)}var Q=S.line.height-A;if((Q>.005||Q<-.005)&&(h<c&&(v-=Q),Rr(S.line,A),k1(S.line),S.rest))for(var fe=0;fe<S.rest.length;fe++)k1(S.rest[fe]);if(B>o.display.sizerWidth){var ye=Math.ceil(B/Qa(o.display));ye>o.display.maxLineLength&&(o.display.maxLineLength=ye,o.display.maxLine=S.line,o.display.maxLineChanged=!0)}}}Math.abs(v)>2&&(s.scroller.scrollTop+=v)}function k1(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var f=o.widgets[s],c=f.node.parentNode;c&&(f.height=c.offsetHeight)}}function rf(o,s,f){var c=f&&f.top!=null?Math.max(0,f.top):o.scroller.scrollTop;c=Math.floor(c-Yc(o));var h=f&&f.bottom!=null?f.bottom:c+o.wrapper.clientHeight,v=Jn(s,c),b=Jn(s,h);if(f&&f.ensure){var S=f.ensure.from.line,L=f.ensure.to.line;S<v?(v=S,b=Jn(s,Li(Fe(s,S))+o.wrapper.clientHeight)):Math.min(L,s.lastLine())>=b&&(v=Jn(s,Li(Fe(s,L))-o.wrapper.clientHeight),b=L)}return{from:v,to:Math.max(b,v+1)}}function $N(o,s){if(!Xe(o,"scrollCursorIntoView")){var f=o.display,c=f.sizer.getBoundingClientRect(),h=null;if(s.top+c.top<0?h=!0:s.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),h!=null&&!P){var v=U("div","​",null,"position: absolute;\n                         top: "+(s.top-f.viewOffset-Yc(o.display))+"px;\n                         height: "+(s.bottom-s.top+ei(o)+f.barHeight)+"px;\n                         left: "+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(v),v.scrollIntoView(h),o.display.lineSpace.removeChild(v)}}}function FN(o,s,f,c){c==null&&(c=0);var h;!o.options.lineWrapping&&s==f&&(f=s.sticky=="before"?Ee(s.line,s.ch+1,"before"):s,s=s.ch?Ee(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var v=0;v<5;v++){var b=!1,S=Nn(o,s),L=!f||f==s?S:Nn(o,f);h={left:Math.min(S.left,L.left),top:Math.min(S.top,L.top)-c,right:Math.max(S.left,L.left),bottom:Math.max(S.bottom,L.bottom)+c};var A=Yp(o,h),B=o.doc.scrollTop,K=o.doc.scrollLeft;if(A.scrollTop!=null&&(Nl(o,A.scrollTop),Math.abs(o.doc.scrollTop-B)>1&&(b=!0)),A.scrollLeft!=null&&(Yo(o,A.scrollLeft),Math.abs(o.doc.scrollLeft-K)>1&&(b=!0)),!b)break}return h}function DN(o,s){var f=Yp(o,s);f.scrollTop!=null&&Nl(o,f.scrollTop),f.scrollLeft!=null&&Yo(o,f.scrollLeft)}function Yp(o,s){var f=o.display,c=Ya(o.display);s.top<0&&(s.top=0);var h=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:f.scroller.scrollTop,v=$p(o),b={};s.bottom-s.top>v&&(s.bottom=s.top+v);var S=o.doc.height+Rp(f),L=s.top<c,A=s.bottom>S-c;if(s.top<h)b.scrollTop=L?0:s.top;else if(s.bottom>h+v){var B=Math.min(s.top,(A?S:s.bottom)-v);B!=h&&(b.scrollTop=B)}var K=o.options.fixedGutter?0:f.gutters.offsetWidth,Z=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:f.scroller.scrollLeft-K,Q=Go(o)-f.gutters.offsetWidth,fe=s.right-s.left>Q;return fe&&(s.right=s.left+Q),s.left<10?b.scrollLeft=0:s.left<Z?b.scrollLeft=Math.max(0,s.left+K-(fe?0:10)):s.right>Q+Z-3&&(b.scrollLeft=s.right+(fe?0:10)-Q),b}function Qp(o,s){s!=null&&(nf(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function Za(o){nf(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function Ll(o,s,f){(s!=null||f!=null)&&nf(o),s!=null&&(o.curOp.scrollLeft=s),f!=null&&(o.curOp.scrollTop=f)}function zN(o,s){nf(o),o.curOp.scrollToPos=s}function nf(o){var s=o.curOp.scrollToPos;if(s){o.curOp.scrollToPos=null;var f=y1(o,s.from),c=y1(o,s.to);T1(o,f,c,s.margin)}}function T1(o,s,f,c){var h=Yp(o,{left:Math.min(s.left,f.left),top:Math.min(s.top,f.top)-c,right:Math.max(s.right,f.right),bottom:Math.max(s.bottom,f.bottom)+c});Ll(o,h.scrollLeft,h.scrollTop)}function Nl(o,s){Math.abs(o.doc.scrollTop-s)<2||(i||Zp(o,{top:s}),O1(o,s,!0),i&&Zp(o),Il(o,100))}function O1(o,s,f){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),!(o.display.scroller.scrollTop==s&&!f)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function Yo(o,s,f,c){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),!((f?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!c)&&(o.doc.scrollLeft=s,j1(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function Al(o){var s=o.display,f=s.gutters.offsetWidth,c=Math.round(o.doc.height+Rp(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?f:0,docHeight:c,scrollHeight:c+ei(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:f}}var Qo=function(o,s,f){this.cm=f;var c=this.vert=U("div",[U("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),h=this.horiz=U("div",[U("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=h.tabIndex=-1,o(c),o(h),ke(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),ke(h,"scroll",function(){h.clientWidth&&s(h.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&p<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Qo.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,f=o.scrollHeight>o.clientHeight+1,c=o.nativeBarWidth;if(f){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var h=o.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+h)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=f?c+"px":"0",this.horiz.style.left=o.barLeft+"px";var v=o.viewWidth-o.barLeft-(f?c:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+v)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:f?c:0,bottom:s?c:0}},Qo.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Qo.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Qo.prototype.zeroWidthHack=function(){var o=_&&!I?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new J,this.disableVert=new J},Qo.prototype.enableZeroWidthBar=function(o,s,f){o.style.pointerEvents="auto";function c(){var h=o.getBoundingClientRect(),v=f=="vert"?document.elementFromPoint(h.right-1,(h.top+h.bottom)/2):document.elementFromPoint((h.right+h.left)/2,h.bottom-1);v!=o?o.style.pointerEvents="none":s.set(1e3,c)}s.set(1e3,c)},Qo.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var jl=function(){};jl.prototype.update=function(){return{bottom:0,right:0}},jl.prototype.setScrollLeft=function(){},jl.prototype.setScrollTop=function(){},jl.prototype.clear=function(){};function es(o,s){s||(s=Al(o));var f=o.display.barWidth,c=o.display.barHeight;P1(o,s);for(var h=0;h<4&&f!=o.display.barWidth||c!=o.display.barHeight;h++)f!=o.display.barWidth&&o.options.lineWrapping&&tf(o),P1(o,Al(o)),f=o.display.barWidth,c=o.display.barHeight}function P1(o,s){var f=o.display,c=f.scrollbars.update(s);f.sizer.style.paddingRight=(f.barWidth=c.right)+"px",f.sizer.style.paddingBottom=(f.barHeight=c.bottom)+"px",f.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(f.scrollbarFiller.style.display="block",f.scrollbarFiller.style.height=c.bottom+"px",f.scrollbarFiller.style.width=c.right+"px"):f.scrollbarFiller.style.display="",c.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(f.gutterFiller.style.display="block",f.gutterFiller.style.height=c.bottom+"px",f.gutterFiller.style.width=s.gutterWidth+"px"):f.gutterFiller.style.display=""}var L1={native:Qo,null:jl};function N1(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&le(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new L1[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),ke(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,f){f=="horizontal"?Yo(o,s):Nl(o,s)},o),o.display.scrollbars.addClass&&ue(o.display.wrapper,o.display.scrollbars.addClass)}var BN=0;function Jo(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++BN,markArrays:null},yN(o.curOp)}function Zo(o){var s=o.curOp;s&&bN(s,function(f){for(var c=0;c<f.ops.length;c++)f.ops[c].cm.curOp=null;HN(f)})}function HN(o){for(var s=o.ops,f=0;f<s.length;f++)UN(s[f]);for(var c=0;c<s.length;c++)WN(s[c]);for(var h=0;h<s.length;h++)KN(s[h]);for(var v=0;v<s.length;v++)GN(s[v]);for(var b=0;b<s.length;b++)qN(s[b])}function UN(o){var s=o.cm,f=s.display;XN(s),o.updateMaxLine&&_p(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<f.viewFrom||o.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new of(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function WN(o){o.updatedDisplay=o.mustUpdate&&Jp(o.cm,o.update)}function KN(o){var s=o.cm,f=s.display;o.updatedDisplay&&tf(s),o.barMeasure=Al(s),f.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=c1(s,f.maxLine,f.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+o.adjustWidthTo+ei(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+o.adjustWidthTo-Go(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=f.input.prepareSelection())}function GN(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&Yo(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var f=o.focus&&o.focus==ce();o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,f),(o.updatedDisplay||o.startHeight!=s.doc.height)&&es(s,o.barMeasure),o.updatedDisplay&&tg(s,o.barMeasure),o.selectionChanged&&qp(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),f&&C1(o.cm)}function qN(o){var s=o.cm,f=s.display,c=s.doc;if(o.updatedDisplay&&A1(s,o.update),f.wheelStartX!=null&&(o.scrollTop!=null||o.scrollLeft!=null||o.scrollToPos)&&(f.wheelStartX=f.wheelStartY=null),o.scrollTop!=null&&O1(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&Yo(s,o.scrollLeft,!0,!0),o.scrollToPos){var h=FN(s,Ie(c,o.scrollToPos.from),Ie(c,o.scrollToPos.to),o.scrollToPos.margin);$N(s,h)}var v=o.maybeHiddenMarkers,b=o.maybeUnhiddenMarkers;if(v)for(var S=0;S<v.length;++S)v[S].lines.length||Me(v[S],"hide");if(b)for(var L=0;L<b.length;++L)b[L].lines.length&&Me(b[L],"unhide");f.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&Me(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function $r(o,s){if(o.curOp)return s();Jo(o);try{return s()}finally{Zo(o)}}function Gt(o,s){return function(){if(o.curOp)return s.apply(o,arguments);Jo(o);try{return s.apply(o,arguments)}finally{Zo(o)}}}function mr(o){return function(){if(this.curOp)return o.apply(this,arguments);Jo(this);try{return o.apply(this,arguments)}finally{Zo(this)}}}function qt(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);Jo(s);try{return o.apply(this,arguments)}finally{Zo(s)}}}function Il(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,ee(VN,o))}function VN(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var f=+new Date+o.options.workTime,c=El(o,s.highlightFrontier),h=[];s.iter(c.line,Math.min(s.first+s.size,o.display.viewTo+500),function(v){if(c.line>=o.display.viewFrom){var b=v.styles,S=v.text.length>o.options.maxHighlightLength?Xr(s.mode,c.state):null,L=Fw(o,v,c,!0);S&&(c.state=S),v.styles=L.styles;var A=v.styleClasses,B=L.classes;B?v.styleClasses=B:A&&(v.styleClasses=null);for(var K=!b||b.length!=v.styles.length||A!=B&&(!A||!B||A.bgClass!=B.bgClass||A.textClass!=B.textClass),Z=0;!K&&Z<b.length;++Z)K=b[Z]!=v.styles[Z];K&&h.push(c.line),v.stateAfter=c.save(),c.nextLine()}else v.text.length<=o.options.maxHighlightLength&&Pp(o,v.text,c),v.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>f)return Il(o,o.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),h.length&&$r(o,function(){for(var v=0;v<h.length;v++)io(o,h[v],"text")})}}var of=function(o,s,f){var c=o.display;this.viewport=s,this.visible=rf(c,o.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=Go(o),this.force=f,this.dims=Up(o),this.events=[]};of.prototype.signal=function(o,s){Jt(o,s)&&this.events.push(arguments)},of.prototype.finish=function(){for(var o=0;o<this.events.length;o++)Me.apply(null,this.events[o])};function XN(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=ei(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=ei(o)+"px",s.scrollbarsClipped=!0)}function YN(o){if(o.hasFocus())return null;var s=ce();if(!s||!pe(o.display.lineDiv,s))return null;var f={activeElt:s};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&pe(o.display.lineDiv,c.anchorNode)&&(f.anchorNode=c.anchorNode,f.anchorOffset=c.anchorOffset,f.focusNode=c.focusNode,f.focusOffset=c.focusOffset)}return f}function QN(o){if(!(!o||!o.activeElt||o.activeElt==ce())&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&pe(document.body,o.anchorNode)&&pe(document.body,o.focusNode))){var s=window.getSelection(),f=document.createRange();f.setEnd(o.anchorNode,o.anchorOffset),f.collapse(!1),s.removeAllRanges(),s.addRange(f),s.extend(o.focusNode,o.focusOffset)}}function Jp(o,s){var f=o.display,c=o.doc;if(s.editorIsHidden)return oo(o),!1;if(!s.force&&s.visible.from>=f.viewFrom&&s.visible.to<=f.viewTo&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo)&&f.renderedView==f.view&&E1(o)==0)return!1;I1(o)&&(oo(o),s.dims=Up(o));var h=c.first+c.size,v=Math.max(s.visible.from-o.options.viewportMargin,c.first),b=Math.min(h,s.visible.to+o.options.viewportMargin);f.viewFrom<v&&v-f.viewFrom<20&&(v=Math.max(c.first,f.viewFrom)),f.viewTo>b&&f.viewTo-b<20&&(b=Math.min(h,f.viewTo)),Pi&&(v=jp(o.doc,v),b=Jw(o.doc,b));var S=v!=f.viewFrom||b!=f.viewTo||f.lastWrapHeight!=s.wrapperHeight||f.lastWrapWidth!=s.wrapperWidth;MN(o,v,b),f.viewOffset=Li(Fe(o.doc,f.viewFrom)),o.display.mover.style.top=f.viewOffset+"px";var L=E1(o);if(!S&&L==0&&!s.force&&f.renderedView==f.view&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo))return!1;var A=YN(o);return L>4&&(f.lineDiv.style.display="none"),JN(o,f.updateLineNumbers,s.dims),L>4&&(f.lineDiv.style.display=""),f.renderedView=f.view,QN(A),we(f.cursorDiv),we(f.selectionDiv),f.gutters.style.height=f.sizer.style.minHeight=0,S&&(f.lastWrapHeight=s.wrapperHeight,f.lastWrapWidth=s.wrapperWidth,Il(o,400)),f.updateLineNumbers=null,!0}function A1(o,s){for(var f=s.viewport,c=!0;;c=!1){if(!c||!o.options.lineWrapping||s.oldDisplayWidth==Go(o)){if(f&&f.top!=null&&(f={top:Math.min(o.doc.height+Rp(o.display)-$p(o),f.top)}),s.visible=rf(o.display,o.doc,f),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break}else c&&(s.visible=rf(o.display,o.doc,f));if(!Jp(o,s))break;tf(o);var h=Al(o);Pl(o),es(o,h),tg(o,h),s.force=!1}s.signal(o,"update",o),(o.display.viewFrom!=o.display.reportedViewFrom||o.display.viewTo!=o.display.reportedViewTo)&&(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function Zp(o,s){var f=new of(o,s);if(Jp(o,f)){tf(o),A1(o,f);var c=Al(o);Pl(o),es(o,c),tg(o,c),f.finish()}}function JN(o,s,f){var c=o.display,h=o.options.lineNumbers,v=c.lineDiv,b=v.firstChild;function S(fe){var ye=fe.nextSibling;return g&&_&&o.display.currentWheelTarget==fe?fe.style.display="none":fe.parentNode.removeChild(fe),ye}for(var L=c.view,A=c.viewFrom,B=0;B<L.length;B++){var K=L[B];if(!K.hidden)if(!K.node||K.node.parentNode!=v){var Z=kN(o,K,A,f);v.insertBefore(Z,b)}else{for(;b!=K.node;)b=S(b);var Q=h&&s!=null&&s<=A&&K.lineNumber;K.changes&&(ne(K.changes,"gutter")>-1&&(Q=!1),n1(o,K,A,f)),Q&&(we(K.lineNumber),K.lineNumber.appendChild(document.createTextNode(xl(o.options,A)))),b=K.node.nextSibling}A+=K.size}for(;b;)b=S(b)}function eg(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",Kt(o,"gutterChanged",o)}function tg(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+ei(o)+"px"}function j1(o){var s=o.display,f=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!o.options.fixedGutter))){for(var c=Wp(s)-s.scroller.scrollLeft+o.doc.scrollLeft,h=s.gutters.offsetWidth,v=c+"px",b=0;b<f.length;b++)if(!f[b].hidden){o.options.fixedGutter&&(f[b].gutter&&(f[b].gutter.style.left=v),f[b].gutterBackground&&(f[b].gutterBackground.style.left=v));var S=f[b].alignable;if(S)for(var L=0;L<S.length;L++)S[L].style.left=v}o.options.fixedGutter&&(s.gutters.style.left=c+h+"px")}}function I1(o){if(!o.options.lineNumbers)return!1;var s=o.doc,f=xl(o.options,s.first+s.size-1),c=o.display;if(f.length!=c.lineNumChars){var h=c.measure.appendChild(U("div",[U("div",f)],"CodeMirror-linenumber CodeMirror-gutter-elt")),v=h.firstChild.offsetWidth,b=h.offsetWidth-v;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(v,c.lineGutter.offsetWidth-b)+1,c.lineNumWidth=c.lineNumInnerWidth+b,c.lineNumChars=c.lineNumInnerWidth?f.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",eg(o.display),!0}return!1}function rg(o,s){for(var f=[],c=!1,h=0;h<o.length;h++){var v=o[h],b=null;if(typeof v!="string"&&(b=v.style,v=v.className),v=="CodeMirror-linenumbers")if(s)c=!0;else continue;f.push({className:v,style:b})}return s&&!c&&f.push({className:"CodeMirror-linenumbers",style:null}),f}function _1(o){var s=o.gutters,f=o.gutterSpecs;we(s),o.lineGutter=null;for(var c=0;c<f.length;++c){var h=f[c],v=h.className,b=h.style,S=s.appendChild(U("div",null,"CodeMirror-gutter "+v));b&&(S.style.cssText=b),v=="CodeMirror-linenumbers"&&(o.lineGutter=S,S.style.width=(o.lineNumWidth||1)+"px")}s.style.display=f.length?"":"none",eg(o)}function _l(o){_1(o.display),Or(o),j1(o)}function ZN(o,s,f,c){var h=this;this.input=f,h.scrollbarFiller=U("div",null,"CodeMirror-scrollbar-filler"),h.scrollbarFiller.setAttribute("cm-not-content","true"),h.gutterFiller=U("div",null,"CodeMirror-gutter-filler"),h.gutterFiller.setAttribute("cm-not-content","true"),h.lineDiv=F("div",null,"CodeMirror-code"),h.selectionDiv=U("div",null,null,"position: relative; z-index: 1"),h.cursorDiv=U("div",null,"CodeMirror-cursors"),h.measure=U("div",null,"CodeMirror-measure"),h.lineMeasure=U("div",null,"CodeMirror-measure"),h.lineSpace=F("div",[h.measure,h.lineMeasure,h.selectionDiv,h.cursorDiv,h.lineDiv],null,"position: relative; outline: none");var v=F("div",[h.lineSpace],"CodeMirror-lines");h.mover=U("div",[v],null,"position: relative"),h.sizer=U("div",[h.mover],"CodeMirror-sizer"),h.sizerWidth=null,h.heightForcer=U("div",null,null,"position: absolute; height: "+de+"px; width: 1px;"),h.gutters=U("div",null,"CodeMirror-gutters"),h.lineGutter=null,h.scroller=U("div",[h.sizer,h.heightForcer,h.gutters],"CodeMirror-scroll"),h.scroller.setAttribute("tabIndex","-1"),h.wrapper=U("div",[h.scrollbarFiller,h.gutterFiller,h.scroller],"CodeMirror"),h.wrapper.setAttribute("translate","no"),d&&p<8&&(h.gutters.style.zIndex=-1,h.scroller.style.paddingRight=0),!g&&!(i&&R)&&(h.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(h.wrapper):o(h.wrapper)),h.viewFrom=h.viewTo=s.first,h.reportedViewFrom=h.reportedViewTo=s.first,h.view=[],h.renderedView=null,h.externalMeasured=null,h.viewOffset=0,h.lastWrapHeight=h.lastWrapWidth=0,h.updateLineNumbers=null,h.nativeBarWidth=h.barHeight=h.barWidth=0,h.scrollbarsClipped=!1,h.lineNumWidth=h.lineNumInnerWidth=h.lineNumChars=null,h.alignWidgets=!1,h.cachedCharWidth=h.cachedTextHeight=h.cachedPaddingH=null,h.maxLine=null,h.maxLineLength=0,h.maxLineChanged=!1,h.wheelDX=h.wheelDY=h.wheelStartX=h.wheelStartY=null,h.shift=!1,h.selForContextMenu=null,h.activeTouch=null,h.gutterSpecs=rg(c.gutters,c.lineNumbers),_1(h),f.init(h)}var af=0,Ai=null;d?Ai=-.53:i?Ai=15:w?Ai=-.7:O&&(Ai=-1/3);function M1(o){var s=o.wheelDeltaX,f=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),f==null&&o.detail&&o.axis==o.VERTICAL_AXIS?f=o.detail:f==null&&(f=o.wheelDelta),{x:s,y:f}}function eA(o){var s=M1(o);return s.x*=Ai,s.y*=Ai,s}function R1(o,s){var f=M1(s),c=f.x,h=f.y,v=Ai;s.deltaMode===0&&(c=s.deltaX,h=s.deltaY,v=1);var b=o.display,S=b.scroller,L=S.scrollWidth>S.clientWidth,A=S.scrollHeight>S.clientHeight;if(c&&L||h&&A){if(h&&_&&g){e:for(var B=s.target,K=b.view;B!=S;B=B.parentNode)for(var Z=0;Z<K.length;Z++)if(K[Z].node==B){o.display.currentWheelTarget=B;break e}}if(c&&!i&&!x&&v!=null){h&&A&&Nl(o,Math.max(0,S.scrollTop+h*v)),Yo(o,Math.max(0,S.scrollLeft+c*v)),(!h||h&&A)&&sr(s),b.wheelStartX=null;return}if(h&&v!=null){var Q=h*v,fe=o.doc.scrollTop,ye=fe+b.wrapper.clientHeight;Q<0?fe=Math.max(0,fe+Q-50):ye=Math.min(o.doc.height,ye+Q+50),Zp(o,{top:fe,bottom:ye})}af<20&&s.deltaMode!==0&&(b.wheelStartX==null?(b.wheelStartX=S.scrollLeft,b.wheelStartY=S.scrollTop,b.wheelDX=c,b.wheelDY=h,setTimeout(function(){if(b.wheelStartX!=null){var Ce=S.scrollLeft-b.wheelStartX,Pe=S.scrollTop-b.wheelStartY,je=Pe&&b.wheelDY&&Pe/b.wheelDY||Ce&&b.wheelDX&&Ce/b.wheelDX;b.wheelStartX=b.wheelStartY=null,je&&(Ai=(Ai*af+je)/(af+1),++af)}},200)):(b.wheelDX+=c,b.wheelDY+=h))}}var Qr=function(o,s){this.ranges=o,this.primIndex=s};Qr.prototype.primary=function(){return this.ranges[this.primIndex]},Qr.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var f=this.ranges[s],c=o.ranges[s];if(!G(f.anchor,c.anchor)||!G(f.head,c.head))return!1}return!0},Qr.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new dt(ve(this.ranges[s].anchor),ve(this.ranges[s].head));return new Qr(o,this.primIndex)},Qr.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Qr.prototype.contains=function(o,s){s||(s=o);for(var f=0;f<this.ranges.length;f++){var c=this.ranges[f];if(j(s,c.from())>=0&&j(o,c.to())<=0)return f}return-1};var dt=function(o,s){this.anchor=o,this.head=s};dt.prototype.from=function(){return Ve(this.anchor,this.head)},dt.prototype.to=function(){return Se(this.anchor,this.head)},dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function An(o,s,f){var c=o&&o.options.selectionsMayTouch,h=s[f];s.sort(function(Z,Q){return j(Z.from(),Q.from())}),f=ne(s,h);for(var v=1;v<s.length;v++){var b=s[v],S=s[v-1],L=j(S.to(),b.from());if(c&&!b.empty()?L>0:L>=0){var A=Ve(S.from(),b.from()),B=Se(S.to(),b.to()),K=S.empty()?b.from()==b.head:S.from()==S.head;v<=f&&--f,s.splice(--v,2,new dt(K?B:A,K?A:B))}}return new Qr(s,f)}function ao(o,s){return new Qr([new dt(o,s||o)],0)}function so(o){return o.text?Ee(o.from.line+o.text.length-1,ze(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function $1(o,s){if(j(o,s.from)<0)return o;if(j(o,s.to)<=0)return so(s);var f=o.line+s.text.length-(s.to.line-s.from.line)-1,c=o.ch;return o.line==s.to.line&&(c+=so(s).ch-s.to.ch),Ee(f,c)}function ng(o,s){for(var f=[],c=0;c<o.sel.ranges.length;c++){var h=o.sel.ranges[c];f.push(new dt($1(h.anchor,s),$1(h.head,s)))}return An(o.cm,f,o.sel.primIndex)}function F1(o,s,f){return o.line==s.line?Ee(f.line,o.ch-s.ch+f.ch):Ee(f.line+(o.line-s.line),o.ch)}function tA(o,s,f){for(var c=[],h=Ee(o.first,0),v=h,b=0;b<s.length;b++){var S=s[b],L=F1(S.from,h,v),A=F1(so(S),h,v);if(h=S.to,v=A,f=="around"){var B=o.sel.ranges[b],K=j(B.head,B.anchor)<0;c[b]=new dt(K?A:L,K?L:A)}else c[b]=new dt(L,L)}return new Qr(c,o.sel.primIndex)}function ig(o){o.doc.mode=Ka(o.options,o.doc.modeOption),Ml(o)}function Ml(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,Il(o,100),o.state.modeGen++,o.curOp&&Or(o)}function D1(o,s){return s.from.ch==0&&s.to.ch==0&&ze(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function og(o,s,f,c){function h(je){return f?f[je]:null}function v(je,Le,Re){uN(je,Le,Re,c),Kt(je,"change",je,s)}function b(je,Le){for(var Re=[],We=je;We<Le;++We)Re.push(new qa(A[We],h(We),c));return Re}var S=s.from,L=s.to,A=s.text,B=Fe(o,S.line),K=Fe(o,L.line),Z=ze(A),Q=h(A.length-1),fe=L.line-S.line;if(s.full)o.insert(0,b(0,A.length)),o.remove(A.length,o.size-A.length);else if(D1(o,s)){var ye=b(0,A.length-1);v(K,K.text,Q),fe&&o.remove(S.line,fe),ye.length&&o.insert(S.line,ye)}else if(B==K)if(A.length==1)v(B,B.text.slice(0,S.ch)+Z+B.text.slice(L.ch),Q);else{var Ce=b(1,A.length-1);Ce.push(new qa(Z+B.text.slice(L.ch),Q,c)),v(B,B.text.slice(0,S.ch)+A[0],h(0)),o.insert(S.line+1,Ce)}else if(A.length==1)v(B,B.text.slice(0,S.ch)+A[0]+K.text.slice(L.ch),h(0)),o.remove(S.line+1,fe);else{v(B,B.text.slice(0,S.ch)+A[0],h(0)),v(K,Z+K.text.slice(L.ch),Q);var Pe=b(1,A.length-1);fe>1&&o.remove(S.line+1,fe-1),o.insert(S.line+1,Pe)}Kt(o,"change",o,s)}function lo(o,s,f){function c(h,v,b){if(h.linked)for(var S=0;S<h.linked.length;++S){var L=h.linked[S];if(L.doc!=v){var A=b&&L.sharedHist;f&&!A||(s(L.doc,A),c(L.doc,h,A))}}}c(o,null,!0)}function z1(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,Kp(o),ig(o),B1(o),o.options.direction=s.direction,o.options.lineWrapping||_p(o),o.options.mode=s.modeOption,Or(o)}function B1(o){(o.doc.direction=="rtl"?ue:le)(o.display.lineDiv,"CodeMirror-rtl")}function rA(o){$r(o,function(){B1(o),Or(o)})}function sf(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function ag(o,s){var f={from:ve(s.from),to:so(s),text:Qn(o,s.from,s.to)};return W1(o,f,s.from.line,s.to.line+1),lo(o,function(c){return W1(c,f,s.from.line,s.to.line+1)},!0),f}function H1(o){for(;o.length;){var s=ze(o);if(s.ranges)o.pop();else break}}function nA(o,s){if(s)return H1(o.done),ze(o.done);if(o.done.length&&!ze(o.done).ranges)return ze(o.done);if(o.done.length>1&&!o.done[o.done.length-2].ranges)return o.done.pop(),ze(o.done)}function U1(o,s,f,c){var h=o.history;h.undone.length=0;var v=+new Date,b,S;if((h.lastOp==c||h.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&h.lastModTime>v-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(b=nA(h,h.lastOp==c)))S=ze(b.changes),j(s.from,s.to)==0&&j(s.from,S.to)==0?S.to=so(s):b.changes.push(ag(o,s));else{var L=ze(h.done);for((!L||!L.ranges)&&lf(o.sel,h.done),b={changes:[ag(o,s)],generation:h.generation},h.done.push(b);h.done.length>h.undoDepth;)h.done.shift(),h.done[0].ranges||h.done.shift()}h.done.push(f),h.generation=++h.maxGeneration,h.lastModTime=h.lastSelTime=v,h.lastOp=h.lastSelOp=c,h.lastOrigin=h.lastSelOrigin=s.origin,S||Me(o,"historyAdded")}function iA(o,s,f,c){var h=s.charAt(0);return h=="*"||h=="+"&&f.ranges.length==c.ranges.length&&f.somethingSelected()==c.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function oA(o,s,f,c){var h=o.history,v=c&&c.origin;f==h.lastSelOp||v&&h.lastSelOrigin==v&&(h.lastModTime==h.lastSelTime&&h.lastOrigin==v||iA(o,v,ze(h.done),s))?h.done[h.done.length-1]=s:lf(s,h.done),h.lastSelTime=+new Date,h.lastSelOrigin=v,h.lastSelOp=f,c&&c.clearRedo!==!1&&H1(h.undone)}function lf(o,s){var f=ze(s);f&&f.ranges&&f.equals(o)||s.push(o)}function W1(o,s,f,c){var h=s["spans_"+o.id],v=0;o.iter(Math.max(o.first,f),Math.min(o.first+o.size,c),function(b){b.markedSpans&&((h||(h=s["spans_"+o.id]={}))[v]=b.markedSpans),++v})}function aA(o){if(!o)return null;for(var s,f=0;f<o.length;++f)o[f].marker.explicitlyCleared?s||(s=o.slice(0,f)):s&&s.push(o[f]);return s?s.length?s:null:o}function sA(o,s){var f=s["spans_"+o.id];if(!f)return null;for(var c=[],h=0;h<s.text.length;++h)c.push(aA(f[h]));return c}function K1(o,s){var f=sA(o,s),c=Np(o,s);if(!f)return c;if(!c)return f;for(var h=0;h<f.length;++h){var v=f[h],b=c[h];if(v&&b)e:for(var S=0;S<b.length;++S){for(var L=b[S],A=0;A<v.length;++A)if(v[A].marker==L.marker)continue e;v.push(L)}else b&&(f[h]=b)}return f}function ts(o,s,f){for(var c=[],h=0;h<o.length;++h){var v=o[h];if(v.ranges){c.push(f?Qr.prototype.deepCopy.call(v):v);continue}var b=v.changes,S=[];c.push({changes:S});for(var L=0;L<b.length;++L){var A=b[L],B=void 0;if(S.push({from:A.from,to:A.to,text:A.text}),s)for(var K in A)(B=K.match(/^spans_(\d+)$/))&&ne(s,Number(B[1]))>-1&&(ze(S)[K]=A[K],delete A[K])}}return c}function sg(o,s,f,c){if(c){var h=o.anchor;if(f){var v=j(s,h)<0;v!=j(f,h)<0?(h=s,s=f):v!=j(s,f)<0&&(s=f)}return new dt(h,s)}else return new dt(f||s,s)}function uf(o,s,f,c,h){h==null&&(h=o.cm&&(o.cm.display.shift||o.extend)),ur(o,new Qr([sg(o.sel.primary(),s,f,h)],0),c)}function G1(o,s,f){for(var c=[],h=o.cm&&(o.cm.display.shift||o.extend),v=0;v<o.sel.ranges.length;v++)c[v]=sg(o.sel.ranges[v],s[v],null,h);var b=An(o.cm,c,o.sel.primIndex);ur(o,b,f)}function lg(o,s,f,c){var h=o.sel.ranges.slice(0);h[s]=f,ur(o,An(o.cm,h,o.sel.primIndex),c)}function q1(o,s,f,c){ur(o,ao(s,f),c)}function lA(o,s,f){var c={ranges:s.ranges,update:function(h){this.ranges=[];for(var v=0;v<h.length;v++)this.ranges[v]=new dt(Ie(o,h[v].anchor),Ie(o,h[v].head))},origin:f&&f.origin};return Me(o,"beforeSelectionChange",o,c),o.cm&&Me(o.cm,"beforeSelectionChange",o.cm,c),c.ranges!=s.ranges?An(o.cm,c.ranges,c.ranges.length-1):s}function V1(o,s,f){var c=o.history.done,h=ze(c);h&&h.ranges?(c[c.length-1]=s,cf(o,s,f)):ur(o,s,f)}function ur(o,s,f){cf(o,s,f),oA(o,o.sel,o.cm?o.cm.curOp.id:NaN,f)}function cf(o,s,f){(Jt(o,"beforeSelectionChange")||o.cm&&Jt(o.cm,"beforeSelectionChange"))&&(s=lA(o,s,f));var c=f&&f.bias||(j(s.primary().head,o.sel.primary().head)<0?-1:1);X1(o,Q1(o,s,c,!0)),!(f&&f.scroll===!1)&&o.cm&&o.cm.getOption("readOnly")!="nocursor"&&Za(o.cm)}function X1(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,Ha(o.cm)),Kt(o,"cursorActivity",o))}function Y1(o){X1(o,Q1(o,o.sel,null,!1))}function Q1(o,s,f,c){for(var h,v=0;v<s.ranges.length;v++){var b=s.ranges[v],S=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[v],L=ff(o,b.anchor,S&&S.anchor,f,c),A=ff(o,b.head,S&&S.head,f,c);(h||L!=b.anchor||A!=b.head)&&(h||(h=s.ranges.slice(0,v)),h[v]=new dt(L,A))}return h?An(o.cm,h,s.primIndex):s}function rs(o,s,f,c,h){var v=Fe(o,s.line);if(v.markedSpans)for(var b=0;b<v.markedSpans.length;++b){var S=v.markedSpans[b],L=S.marker,A="selectLeft"in L?!L.selectLeft:L.inclusiveLeft,B="selectRight"in L?!L.selectRight:L.inclusiveRight;if((S.from==null||(A?S.from<=s.ch:S.from<s.ch))&&(S.to==null||(B?S.to>=s.ch:S.to>s.ch))){if(h&&(Me(L,"beforeCursorEnter"),L.explicitlyCleared))if(v.markedSpans){--b;continue}else break;if(!L.atomic)continue;if(f){var K=L.find(c<0?1:-1),Z=void 0;if((c<0?B:A)&&(K=J1(o,K,-c,K&&K.line==s.line?v:null)),K&&K.line==s.line&&(Z=j(K,f))&&(c<0?Z<0:Z>0))return rs(o,K,s,c,h)}var Q=L.find(c<0?-1:1);return(c<0?A:B)&&(Q=J1(o,Q,c,Q.line==s.line?v:null)),Q?rs(o,Q,s,c,h):null}}return s}function ff(o,s,f,c,h){var v=c||1,b=rs(o,s,f,v,h)||!h&&rs(o,s,f,v,!0)||rs(o,s,f,-v,h)||!h&&rs(o,s,f,-v,!0);return b||(o.cantEdit=!0,Ee(o.first,0))}function J1(o,s,f,c){return f<0&&s.ch==0?s.line>o.first?Ie(o,Ee(s.line-1)):null:f>0&&s.ch==(c||Fe(o,s.line)).text.length?s.line<o.first+o.size-1?Ee(s.line+1,0):null:new Ee(s.line,s.ch+f)}function Z1(o){o.setSelection(Ee(o.firstLine(),0),Ee(o.lastLine()),Oe)}function eb(o,s,f){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return f&&(c.update=function(h,v,b,S){h&&(c.from=Ie(o,h)),v&&(c.to=Ie(o,v)),b&&(c.text=b),S!==void 0&&(c.origin=S)}),Me(o,"beforeChange",o,c),o.cm&&Me(o.cm,"beforeChange",o.cm,c),c.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function ns(o,s,f){if(o.cm){if(!o.cm.curOp)return Gt(o.cm,ns)(o,s,f);if(o.cm.state.suppressEdits)return}if(!((Jt(o,"beforeChange")||o.cm&&Jt(o.cm,"beforeChange"))&&(s=eb(o,s,!0),!s))){var c=Kw&&!f&&oN(o,s.from,s.to);if(c)for(var h=c.length-1;h>=0;--h)tb(o,{from:c[h].from,to:c[h].to,text:h?[""]:s.text,origin:s.origin});else tb(o,s)}}function tb(o,s){if(!(s.text.length==1&&s.text[0]==""&&j(s.from,s.to)==0)){var f=ng(o,s);U1(o,s,f,o.cm?o.cm.curOp.id:NaN),Rl(o,s,f,Np(o,s));var c=[];lo(o,function(h,v){!v&&ne(c,h.history)==-1&&(ob(h.history,s),c.push(h.history)),Rl(h,s,null,Np(h,s))})}}function df(o,s,f){var c=o.cm&&o.cm.state.suppressEdits;if(!(c&&!f)){for(var h=o.history,v,b=o.sel,S=s=="undo"?h.done:h.undone,L=s=="undo"?h.undone:h.done,A=0;A<S.length&&(v=S[A],!(f?v.ranges&&!v.equals(o.sel):!v.ranges));A++);if(A!=S.length){for(h.lastOrigin=h.lastSelOrigin=null;;)if(v=S.pop(),v.ranges){if(lf(v,L),f&&!v.equals(o.sel)){ur(o,v,{clearRedo:!1});return}b=v}else if(c){S.push(v);return}else break;var B=[];lf(b,L),L.push({changes:B,generation:h.generation}),h.generation=v.generation||++h.maxGeneration;for(var K=Jt(o,"beforeChange")||o.cm&&Jt(o.cm,"beforeChange"),Z=function(ye){var Ce=v.changes[ye];if(Ce.origin=s,K&&!eb(o,Ce,!1))return S.length=0,{};B.push(ag(o,Ce));var Pe=ye?ng(o,Ce):ze(S);Rl(o,Ce,Pe,K1(o,Ce)),!ye&&o.cm&&o.cm.scrollIntoView({from:Ce.from,to:so(Ce)});var je=[];lo(o,function(Le,Re){!Re&&ne(je,Le.history)==-1&&(ob(Le.history,Ce),je.push(Le.history)),Rl(Le,Ce,null,K1(Le,Ce))})},Q=v.changes.length-1;Q>=0;--Q){var fe=Z(Q);if(fe)return fe.v}}}}function rb(o,s){if(s!=0&&(o.first+=s,o.sel=new Qr(qe(o.sel.ranges,function(h){return new dt(Ee(h.anchor.line+s,h.anchor.ch),Ee(h.head.line+s,h.head.ch))}),o.sel.primIndex),o.cm)){Or(o.cm,o.first,o.first-s,s);for(var f=o.cm.display,c=f.viewFrom;c<f.viewTo;c++)io(o.cm,c,"gutter")}}function Rl(o,s,f,c){if(o.cm&&!o.cm.curOp)return Gt(o.cm,Rl)(o,s,f,c);if(s.to.line<o.first){rb(o,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var h=s.text.length-1-(o.first-s.from.line);rb(o,h),s={from:Ee(o.first,0),to:Ee(s.to.line+h,s.to.ch),text:[ze(s.text)],origin:s.origin}}var v=o.lastLine();s.to.line>v&&(s={from:s.from,to:Ee(v,Fe(o,v).text.length),text:[s.text[0]],origin:s.origin}),s.removed=Qn(o,s.from,s.to),f||(f=ng(o,s)),o.cm?uA(o.cm,s,c):og(o,s,c),cf(o,f,Oe),o.cantEdit&&ff(o,Ee(o.firstLine(),0))&&(o.cantEdit=!1)}}function uA(o,s,f){var c=o.doc,h=o.display,v=s.from,b=s.to,S=!1,L=v.line;o.options.lineWrapping||(L=ft(Ln(Fe(c,v.line))),c.iter(L,b.line+1,function(Q){if(Q==h.maxLine)return S=!0,!0})),c.sel.contains(s.from,s.to)>-1&&Ha(o),og(c,s,f,x1(o)),o.options.lineWrapping||(c.iter(L,v.line+s.text.length,function(Q){var fe=Vc(Q);fe>h.maxLineLength&&(h.maxLine=Q,h.maxLineLength=fe,h.maxLineChanged=!0,S=!1)}),S&&(o.curOp.updateMaxLine=!0)),JL(c,v.line),Il(o,400);var A=s.text.length-(b.line-v.line)-1;s.full?Or(o):v.line==b.line&&s.text.length==1&&!D1(o.doc,s)?io(o,v.line,"text"):Or(o,v.line,b.line+1,A);var B=Jt(o,"changes"),K=Jt(o,"change");if(K||B){var Z={from:v,to:b,text:s.text,removed:s.removed,origin:s.origin};K&&Kt(o,"change",o,Z),B&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(Z)}o.display.selForContextMenu=null}function is(o,s,f,c,h){var v;c||(c=f),j(c,f)<0&&(v=[c,f],f=v[0],c=v[1]),typeof s=="string"&&(s=o.splitLines(s)),ns(o,{from:f,to:c,text:s,origin:h})}function nb(o,s,f,c){f<o.line?o.line+=c:s<o.line&&(o.line=s,o.ch=0)}function ib(o,s,f,c){for(var h=0;h<o.length;++h){var v=o[h],b=!0;if(v.ranges){v.copied||(v=o[h]=v.deepCopy(),v.copied=!0);for(var S=0;S<v.ranges.length;S++)nb(v.ranges[S].anchor,s,f,c),nb(v.ranges[S].head,s,f,c);continue}for(var L=0;L<v.changes.length;++L){var A=v.changes[L];if(f<A.from.line)A.from=Ee(A.from.line+c,A.from.ch),A.to=Ee(A.to.line+c,A.to.ch);else if(s<=A.to.line){b=!1;break}}b||(o.splice(0,h+1),h=0)}}function ob(o,s){var f=s.from.line,c=s.to.line,h=s.text.length-(c-f)-1;ib(o.done,f,c,h),ib(o.undone,f,c,h)}function $l(o,s,f,c){var h=s,v=s;return typeof s=="number"?v=Fe(o,lt(o,s)):h=ft(s),h==null?null:(c(v,h)&&o.cm&&io(o.cm,h,f),v)}function Fl(o){this.lines=o,this.parent=null;for(var s=0,f=0;f<o.length;++f)o[f].parent=this,s+=o[f].height;this.height=s}Fl.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var f=o,c=o+s;f<c;++f){var h=this.lines[f];this.height-=h.height,cN(h),Kt(h,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,f){this.height+=f,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(o,s,f){for(var c=o+s;o<c;++o)if(f(this.lines[o]))return!0}};function Dl(o){this.children=o;for(var s=0,f=0,c=0;c<o.length;++c){var h=o[c];s+=h.chunkSize(),f+=h.height,h.parent=this}this.size=s,this.height=f,this.parent=null}Dl.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var f=0;f<this.children.length;++f){var c=this.children[f],h=c.chunkSize();if(o<h){var v=Math.min(s,h-o),b=c.height;if(c.removeInner(o,v),this.height-=b-c.height,h==v&&(this.children.splice(f--,1),c.parent=null),(s-=v)==0)break;o=0}else o-=h}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof Fl))){var S=[];this.collapse(S),this.children=[new Fl(S)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,f){this.size+=s.length,this.height+=f;for(var c=0;c<this.children.length;++c){var h=this.children[c],v=h.chunkSize();if(o<=v){if(h.insertInner(o,s,f),h.lines&&h.lines.length>50){for(var b=h.lines.length%25+25,S=b;S<h.lines.length;){var L=new Fl(h.lines.slice(S,S+=25));h.height-=L.height,this.children.splice(++c,0,L),L.parent=this}h.lines=h.lines.slice(0,b),this.maybeSpill()}break}o-=v}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=o.children.splice(o.children.length-5,5),f=new Dl(s);if(o.parent){o.size-=f.size,o.height-=f.height;var h=ne(o.parent.children,o);o.parent.children.splice(h+1,0,f)}else{var c=new Dl(o.children);c.parent=o,o.children=[c,f],o=c}f.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,f){for(var c=0;c<this.children.length;++c){var h=this.children[c],v=h.chunkSize();if(o<v){var b=Math.min(s,v-o);if(h.iterN(o,b,f))return!0;if((s-=b)==0)break;o=0}else o-=v}}};var zl=function(o,s,f){if(f)for(var c in f)f.hasOwnProperty(c)&&(this[c]=f[c]);this.doc=o,this.node=s};zl.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,f=this.line,c=ft(f);if(!(c==null||!s)){for(var h=0;h<s.length;++h)s[h]==this&&s.splice(h--,1);s.length||(f.widgets=null);var v=Tl(this);Rr(f,Math.max(0,f.height-v)),o&&($r(o,function(){ab(o,f,-v),io(o,c,"widget")}),Kt(o,"lineWidgetCleared",o,this,c))}},zl.prototype.changed=function(){var o=this,s=this.height,f=this.doc.cm,c=this.line;this.height=null;var h=Tl(this)-s;h&&(no(this.doc,c)||Rr(c,c.height+h),f&&$r(f,function(){f.curOp.forceUpdate=!0,ab(f,c,h),Kt(f,"lineWidgetChanged",f,o,ft(c))}))},Xn(zl);function ab(o,s,f){Li(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&Qp(o,f)}function cA(o,s,f,c){var h=new zl(o,f,c),v=o.cm;return v&&h.noHScroll&&(v.display.alignWidgets=!0),$l(o,s,"widget",function(b){var S=b.widgets||(b.widgets=[]);if(h.insertAt==null?S.push(h):S.splice(Math.min(S.length,Math.max(0,h.insertAt)),0,h),h.line=b,v&&!no(o,b)){var L=Li(b)<o.scrollTop;Rr(b,b.height+Tl(h)),L&&Qp(v,h.height),v.curOp.forceUpdate=!0}return!0}),v&&Kt(v,"lineWidgetAdded",v,h,typeof s=="number"?s:ft(s)),h}var sb=0,uo=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++sb};uo.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&Jo(o),Jt(this,"clear")){var f=this.find();f&&Kt(this,"clear",f.from,f.to)}for(var c=null,h=null,v=0;v<this.lines.length;++v){var b=this.lines[v],S=Sl(b.markedSpans,this);o&&!this.collapsed?io(o,ft(b),"text"):o&&(S.to!=null&&(h=ft(b)),S.from!=null&&(c=ft(b))),b.markedSpans=tN(b.markedSpans,S),S.from==null&&this.collapsed&&!no(this.doc,b)&&o&&Rr(b,Ya(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var L=0;L<this.lines.length;++L){var A=Ln(this.lines[L]),B=Vc(A);B>o.display.maxLineLength&&(o.display.maxLine=A,o.display.maxLineLength=B,o.display.maxLineChanged=!0)}c!=null&&o&&this.collapsed&&Or(o,c,h+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&Y1(o.doc)),o&&Kt(o,"markerCleared",o,this,c,h),s&&Zo(o),this.parent&&this.parent.clear()}},uo.prototype.find=function(o,s){o==null&&this.type=="bookmark"&&(o=1);for(var f,c,h=0;h<this.lines.length;++h){var v=this.lines[h],b=Sl(v.markedSpans,this);if(b.from!=null&&(f=Ee(s?v:ft(v),b.from),o==-1))return f;if(b.to!=null&&(c=Ee(s?v:ft(v),b.to),o==1))return c}return f&&{from:f,to:c}},uo.prototype.changed=function(){var o=this,s=this.find(-1,!0),f=this,c=this.doc.cm;!s||!c||$r(c,function(){var h=s.line,v=ft(s.line),b=Fp(c,v);if(b&&(h1(b),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!no(f.doc,h)&&f.height!=null){var S=f.height;f.height=null;var L=Tl(f)-S;L&&Rr(h,h.height+L)}Kt(c,"markerChanged",c,o)})},uo.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||ne(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},uo.prototype.detachLine=function(o){if(this.lines.splice(ne(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Xn(uo);function os(o,s,f,c,h){if(c&&c.shared)return fA(o,s,f,c,h);if(o.cm&&!o.cm.curOp)return Gt(o.cm,os)(o,s,f,c,h);var v=new uo(o,h),b=j(s,f);if(c&&se(c,v,!1),b>0||b==0&&v.clearWhenEmpty!==!1)return v;if(v.replacedWith&&(v.collapsed=!0,v.widgetNode=F("span",[v.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(v.widgetNode.insertLeft=!0)),v.collapsed){if(Qw(o,s.line,s,f,v)||s.line!=f.line&&Qw(o,f.line,s,f,v))throw new Error("Inserting collapsed marker partially overlapping an existing one");eN()}v.addToHistory&&U1(o,{from:s,to:f,origin:"markText"},o.sel,NaN);var S=s.line,L=o.cm,A;if(o.iter(S,f.line+1,function(K){L&&v.collapsed&&!L.options.lineWrapping&&Ln(K)==L.display.maxLine&&(A=!0),v.collapsed&&S!=s.line&&Rr(K,0),rN(K,new Wc(v,S==s.line?s.ch:null,S==f.line?f.ch:null),o.cm&&o.cm.curOp),++S}),v.collapsed&&o.iter(s.line,f.line+1,function(K){no(o,K)&&Rr(K,0)}),v.clearOnEnter&&ke(v,"beforeCursorEnter",function(){return v.clear()}),v.readOnly&&(ZL(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),v.collapsed&&(v.id=++sb,v.atomic=!0),L){if(A&&(L.curOp.updateMaxLine=!0),v.collapsed)Or(L,s.line,f.line+1);else if(v.className||v.startStyle||v.endStyle||v.css||v.attributes||v.title)for(var B=s.line;B<=f.line;B++)io(L,B,"text");v.atomic&&Y1(L.doc),Kt(L,"markerAdded",L,v)}return v}var Bl=function(o,s){this.markers=o,this.primary=s;for(var f=0;f<o.length;++f)o[f].parent=this};Bl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();Kt(this,"clear")}},Bl.prototype.find=function(o,s){return this.primary.find(o,s)},Xn(Bl);function fA(o,s,f,c,h){c=se(c),c.shared=!1;var v=[os(o,s,f,c,h)],b=v[0],S=c.widgetNode;return lo(o,function(L){S&&(c.widgetNode=S.cloneNode(!0)),v.push(os(L,Ie(L,s),Ie(L,f),c,h));for(var A=0;A<L.linked.length;++A)if(L.linked[A].isParent)return;b=ze(v)}),new Bl(v,b)}function lb(o){return o.findMarks(Ee(o.first,0),o.clipPos(Ee(o.lastLine())),function(s){return s.parent})}function dA(o,s){for(var f=0;f<s.length;f++){var c=s[f],h=c.find(),v=o.clipPos(h.from),b=o.clipPos(h.to);if(j(v,b)){var S=os(o,v,b,c.primary,c.primary.type);c.markers.push(S),S.parent=c}}}function hA(o){for(var s=function(c){var h=o[c],v=[h.primary.doc];lo(h.primary.doc,function(L){return v.push(L)});for(var b=0;b<h.markers.length;b++){var S=h.markers[b];ne(v,S.doc)==-1&&(S.parent=null,h.markers.splice(b--,1))}},f=0;f<o.length;f++)s(f)}var pA=0,Pr=function(o,s,f,c,h){if(!(this instanceof Pr))return new Pr(o,s,f,c,h);f==null&&(f=0),Dl.call(this,[new Fl([new qa("",null)])]),this.first=f,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=f;var v=Ee(f,0);this.sel=ao(v),this.history=new sf(null),this.id=++pA,this.modeOption=s,this.lineSep=c,this.direction=h=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),og(this,{from:v,to:v,text:o}),ur(this,ao(v),Oe)};Pr.prototype=st(Dl.prototype,{constructor:Pr,iter:function(o,s,f){f?this.iterN(o-this.first,s-o,f):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var f=0,c=0;c<s.length;++c)f+=s[c].height;this.insertInner(o-this.first,s,f)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=bl(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:qt(function(o){var s=Ee(this.first,0),f=this.first+this.size-1;ns(this,{from:s,to:Ee(f,Fe(this,f).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&Ll(this.cm,0,0),ur(this,ao(s),Oe)}),replaceRange:function(o,s,f,c){s=Ie(this,s),f=f?Ie(this,f):s,is(this,o,s,f,c)},getRange:function(o,s,f){var c=Qn(this,Ie(this,o),Ie(this,s));return f===!1?c:f===""?c.join(""):c.join(f||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(Ko(this,o))return Fe(this,o)},getLineNumber:function(o){return ft(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=Fe(this,o)),Ln(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return Ie(this,o)},getCursor:function(o){var s=this.sel.primary(),f;return o==null||o=="head"?f=s.head:o=="anchor"?f=s.anchor:o=="end"||o=="to"||o===!1?f=s.to():f=s.from(),f},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qt(function(o,s,f){q1(this,Ie(this,typeof o=="number"?Ee(o,s||0):o),null,f)}),setSelection:qt(function(o,s,f){q1(this,Ie(this,o),Ie(this,s||o),f)}),extendSelection:qt(function(o,s,f){uf(this,Ie(this,o),s&&Ie(this,s),f)}),extendSelections:qt(function(o,s){G1(this,Yr(this,o),s)}),extendSelectionsBy:qt(function(o,s){var f=qe(this.sel.ranges,o);G1(this,Yr(this,f),s)}),setSelections:qt(function(o,s,f){if(o.length){for(var c=[],h=0;h<o.length;h++)c[h]=new dt(Ie(this,o[h].anchor),Ie(this,o[h].head||o[h].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),ur(this,An(this.cm,c,s),f)}}),addSelection:qt(function(o,s,f){var c=this.sel.ranges.slice(0);c.push(new dt(Ie(this,o),Ie(this,s||o))),ur(this,An(this.cm,c,c.length-1),f)}),getSelection:function(o){for(var s=this.sel.ranges,f,c=0;c<s.length;c++){var h=Qn(this,s[c].from(),s[c].to());f=f?f.concat(h):h}return o===!1?f:f.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],f=this.sel.ranges,c=0;c<f.length;c++){var h=Qn(this,f[c].from(),f[c].to());o!==!1&&(h=h.join(o||this.lineSeparator())),s[c]=h}return s},replaceSelection:function(o,s,f){for(var c=[],h=0;h<this.sel.ranges.length;h++)c[h]=o;this.replaceSelections(c,s,f||"+input")},replaceSelections:qt(function(o,s,f){for(var c=[],h=this.sel,v=0;v<h.ranges.length;v++){var b=h.ranges[v];c[v]={from:b.from(),to:b.to(),text:this.splitLines(o[v]),origin:f}}for(var S=s&&s!="end"&&tA(this,c,s),L=c.length-1;L>=0;L--)ns(this,c[L]);S?V1(this,S):this.cm&&Za(this.cm)}),undo:qt(function(){df(this,"undo")}),redo:qt(function(){df(this,"redo")}),undoSelection:qt(function(){df(this,"undo",!0)}),redoSelection:qt(function(){df(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,f=0,c=0;c<o.done.length;c++)o.done[c].ranges||++s;for(var h=0;h<o.undone.length;h++)o.undone[h].ranges||++f;return{undo:s,redo:f}},clearHistory:function(){var o=this;this.history=new sf(this.history),lo(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:ts(this.history.done),undone:ts(this.history.undone)}},setHistory:function(o){var s=this.history=new sf(this.history);s.done=ts(o.done.slice(0),null,!0),s.undone=ts(o.undone.slice(0),null,!0)},setGutterMarker:qt(function(o,s,f){return $l(this,o,"gutter",function(c){var h=c.gutterMarkers||(c.gutterMarkers={});return h[s]=f,!f&&he(h)&&(c.gutterMarkers=null),!0})}),clearGutter:qt(function(o){var s=this;this.iter(function(f){f.gutterMarkers&&f.gutterMarkers[o]&&$l(s,f,"gutter",function(){return f.gutterMarkers[o]=null,he(f.gutterMarkers)&&(f.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!Ko(this,o)||(s=o,o=Fe(this,o),!o))return null}else if(s=ft(o),s==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:qt(function(o,s,f){return $l(this,o,s=="gutter"?"gutter":"class",function(c){var h=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!c[h])c[h]=f;else{if(oe(f).test(c[h]))return!1;c[h]+=" "+f}return!0})}),removeLineClass:qt(function(o,s,f){return $l(this,o,s=="gutter"?"gutter":"class",function(c){var h=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",v=c[h];if(v)if(f==null)c[h]=null;else{var b=v.match(oe(f));if(!b)return!1;var S=b.index+b[0].length;c[h]=v.slice(0,b.index)+(!b.index||S==v.length?"":" ")+v.slice(S)||null}else return!1;return!0})}),addLineWidget:qt(function(o,s,f){return cA(this,o,s,f)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,f){return os(this,Ie(this,o),Ie(this,s),f,f&&f.type||"range")},setBookmark:function(o,s){var f={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return o=Ie(this,o),os(this,o,o,f,"bookmark")},findMarksAt:function(o){o=Ie(this,o);var s=[],f=Fe(this,o.line).markedSpans;if(f)for(var c=0;c<f.length;++c){var h=f[c];(h.from==null||h.from<=o.ch)&&(h.to==null||h.to>=o.ch)&&s.push(h.marker.parent||h.marker)}return s},findMarks:function(o,s,f){o=Ie(this,o),s=Ie(this,s);var c=[],h=o.line;return this.iter(o.line,s.line+1,function(v){var b=v.markedSpans;if(b)for(var S=0;S<b.length;S++){var L=b[S];!(L.to!=null&&h==o.line&&o.ch>=L.to||L.from==null&&h!=o.line||L.from!=null&&h==s.line&&L.from>=s.ch)&&(!f||f(L.marker))&&c.push(L.marker.parent||L.marker)}++h}),c},getAllMarks:function(){var o=[];return this.iter(function(s){var f=s.markedSpans;if(f)for(var c=0;c<f.length;++c)f[c].from!=null&&o.push(f[c].marker)}),o},posFromIndex:function(o){var s,f=this.first,c=this.lineSeparator().length;return this.iter(function(h){var v=h.text.length+c;if(v>o)return s=o,!0;o-=v,++f}),Ie(this,Ee(f,s))},indexFromPos:function(o){o=Ie(this,o);var s=o.ch;if(o.line<this.first||o.ch<0)return 0;var f=this.lineSeparator().length;return this.iter(this.first,o.line,function(c){s+=c.text.length+f}),s},copy:function(o){var s=new Pr(bl(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,f=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<f&&(f=o.to);var c=new Pr(bl(this,s,f),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:o.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],dA(c,lb(this)),c},unlinkDoc:function(o){if(o instanceof Ot&&(o=o.doc),this.linked)for(var s=0;s<this.linked.length;++s){var f=this.linked[s];if(f.doc==o){this.linked.splice(s,1),o.unlinkDoc(this),hA(lb(this));break}}if(o.history==this.history){var c=[o.id];lo(o,function(h){return c.push(h.id)},!0),o.history=new sf(null),o.history.done=ts(this.history.done,c),o.history.undone=ts(this.history.undone,c)}},iterLinkedDocs:function(o){lo(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):vl(o)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:qt(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&rA(this.cm))})}),Pr.prototype.eachLine=Pr.prototype.iter;var ub=0;function gA(o){var s=this;if(cb(s),!(Xe(s,o)||Ni(s.display,o))){sr(o),d&&(ub=+new Date);var f=Vo(s,o,!0),c=o.dataTransfer.files;if(!(!f||s.isReadOnly()))if(c&&c.length&&window.FileReader&&window.File)for(var h=c.length,v=Array(h),b=0,S=function(){++b==h&&Gt(s,function(){f=Ie(s.doc,f);var Q={from:f,to:f,text:s.doc.splitLines(v.filter(function(fe){return fe!=null}).join(s.doc.lineSeparator())),origin:"paste"};ns(s.doc,Q),V1(s.doc,ao(Ie(s.doc,f),Ie(s.doc,so(Q))))})()},L=function(Q,fe){if(s.options.allowDropFileTypes&&ne(s.options.allowDropFileTypes,Q.type)==-1){S();return}var ye=new FileReader;ye.onerror=function(){return S()},ye.onload=function(){var Ce=ye.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ce)){S();return}v[fe]=Ce,S()},ye.readAsText(Q)},A=0;A<c.length;A++)L(c[A],A);else{if(s.state.draggingText&&s.doc.sel.contains(f)>-1){s.state.draggingText(o),setTimeout(function(){return s.display.input.focus()},20);return}try{var B=o.dataTransfer.getData("Text");if(B){var K;if(s.state.draggingText&&!s.state.draggingText.copy&&(K=s.listSelections()),cf(s.doc,ao(f,f)),K)for(var Z=0;Z<K.length;++Z)is(s.doc,"",K[Z].anchor,K[Z].head,"drag");s.replaceSelection(B,"around","paste"),s.display.input.focus()}}catch{}}}}function vA(o,s){if(d&&(!o.state.draggingText||+new Date-ub<100)){Wo(s);return}if(!(Xe(o,s)||Ni(o.display,s))&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!O)){var f=U("img",null,null,"position: fixed; left: 0; top: 0;");f.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x&&(f.width=f.height=1,o.display.wrapper.appendChild(f),f._top=f.offsetTop),s.dataTransfer.setDragImage(f,0,0),x&&f.parentNode.removeChild(f)}}function mA(o,s){var f=Vo(o,s);if(f){var c=document.createDocumentFragment();Gp(o,f,c),o.display.dragCursor||(o.display.dragCursor=U("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),W(o.display.dragCursor,c)}}function cb(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function fb(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),f=[],c=0;c<s.length;c++){var h=s[c].CodeMirror;h&&f.push(h)}f.length&&f[0].operation(function(){for(var v=0;v<f.length;v++)o(f[v])})}}var db=!1;function yA(){db||(wA(),db=!0)}function wA(){var o;ke(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,fb(bA)},100))}),ke(window,"blur",function(){return fb(Ja)})}function bA(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var co={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Hl=0;Hl<10;Hl++)co[Hl+48]=co[Hl+96]=String(Hl);for(var hf=65;hf<=90;hf++)co[hf]=String.fromCharCode(hf);for(var Ul=1;Ul<=12;Ul++)co[Ul+111]=co[Ul+63235]="F"+Ul;var ji={};ji.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ji.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ji.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ji.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ji.default=_?ji.macDefault:ji.pcDefault;function xA(o){var s=o.split(/-(?!$)/);o=s[s.length-1];for(var f,c,h,v,b=0;b<s.length-1;b++){var S=s[b];if(/^(cmd|meta|m)$/i.test(S))v=!0;else if(/^a(lt)?$/i.test(S))f=!0;else if(/^(c|ctrl|control)$/i.test(S))c=!0;else if(/^s(hift)?$/i.test(S))h=!0;else throw new Error("Unrecognized modifier name: "+S)}return f&&(o="Alt-"+o),c&&(o="Ctrl-"+o),v&&(o="Cmd-"+o),h&&(o="Shift-"+o),o}function EA(o){var s={};for(var f in o)if(o.hasOwnProperty(f)){var c=o[f];if(/^(name|fallthrough|(de|at)tach)$/.test(f))continue;if(c=="..."){delete o[f];continue}for(var h=qe(f.split(" "),xA),v=0;v<h.length;v++){var b=void 0,S=void 0;v==h.length-1?(S=h.join(" "),b=c):(S=h.slice(0,v+1).join(" "),b="...");var L=s[S];if(!L)s[S]=b;else if(L!=b)throw new Error("Inconsistent bindings for "+S)}delete o[f]}for(var A in s)o[A]=s[A];return o}function as(o,s,f,c){s=pf(s);var h=s.call?s.call(o,c):s[o];if(h===!1)return"nothing";if(h==="...")return"multi";if(h!=null&&f(h))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return as(o,s.fallthrough,f,c);for(var v=0;v<s.fallthrough.length;v++){var b=as(o,s.fallthrough[v],f,c);if(b)return b}}}function hb(o){var s=typeof o=="string"?o:co[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function pb(o,s,f){var c=o;return s.altKey&&c!="Alt"&&(o="Alt-"+o),(q?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(o="Ctrl-"+o),(q?s.ctrlKey:s.metaKey)&&c!="Mod"&&(o="Cmd-"+o),!f&&s.shiftKey&&c!="Shift"&&(o="Shift-"+o),o}function gb(o,s){if(x&&o.keyCode==34&&o.char)return!1;var f=co[o.keyCode];return f==null||o.altGraphKey?!1:(o.keyCode==3&&o.code&&(f=o.code),pb(f,o,s))}function pf(o){return typeof o=="string"?ji[o]:o}function ss(o,s){for(var f=o.doc.sel.ranges,c=[],h=0;h<f.length;h++){for(var v=s(f[h]);c.length&&j(v.from,ze(c).to)<=0;){var b=c.pop();if(j(b.from,v.from)<0){v.from=b.from;break}}c.push(v)}$r(o,function(){for(var S=c.length-1;S>=0;S--)is(o.doc,"",c[S].from,c[S].to,"+delete");Za(o)})}function ug(o,s,f){var c=nt(o.text,s+f,f);return c<0||c>o.text.length?null:c}function cg(o,s,f){var c=ug(o,s.ch,f);return c==null?null:new Ee(s.line,c,f<0?"after":"before")}function fg(o,s,f,c,h){if(o){s.doc.direction=="rtl"&&(h=-h);var v=ae(f,s.doc.direction);if(v){var b=h<0?ze(v):v[0],S=h<0==(b.level==1),L=S?"after":"before",A;if(b.level>0||s.doc.direction=="rtl"){var B=Xa(s,f);A=h<0?f.text.length-1:0;var K=ti(s,B,A).top;A=M(function(Z){return ti(s,B,Z).top==K},h<0==(b.level==1)?b.from:b.to-1,A),L=="before"&&(A=ug(f,A,1))}else A=h<0?b.to:b.from;return new Ee(c,A,L)}}return new Ee(c,h<0?f.text.length:0,h<0?"before":"after")}function SA(o,s,f,c){var h=ae(s,o.doc.direction);if(!h)return cg(s,f,c);f.ch>=s.text.length?(f.ch=s.text.length,f.sticky="before"):f.ch<=0&&(f.ch=0,f.sticky="after");var v=D(h,f.ch,f.sticky),b=h[v];if(o.doc.direction=="ltr"&&b.level%2==0&&(c>0?b.to>f.ch:b.from<f.ch))return cg(s,f,c);var S=function(Pe,je){return ug(s,Pe instanceof Ee?Pe.ch:Pe,je)},L,A=function(Pe){return o.options.lineWrapping?(L=L||Xa(o,s),b1(o,s,L,Pe)):{begin:0,end:s.text.length}},B=A(f.sticky=="before"?S(f,-1):f.ch);if(o.doc.direction=="rtl"||b.level==1){var K=b.level==1==c<0,Z=S(f,K?1:-1);if(Z!=null&&(K?Z<=b.to&&Z<=B.end:Z>=b.from&&Z>=B.begin)){var Q=K?"before":"after";return new Ee(f.line,Z,Q)}}var fe=function(Pe,je,Le){for(var Re=function(Et,Vt){return Vt?new Ee(f.line,S(Et,1),"before"):new Ee(f.line,Et,"after")};Pe>=0&&Pe<h.length;Pe+=je){var We=h[Pe],Be=je>0==(We.level!=1),tt=Be?Le.begin:S(Le.end,-1);if(We.from<=tt&&tt<We.to||(tt=Be?We.from:S(We.to,-1),Le.begin<=tt&&tt<Le.end))return Re(tt,Be)}},ye=fe(v+c,c,B);if(ye)return ye;var Ce=c>0?B.end:S(B.begin,-1);return Ce!=null&&!(c>0&&Ce==s.text.length)&&(ye=fe(c>0?0:h.length-1,c,A(Ce)),ye)?ye:null}var Wl={selectAll:Z1,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),Oe)},killLine:function(o){return ss(o,function(s){if(s.empty()){var f=Fe(o.doc,s.head.line).text.length;return s.head.ch==f&&s.head.line<o.lastLine()?{from:s.head,to:Ee(s.head.line+1,0)}:{from:s.head,to:Ee(s.head.line,f)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(o){return ss(o,function(s){return{from:Ee(s.from().line,0),to:Ie(o.doc,Ee(s.to().line+1,0))}})},delLineLeft:function(o){return ss(o,function(s){return{from:Ee(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return ss(o,function(s){var f=o.charCoords(s.head,"div").top+5,c=o.coordsChar({left:0,top:f},"div");return{from:c,to:s.from()}})},delWrappedLineRight:function(o){return ss(o,function(s){var f=o.charCoords(s.head,"div").top+5,c=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:f},"div");return{from:s.from(),to:c}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(Ee(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(Ee(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return vb(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return mb(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return CA(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var f=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:f},"div")},_e)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var f=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:f},"div")},_e)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var f=o.cursorCoords(s.head,"div").top+5,c=o.coordsChar({left:0,top:f},"div");return c.ch<o.getLine(c.line).search(/\S/)?mb(o,s.head):c},_e)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],f=o.listSelections(),c=o.options.tabSize,h=0;h<f.length;h++){var v=f[h].from(),b=X(o.getLine(v.line),v.ch,c);s.push(vt(c-b%c))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return $r(o,function(){for(var s=o.listSelections(),f=[],c=0;c<s.length;c++)if(s[c].empty()){var h=s[c].head,v=Fe(o.doc,h.line).text;if(v){if(h.ch==v.length&&(h=new Ee(h.line,h.ch-1)),h.ch>0)h=new Ee(h.line,h.ch+1),o.replaceRange(v.charAt(h.ch-1)+v.charAt(h.ch-2),Ee(h.line,h.ch-2),h,"+transpose");else if(h.line>o.doc.first){var b=Fe(o.doc,h.line-1).text;b&&(h=new Ee(h.line,1),o.replaceRange(v.charAt(0)+o.doc.lineSeparator()+b.charAt(b.length-1),Ee(h.line-1,b.length-1),h,"+transpose"))}}f.push(new dt(h,h))}o.setSelections(f)})},newlineAndIndent:function(o){return $r(o,function(){for(var s=o.listSelections(),f=s.length-1;f>=0;f--)o.replaceRange(o.doc.lineSeparator(),s[f].anchor,s[f].head,"+input");s=o.listSelections();for(var c=0;c<s.length;c++)o.indentLine(s[c].from().line,null,!0);Za(o)})},openLine:function(o){return o.replaceSelection("\n","start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function vb(o,s){var f=Fe(o.doc,s),c=Ln(f);return c!=f&&(s=ft(c)),fg(!0,o,c,s,1)}function CA(o,s){var f=Fe(o.doc,s),c=sN(f);return c!=f&&(s=ft(c)),fg(!0,o,f,s,-1)}function mb(o,s){var f=vb(o,s.line),c=Fe(o.doc,f.line),h=ae(c,o.doc.direction);if(!h||h[0].level==0){var v=Math.max(f.ch,c.text.search(/\S/)),b=s.line==f.line&&s.ch<=v&&s.ch;return Ee(f.line,b?0:v,f.sticky)}return f}function gf(o,s,f){if(typeof s=="string"&&(s=Wl[s],!s))return!1;o.display.input.ensurePolled();var c=o.display.shift,h=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),f&&(o.display.shift=!1),h=s(o)!=xe}finally{o.display.shift=c,o.state.suppressEdits=!1}return h}function kA(o,s,f){for(var c=0;c<o.state.keyMaps.length;c++){var h=as(s,o.state.keyMaps[c],f,o);if(h)return h}return o.options.extraKeys&&as(s,o.options.extraKeys,f,o)||as(s,o.options.keyMap,f,o)}var TA=new J;function Kl(o,s,f,c){var h=o.state.keySeq;if(h){if(hb(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:TA.set(50,function(){o.state.keySeq==h&&(o.state.keySeq=null,o.display.input.reset())}),yb(o,h+" "+s,f,c))return!0}return yb(o,s,f,c)}function yb(o,s,f,c){var h=kA(o,s,c);return h=="multi"&&(o.state.keySeq=s),h=="handled"&&Kt(o,"keyHandled",o,s,f),(h=="handled"||h=="multi")&&(sr(f),qp(o)),!!h}function wb(o,s){var f=gb(s,!0);return f?s.shiftKey&&!o.state.keySeq?Kl(o,"Shift-"+f,s,function(c){return gf(o,c,!0)})||Kl(o,f,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return gf(o,c)}):Kl(o,f,s,function(c){return gf(o,c)}):!1}function OA(o,s,f){return Kl(o,"'"+f+"'",s,function(c){return gf(o,c,!0)})}var dg=null;function bb(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField())&&(s.curOp.focus=ce(),!Xe(s,o))){d&&p<11&&o.keyCode==27&&(o.returnValue=!1);var f=o.keyCode;s.display.shift=f==16||o.shiftKey;var c=wb(s,o);x&&(dg=c?f:null,!c&&f==88&&!Hc&&(_?o.metaKey:o.ctrlKey)&&s.replaceSelection("",null,"cut")),i&&!_&&!c&&f==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),f==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&PA(s)}}function PA(o){var s=o.display.lineDiv;ue(s,"CodeMirror-crosshair");function f(c){(c.keyCode==18||!c.altKey)&&(le(s,"CodeMirror-crosshair"),it(document,"keyup",f),it(document,"mouseover",f))}ke(document,"keyup",f),ke(document,"mouseover",f)}function xb(o){o.keyCode==16&&(this.doc.sel.shift=!1),Xe(this,o)}function Eb(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField())&&!(Ni(s.display,o)||Xe(s,o)||o.ctrlKey&&!o.altKey||_&&o.metaKey)){var f=o.keyCode,c=o.charCode;if(x&&f==dg){dg=null,sr(o);return}if(!(x&&(!o.which||o.which<10)&&wb(s,o))){var h=String.fromCharCode(c==null?f:c);h!="\b"&&(OA(s,o,h)||s.display.input.onKeyPress(o))}}}var LA=400,hg=function(o,s,f){this.time=o,this.pos=s,this.button=f};hg.prototype.compare=function(o,s,f){return this.time+LA>o&&j(s,this.pos)==0&&f==this.button};var Gl,ql;function NA(o,s){var f=+new Date;return ql&&ql.compare(f,o,s)?(Gl=ql=null,"triple"):Gl&&Gl.compare(f,o,s)?(ql=new hg(f,o,s),Gl=null,"double"):(Gl=new hg(f,o,s),ql=null,"single")}function Sb(o){var s=this,f=s.display;if(!(Xe(s,o)||f.activeTouch&&f.input.supportsTouch())){if(f.input.ensurePolled(),f.shift=o.shiftKey,Ni(f,o)){g||(f.scroller.draggable=!1,setTimeout(function(){return f.scroller.draggable=!0},100));return}if(!pg(s,o)){var c=Vo(s,o),h=Dc(o),v=c?NA(c,h):"single";window.focus(),h==1&&s.state.selectingText&&s.state.selectingText(o),!(c&&AA(s,h,c,v,o))&&(h==1?c?IA(s,c,v,o):to(o)==f.scroller&&sr(o):h==2?(c&&uf(s.doc,c),setTimeout(function(){return f.input.focus()},20)):h==3&&(re?s.display.input.onContextMenu(o):Vp(s)))}}}function AA(o,s,f,c,h){var v="Click";return c=="double"?v="Double"+v:c=="triple"&&(v="Triple"+v),v=(s==1?"Left":s==2?"Middle":"Right")+v,Kl(o,pb(v,h),h,function(b){if(typeof b=="string"&&(b=Wl[b]),!b)return!1;var S=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),S=b(o,f)!=xe}finally{o.state.suppressEdits=!1}return S})}function jA(o,s,f){var c=o.getOption("configureMouse"),h=c?c(o,s,f):{};if(h.unit==null){var v=$?f.shiftKey&&f.metaKey:f.altKey;h.unit=v?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(h.extend==null||o.doc.extend)&&(h.extend=o.doc.extend||f.shiftKey),h.addNew==null&&(h.addNew=_?f.metaKey:f.ctrlKey),h.moveOnDrag==null&&(h.moveOnDrag=!(_?f.altKey:f.ctrlKey)),h}function IA(o,s,f,c){d?setTimeout(ee(C1,o),0):o.curOp.focus=ce();var h=jA(o,f,c),v=o.doc.sel,b;o.options.dragDrop&&pl&&!o.isReadOnly()&&f=="single"&&(b=v.contains(s))>-1&&(j((b=v.ranges[b]).from(),s)<0||s.xRel>0)&&(j(b.to(),s)>0||s.xRel<0)?_A(o,c,s,h):MA(o,c,s,h)}function _A(o,s,f,c){var h=o.display,v=!1,b=Gt(o,function(A){g&&(h.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Vp(o)),it(h.wrapper.ownerDocument,"mouseup",b),it(h.wrapper.ownerDocument,"mousemove",S),it(h.scroller,"dragstart",L),it(h.scroller,"drop",b),v||(sr(A),c.addNew||uf(o.doc,f,null,null,c.extend),g&&!O||d&&p==9?setTimeout(function(){h.wrapper.ownerDocument.body.focus({preventScroll:!0}),h.input.focus()},20):h.input.focus())}),S=function(A){v=v||Math.abs(s.clientX-A.clientX)+Math.abs(s.clientY-A.clientY)>=10},L=function(){return v=!0};g&&(h.scroller.draggable=!0),o.state.draggingText=b,b.copy=!c.moveOnDrag,ke(h.wrapper.ownerDocument,"mouseup",b),ke(h.wrapper.ownerDocument,"mousemove",S),ke(h.scroller,"dragstart",L),ke(h.scroller,"drop",b),o.state.delayingBlurEvent=!0,setTimeout(function(){return h.input.focus()},20),h.scroller.dragDrop&&h.scroller.dragDrop()}function Cb(o,s,f){if(f=="char")return new dt(s,s);if(f=="word")return o.findWordAt(s);if(f=="line")return new dt(Ee(s.line,0),Ie(o.doc,Ee(s.line+1,0)));var c=f(o,s);return new dt(c.from,c.to)}function MA(o,s,f,c){d&&Vp(o);var h=o.display,v=o.doc;sr(s);var b,S,L=v.sel,A=L.ranges;if(c.addNew&&!c.extend?(S=v.sel.contains(f),S>-1?b=A[S]:b=new dt(f,f)):(b=v.sel.primary(),S=v.sel.primIndex),c.unit=="rectangle")c.addNew||(b=new dt(f,f)),f=Vo(o,s,!0,!0),S=-1;else{var B=Cb(o,f,c.unit);c.extend?b=sg(b,B.anchor,B.head,c.extend):b=B}c.addNew?S==-1?(S=A.length,ur(v,An(o,A.concat([b]),S),{scroll:!1,origin:"*mouse"})):A.length>1&&A[S].empty()&&c.unit=="char"&&!c.extend?(ur(v,An(o,A.slice(0,S).concat(A.slice(S+1)),0),{scroll:!1,origin:"*mouse"}),L=v.sel):lg(v,S,b,$e):(S=0,ur(v,new Qr([b],0),$e),L=v.sel);var K=f;function Z(Le){if(j(K,Le)!=0)if(K=Le,c.unit=="rectangle"){for(var Re=[],We=o.options.tabSize,Be=X(Fe(v,f.line).text,f.ch,We),tt=X(Fe(v,Le.line).text,Le.ch,We),Et=Math.min(Be,tt),Vt=Math.max(Be,tt),Lt=Math.min(f.line,Le.line),Fr=Math.min(o.lastLine(),Math.max(f.line,Le.line));Lt<=Fr;Lt++){var Lr=Fe(v,Lt).text,zt=Ye(Lr,Et,We);Et==Vt?Re.push(new dt(Ee(Lt,zt),Ee(Lt,zt))):Lr.length>zt&&Re.push(new dt(Ee(Lt,zt),Ee(Lt,Ye(Lr,Vt,We))))}Re.length||Re.push(new dt(f,f)),ur(v,An(o,L.ranges.slice(0,S).concat(Re),S),{origin:"*mouse",scroll:!1}),o.scrollIntoView(Le)}else{var Nr=b,Zt=Cb(o,Le,c.unit),Wt=Nr.anchor,Bt;j(Zt.anchor,Wt)>0?(Bt=Zt.head,Wt=Ve(Nr.from(),Zt.anchor)):(Bt=Zt.anchor,Wt=Se(Nr.to(),Zt.head));var _t=L.ranges.slice(0);_t[S]=RA(o,new dt(Ie(v,Wt),Bt)),ur(v,An(o,_t,S),$e)}}var Q=h.wrapper.getBoundingClientRect(),fe=0;function ye(Le){var Re=++fe,We=Vo(o,Le,!0,c.unit=="rectangle");if(We)if(j(We,K)!=0){o.curOp.focus=ce(),Z(We);var Be=rf(h,v);(We.line>=Be.to||We.line<Be.from)&&setTimeout(Gt(o,function(){fe==Re&&ye(Le)}),150)}else{var tt=Le.clientY<Q.top?-20:Le.clientY>Q.bottom?20:0;tt&&setTimeout(Gt(o,function(){fe==Re&&(h.scroller.scrollTop+=tt,ye(Le))}),50)}}function Ce(Le){o.state.selectingText=!1,fe=1/0,Le&&(sr(Le),h.input.focus()),it(h.wrapper.ownerDocument,"mousemove",Pe),it(h.wrapper.ownerDocument,"mouseup",je),v.history.lastSelOrigin=null}var Pe=Gt(o,function(Le){Le.buttons===0||!Dc(Le)?Ce(Le):ye(Le)}),je=Gt(o,Ce);o.state.selectingText=je,ke(h.wrapper.ownerDocument,"mousemove",Pe),ke(h.wrapper.ownerDocument,"mouseup",je)}function RA(o,s){var f=s.anchor,c=s.head,h=Fe(o.doc,f.line);if(j(f,c)==0&&f.sticky==c.sticky)return s;var v=ae(h);if(!v)return s;var b=D(v,f.ch,f.sticky),S=v[b];if(S.from!=f.ch&&S.to!=f.ch)return s;var L=b+(S.from==f.ch==(S.level!=1)?0:1);if(L==0||L==v.length)return s;var A;if(c.line!=f.line)A=(c.line-f.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var B=D(v,c.ch,c.sticky),K=B-b||(c.ch-f.ch)*(S.level==1?-1:1);B==L-1||B==L?A=K<0:A=K>0}var Z=v[L+(A?-1:0)],Q=A==(Z.level==1),fe=Q?Z.from:Z.to,ye=Q?"after":"before";return f.ch==fe&&f.sticky==ye?s:new dt(new Ee(f.line,fe,ye),c)}function kb(o,s,f,c){var h,v;if(s.touches)h=s.touches[0].clientX,v=s.touches[0].clientY;else try{h=s.clientX,v=s.clientY}catch{return!1}if(h>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;c&&sr(s);var b=o.display,S=b.lineDiv.getBoundingClientRect();if(v>S.bottom||!Jt(o,f))return qr(s);v-=S.top-b.viewOffset;for(var L=0;L<o.display.gutterSpecs.length;++L){var A=b.gutters.childNodes[L];if(A&&A.getBoundingClientRect().right>=h){var B=Jn(o.doc,v),K=o.display.gutterSpecs[L];return Me(o,f,o,B,K.className,s),qr(s)}}}function pg(o,s){return kb(o,s,"gutterClick",!0)}function Tb(o,s){Ni(o.display,s)||$A(o,s)||Xe(o,s,"contextmenu")||re||o.display.input.onContextMenu(s)}function $A(o,s){return Jt(o,"gutterContextMenu")?kb(o,s,"gutterContextMenu",!1):!1}function Ob(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ol(o)}var ls={toString:function(){return"CodeMirror.Init"}},Pb={},vf={};function FA(o){var s=o.optionHandlers;function f(c,h,v,b){o.defaults[c]=h,v&&(s[c]=b?function(S,L,A){A!=ls&&v(S,L,A)}:v)}o.defineOption=f,o.Init=ls,f("value","",function(c,h){return c.setValue(h)},!0),f("mode",null,function(c,h){c.doc.modeOption=h,ig(c)},!0),f("indentUnit",2,ig,!0),f("indentWithTabs",!1),f("smartIndent",!0),f("tabSize",4,function(c){Ml(c),Ol(c),Or(c)},!0),f("lineSeparator",null,function(c,h){if(c.doc.lineSep=h,!!h){var v=[],b=c.doc.first;c.doc.iter(function(L){for(var A=0;;){var B=L.text.indexOf(h,A);if(B==-1)break;A=B+h.length,v.push(Ee(b,B))}b++});for(var S=v.length-1;S>=0;S--)is(c.doc,h,v[S],Ee(v[S].line,v[S].ch+h.length))}}),f("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,h,v){c.state.specialChars=new RegExp(h.source+(h.test("	")?"":"|	"),"g"),v!=ls&&c.refresh()}),f("specialCharPlaceholder",hN,function(c){return c.refresh()},!0),f("electricChars",!0),f("inputStyle",R?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),f("spellcheck",!1,function(c,h){return c.getInputField().spellcheck=h},!0),f("autocorrect",!1,function(c,h){return c.getInputField().autocorrect=h},!0),f("autocapitalize",!1,function(c,h){return c.getInputField().autocapitalize=h},!0),f("rtlMoveVisually",!z),f("wholeLineUpdateBefore",!0),f("theme","default",function(c){Ob(c),_l(c)},!0),f("keyMap","default",function(c,h,v){var b=pf(h),S=v!=ls&&pf(v);S&&S.detach&&S.detach(c,b),b.attach&&b.attach(c,S||null)}),f("extraKeys",null),f("configureMouse",null),f("lineWrapping",!1,zA,!0),f("gutters",[],function(c,h){c.display.gutterSpecs=rg(h,c.options.lineNumbers),_l(c)},!0),f("fixedGutter",!0,function(c,h){c.display.gutters.style.left=h?Wp(c.display)+"px":"0",c.refresh()},!0),f("coverGutterNextToScrollbar",!1,function(c){return es(c)},!0),f("scrollbarStyle","native",function(c){N1(c),es(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),f("lineNumbers",!1,function(c,h){c.display.gutterSpecs=rg(c.options.gutters,h),_l(c)},!0),f("firstLineNumber",1,_l,!0),f("lineNumberFormatter",function(c){return c},_l,!0),f("showCursorWhenSelecting",!1,Pl,!0),f("resetSelectionOnContextMenu",!0),f("lineWiseCopyCut",!0),f("pasteLinesPerSelection",!0),f("selectionsMayTouch",!1),f("readOnly",!1,function(c,h){h=="nocursor"&&(Ja(c),c.display.input.blur()),c.display.input.readOnlyChanged(h)}),f("screenReaderLabel",null,function(c,h){h=h===""?null:h,c.display.input.screenReaderLabelChanged(h)}),f("disableInput",!1,function(c,h){h||c.display.input.reset()},!0),f("dragDrop",!0,DA),f("allowDropFileTypes",null),f("cursorBlinkRate",530),f("cursorScrollMargin",0),f("cursorHeight",1,Pl,!0),f("singleCursorHeightPerLine",!0,Pl,!0),f("workTime",100),f("workDelay",100),f("flattenSpans",!0,Ml,!0),f("addModeClass",!1,Ml,!0),f("pollInterval",100),f("undoDepth",200,function(c,h){return c.doc.history.undoDepth=h}),f("historyEventDelay",1250),f("viewportMargin",10,function(c){return c.refresh()},!0),f("maxHighlightLength",1e4,Ml,!0),f("moveInputWithCursor",!0,function(c,h){h||c.display.input.resetPosition()}),f("tabindex",null,function(c,h){return c.display.input.getField().tabIndex=h||""}),f("autofocus",null),f("direction","ltr",function(c,h){return c.doc.setDirection(h)},!0),f("phrases",null)}function DA(o,s,f){var c=f&&f!=ls;if(!s!=!c){var h=o.display.dragFunctions,v=s?ke:it;v(o.display.scroller,"dragstart",h.start),v(o.display.scroller,"dragenter",h.enter),v(o.display.scroller,"dragover",h.over),v(o.display.scroller,"dragleave",h.leave),v(o.display.scroller,"drop",h.drop)}}function zA(o){o.options.lineWrapping?(ue(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(le(o.display.wrapper,"CodeMirror-wrap"),_p(o)),Kp(o),Or(o),Ol(o),setTimeout(function(){return es(o)},100)}function Ot(o,s){var f=this;if(!(this instanceof Ot))return new Ot(o,s);this.options=s=s?se(s):{},se(Pb,s,!1);var c=s.value;typeof c=="string"?c=new Pr(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var h=new Ot.inputStyles[s.inputStyle](this),v=this.display=new ZN(o,c,h,s);v.wrapper.CodeMirror=this,Ob(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),N1(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new J,keySeq:null,specialChars:null},s.autofocus&&!R&&v.input.focus(),d&&p<11&&setTimeout(function(){return f.display.input.reset(!0)},20),BA(this),yA(),Jo(this),this.curOp.forceUpdate=!0,z1(this,c),s.autofocus&&!R||this.hasFocus()?setTimeout(function(){f.hasFocus()&&!f.state.focused&&Xp(f)},20):Ja(this);for(var b in vf)vf.hasOwnProperty(b)&&vf[b](this,s[b],ls);I1(this),s.finishInit&&s.finishInit(this);for(var S=0;S<gg.length;++S)gg[S](this);Zo(this),g&&s.lineWrapping&&getComputedStyle(v.lineDiv).textRendering=="optimizelegibility"&&(v.lineDiv.style.textRendering="auto")}Ot.defaults=Pb,Ot.optionHandlers=vf;function BA(o){var s=o.display;ke(s.scroller,"mousedown",Gt(o,Sb)),d&&p<11?ke(s.scroller,"dblclick",Gt(o,function(L){if(!Xe(o,L)){var A=Vo(o,L);if(!(!A||pg(o,L)||Ni(o.display,L))){sr(L);var B=o.findWordAt(A);uf(o.doc,B.anchor,B.head)}}})):ke(s.scroller,"dblclick",function(L){return Xe(o,L)||sr(L)}),ke(s.scroller,"contextmenu",function(L){return Tb(o,L)}),ke(s.input.getField(),"contextmenu",function(L){s.scroller.contains(L.target)||Tb(o,L)});var f,c={end:0};function h(){s.activeTouch&&(f=setTimeout(function(){return s.activeTouch=null},1e3),c=s.activeTouch,c.end=+new Date)}function v(L){if(L.touches.length!=1)return!1;var A=L.touches[0];return A.radiusX<=1&&A.radiusY<=1}function b(L,A){if(A.left==null)return!0;var B=A.left-L.left,K=A.top-L.top;return B*B+K*K>20*20}ke(s.scroller,"touchstart",function(L){if(!Xe(o,L)&&!v(L)&&!pg(o,L)){s.input.ensurePolled(),clearTimeout(f);var A=+new Date;s.activeTouch={start:A,moved:!1,prev:A-c.end<=300?c:null},L.touches.length==1&&(s.activeTouch.left=L.touches[0].pageX,s.activeTouch.top=L.touches[0].pageY)}}),ke(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),ke(s.scroller,"touchend",function(L){var A=s.activeTouch;if(A&&!Ni(s,L)&&A.left!=null&&!A.moved&&new Date-A.start<300){var B=o.coordsChar(s.activeTouch,"page"),K;!A.prev||b(A,A.prev)?K=new dt(B,B):!A.prev.prev||b(A,A.prev.prev)?K=o.findWordAt(B):K=new dt(Ee(B.line,0),Ie(o.doc,Ee(B.line+1,0))),o.setSelection(K.anchor,K.head),o.focus(),sr(L)}h()}),ke(s.scroller,"touchcancel",h),ke(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Nl(o,s.scroller.scrollTop),Yo(o,s.scroller.scrollLeft,!0),Me(o,"scroll",o))}),ke(s.scroller,"mousewheel",function(L){return R1(o,L)}),ke(s.scroller,"DOMMouseScroll",function(L){return R1(o,L)}),ke(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(L){Xe(o,L)||Wo(L)},over:function(L){Xe(o,L)||(mA(o,L),Wo(L))},start:function(L){return vA(o,L)},drop:Gt(o,gA),leave:function(L){Xe(o,L)||cb(o)}};var S=s.input.getField();ke(S,"keyup",function(L){return xb.call(o,L)}),ke(S,"keydown",Gt(o,bb)),ke(S,"keypress",Gt(o,Eb)),ke(S,"focus",function(L){return Xp(o,L)}),ke(S,"blur",function(L){return Ja(o,L)})}var gg=[];Ot.defineInitHook=function(o){return gg.push(o)};function Vl(o,s,f,c){var h=o.doc,v;f==null&&(f="add"),f=="smart"&&(h.mode.indent?v=El(o,s).state:f="prev");var b=o.options.tabSize,S=Fe(h,s),L=X(S.text,null,b);S.stateAfter&&(S.stateAfter=null);var A=S.text.match(/^\s*/)[0],B;if(!c&&!/\S/.test(S.text))B=0,f="not";else if(f=="smart"&&(B=h.mode.indent(v,S.text.slice(A.length),S.text),B==xe||B>150)){if(!c)return;f="prev"}f=="prev"?s>h.first?B=X(Fe(h,s-1).text,null,b):B=0:f=="add"?B=L+o.options.indentUnit:f=="subtract"?B=L-o.options.indentUnit:typeof f=="number"&&(B=L+f),B=Math.max(0,B);var K="",Z=0;if(o.options.indentWithTabs)for(var Q=Math.floor(B/b);Q;--Q)Z+=b,K+="	";if(Z<B&&(K+=vt(B-Z)),K!=A)return is(h,K,Ee(s,0),Ee(s,A.length),"+input"),S.stateAfter=null,!0;for(var fe=0;fe<h.sel.ranges.length;fe++){var ye=h.sel.ranges[fe];if(ye.head.line==s&&ye.head.ch<A.length){var Ce=Ee(s,A.length);lg(h,fe,new dt(Ce,Ce));break}}}var jn=null;function mf(o){jn=o}function vg(o,s,f,c,h){var v=o.doc;o.display.shift=!1,c||(c=v.sel);var b=+new Date-200,S=h=="paste"||o.state.pasteIncoming>b,L=vl(s),A=null;if(S&&c.ranges.length>1)if(jn&&jn.text.join("\n")==s){if(c.ranges.length%jn.text.length==0){A=[];for(var B=0;B<jn.text.length;B++)A.push(v.splitLines(jn.text[B]))}}else L.length==c.ranges.length&&o.options.pasteLinesPerSelection&&(A=qe(L,function(Pe){return[Pe]}));for(var K=o.curOp.updateInput,Z=c.ranges.length-1;Z>=0;Z--){var Q=c.ranges[Z],fe=Q.from(),ye=Q.to();Q.empty()&&(f&&f>0?fe=Ee(fe.line,fe.ch-f):o.state.overwrite&&!S?ye=Ee(ye.line,Math.min(Fe(v,ye.line).text.length,ye.ch+ze(L).length)):S&&jn&&jn.lineWise&&jn.text.join("\n")==L.join("\n")&&(fe=ye=Ee(fe.line,0)));var Ce={from:fe,to:ye,text:A?A[Z%A.length]:L,origin:h||(S?"paste":o.state.cutIncoming>b?"cut":"+input")};ns(o.doc,Ce),Kt(o,"inputRead",o,Ce)}s&&!S&&Nb(o,s),Za(o),o.curOp.updateInput<2&&(o.curOp.updateInput=K),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function Lb(o,s){var f=o.clipboardData&&o.clipboardData.getData("Text");if(f)return o.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&$r(s,function(){return vg(s,f,0,null,"paste")}),!0}function Nb(o,s){if(!(!o.options.electricChars||!o.options.smartIndent))for(var f=o.doc.sel,c=f.ranges.length-1;c>=0;c--){var h=f.ranges[c];if(!(h.head.ch>100||c&&f.ranges[c-1].head.line==h.head.line)){var v=o.getModeAt(h.head),b=!1;if(v.electricChars){for(var S=0;S<v.electricChars.length;S++)if(s.indexOf(v.electricChars.charAt(S))>-1){b=Vl(o,h.head.line,"smart");break}}else v.electricInput&&v.electricInput.test(Fe(o.doc,h.head.line).text.slice(0,h.head.ch))&&(b=Vl(o,h.head.line,"smart"));b&&Kt(o,"electricInput",o,h.head.line)}}}function Ab(o){for(var s=[],f=[],c=0;c<o.doc.sel.ranges.length;c++){var h=o.doc.sel.ranges[c].head.line,v={anchor:Ee(h,0),head:Ee(h+1,0)};f.push(v),s.push(o.getRange(v.anchor,v.head))}return{text:s,ranges:f}}function jb(o,s,f,c){o.setAttribute("autocorrect",f?"":"off"),o.setAttribute("autocapitalize",c?"":"off"),o.setAttribute("spellcheck",!!s)}function Ib(){var o=U("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=U("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?o.style.width="1000px":o.setAttribute("wrap","off"),T&&(o.style.border="1px solid black"),jb(o),s}function HA(o){var s=o.optionHandlers,f=o.helpers={};o.prototype={constructor:o,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,h){var v=this.options,b=v[c];v[c]==h&&c!="mode"||(v[c]=h,s.hasOwnProperty(c)&&Gt(this,s[c])(this,h,b),Me(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,h){this.state.keyMaps[h?"push":"unshift"](pf(c))},removeKeyMap:function(c){for(var h=this.state.keyMaps,v=0;v<h.length;++v)if(h[v]==c||h[v].name==c)return h.splice(v,1),!0},addOverlay:mr(function(c,h){var v=c.token?c:o.getMode(this.options,c);if(v.startState)throw new Error("Overlays may not be stateful.");ct(this.state.overlays,{mode:v,modeSpec:c,opaque:h&&h.opaque,priority:h&&h.priority||0},function(b){return b.priority}),this.state.modeGen++,Or(this)}),removeOverlay:mr(function(c){for(var h=this.state.overlays,v=0;v<h.length;++v){var b=h[v].modeSpec;if(b==c||typeof c=="string"&&b.name==c){h.splice(v,1),this.state.modeGen++,Or(this);return}}}),indentLine:mr(function(c,h,v){typeof h!="string"&&typeof h!="number"&&(h==null?h=this.options.smartIndent?"smart":"prev":h=h?"add":"subtract"),Ko(this.doc,c)&&Vl(this,c,h,v)}),indentSelection:mr(function(c){for(var h=this.doc.sel.ranges,v=-1,b=0;b<h.length;b++){var S=h[b];if(S.empty())S.head.line>v&&(Vl(this,S.head.line,c,!0),v=S.head.line,b==this.doc.sel.primIndex&&Za(this));else{var L=S.from(),A=S.to(),B=Math.max(v,L.line);v=Math.min(this.lastLine(),A.line-(A.ch?0:1))+1;for(var K=B;K<v;++K)Vl(this,K,c);var Z=this.doc.sel.ranges;L.ch==0&&h.length==Z.length&&Z[b].from().ch>0&&lg(this.doc,b,new dt(L,Z[b].to()),Oe)}}}),getTokenAt:function(c,h){return Hw(this,c,h)},getLineTokens:function(c,h){return Hw(this,Ee(c),h,!0)},getTokenTypeAt:function(c){c=Ie(this.doc,c);var h=Dw(this,Fe(this.doc,c.line)),v=0,b=(h.length-1)/2,S=c.ch,L;if(S==0)L=h[2];else for(;;){var A=v+b>>1;if((A?h[A*2-1]:0)>=S)b=A;else if(h[A*2+1]<S)v=A+1;else{L=h[A*2+2];break}}var B=L?L.indexOf("overlay "):-1;return B<0?L:B==0?null:L.slice(0,B-1)},getModeAt:function(c){var h=this.doc.mode;return h.innerMode?o.innerMode(h,this.getTokenAt(c).state).mode:h},getHelper:function(c,h){return this.getHelpers(c,h)[0]},getHelpers:function(c,h){var v=[];if(!f.hasOwnProperty(h))return v;var b=f[h],S=this.getModeAt(c);if(typeof S[h]=="string")b[S[h]]&&v.push(b[S[h]]);else if(S[h])for(var L=0;L<S[h].length;L++){var A=b[S[h][L]];A&&v.push(A)}else S.helperType&&b[S.helperType]?v.push(b[S.helperType]):b[S.name]&&v.push(b[S.name]);for(var B=0;B<b._global.length;B++){var K=b._global[B];K.pred(S,this)&&ne(v,K.val)==-1&&v.push(K.val)}return v},getStateAfter:function(c,h){var v=this.doc;return c=lt(v,c==null?v.first+v.size-1:c),El(this,c+1,h).state},cursorCoords:function(c,h){var v,b=this.doc.sel.primary();return c==null?v=b.head:typeof c=="object"?v=Ie(this.doc,c):v=c?b.from():b.to(),Nn(this,v,h||"page")},charCoords:function(c,h){return Jc(this,Ie(this.doc,c),h||"page")},coordsChar:function(c,h){return c=m1(this,c,h||"page"),Bp(this,c.left,c.top)},lineAtHeight:function(c,h){return c=m1(this,{top:c,left:0},h||"page").top,Jn(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,h,v){var b=!1,S;if(typeof c=="number"){var L=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>L&&(c=L,b=!0),S=Fe(this.doc,c)}else S=c;return Qc(this,S,{top:0,left:0},h||"page",v||b).top+(b?this.doc.height-Li(S):0)},defaultTextHeight:function(){return Ya(this.display)},defaultCharWidth:function(){return Qa(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,h,v,b,S){var L=this.display;c=Nn(this,Ie(this.doc,c));var A=c.bottom,B=c.left;if(h.style.position="absolute",h.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(h),L.sizer.appendChild(h),b=="over")A=c.top;else if(b=="above"||b=="near"){var K=Math.max(L.wrapper.clientHeight,this.doc.height),Z=Math.max(L.sizer.clientWidth,L.lineSpace.clientWidth);(b=="above"||c.bottom+h.offsetHeight>K)&&c.top>h.offsetHeight?A=c.top-h.offsetHeight:c.bottom+h.offsetHeight<=K&&(A=c.bottom),B+h.offsetWidth>Z&&(B=Z-h.offsetWidth)}h.style.top=A+"px",h.style.left=h.style.right="",S=="right"?(B=L.sizer.clientWidth-h.offsetWidth,h.style.right="0px"):(S=="left"?B=0:S=="middle"&&(B=(L.sizer.clientWidth-h.offsetWidth)/2),h.style.left=B+"px"),v&&DN(this,{left:B,top:A,right:B+h.offsetWidth,bottom:A+h.offsetHeight})},triggerOnKeyDown:mr(bb),triggerOnKeyPress:mr(Eb),triggerOnKeyUp:xb,triggerOnMouseDown:mr(Sb),execCommand:function(c){if(Wl.hasOwnProperty(c))return Wl[c].call(null,this)},triggerElectric:mr(function(c){Nb(this,c)}),findPosH:function(c,h,v,b){var S=1;h<0&&(S=-1,h=-h);for(var L=Ie(this.doc,c),A=0;A<h&&(L=mg(this.doc,L,S,v,b),!L.hitSide);++A);return L},moveH:mr(function(c,h){var v=this;this.extendSelectionsBy(function(b){return v.display.shift||v.doc.extend||b.empty()?mg(v.doc,b.head,c,h,v.options.rtlMoveVisually):c<0?b.from():b.to()},_e)}),deleteH:mr(function(c,h){var v=this.doc.sel,b=this.doc;v.somethingSelected()?b.replaceSelection("",null,"+delete"):ss(this,function(S){var L=mg(b,S.head,c,h,!1);return c<0?{from:L,to:S.head}:{from:S.head,to:L}})}),findPosV:function(c,h,v,b){var S=1,L=b;h<0&&(S=-1,h=-h);for(var A=Ie(this.doc,c),B=0;B<h;++B){var K=Nn(this,A,"div");if(L==null?L=K.left:K.left=L,A=_b(this,K,S,v),A.hitSide)break}return A},moveV:mr(function(c,h){var v=this,b=this.doc,S=[],L=!this.display.shift&&!b.extend&&b.sel.somethingSelected();if(b.extendSelectionsBy(function(B){if(L)return c<0?B.from():B.to();var K=Nn(v,B.head,"div");B.goalColumn!=null&&(K.left=B.goalColumn),S.push(K.left);var Z=_b(v,K,c,h);return h=="page"&&B==b.sel.primary()&&Qp(v,Jc(v,Z,"div").top-K.top),Z},_e),S.length)for(var A=0;A<b.sel.ranges.length;A++)b.sel.ranges[A].goalColumn=S[A]}),findWordAt:function(c){var h=this.doc,v=Fe(h,c.line).text,b=c.ch,S=c.ch;if(v){var L=this.getHelper(c,"wordChars");(c.sticky=="before"||S==v.length)&&b?--b:++S;for(var A=v.charAt(b),B=te(A,L)?function(K){return te(K,L)}:/\s/.test(A)?function(K){return/\s/.test(K)}:function(K){return!/\s/.test(K)&&!te(K)};b>0&&B(v.charAt(b-1));)--b;for(;S<v.length&&B(v.charAt(S));)++S}return new dt(Ee(c.line,b),Ee(c.line,S))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ue(this.display.cursorDiv,"CodeMirror-overwrite"):le(this.display.cursorDiv,"CodeMirror-overwrite"),Me(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ce()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:mr(function(c,h){Ll(this,c,h)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-ei(this)-this.display.barHeight,width:c.scrollWidth-ei(this)-this.display.barWidth,clientHeight:$p(this),clientWidth:Go(this)}},scrollIntoView:mr(function(c,h){c==null?(c={from:this.doc.sel.primary().head,to:null},h==null&&(h=this.options.cursorScrollMargin)):typeof c=="number"?c={from:Ee(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=h||0,c.from.line!=null?zN(this,c):T1(this,c.from,c.to,c.margin)}),setSize:mr(function(c,h){var v=this,b=function(L){return typeof L=="number"||/^\d+$/.test(String(L))?L+"px":L};c!=null&&(this.display.wrapper.style.width=b(c)),h!=null&&(this.display.wrapper.style.height=b(h)),this.options.lineWrapping&&p1(this);var S=this.display.viewFrom;this.doc.iter(S,this.display.viewTo,function(L){if(L.widgets){for(var A=0;A<L.widgets.length;A++)if(L.widgets[A].noHScroll){io(v,S,"widget");break}}++S}),this.curOp.forceUpdate=!0,Me(this,"refresh",this)}),operation:function(c){return $r(this,c)},startOperation:function(){return Jo(this)},endOperation:function(){return Zo(this)},refresh:mr(function(){var c=this.display.cachedTextHeight;Or(this),this.curOp.forceUpdate=!0,Ol(this),Ll(this,this.doc.scrollLeft,this.doc.scrollTop),eg(this.display),(c==null||Math.abs(c-Ya(this.display))>.5||this.options.lineWrapping)&&Kp(this),Me(this,"refresh",this)}),swapDoc:mr(function(c){var h=this.doc;return h.cm=null,this.state.selectingText&&this.state.selectingText(),z1(this,c),Ol(this),this.display.input.reset(),Ll(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,Kt(this,"swapDoc",this,h),h}),phrase:function(c){var h=this.options.phrases;return h&&Object.prototype.hasOwnProperty.call(h,c)?h[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Xn(o),o.registerHelper=function(c,h,v){f.hasOwnProperty(c)||(f[c]=o[c]={_global:[]}),f[c][h]=v},o.registerGlobalHelper=function(c,h,v,b){o.registerHelper(c,h,b),f[c]._global.push({pred:v,val:b})}}function mg(o,s,f,c,h){var v=s,b=f,S=Fe(o,s.line),L=h&&o.direction=="rtl"?-f:f;function A(){var je=s.line+L;return je<o.first||je>=o.first+o.size?!1:(s=new Ee(je,s.ch,s.sticky),S=Fe(o,je))}function B(je){var Le;if(c=="codepoint"){var Re=S.text.charCodeAt(s.ch+(f>0?0:-1));if(isNaN(Re))Le=null;else{var We=f>0?Re>=55296&&Re<56320:Re>=56320&&Re<57343;Le=new Ee(s.line,Math.max(0,Math.min(S.text.length,s.ch+f*(We?2:1))),-f)}}else h?Le=SA(o.cm,S,s,f):Le=cg(S,s,f);if(Le==null)if(!je&&A())s=fg(h,o.cm,S,s.line,L);else return!1;else s=Le;return!0}if(c=="char"||c=="codepoint")B();else if(c=="column")B(!0);else if(c=="word"||c=="group")for(var K=null,Z=c=="group",Q=o.cm&&o.cm.getHelper(s,"wordChars"),fe=!0;!(f<0&&!B(!fe));fe=!1){var ye=S.text.charAt(s.ch)||"\n",Ce=te(ye,Q)?"w":Z&&ye=="\n"?"n":!Z||/\s/.test(ye)?null:"p";if(Z&&!fe&&!Ce&&(Ce="s"),K&&K!=Ce){f<0&&(f=1,B(),s.sticky="after");break}if(Ce&&(K=Ce),f>0&&!B(!fe))break}var Pe=ff(o,s,v,b,!0);return G(v,Pe)&&(Pe.hitSide=!0),Pe}function _b(o,s,f,c){var h=o.doc,v=s.left,b;if(c=="page"){var S=Math.min(o.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),L=Math.max(S-.5*Ya(o.display),3);b=(f>0?s.bottom:s.top)+f*L}else c=="line"&&(b=f>0?s.bottom+3:s.top-3);for(var A;A=Bp(o,v,b),!!A.outside;){if(f<0?b<=0:b>=h.height){A.hitSide=!0;break}b+=f*5}return A}var gt=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new J,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};gt.prototype.init=function(o){var s=this,f=this,c=f.cm,h=f.div=o.lineDiv;h.contentEditable=!0,jb(h,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize);function v(S){for(var L=S.target;L;L=L.parentNode){if(L==h)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(L.className))break}return!1}ke(h,"paste",function(S){!v(S)||Xe(c,S)||Lb(S,c)||p<=11&&setTimeout(Gt(c,function(){return s.updateFromDOM()}),20)}),ke(h,"compositionstart",function(S){s.composing={data:S.data,done:!1}}),ke(h,"compositionupdate",function(S){s.composing||(s.composing={data:S.data,done:!1})}),ke(h,"compositionend",function(S){s.composing&&(S.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),ke(h,"touchstart",function(){return f.forceCompositionEnd()}),ke(h,"input",function(){s.composing||s.readFromDOMSoon()});function b(S){if(!(!v(S)||Xe(c,S))){if(c.somethingSelected())mf({lineWise:!1,text:c.getSelections()}),S.type=="cut"&&c.replaceSelection("",null,"cut");else if(c.options.lineWiseCopyCut){var L=Ab(c);mf({lineWise:!0,text:L.text}),S.type=="cut"&&c.operation(function(){c.setSelections(L.ranges,0,Oe),c.replaceSelection("",null,"cut")})}else return;if(S.clipboardData){S.clipboardData.clearData();var A=jn.text.join("\n");if(S.clipboardData.setData("Text",A),S.clipboardData.getData("Text")==A){S.preventDefault();return}}var B=Ib(),K=B.firstChild;c.display.lineSpace.insertBefore(B,c.display.lineSpace.firstChild),K.value=jn.text.join("\n");var Z=ce();V(K),setTimeout(function(){c.display.lineSpace.removeChild(B),Z.focus(),Z==h&&f.showPrimarySelection()},50)}}ke(h,"copy",b),ke(h,"cut",b)},gt.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},gt.prototype.prepareSelection=function(){var o=S1(this.cm,!1);return o.focus=ce()==this.div,o},gt.prototype.showSelection=function(o,s){!o||!this.cm.display.view.length||((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},gt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},gt.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,f=s.doc.sel.primary(),c=f.from(),h=f.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||h.line<s.display.viewFrom){o.removeAllRanges();return}var v=yf(s,o.anchorNode,o.anchorOffset),b=yf(s,o.focusNode,o.focusOffset);if(!(v&&!v.bad&&b&&!b.bad&&j(Ve(v,b),c)==0&&j(Se(v,b),h)==0)){var S=s.display.view,L=c.line>=s.display.viewFrom&&Mb(s,c)||{node:S[0].measure.map[2],offset:0},A=h.line<s.display.viewTo&&Mb(s,h);if(!A){var B=S[S.length-1].measure,K=B.maps?B.maps[B.maps.length-1]:B.map;A={node:K[K.length-1],offset:K[K.length-2]-K[K.length-3]}}if(!L||!A){o.removeAllRanges();return}var Z=o.rangeCount&&o.getRangeAt(0),Q;try{Q=be(L.node,L.offset,A.offset,A.node)}catch{}Q&&(!i&&s.state.focused?(o.collapse(L.node,L.offset),Q.collapsed||(o.removeAllRanges(),o.addRange(Q))):(o.removeAllRanges(),o.addRange(Q)),Z&&o.anchorNode==null?o.addRange(Z):i&&this.startGracePeriod()),this.rememberSelection()}},gt.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},gt.prototype.showMultipleSelections=function(o){W(this.cm.display.cursorDiv,o.cursors),W(this.cm.display.selectionDiv,o.selection)},gt.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},gt.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return pe(this.div,s)},gt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ce()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},gt.prototype.blur=function(){this.div.blur()},gt.prototype.getField=function(){return this.div},gt.prototype.supportsTouch=function(){return!0},gt.prototype.receivedFocus=function(){var o=this,s=this;this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):$r(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function f(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,f))}this.polling.set(this.cm.options.pollInterval,f)},gt.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},gt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var o=this.getSelection(),s=this.cm;if(N&&w&&this.cm.display.gutterSpecs.length&&UA(o.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var f=yf(s,o.anchorNode,o.anchorOffset),c=yf(s,o.focusNode,o.focusOffset);f&&c&&$r(s,function(){ur(s.doc,ao(f,c),Oe),(f.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},gt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o=this.cm,s=o.display,f=o.doc.sel.primary(),c=f.from(),h=f.to();if(c.ch==0&&c.line>o.firstLine()&&(c=Ee(c.line-1,Fe(o.doc,c.line-1).length)),h.ch==Fe(o.doc,h.line).text.length&&h.line<o.lastLine()&&(h=Ee(h.line+1,0)),c.line<s.viewFrom||h.line>s.viewTo-1)return!1;var v,b,S;c.line==s.viewFrom||(v=Xo(o,c.line))==0?(b=ft(s.view[0].line),S=s.view[0].node):(b=ft(s.view[v].line),S=s.view[v-1].node.nextSibling);var L=Xo(o,h.line),A,B;if(L==s.view.length-1?(A=s.viewTo-1,B=s.lineDiv.lastChild):(A=ft(s.view[L+1].line)-1,B=s.view[L+1].node.previousSibling),!S)return!1;for(var K=o.doc.splitLines(WA(o,S,B,b,A)),Z=Qn(o.doc,Ee(b,0),Ee(A,Fe(o.doc,A).text.length));K.length>1&&Z.length>1;)if(ze(K)==ze(Z))K.pop(),Z.pop(),A--;else if(K[0]==Z[0])K.shift(),Z.shift(),b++;else break;for(var Q=0,fe=0,ye=K[0],Ce=Z[0],Pe=Math.min(ye.length,Ce.length);Q<Pe&&ye.charCodeAt(Q)==Ce.charCodeAt(Q);)++Q;for(var je=ze(K),Le=ze(Z),Re=Math.min(je.length-(K.length==1?Q:0),Le.length-(Z.length==1?Q:0));fe<Re&&je.charCodeAt(je.length-fe-1)==Le.charCodeAt(Le.length-fe-1);)++fe;if(K.length==1&&Z.length==1&&b==c.line)for(;Q&&Q>c.ch&&je.charCodeAt(je.length-fe-1)==Le.charCodeAt(Le.length-fe-1);)Q--,fe++;K[K.length-1]=je.slice(0,je.length-fe).replace(/^\u200b+/,""),K[0]=K[0].slice(Q).replace(/\u200b+$/,"");var We=Ee(b,Q),Be=Ee(A,Z.length?ze(Z).length-fe:0);if(K.length>1||K[0]||j(We,Be))return is(o.doc,K,We,Be,"+input"),!0},gt.prototype.ensurePolled=function(){this.forceCompositionEnd()},gt.prototype.reset=function(){this.forceCompositionEnd()},gt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},gt.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing)if(o.composing.done)o.composing=null;else return;o.updateFromDOM()},80))},gt.prototype.updateFromDOM=function(){var o=this;(this.cm.isReadOnly()||!this.pollContent())&&$r(this.cm,function(){return Or(o.cm)})},gt.prototype.setUneditable=function(o){o.contentEditable="false"},gt.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||Gt(this.cm,vg)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},gt.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},gt.prototype.onContextMenu=function(){},gt.prototype.resetPosition=function(){},gt.prototype.needsContentAttribute=!0;function Mb(o,s){var f=Fp(o,s.line);if(!f||f.hidden)return null;var c=Fe(o.doc,s.line),h=u1(f,c,s.line),v=ae(c,o.doc.direction),b="left";if(v){var S=D(v,s.ch);b=S%2?"right":"left"}var L=d1(h.map,s.ch,b);return L.offset=L.collapse=="right"?L.end:L.start,L}function UA(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function us(o,s){return s&&(o.bad=!0),o}function WA(o,s,f,c,h){var v="",b=!1,S=o.doc.lineSeparator(),L=!1;function A(Q){return function(fe){return fe.id==Q}}function B(){b&&(v+=S,L&&(v+=S),b=L=!1)}function K(Q){Q&&(B(),v+=Q)}function Z(Q){if(Q.nodeType==1){var fe=Q.getAttribute("cm-text");if(fe){K(fe);return}var ye=Q.getAttribute("cm-marker"),Ce;if(ye){var Pe=o.findMarks(Ee(c,0),Ee(h+1,0),A(+ye));Pe.length&&(Ce=Pe[0].find(0))&&K(Qn(o.doc,Ce.from,Ce.to).join(S));return}if(Q.getAttribute("contenteditable")=="false")return;var je=/^(pre|div|p|li|table|br)$/i.test(Q.nodeName);if(!/^br$/i.test(Q.nodeName)&&Q.textContent.length==0)return;je&&B();for(var Le=0;Le<Q.childNodes.length;Le++)Z(Q.childNodes[Le]);/^(pre|p)$/i.test(Q.nodeName)&&(L=!0),je&&(b=!0)}else Q.nodeType==3&&K(Q.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Z(s),s!=f;)s=s.nextSibling,L=!1;return v}function yf(o,s,f){var c;if(s==o.display.lineDiv){if(c=o.display.lineDiv.childNodes[f],!c)return us(o.clipPos(Ee(o.display.viewTo-1)),!0);s=null,f=0}else for(c=s;;c=c.parentNode){if(!c||c==o.display.lineDiv)return null;if(c.parentNode&&c.parentNode==o.display.lineDiv)break}for(var h=0;h<o.display.view.length;h++){var v=o.display.view[h];if(v.node==c)return KA(v,s,f)}}function KA(o,s,f){var c=o.text.firstChild,h=!1;if(!s||!pe(c,s))return us(Ee(ft(o.line),0),!0);if(s==c&&(h=!0,s=c.childNodes[f],f=0,!s)){var v=o.rest?ze(o.rest):o.line;return us(Ee(ft(v),v.text.length),h)}var b=s.nodeType==3?s:null,S=s;for(!b&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(b=s.firstChild,f&&(f=b.nodeValue.length));S.parentNode!=c;)S=S.parentNode;var L=o.measure,A=L.maps;function B(Ce,Pe,je){for(var Le=-1;Le<(A?A.length:0);Le++)for(var Re=Le<0?L.map:A[Le],We=0;We<Re.length;We+=3){var Be=Re[We+2];if(Be==Ce||Be==Pe){var tt=ft(Le<0?o.line:o.rest[Le]),Et=Re[We]+je;return(je<0||Be!=Ce)&&(Et=Re[We+(je?1:0)]),Ee(tt,Et)}}}var K=B(b,S,f);if(K)return us(K,h);for(var Z=S.nextSibling,Q=b?b.nodeValue.length-f:0;Z;Z=Z.nextSibling){if(K=B(Z,Z.firstChild,0),K)return us(Ee(K.line,K.ch-Q),h);Q+=Z.textContent.length}for(var fe=S.previousSibling,ye=f;fe;fe=fe.previousSibling){if(K=B(fe,fe.firstChild,-1),K)return us(Ee(K.line,K.ch+ye),h);ye+=fe.textContent.length}}var Rt=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new J,this.hasSelection=!1,this.composing=null};Rt.prototype.init=function(o){var s=this,f=this,c=this.cm;this.createField(o);var h=this.textarea;o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),T&&(h.style.width="0px"),ke(h,"input",function(){d&&p>=9&&s.hasSelection&&(s.hasSelection=null),f.poll()}),ke(h,"paste",function(b){Xe(c,b)||Lb(b,c)||(c.state.pasteIncoming=+new Date,f.fastPoll())});function v(b){if(!Xe(c,b)){if(c.somethingSelected())mf({lineWise:!1,text:c.getSelections()});else if(c.options.lineWiseCopyCut){var S=Ab(c);mf({lineWise:!0,text:S.text}),b.type=="cut"?c.setSelections(S.ranges,null,Oe):(f.prevInput="",h.value=S.text.join("\n"),V(h))}else return;b.type=="cut"&&(c.state.cutIncoming=+new Date)}}ke(h,"cut",v),ke(h,"copy",v),ke(o.scroller,"paste",function(b){if(!(Ni(o,b)||Xe(c,b))){if(!h.dispatchEvent){c.state.pasteIncoming=+new Date,f.focus();return}var S=new Event("paste");S.clipboardData=b.clipboardData,h.dispatchEvent(S)}}),ke(o.lineSpace,"selectstart",function(b){Ni(o,b)||sr(b)}),ke(h,"compositionstart",function(){var b=c.getCursor("from");f.composing&&f.composing.range.clear(),f.composing={start:b,range:c.markText(b,c.getCursor("to"),{className:"CodeMirror-composing"})}}),ke(h,"compositionend",function(){f.composing&&(f.poll(),f.composing.range.clear(),f.composing=null)})},Rt.prototype.createField=function(o){this.wrapper=Ib(),this.textarea=this.wrapper.firstChild},Rt.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Rt.prototype.prepareSelection=function(){var o=this.cm,s=o.display,f=o.doc,c=S1(o);if(o.options.moveInputWithCursor){var h=Nn(o,f.sel.primary().head,"div"),v=s.wrapper.getBoundingClientRect(),b=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,h.top+b.top-v.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,h.left+b.left-v.left))}return c},Rt.prototype.showSelection=function(o){var s=this.cm,f=s.display;W(f.cursorDiv,o.cursors),W(f.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Rt.prototype.reset=function(o){if(!(this.contextMenuPending||this.composing)){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var f=s.getSelection();this.textarea.value=f,s.state.focused&&V(this.textarea),d&&p>=9&&(this.hasSelection=f)}else o||(this.prevInput=this.textarea.value="",d&&p>=9&&(this.hasSelection=null))}},Rt.prototype.getField=function(){return this.textarea},Rt.prototype.supportsTouch=function(){return!1},Rt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!R||ce()!=this.textarea))try{this.textarea.focus()}catch{}},Rt.prototype.blur=function(){this.textarea.blur()},Rt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Rt.prototype.receivedFocus=function(){this.slowPoll()},Rt.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Rt.prototype.fastPoll=function(){var o=!1,s=this;s.pollingFast=!0;function f(){var c=s.poll();!c&&!o?(o=!0,s.polling.set(60,f)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,f)},Rt.prototype.poll=function(){var o=this,s=this.cm,f=this.textarea,c=this.prevInput;if(this.contextMenuPending||!s.state.focused||Bc(f)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var h=f.value;if(h==c&&!s.somethingSelected())return!1;if(d&&p>=9&&this.hasSelection===h||_&&/[\uf700-\uf7ff]/.test(h))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var v=h.charCodeAt(0);if(v==8203&&!c&&(c="​"),v==8666)return this.reset(),this.cm.execCommand("undo")}for(var b=0,S=Math.min(c.length,h.length);b<S&&c.charCodeAt(b)==h.charCodeAt(b);)++b;return $r(s,function(){vg(s,h.slice(b),c.length-b,null,o.composing?"*compose":null),h.length>1e3||h.indexOf("\n")>-1?f.value=o.prevInput="":o.prevInput=h,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Rt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Rt.prototype.onKeyPress=function(){d&&p>=9&&(this.hasSelection=null),this.fastPoll()},Rt.prototype.onContextMenu=function(o){var s=this,f=s.cm,c=f.display,h=s.textarea;s.contextMenuPending&&s.contextMenuPending();var v=Vo(f,o),b=c.scroller.scrollTop;if(!v||x)return;var S=f.options.resetSelectionOnContextMenu;S&&f.doc.sel.contains(v)==-1&&Gt(f,ur)(f.doc,ao(v),Oe);var L=h.style.cssText,A=s.wrapper.style.cssText,B=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",h.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(o.clientY-B.top-5)+"px; left: "+(o.clientX-B.left-5)+"px;\n      z-index: 1000; background: "+(d?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var K;g&&(K=window.scrollY),c.input.focus(),g&&window.scrollTo(null,K),c.input.reset(),f.somethingSelected()||(h.value=s.prevInput=" "),s.contextMenuPending=Q,c.selForContextMenu=f.doc.sel,clearTimeout(c.detectingSelectAll);function Z(){if(h.selectionStart!=null){var ye=f.somethingSelected(),Ce="​"+(ye?h.value:"");h.value="⇚",h.value=Ce,s.prevInput=ye?"":"​",h.selectionStart=1,h.selectionEnd=Ce.length,c.selForContextMenu=f.doc.sel}}function Q(){if(s.contextMenuPending==Q&&(s.contextMenuPending=!1,s.wrapper.style.cssText=A,h.style.cssText=L,d&&p<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=b),h.selectionStart!=null)){(!d||d&&p<9)&&Z();var ye=0,Ce=function(){c.selForContextMenu==f.doc.sel&&h.selectionStart==0&&h.selectionEnd>0&&s.prevInput=="​"?Gt(f,Z1)(f):ye++<10?c.detectingSelectAll=setTimeout(Ce,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(Ce,200)}}if(d&&p>=9&&Z(),re){Wo(o);var fe=function(){it(window,"mouseup",fe),setTimeout(Q,20)};ke(window,"mouseup",fe)}else setTimeout(Q,50)},Rt.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Rt.prototype.setUneditable=function(){},Rt.prototype.needsContentAttribute=!1;function GA(o,s){if(s=s?se(s):{},s.value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var f=ce();s.autofocus=f==o||o.getAttribute("autofocus")!=null&&f==document.body}function c(){o.value=S.getValue()}var h;if(o.form&&(ke(o.form,"submit",c),!s.leaveSubmitMethodAlone)){var v=o.form;h=v.submit;try{var b=v.submit=function(){c(),v.submit=h,v.submit(),v.submit=b}}catch{}}s.finishInit=function(L){L.save=c,L.getTextArea=function(){return o},L.toTextArea=function(){L.toTextArea=isNaN,c(),o.parentNode.removeChild(L.getWrapperElement()),o.style.display="",o.form&&(it(o.form,"submit",c),!s.leaveSubmitMethodAlone&&typeof o.form.submit=="function"&&(o.form.submit=h))}},o.style.display="none";var S=Ot(function(L){return o.parentNode.insertBefore(L,o.nextSibling)},s);return S}function qA(o){o.off=it,o.on=ke,o.wheelEventPixels=eA,o.Doc=Pr,o.splitLines=vl,o.countColumn=X,o.findColumn=Ye,o.isWordChar=Qe,o.Pass=xe,o.signal=Me,o.Line=qa,o.changeEnd=so,o.scrollbarModel=L1,o.Pos=Ee,o.cmpPos=j,o.modes=gn,o.mimeModes=Vr,o.resolveMode=Wa,o.getMode=Ka,o.modeExtensions=On,o.extendMode=Pn,o.copyState=Xr,o.startState=wl,o.innerMode=yl,o.commands=Wl,o.keyMap=ji,o.keyName=gb,o.isModifierKey=hb,o.lookupKey=as,o.normalizeKeyMap=EA,o.StringStream=It,o.SharedTextMarker=Bl,o.TextMarker=uo,o.LineWidget=zl,o.e_preventDefault=sr,o.e_stopPropagation=Ua,o.e_stop=Wo,o.addClass=ue,o.contains=pe,o.rmClass=le,o.keyNames=co}FA(Ot),HA(Ot);var VA="iter insert remove copy getEditor constructor".split(" ");for(var wf in Pr.prototype)Pr.prototype.hasOwnProperty(wf)&&ne(VA,wf)<0&&(Ot.prototype[wf]=function(o){return function(){return o.apply(this.doc,arguments)}}(Pr.prototype[wf]));return Xn(Pr),Ot.inputStyles={textarea:Rt,contenteditable:gt},Ot.defineMode=function(o){!Ot.defaults.mode&&o!="null"&&(Ot.defaults.mode=o),Uc.apply(this,arguments)},Ot.defineMIME=Oi,Ot.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),Ot.defineMIME("text/plain","null"),Ot.defineExtension=function(o,s){Ot.prototype[o]=s},Ot.defineDocExtension=function(o,s){Pr.prototype[o]=s},Ot.fromTextArea=GA,qA(Ot),Ot.version="5.65.1",Ot})}(lv)),lv.exports}function gh(){return gh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gh.apply(this,arguments)}function _u(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_u=function(r){return typeof r}:_u=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_u(e)}var RP=function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l])},e(r,n)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(uc,"__esModule",{value:!0});uc.UnControlled=FP=uc.Controlled=void 0;var vh=C,nn=typeof navigator>"u"||dr.PREVENT_CODEMIRROR_RENDER===!0,li;nn||(li=fl());var uv=function(){function e(){}return e.equals=function(t,r){var n=this,i=Object.keys,a=_u(t),l=_u(r);return t&&r&&a==="object"&&a===l?i(t).length===i(r).length&&i(t).every(function(u){return n.equals(t[u],r[u])}):t===r},e}(),$P=function(){function e(t,r){this.editor=t,this.props=r}return e.prototype.delegateCursor=function(t,r,n){var i=this.editor.getDoc();n&&this.editor.focus(),r?i.setCursor(t):i.setCursor(t,null,{scroll:!1})},e.prototype.delegateScroll=function(t){this.editor.scrollTo(t.x,t.y)},e.prototype.delegateSelection=function(t,r){var n=this.editor.getDoc();n.setSelections(t),r&&this.editor.focus()},e.prototype.apply=function(t){t&&t.selection&&t.selection.ranges&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),t&&t.cursor&&this.delegateCursor(t.cursor,t.autoScroll||!1,this.editor.getOption("autofocus")||!1),t&&t.scroll&&this.delegateScroll(t.scroll)},e.prototype.applyNext=function(t,r,n){t&&t.selection&&t.selection.ranges&&r&&r.selection&&r.selection.ranges&&!uv.equals(t.selection.ranges,r.selection.ranges)&&this.delegateSelection(r.selection.ranges,r.selection.focus||!1),t&&t.cursor&&r&&r.cursor&&!uv.equals(t.cursor,r.cursor)&&this.delegateCursor(n.cursor||r.cursor,r.autoScroll||!1,r.autoCursor||!1),t&&t.scroll&&r&&r.scroll&&!uv.equals(t.scroll,r.scroll)&&this.delegateScroll(r.scroll)},e.prototype.applyUserDefined=function(t,r){r&&r.cursor&&this.delegateCursor(r.cursor,t.autoScroll||!1,this.editor.getOption("autofocus")||!1)},e.prototype.wire=function(t){var r=this;Object.keys(t||{}).filter(function(n){return/^on/.test(n)}).forEach(function(n){switch(n){case"onBlur":r.editor.on("blur",function(i,a){r.props.onBlur(r.editor,a)});break;case"onContextMenu":{r.editor.on("contextmenu",function(i,a){r.props.onContextMenu(r.editor,a)});break}case"onCopy":{r.editor.on("copy",function(i,a){r.props.onCopy(r.editor,a)});break}case"onCursor":r.editor.on("cursorActivity",function(i){r.props.onCursor(r.editor,r.editor.getDoc().getCursor())});break;case"onCursorActivity":r.editor.on("cursorActivity",function(i){r.props.onCursorActivity(r.editor)});break;case"onCut":{r.editor.on("cut",function(i,a){r.props.onCut(r.editor,a)});break}case"onDblClick":{r.editor.on("dblclick",function(i,a){r.props.onDblClick(r.editor,a)});break}case"onDragEnter":r.editor.on("dragenter",function(i,a){r.props.onDragEnter(r.editor,a)});break;case"onDragLeave":{r.editor.on("dragleave",function(i,a){r.props.onDragLeave(r.editor,a)});break}case"onDragOver":r.editor.on("dragover",function(i,a){r.props.onDragOver(r.editor,a)});break;case"onDragStart":{r.editor.on("dragstart",function(i,a){r.props.onDragStart(r.editor,a)});break}case"onDrop":r.editor.on("drop",function(i,a){r.props.onDrop(r.editor,a)});break;case"onFocus":r.editor.on("focus",function(i,a){r.props.onFocus(r.editor,a)});break;case"onGutterClick":r.editor.on("gutterClick",function(i,a,l,u){r.props.onGutterClick(r.editor,a,l,u)});break;case"onInputRead":r.editor.on("inputRead",function(i,a){r.props.onInputRead(r.editor,a)});break;case"onKeyDown":r.editor.on("keydown",function(i,a){r.props.onKeyDown(r.editor,a)});break;case"onKeyHandled":r.editor.on("keyHandled",function(i,a,l){r.props.onKeyHandled(r.editor,a,l)});break;case"onKeyPress":r.editor.on("keypress",function(i,a){r.props.onKeyPress(r.editor,a)});break;case"onKeyUp":r.editor.on("keyup",function(i,a){r.props.onKeyUp(r.editor,a)});break;case"onMouseDown":{r.editor.on("mousedown",function(i,a){r.props.onMouseDown(r.editor,a)});break}case"onPaste":{r.editor.on("paste",function(i,a){r.props.onPaste(r.editor,a)});break}case"onRenderLine":{r.editor.on("renderLine",function(i,a,l){r.props.onRenderLine(r.editor,a,l)});break}case"onScroll":r.editor.on("scroll",function(i){r.props.onScroll(r.editor,r.editor.getScrollInfo())});break;case"onSelection":r.editor.on("beforeSelectionChange",function(i,a){r.props.onSelection(r.editor,a)});break;case"onTouchStart":{r.editor.on("touchstart",function(i,a){r.props.onTouchStart(r.editor,a)});break}case"onUpdate":r.editor.on("update",function(i){r.props.onUpdate(r.editor)});break;case"onViewportChange":r.editor.on("viewportChange",function(i,a,l){r.props.onViewportChange(r.editor,a,l)});break}})},e}(),nK=function(e){RP(t,e);function t(r){var n=e.call(this,r)||this;return nn||(n.applied=!1,n.appliedNext=!1,n.appliedUserDefined=!1,n.deferred=null,n.emulating=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1),n}return t.prototype.hydrate=function(r){var n=this,i=r&&r.options?r.options:{},a=gh({},li.defaults,this.editor.options,i),l=Object.keys(a).some(function(u){return n.editor.getOption(u)!==a[u]});l&&Object.keys(a).forEach(function(u){i.hasOwnProperty(u)&&n.editor.getOption(u)!==a[u]&&(n.editor.setOption(u,a[u]),n.mirror.setOption(u,a[u]))}),this.hydrated||(this.deferred?this.resolveChange(r.value):this.initChange(r.value||"")),this.hydrated=!0},t.prototype.initChange=function(r){this.emulating=!0;var n=this.editor.getDoc(),i=n.lastLine(),a=n.getLine(n.lastLine()).length;n.replaceRange(r||"",{line:0,ch:0},{line:i,ch:a}),this.mirror.setValue(r),n.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},t.prototype.resolveChange=function(r){this.emulating=!0;var n=this.editor.getDoc();if(this.deferred.origin==="undo"?n.undo():this.deferred.origin==="redo"?n.redo():n.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),r&&r!==n.getValue()){var i=n.getCursor();n.setValue(r),n.setCursor(i)}this.emulating=!1,this.deferred=null},t.prototype.mirrorChange=function(r){var n=this.editor.getDoc();return r.origin==="undo"?(n.setHistory(this.mirror.getHistory()),this.mirror.undo()):r.origin==="redo"?(n.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(r.text,r.from,r.to,r.origin),this.mirror.getValue()},t.prototype.componentDidMount=function(){var r=this;nn||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&li.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=li(this.ref,this.props.options),this.shared=new $P(this.editor,this.props),this.mirror=li(function(){},this.props.options),this.editor.on("electricInput",function(){r.mirror.setHistory(r.editor.getDoc().getHistory())}),this.editor.on("cursorActivity",function(){r.mirror.setCursor(r.editor.getDoc().getCursor())}),this.editor.on("beforeChange",function(n,i){if(!r.emulating){i.cancel(),r.deferred=i;var a=r.mirrorChange(r.deferred);r.props.onBeforeChange&&r.props.onBeforeChange(r.editor,r.deferred,a)}}),this.editor.on("change",function(n,i){r.mounted&&r.props.onChange&&r.props.onChange(r.editor,i,r.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentDidUpdate=function(r){if(!nn){var n={cursor:null};this.props.value!==r.value&&(this.hydrated=!1),!this.props.autoCursor&&this.props.autoCursor!==void 0&&(n.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.appliedNext||(this.shared.applyNext(r,this.props,n),this.appliedNext=!0),this.shared.applyUserDefined(r,n),this.appliedUserDefined=!0}},t.prototype.componentWillUnmount=function(){nn||this.props.editorWillUnmount&&this.props.editorWillUnmount(li)},t.prototype.shouldComponentUpdate=function(r,n){return!nn},t.prototype.render=function(){var r=this;if(nn)return null;var n=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return vh.createElement("div",{className:n,ref:function(a){return r.ref=a}})},t}(vh.Component),FP=uc.Controlled=nK,iK=function(e){RP(t,e);function t(r){var n=e.call(this,r)||this;return nn||(n.applied=!1,n.appliedUserDefined=!1,n.continueChange=!1,n.detached=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n.onBeforeChangeCb=function(){n.continueChange=!0}),n}return t.prototype.hydrate=function(r){var n=this,i=r&&r.options?r.options:{},a=gh({},li.defaults,this.editor.options,i),l=Object.keys(a).some(function(g){return n.editor.getOption(g)!==a[g]});if(l&&Object.keys(a).forEach(function(g){i.hasOwnProperty(g)&&n.editor.getOption(g)!==a[g]&&n.editor.setOption(g,a[g])}),!this.hydrated){var u=this.editor.getDoc(),d=u.lastLine(),p=u.getLine(u.lastLine()).length;u.replaceRange(r.value||"",{line:0,ch:0},{line:d,ch:p})}this.hydrated=!0},t.prototype.componentDidMount=function(){var r=this;nn||(this.detached=this.props.detach===!0,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&li.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=li(this.ref,this.props.options),this.shared=new $P(this.editor,this.props),this.editor.on("beforeChange",function(n,i){r.props.onBeforeChange&&r.props.onBeforeChange(r.editor,i,r.editor.getValue(),r.onBeforeChangeCb)}),this.editor.on("change",function(n,i){!r.mounted||!r.props.onChange||(r.props.onBeforeChange?r.continueChange&&r.props.onChange(r.editor,i,r.editor.getValue()):r.props.onChange(r.editor,i,r.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getDoc().clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentDidUpdate=function(r){if(this.detached&&this.props.detach===!1&&(this.detached=!1,r.editorDidAttach&&r.editorDidAttach(this.editor)),!this.detached&&this.props.detach===!0&&(this.detached=!0,r.editorDidDetach&&r.editorDidDetach(this.editor)),!(nn||this.detached)){var n={cursor:null};this.props.value!==r.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),!r.autoCursor&&r.autoCursor!==void 0&&(n.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.applied||(this.shared.apply(r),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(r,n),this.appliedUserDefined=!0)}},t.prototype.componentWillUnmount=function(){nn||this.props.editorWillUnmount&&this.props.editorWillUnmount(li)},t.prototype.shouldComponentUpdate=function(r,n){var i=!0;return nn&&(i=!1),this.detached&&r.detach&&(i=!1),i},t.prototype.render=function(){var r=this;if(nn)return null;var n=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return vh.createElement("div",{className:n,ref:function(a){return r.ref=a}})},t}(vh.Component);uc.UnControlled=iK;(function(e,t){(function(r){r(fl())})(function(r){r.defineOption("placeholder","",function(p,g,m){var w=m&&m!=r.Init;if(g&&!w)p.on("blur",l),p.on("change",u),p.on("swapDoc",u),r.on(p.getInputField(),"compositionupdate",p.state.placeholderCompose=function(){a(p)}),u(p);else if(!g&&w){p.off("blur",l),p.off("change",u),p.off("swapDoc",u),r.off(p.getInputField(),"compositionupdate",p.state.placeholderCompose),n(p);var x=p.getWrapperElement();x.className=x.className.replace(" CodeMirror-empty","")}g&&!p.hasFocus()&&l(p)});function n(p){p.state.placeholder&&(p.state.placeholder.parentNode.removeChild(p.state.placeholder),p.state.placeholder=null)}function i(p){n(p);var g=p.state.placeholder=document.createElement("pre");g.style.cssText="height: 0; overflow: visible",g.style.direction=p.getOption("direction"),g.className="CodeMirror-placeholder CodeMirror-line-like";var m=p.getOption("placeholder");typeof m=="string"&&(m=document.createTextNode(m)),g.appendChild(m),p.display.lineSpace.insertBefore(g,p.display.lineSpace.firstChild)}function a(p){setTimeout(function(){var g=!1;if(p.lineCount()==1){var m=p.getInputField();g=m.nodeName=="TEXTAREA"?!p.getLine(0).length:!/[^\u200b]/.test(m.querySelector(".CodeMirror-line").textContent)}g?i(p):n(p)},20)}function l(p){d(p)&&i(p)}function u(p){var g=p.getWrapperElement(),m=d(p);g.className=g.className.replace(" CodeMirror-empty","")+(m?" CodeMirror-empty":""),m?i(p):n(p)}function d(p){return p.lineCount()===1&&p.getLine(0)===""}})})();(function(e,t){(function(r){r(fl())})(function(r){var n="CodeMirror-hint",i="CodeMirror-hint-active";r.showHint=function(T,N,R){if(!N)return T.showHint(R);R&&R.async&&(N.async=!0);var _={hint:N};if(R)for(var $ in R)_[$]=R[$];return T.showHint(_)},r.defineExtension("showHint",function(T){T=d(this,this.getCursor("start"),T);var N=this.listSelections();if(!(N.length>1)){if(this.somethingSelected()){if(!T.hint.supportsSelection)return;for(var R=0;R<N.length;R++)if(N[R].head.line!=N[R].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var _=this.state.completionActive=new a(this,T);_.options.hint&&(r.signal(this,"startCompletion",this),_.update(!0))}}),r.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function a(T,N){if(this.cm=T,this.options=N,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var R=this;T.on("cursorActivity",this.activityFunc=function(){R.cursorActivity()})}}var l=window.requestAnimationFrame||function(T){return setTimeout(T,1e3/60)},u=window.cancelAnimationFrame||clearTimeout;a.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&r.signal(this.data,"close"),this.widget&&this.widget.close(),r.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(T,N){var R=T.list[N],_=this;this.cm.operation(function(){R.hint?R.hint(_.cm,T,R):_.cm.replaceRange(p(R),R.from||T.from,R.to||T.to,"complete"),r.signal(T,"pick",R),_.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(u(this.debounce),this.debounce=0);var T=this.startPos;this.data&&(T=this.data.from);var N=this.cm.getCursor(),R=this.cm.getLine(N.line);if(N.line!=this.startPos.line||R.length-N.ch!=this.startLen-this.startPos.ch||N.ch<T.ch||this.cm.somethingSelected()||!N.ch||this.options.closeCharacters.test(R.charAt(N.ch-1)))this.close();else{var _=this;this.debounce=l(function(){_.update()}),this.widget&&this.widget.disable()}},update:function(T){if(this.tick!=null){var N=this,R=++this.tick;O(this.options.hint,this.cm,this.options,function(_){N.tick==R&&N.finishUpdate(_,T)})}},finishUpdate:function(T,N){this.data&&r.signal(this.data,"update");var R=this.widget&&this.widget.picked||N&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=T,T&&T.list.length&&(R&&T.list.length==1?this.pick(T,0):(this.widget=new w(this,T),r.signal(T,"shown")))}};function d(T,N,R){var _=T.options.hintOptions,$={};for(var z in P)$[z]=P[z];if(_)for(var z in _)_[z]!==void 0&&($[z]=_[z]);if(R)for(var z in R)R[z]!==void 0&&($[z]=R[z]);return $.hint.resolve&&($.hint=$.hint.resolve(T,N)),$}function p(T){return typeof T=="string"?T:T.text}function g(T,N){var R={Up:function(){N.moveFocus(-1)},Down:function(){N.moveFocus(1)},PageUp:function(){N.moveFocus(-N.menuSize()+1,!0)},PageDown:function(){N.moveFocus(N.menuSize()-1,!0)},Home:function(){N.setFocus(0)},End:function(){N.setFocus(N.length-1)},Enter:N.pick,Tab:N.pick,Esc:N.close},_=/Mac/.test(navigator.platform);_&&(R["Ctrl-P"]=function(){N.moveFocus(-1)},R["Ctrl-N"]=function(){N.moveFocus(1)});var $=T.options.customKeys,z=$?{}:R;function H(oe,le){var we;typeof le!="string"?we=function(W){return le(W,N)}:R.hasOwnProperty(le)?we=R[le]:we=le,z[oe]=we}if($)for(var q in $)$.hasOwnProperty(q)&&H(q,$[q]);var re=T.options.extraKeys;if(re)for(var q in re)re.hasOwnProperty(q)&&H(q,re[q]);return z}function m(T,N){for(;N&&N!=T;){if(N.nodeName.toUpperCase()==="LI"&&N.parentNode==T)return N;N=N.parentNode}}function w(T,N){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=T,this.data=N,this.picked=!1;var R=this,_=T.cm,$=_.getInputField().ownerDocument,z=$.defaultView||$.parentWindow,H=this.hints=$.createElement("ul");H.setAttribute("role","listbox"),H.setAttribute("aria-expanded","true"),H.id=this.id;var q=T.cm.options.theme;H.className="CodeMirror-hints "+q,this.selectedHint=N.selectedHint||0;for(var re=N.list,oe=0;oe<re.length;++oe){var le=H.appendChild($.createElement("li")),we=re[oe],W=n+(oe!=this.selectedHint?"":" "+i);we.className!=null&&(W=we.className+" "+W),le.className=W,oe==this.selectedHint&&le.setAttribute("aria-selected","true"),le.id=this.id+"-"+oe,le.setAttribute("role","option"),we.render?we.render(le,N,we):le.appendChild($.createTextNode(we.displayText||p(we))),le.hintId=oe}var U=T.options.container||$.body,F=_.cursorCoords(T.options.alignWithWord?N.from:null),be=F.left,pe=F.bottom,ce=!0,ue=0,me=0;if(U!==$.body){var V=["absolute","relative","fixed"].indexOf(z.getComputedStyle(U).position)!==-1,ee=V?U:U.offsetParent,se=ee.getBoundingClientRect(),X=$.body.getBoundingClientRect();ue=se.left-X.left-ee.scrollLeft,me=se.top-X.top-ee.scrollTop}H.style.left=be-ue+"px",H.style.top=pe-me+"px";var J=z.innerWidth||Math.max($.body.offsetWidth,$.documentElement.offsetWidth),ne=z.innerHeight||Math.max($.body.offsetHeight,$.documentElement.offsetHeight);U.appendChild(H),_.getInputField().setAttribute("aria-autocomplete","list"),_.getInputField().setAttribute("aria-owns",this.id),_.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var de=T.options.moveOnOverlap?H.getBoundingClientRect():new DOMRect,xe=T.options.paddingForScrollbar?H.scrollHeight>H.clientHeight+1:!1,Oe;setTimeout(function(){Oe=_.getScrollInfo()});var $e=de.bottom-ne;if($e>0){var _e=de.bottom-de.top,Ye=F.top-(F.bottom-de.top);if(Ye-_e>0)H.style.top=(pe=F.top-_e-me)+"px",ce=!1;else if(_e>ne){H.style.height=ne-5+"px",H.style.top=(pe=F.bottom-de.top-me)+"px";var ut=_.getCursor();N.from.ch!=ut.ch&&(F=_.cursorCoords(ut),H.style.left=(be=F.left-ue)+"px",de=H.getBoundingClientRect())}}var vt=de.right-J;if(xe&&(vt+=_.display.nativeBarWidth),vt>0&&(de.right-de.left>J&&(H.style.width=J-5+"px",vt-=de.right-de.left-J),H.style.left=(be=F.left-vt-ue)+"px"),xe)for(var ze=H.firstChild;ze;ze=ze.nextSibling)ze.style.paddingRight=_.display.nativeBarWidth+"px";if(_.addKeyMap(this.keyMap=g(T,{moveFocus:function(at,st){R.changeActive(R.selectedHint+at,st)},setFocus:function(at){R.changeActive(at)},menuSize:function(){return R.screenAmount()},length:re.length,close:function(){T.close()},pick:function(){R.pick()},data:N})),T.options.closeOnUnfocus){var qe;_.on("blur",this.onBlur=function(){qe=setTimeout(function(){T.close()},100)}),_.on("focus",this.onFocus=function(){clearTimeout(qe)})}_.on("scroll",this.onScroll=function(){var at=_.getScrollInfo(),st=_.getWrapperElement().getBoundingClientRect();Oe||(Oe=_.getScrollInfo());var xt=pe+Oe.top-at.top,Qe=xt-(z.pageYOffset||($.documentElement||$.body).scrollTop);if(ce||(Qe+=H.offsetHeight),Qe<=st.top||Qe>=st.bottom)return T.close();H.style.top=xt+"px",H.style.left=be+Oe.left-at.left+"px"}),r.on(H,"dblclick",function(at){var st=m(H,at.target||at.srcElement);st&&st.hintId!=null&&(R.changeActive(st.hintId),R.pick())}),r.on(H,"click",function(at){var st=m(H,at.target||at.srcElement);st&&st.hintId!=null&&(R.changeActive(st.hintId),T.options.completeOnSingleClick&&R.pick())}),r.on(H,"mousedown",function(){setTimeout(function(){_.focus()},20)});var ct=this.getSelectedHintRange();return(ct.from!==0||ct.to!==0)&&this.scrollToActive(),r.signal(N,"select",re[this.selectedHint],H.childNodes[this.selectedHint]),!0}w.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var T=this.completion.cm.getInputField();T.removeAttribute("aria-activedescendant"),T.removeAttribute("aria-owns");var N=this.completion.cm;this.completion.options.closeOnUnfocus&&(N.off("blur",this.onBlur),N.off("focus",this.onFocus)),N.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var T=this;this.keyMap={Enter:function(){T.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(T,N){if(T>=this.data.list.length?T=N?this.data.list.length-1:0:T<0&&(T=N?0:this.data.list.length-1),this.selectedHint!=T){var R=this.hints.childNodes[this.selectedHint];R&&(R.className=R.className.replace(" "+i,""),R.removeAttribute("aria-selected")),R=this.hints.childNodes[this.selectedHint=T],R.className+=" "+i,R.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",R.id),this.scrollToActive(),r.signal(this.data,"select",this.data.list[this.selectedHint],R)}},scrollToActive:function(){var T=this.getSelectedHintRange(),N=this.hints.childNodes[T.from],R=this.hints.childNodes[T.to],_=this.hints.firstChild;N.offsetTop<this.hints.scrollTop?this.hints.scrollTop=N.offsetTop-_.offsetTop:R.offsetTop+R.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=R.offsetTop+R.offsetHeight-this.hints.clientHeight+_.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var T=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-T),to:Math.min(this.data.list.length-1,this.selectedHint+T)}}};function x(T,N){if(!T.somethingSelected())return N;for(var R=[],_=0;_<N.length;_++)N[_].supportsSelection&&R.push(N[_]);return R}function O(T,N,R,_){if(T.async)T(N,_,R);else{var $=T(N,R);$&&$.then?$.then(_):_($)}}function I(T,N){var R=T.getHelpers(N,"hint"),_;if(R.length){var $=function(z,H,q){var re=x(z,R);function oe(le){if(le==re.length)return H(null);O(re[le],z,q,function(we){we&&we.list.length>0?H(we):oe(le+1)})}oe(0)};return $.async=!0,$.supportsSelection=!0,$}else return(_=T.getHelper(T.getCursor(),"hintWords"))?function(z){return r.hint.fromList(z,{words:_})}:r.hint.anyword?function(z,H){return r.hint.anyword(z,H)}:function(){}}r.registerHelper("hint","auto",{resolve:I}),r.registerHelper("hint","fromList",function(T,N){var R=T.getCursor(),_=T.getTokenAt(R),$,z=r.Pos(R.line,_.start),H=R;_.start<R.ch&&/\w/.test(_.string.charAt(R.ch-_.start-1))?$=_.string.substr(0,R.ch-_.start):($="",z=R);for(var q=[],re=0;re<N.words.length;re++){var oe=N.words[re];oe.slice(0,$.length)==$&&q.push(oe)}if(q.length)return{list:q,from:z,to:H}}),r.commands.autocomplete=r.showHint;var P={hint:r.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};r.defineOption("hintOptions",null)})})();(function(e,t){(function(r){r(fl())})(function(r){r.defineMode("css",function(oe,le){var we=le.inline;le.propertyKeywords||(le=r.resolveMode("text/css"));var W=oe.indentUnit,U=le.tokenHooks,F=le.documentTypes||{},be=le.mediaTypes||{},pe=le.mediaFeatures||{},ce=le.mediaValueKeywords||{},ue=le.propertyKeywords||{},me=le.nonStandardPropertyKeywords||{},V=le.fontProperties||{},ee=le.counterDescriptors||{},se=le.colorKeywords||{},X=le.valueKeywords||{},J=le.allowNested,ne=le.lineComment,de=le.supportsAtComponent===!0,xe=oe.highlightNonStandardPropertyKeywords!==!1,Oe,$e;function _e(te,he){return Oe=he,te}function Ye(te,he){var ie=te.next();if(U[ie]){var Ne=U[ie](te,he);if(Ne!==!1)return Ne}if(ie=="@")return te.eatWhile(/[\w\\\-]/),_e("def",te.current());if(ie=="="||(ie=="~"||ie=="|")&&te.eat("="))return _e(null,"compare");if(ie=='"'||ie=="'")return he.tokenize=ut(ie),he.tokenize(te,he);if(ie=="#")return te.eatWhile(/[\w\\\-]/),_e("atom","hash");if(ie=="!")return te.match(/^\s*\w*/),_e("keyword","important");if(/\d/.test(ie)||ie=="."&&te.eat(/\d/))return te.eatWhile(/[\w.%]/),_e("number","unit");if(ie==="-"){if(/[\d.]/.test(te.peek()))return te.eatWhile(/[\w.%]/),_e("number","unit");if(te.match(/^-[\w\\\-]*/))return te.eatWhile(/[\w\\\-]/),te.match(/^\s*:/,!1)?_e("variable-2","variable-definition"):_e("variable-2","variable");if(te.match(/^\w+-/))return _e("meta","meta")}else return/[,+>*\/]/.test(ie)?_e(null,"select-op"):ie=="."&&te.match(/^-?[_a-z][_a-z0-9-]*/i)?_e("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(ie)?_e(null,ie):te.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(te.current())&&(he.tokenize=vt),_e("variable callee","variable")):/[\w\\\-]/.test(ie)?(te.eatWhile(/[\w\\\-]/),_e("property","word")):_e(null,null)}function ut(te){return function(he,ie){for(var Ne=!1,nt;(nt=he.next())!=null;){if(nt==te&&!Ne){te==")"&&he.backUp(1);break}Ne=!Ne&&nt=="\\"}return(nt==te||!Ne&&te!=")")&&(ie.tokenize=null),_e("string","string")}}function vt(te,he){return te.next(),te.match(/^\s*[\"\')]/,!1)?he.tokenize=null:he.tokenize=ut(")"),_e(null,"(")}function ze(te,he,ie){this.type=te,this.indent=he,this.prev=ie}function qe(te,he,ie,Ne){return te.context=new ze(ie,he.indentation()+(Ne===!1?0:W),te.context),ie}function ct(te){return te.context.prev&&(te.context=te.context.prev),te.context.type}function at(te,he,ie){return Qe[ie.context.type](te,he,ie)}function st(te,he,ie,Ne){for(var nt=Ne||1;nt>0;nt--)ie.context=ie.context.prev;return at(te,he,ie)}function xt(te){var he=te.current().toLowerCase();X.hasOwnProperty(he)?$e="atom":se.hasOwnProperty(he)?$e="keyword":$e="variable"}var Qe={};return Qe.top=function(te,he,ie){if(te=="{")return qe(ie,he,"block");if(te=="}"&&ie.context.prev)return ct(ie);if(de&&/@component/i.test(te))return qe(ie,he,"atComponentBlock");if(/^@(-moz-)?document$/i.test(te))return qe(ie,he,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(te))return qe(ie,he,"atBlock");if(/^@(font-face|counter-style)/i.test(te))return ie.stateArg=te,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(te))return"keyframes";if(te&&te.charAt(0)=="@")return qe(ie,he,"at");if(te=="hash")$e="builtin";else if(te=="word")$e="tag";else{if(te=="variable-definition")return"maybeprop";if(te=="interpolation")return qe(ie,he,"interpolation");if(te==":")return"pseudo";if(J&&te=="(")return qe(ie,he,"parens")}return ie.context.type},Qe.block=function(te,he,ie){if(te=="word"){var Ne=he.current().toLowerCase();return ue.hasOwnProperty(Ne)?($e="property","maybeprop"):me.hasOwnProperty(Ne)?($e=xe?"string-2":"property","maybeprop"):J?($e=he.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):($e+=" error","maybeprop")}else return te=="meta"?"block":!J&&(te=="hash"||te=="qualifier")?($e="error","block"):Qe.top(te,he,ie)},Qe.maybeprop=function(te,he,ie){return te==":"?qe(ie,he,"prop"):at(te,he,ie)},Qe.prop=function(te,he,ie){if(te==";")return ct(ie);if(te=="{"&&J)return qe(ie,he,"propBlock");if(te=="}"||te=="{")return st(te,he,ie);if(te=="(")return qe(ie,he,"parens");if(te=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(he.current()))$e+=" error";else if(te=="word")xt(he);else if(te=="interpolation")return qe(ie,he,"interpolation");return"prop"},Qe.propBlock=function(te,he,ie){return te=="}"?ct(ie):te=="word"?($e="property","maybeprop"):ie.context.type},Qe.parens=function(te,he,ie){return te=="{"||te=="}"?st(te,he,ie):te==")"?ct(ie):te=="("?qe(ie,he,"parens"):te=="interpolation"?qe(ie,he,"interpolation"):(te=="word"&&xt(he),"parens")},Qe.pseudo=function(te,he,ie){return te=="meta"?"pseudo":te=="word"?($e="variable-3",ie.context.type):at(te,he,ie)},Qe.documentTypes=function(te,he,ie){return te=="word"&&F.hasOwnProperty(he.current())?($e="tag",ie.context.type):Qe.atBlock(te,he,ie)},Qe.atBlock=function(te,he,ie){if(te=="(")return qe(ie,he,"atBlock_parens");if(te=="}"||te==";")return st(te,he,ie);if(te=="{")return ct(ie)&&qe(ie,he,J?"block":"top");if(te=="interpolation")return qe(ie,he,"interpolation");if(te=="word"){var Ne=he.current().toLowerCase();Ne=="only"||Ne=="not"||Ne=="and"||Ne=="or"?$e="keyword":be.hasOwnProperty(Ne)?$e="attribute":pe.hasOwnProperty(Ne)?$e="property":ce.hasOwnProperty(Ne)?$e="keyword":ue.hasOwnProperty(Ne)?$e="property":me.hasOwnProperty(Ne)?$e=xe?"string-2":"property":X.hasOwnProperty(Ne)?$e="atom":se.hasOwnProperty(Ne)?$e="keyword":$e="error"}return ie.context.type},Qe.atComponentBlock=function(te,he,ie){return te=="}"?st(te,he,ie):te=="{"?ct(ie)&&qe(ie,he,J?"block":"top",!1):(te=="word"&&($e="error"),ie.context.type)},Qe.atBlock_parens=function(te,he,ie){return te==")"?ct(ie):te=="{"||te=="}"?st(te,he,ie,2):Qe.atBlock(te,he,ie)},Qe.restricted_atBlock_before=function(te,he,ie){return te=="{"?qe(ie,he,"restricted_atBlock"):te=="word"&&ie.stateArg=="@counter-style"?($e="variable","restricted_atBlock_before"):at(te,he,ie)},Qe.restricted_atBlock=function(te,he,ie){return te=="}"?(ie.stateArg=null,ct(ie)):te=="word"?(ie.stateArg=="@font-face"&&!V.hasOwnProperty(he.current().toLowerCase())||ie.stateArg=="@counter-style"&&!ee.hasOwnProperty(he.current().toLowerCase())?$e="error":$e="property","maybeprop"):"restricted_atBlock"},Qe.keyframes=function(te,he,ie){return te=="word"?($e="variable","keyframes"):te=="{"?qe(ie,he,"top"):at(te,he,ie)},Qe.at=function(te,he,ie){return te==";"?ct(ie):te=="{"||te=="}"?st(te,he,ie):(te=="word"?$e="tag":te=="hash"&&($e="builtin"),"at")},Qe.interpolation=function(te,he,ie){return te=="}"?ct(ie):te=="{"||te==";"?st(te,he,ie):(te=="word"?$e="variable":te!="variable"&&te!="("&&te!=")"&&($e="error"),"interpolation")},{startState:function(te){return{tokenize:null,state:we?"block":"top",stateArg:null,context:new ze(we?"block":"top",te||0,null)}},token:function(te,he){if(!he.tokenize&&te.eatSpace())return null;var ie=(he.tokenize||Ye)(te,he);return ie&&typeof ie=="object"&&(Oe=ie[1],ie=ie[0]),$e=ie,Oe!="comment"&&(he.state=Qe[he.state](Oe,te,he)),$e},indent:function(te,he){var ie=te.context,Ne=he&&he.charAt(0),nt=ie.indent;return ie.type=="prop"&&(Ne=="}"||Ne==")")&&(ie=ie.prev),ie.prev&&(Ne=="}"&&(ie.type=="block"||ie.type=="top"||ie.type=="interpolation"||ie.type=="restricted_atBlock")?(ie=ie.prev,nt=ie.indent):(Ne==")"&&(ie.type=="parens"||ie.type=="atBlock_parens")||Ne=="{"&&(ie.type=="at"||ie.type=="atBlock"))&&(nt=Math.max(0,ie.indent-W))),nt},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ne,fold:"brace"}});function n(oe){for(var le={},we=0;we<oe.length;++we)le[oe[we].toLowerCase()]=!0;return le}var i=["domain","regexp","url","url-prefix"],a=n(i),l=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],u=n(l),d=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],p=n(d),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],m=n(g),w=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],x=n(w),O=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],I=n(O),P=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],T=n(P),N=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],R=n(N),_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],$=n(_),z=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],H=n(z),q=i.concat(l).concat(d).concat(g).concat(w).concat(O).concat(_).concat(z);r.registerHelper("hintWords","css",q);function re(oe,le){for(var we=!1,W;(W=oe.next())!=null;){if(we&&W=="/"){le.tokenize=null;break}we=W=="*"}return["comment","comment"]}r.defineMIME("text/css",{documentTypes:a,mediaTypes:u,mediaFeatures:p,mediaValueKeywords:m,propertyKeywords:x,nonStandardPropertyKeywords:I,fontProperties:T,counterDescriptors:R,colorKeywords:$,valueKeywords:H,tokenHooks:{"/":function(oe,le){return oe.eat("*")?(le.tokenize=re,re(oe,le)):!1}},name:"css"}),r.defineMIME("text/x-scss",{mediaTypes:u,mediaFeatures:p,mediaValueKeywords:m,propertyKeywords:x,nonStandardPropertyKeywords:I,colorKeywords:$,valueKeywords:H,fontProperties:T,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(oe,le){return oe.eat("/")?(oe.skipToEnd(),["comment","comment"]):oe.eat("*")?(le.tokenize=re,re(oe,le)):["operator","operator"]},":":function(oe){return oe.match(/^\s*\{/,!1)?[null,null]:!1},$:function(oe){return oe.match(/^[\w-]+/),oe.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(oe){return oe.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),r.defineMIME("text/x-less",{mediaTypes:u,mediaFeatures:p,mediaValueKeywords:m,propertyKeywords:x,nonStandardPropertyKeywords:I,colorKeywords:$,valueKeywords:H,fontProperties:T,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(oe,le){return oe.eat("/")?(oe.skipToEnd(),["comment","comment"]):oe.eat("*")?(le.tokenize=re,re(oe,le)):["operator","operator"]},"@":function(oe){return oe.eat("{")?[null,"interpolation"]:oe.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(oe.eatWhile(/[\w\\\-]/),oe.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),r.defineMIME("text/x-gss",{documentTypes:a,mediaTypes:u,mediaFeatures:p,propertyKeywords:x,nonStandardPropertyKeywords:I,fontProperties:T,counterDescriptors:R,colorKeywords:$,valueKeywords:H,supportsAtComponent:!0,tokenHooks:{"/":function(oe,le){return oe.eat("*")?(le.tokenize=re,re(oe,le)):!1}},name:"css",helperType:"gss"})})})();(function(e,t){(function(r){r(fl())})(function(r){r.defineMode("javascript",function(n,i){var a=n.indentUnit,l=i.statementIndent,u=i.jsonld,d=i.json||u,p=i.trackScope!==!1,g=i.typescript,m=i.wordCharacters||/[\w$\xa1-\uffff]/,w=function(){function j(lr){return{type:lr,style:"keyword"}}var G=j("keyword a"),ve=j("keyword b"),Se=j("keyword c"),Ve=j("keyword d"),lt=j("operator"),Ie={type:"atom",style:"atom"};return{if:j("if"),while:G,with:G,else:ve,do:ve,try:ve,finally:ve,return:Ve,break:Ve,continue:Ve,new:j("new"),delete:Se,void:Se,throw:Se,debugger:j("debugger"),var:j("var"),const:j("var"),let:j("var"),function:j("function"),catch:j("catch"),for:j("for"),switch:j("switch"),case:j("case"),default:j("default"),in:lt,typeof:lt,instanceof:lt,true:Ie,false:Ie,null:Ie,undefined:Ie,NaN:Ie,Infinity:Ie,this:j("this"),class:j("class"),super:j("atom"),yield:Se,export:j("export"),import:j("import"),extends:Se,await:Se}}(),x=/[+\-*&%=<>!?|~^@]/,O=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function I(j){for(var G=!1,ve,Se=!1;(ve=j.next())!=null;){if(!G){if(ve=="/"&&!Se)return;ve=="["?Se=!0:Se&&ve=="]"&&(Se=!1)}G=!G&&ve=="\\"}}var P,T;function N(j,G,ve){return P=j,T=ve,G}function R(j,G){var ve=j.next();if(ve=='"'||ve=="'")return G.tokenize=_(ve),G.tokenize(j,G);if(ve=="."&&j.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return N("number","number");if(ve=="."&&j.match(".."))return N("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ve))return N(ve);if(ve=="="&&j.eat(">"))return N("=>","operator");if(ve=="0"&&j.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return N("number","number");if(/\d/.test(ve))return j.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),N("number","number");if(ve=="/")return j.eat("*")?(G.tokenize=$,$(j,G)):j.eat("/")?(j.skipToEnd(),N("comment","comment")):Ee(j,G,1)?(I(j),j.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),N("regexp","string-2")):(j.eat("="),N("operator","operator",j.current()));if(ve=="`")return G.tokenize=z,z(j,G);if(ve=="#"&&j.peek()=="!")return j.skipToEnd(),N("meta","meta");if(ve=="#"&&j.eatWhile(m))return N("variable","property");if(ve=="<"&&j.match("!--")||ve=="-"&&j.match("->")&&!/\S/.test(j.string.slice(0,j.start)))return j.skipToEnd(),N("comment","comment");if(x.test(ve))return(ve!=">"||!G.lexical||G.lexical.type!=">")&&(j.eat("=")?(ve=="!"||ve=="=")&&j.eat("="):/[<>*+\-|&?]/.test(ve)&&(j.eat(ve),ve==">"&&j.eat(ve))),ve=="?"&&j.eat(".")?N("."):N("operator","operator",j.current());if(m.test(ve)){j.eatWhile(m);var Se=j.current();if(G.lastType!="."){if(w.propertyIsEnumerable(Se)){var Ve=w[Se];return N(Ve.type,Ve.style,Se)}if(Se=="async"&&j.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return N("async","keyword",Se)}return N("variable","variable",Se)}}function _(j){return function(G,ve){var Se=!1,Ve;if(u&&G.peek()=="@"&&G.match(O))return ve.tokenize=R,N("jsonld-keyword","meta");for(;(Ve=G.next())!=null&&!(Ve==j&&!Se);)Se=!Se&&Ve=="\\";return Se||(ve.tokenize=R),N("string","string")}}function $(j,G){for(var ve=!1,Se;Se=j.next();){if(Se=="/"&&ve){G.tokenize=R;break}ve=Se=="*"}return N("comment","comment")}function z(j,G){for(var ve=!1,Se;(Se=j.next())!=null;){if(!ve&&(Se=="`"||Se=="$"&&j.eat("{"))){G.tokenize=R;break}ve=!ve&&Se=="\\"}return N("quasi","string-2",j.current())}var H="([{}])";function q(j,G){G.fatArrowAt&&(G.fatArrowAt=null);var ve=j.string.indexOf("=>",j.start);if(!(ve<0)){if(g){var Se=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(j.string.slice(j.start,ve));Se&&(ve=Se.index)}for(var Ve=0,lt=!1,Ie=ve-1;Ie>=0;--Ie){var lr=j.string.charAt(Ie),Yr=H.indexOf(lr);if(Yr>=0&&Yr<3){if(!Ve){++Ie;break}if(--Ve==0){lr=="("&&(lt=!0);break}}else if(Yr>=3&&Yr<6)++Ve;else if(m.test(lr))lt=!0;else if(/["'\/`]/.test(lr))for(;;--Ie){if(Ie==0)return;var Ga=j.string.charAt(Ie-1);if(Ga==lr&&j.string.charAt(Ie-2)!="\\"){Ie--;break}}else if(lt&&!Ve){++Ie;break}}lt&&!Ve&&(G.fatArrowAt=Ie)}}var re={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function oe(j,G,ve,Se,Ve,lt){this.indented=j,this.column=G,this.type=ve,this.prev=Ve,this.info=lt,Se!=null&&(this.align=Se)}function le(j,G){if(!p)return!1;for(var ve=j.localVars;ve;ve=ve.next)if(ve.name==G)return!0;for(var Se=j.context;Se;Se=Se.prev)for(var ve=Se.vars;ve;ve=ve.next)if(ve.name==G)return!0}function we(j,G,ve,Se,Ve){var lt=j.cc;for(W.state=j,W.stream=Ve,W.marked=null,W.cc=lt,W.style=G,j.lexical.hasOwnProperty("align")||(j.lexical.align=!0);;){var Ie=lt.length?lt.pop():d?_e:Oe;if(Ie(ve,Se)){for(;lt.length&&lt[lt.length-1].lex;)lt.pop()();return W.marked?W.marked:ve=="variable"&&le(j,Se)?"variable-2":G}}}var W={state:null,column:null,marked:null,cc:null};function U(){for(var j=arguments.length-1;j>=0;j--)W.cc.push(arguments[j])}function F(){return U.apply(null,arguments),!0}function be(j,G){for(var ve=G;ve;ve=ve.next)if(ve.name==j)return!0;return!1}function pe(j){var G=W.state;if(W.marked="def",!!p){if(G.context){if(G.lexical.info=="var"&&G.context&&G.context.block){var ve=ce(j,G.context);if(ve!=null){G.context=ve;return}}else if(!be(j,G.localVars)){G.localVars=new V(j,G.localVars);return}}i.globalVars&&!be(j,G.globalVars)&&(G.globalVars=new V(j,G.globalVars))}}function ce(j,G){if(G)if(G.block){var ve=ce(j,G.prev);return ve?ve==G.prev?G:new me(ve,G.vars,!0):null}else return be(j,G.vars)?G:new me(G.prev,new V(j,G.vars),!1);else return null}function ue(j){return j=="public"||j=="private"||j=="protected"||j=="abstract"||j=="readonly"}function me(j,G,ve){this.prev=j,this.vars=G,this.block=ve}function V(j,G){this.name=j,this.next=G}var ee=new V("this",new V("arguments",null));function se(){W.state.context=new me(W.state.context,W.state.localVars,!1),W.state.localVars=ee}function X(){W.state.context=new me(W.state.context,W.state.localVars,!0),W.state.localVars=null}se.lex=X.lex=!0;function J(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}J.lex=!0;function ne(j,G){var ve=function(){var Se=W.state,Ve=Se.indented;if(Se.lexical.type=="stat")Ve=Se.lexical.indented;else for(var lt=Se.lexical;lt&&lt.type==")"&&lt.align;lt=lt.prev)Ve=lt.indented;Se.lexical=new oe(Ve,W.stream.column(),j,null,Se.lexical,G)};return ve.lex=!0,ve}function de(){var j=W.state;j.lexical.prev&&(j.lexical.type==")"&&(j.indented=j.lexical.indented),j.lexical=j.lexical.prev)}de.lex=!0;function xe(j){function G(ve){return ve==j?F():j==";"||ve=="}"||ve==")"||ve=="]"?U():F(G)}return G}function Oe(j,G){return j=="var"?F(ne("vardef",G),pl,xe(";"),de):j=="keyword a"?F(ne("form"),ut,Oe,de):j=="keyword b"?F(ne("form"),Oe,de):j=="keyword d"?W.stream.match(/^\s*$/,!1)?F():F(ne("stat"),ze,xe(";"),de):j=="debugger"?F(xe(";")):j=="{"?F(ne("}"),X,ae,de,J):j==";"?F():j=="if"?(W.state.lexical.info=="else"&&W.state.cc[W.state.cc.length-1]==de&&W.state.cc.pop()(),F(ne("form"),ut,Oe,de,Bc)):j=="function"?F(gn):j=="for"?F(ne("form"),X,Hc,Oe,J,de):j=="class"||g&&G=="interface"?(W.marked="keyword",F(ne("form",j=="class"?j:G),Ka,de)):j=="variable"?g&&G=="declare"?(W.marked="keyword",F(Oe)):g&&(G=="module"||G=="enum"||G=="type")&&W.stream.match(/^\s*\w/,!1)?(W.marked="keyword",G=="enum"?F(Jn):G=="type"?F(Uc,xe("operator"),Me,xe(";")):F(ne("form"),Tr,xe("{"),ne("}"),ae,de,de)):g&&G=="namespace"?(W.marked="keyword",F(ne("form"),_e,Oe,de)):g&&G=="abstract"?(W.marked="keyword",F(Oe)):F(ne("stat"),Ne):j=="switch"?F(ne("form"),ut,xe("{"),ne("}","switch"),X,ae,de,de,J):j=="case"?F(_e,xe(":")):j=="default"?F(xe(":")):j=="catch"?F(ne("form"),se,$e,Oe,de,J):j=="export"?F(ne("stat"),yl,de):j=="import"?F(ne("stat"),It,de):j=="async"?F(Oe):G=="@"?F(_e,Oe):U(ne("stat"),_e,xe(";"),de)}function $e(j){if(j=="(")return F(Oi,xe(")"))}function _e(j,G){return vt(j,G,!1)}function Ye(j,G){return vt(j,G,!0)}function ut(j){return j!="("?U():F(ne(")"),ze,xe(")"),de)}function vt(j,G,ve){if(W.state.fatArrowAt==W.stream.start){var Se=ve?Qe:xt;if(j=="(")return F(se,ne(")"),D(Oi,")"),de,xe("=>"),Se,J);if(j=="variable")return U(se,Tr,xe("=>"),Se,J)}var Ve=ve?ct:qe;return re.hasOwnProperty(j)?F(Ve):j=="function"?F(gn,Ve):j=="class"||g&&G=="interface"?(W.marked="keyword",F(ne("form"),Wa,de)):j=="keyword c"||j=="async"?F(ve?Ye:_e):j=="("?F(ne(")"),ze,xe(")"),de,Ve):j=="operator"||j=="spread"?F(ve?Ye:_e):j=="["?F(ne("]"),ft,de,Ve):j=="{"?Y(M,"}",null,Ve):j=="quasi"?U(at,Ve):j=="new"?F(te(ve)):F()}function ze(j){return j.match(/[;\}\)\],]/)?U():U(_e)}function qe(j,G){return j==","?F(ze):ct(j,G,!1)}function ct(j,G,ve){var Se=ve==!1?qe:ct,Ve=ve==!1?_e:Ye;if(j=="=>")return F(se,ve?Qe:xt,J);if(j=="operator")return/\+\+|--/.test(G)||g&&G=="!"?F(Se):g&&G=="<"&&W.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?F(ne(">"),D(Me,">"),de,Se):G=="?"?F(_e,xe(":"),Ve):F(Ve);if(j=="quasi")return U(at,Se);if(j!=";"){if(j=="(")return Y(Ye,")","call",Se);if(j==".")return F(nt,Se);if(j=="[")return F(ne("]"),ze,xe("]"),de,Se);if(g&&G=="as")return W.marked="keyword",F(Me,Se);if(j=="regexp")return W.state.lastType=W.marked="operator",W.stream.backUp(W.stream.pos-W.stream.start-1),F(Ve)}}function at(j,G){return j!="quasi"?U():G.slice(G.length-2)!="${"?F(at):F(ze,st)}function st(j){if(j=="}")return W.marked="string-2",W.state.tokenize=z,F(at)}function xt(j){return q(W.stream,W.state),U(j=="{"?Oe:_e)}function Qe(j){return q(W.stream,W.state),U(j=="{"?Oe:Ye)}function te(j){return function(G){return G=="."?F(j?ie:he):G=="variable"&&g?F(Wo,j?ct:qe):U(j?Ye:_e)}}function he(j,G){if(G=="target")return W.marked="keyword",F(qe)}function ie(j,G){if(G=="target")return W.marked="keyword",F(ct)}function Ne(j){return j==":"?F(de,Oe):U(qe,xe(";"),de)}function nt(j){if(j=="variable")return W.marked="property",F()}function M(j,G){if(j=="async")return W.marked="property",F(M);if(j=="variable"||W.style=="keyword"){if(W.marked="property",G=="get"||G=="set")return F(E);var ve;return g&&W.state.fatArrowAt==W.stream.start&&(ve=W.stream.match(/^\s*:\s*/,!1))&&(W.state.fatArrowAt=W.stream.pos+ve[0].length),F(k)}else{if(j=="number"||j=="string")return W.marked=u?"property":W.style+" property",F(k);if(j=="jsonld-keyword")return F(k);if(g&&ue(G))return W.marked="keyword",F(M);if(j=="[")return F(_e,ge,xe("]"),k);if(j=="spread")return F(Ye,k);if(G=="*")return W.marked="keyword",F(M);if(j==":")return U(k)}}function E(j){return j!="variable"?U(k):(W.marked="property",F(gn))}function k(j){if(j==":")return F(Ye);if(j=="(")return U(gn)}function D(j,G,ve){function Se(Ve,lt){if(ve?ve.indexOf(Ve)>-1:Ve==","){var Ie=W.state.lexical;return Ie.info=="call"&&(Ie.pos=(Ie.pos||0)+1),F(function(lr,Yr){return lr==G||Yr==G?U():U(j)},Se)}return Ve==G||lt==G?F():ve&&ve.indexOf(";")>-1?U(j):F(xe(G))}return function(Ve,lt){return Ve==G||lt==G?F():U(j,Se)}}function Y(j,G,ve){for(var Se=3;Se<arguments.length;Se++)W.cc.push(arguments[Se]);return F(ne(G,ve),D(j,G),de)}function ae(j){return j=="}"?F():U(Oe,ae)}function ge(j,G){if(g){if(j==":")return F(Me);if(G=="?")return F(ge)}}function ke(j,G){if(g&&(j==":"||G=="in"))return F(Me)}function mt(j){if(g&&j==":")return W.stream.match(/^\s*\w+\s+is\b/,!1)?F(_e,it,Me):F(Me)}function it(j,G){if(G=="is")return W.marked="keyword",F()}function Me(j,G){if(G=="keyof"||G=="typeof"||G=="infer"||G=="readonly")return W.marked="keyword",F(G=="typeof"?Ye:Me);if(j=="variable"||G=="void")return W.marked="type",F(qr);if(G=="|"||G=="&")return F(Me);if(j=="string"||j=="number"||j=="atom")return F(qr);if(j=="[")return F(ne("]"),D(Me,"]",","),de,qr);if(j=="{")return F(ne("}"),Ha,de,qr);if(j=="(")return F(D(Ua,")"),Xe,qr);if(j=="<")return F(D(Me,">"),Me);if(j=="quasi")return U(Xn,qr)}function Xe(j){if(j=="=>")return F(Me)}function Ha(j){return j.match(/[\}\)\]]/)?F():j==","||j==";"?F(Ha):U(Jt,Ha)}function Jt(j,G){if(j=="variable"||W.style=="keyword")return W.marked="property",F(Jt);if(G=="?"||j=="number"||j=="string")return F(Jt);if(j==":")return F(Me);if(j=="[")return F(xe("variable"),ke,xe("]"),Jt);if(j=="(")return U(Vr,Jt);if(!j.match(/[;\}\)\],]/))return F()}function Xn(j,G){return j!="quasi"?U():G.slice(G.length-2)!="${"?F(Xn):F(Me,sr)}function sr(j){if(j=="}")return W.marked="string-2",W.state.tokenize=z,F(Xn)}function Ua(j,G){return j=="variable"&&W.stream.match(/^\s*[?:]/,!1)||G=="?"?F(Ua):j==":"?F(Me):j=="spread"?F(Ua):U(Me)}function qr(j,G){if(G=="<")return F(ne(">"),D(Me,">"),de,qr);if(G=="|"||j=="."||G=="&")return F(Me);if(j=="[")return F(Me,xe("]"),qr);if(G=="extends"||G=="implements")return W.marked="keyword",F(Me);if(G=="?")return F(Me,xe(":"),Me)}function Wo(j,G){if(G=="<")return F(ne(">"),D(Me,">"),de,qr)}function to(){return U(Me,Dc)}function Dc(j,G){if(G=="=")return F(Me)}function pl(j,G){return G=="enum"?(W.marked="keyword",F(Jn)):U(Tr,ge,Yn,vl)}function Tr(j,G){if(g&&ue(G))return W.marked="keyword",F(Tr);if(j=="variable")return pe(G),F();if(j=="spread")return F(Tr);if(j=="[")return Y(gl,"]");if(j=="{")return Y(zc,"}")}function zc(j,G){return j=="variable"&&!W.stream.match(/^\s*:/,!1)?(pe(G),F(Yn)):(j=="variable"&&(W.marked="property"),j=="spread"?F(Tr):j=="}"?U():j=="["?F(_e,xe("]"),xe(":"),zc):F(xe(":"),Tr,Yn))}function gl(){return U(Tr,Yn)}function Yn(j,G){if(G=="=")return F(Ye)}function vl(j){if(j==",")return F(pl)}function Bc(j,G){if(j=="keyword b"&&G=="else")return F(ne("form","else"),Oe,de)}function Hc(j,G){if(G=="await")return F(Hc);if(j=="(")return F(ne(")"),ml,de)}function ml(j){return j=="var"?F(pl,ro):j=="variable"?F(ro):U(ro)}function ro(j,G){return j==")"?F():j==";"?F(ro):G=="in"||G=="of"?(W.marked="keyword",F(_e,ro)):U(_e,ro)}function gn(j,G){if(G=="*")return W.marked="keyword",F(gn);if(j=="variable")return pe(G),F(gn);if(j=="(")return F(se,ne(")"),D(Oi,")"),de,mt,Oe,J);if(g&&G=="<")return F(ne(">"),D(to,">"),de,gn)}function Vr(j,G){if(G=="*")return W.marked="keyword",F(Vr);if(j=="variable")return pe(G),F(Vr);if(j=="(")return F(se,ne(")"),D(Oi,")"),de,mt,J);if(g&&G=="<")return F(ne(">"),D(to,">"),de,Vr)}function Uc(j,G){if(j=="keyword"||j=="variable")return W.marked="type",F(Uc);if(G=="<")return F(ne(">"),D(to,">"),de)}function Oi(j,G){return G=="@"&&F(_e,Oi),j=="spread"?F(Oi):g&&ue(G)?(W.marked="keyword",F(Oi)):g&&j=="this"?F(ge,Yn):U(Tr,ge,Yn)}function Wa(j,G){return j=="variable"?Ka(j,G):On(j,G)}function Ka(j,G){if(j=="variable")return pe(G),F(On)}function On(j,G){if(G=="<")return F(ne(">"),D(to,">"),de,On);if(G=="extends"||G=="implements"||g&&j==",")return G=="implements"&&(W.marked="keyword"),F(g?Me:_e,On);if(j=="{")return F(ne("}"),Pn,de)}function Pn(j,G){if(j=="async"||j=="variable"&&(G=="static"||G=="get"||G=="set"||g&&ue(G))&&W.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return W.marked="keyword",F(Pn);if(j=="variable"||W.style=="keyword")return W.marked="property",F(Xr,Pn);if(j=="number"||j=="string")return F(Xr,Pn);if(j=="[")return F(_e,ge,xe("]"),Xr,Pn);if(G=="*")return W.marked="keyword",F(Pn);if(g&&j=="(")return U(Vr,Pn);if(j==";"||j==",")return F(Pn);if(j=="}")return F();if(G=="@")return F(_e,Pn)}function Xr(j,G){if(G=="!"||G=="?")return F(Xr);if(j==":")return F(Me,Yn);if(G=="=")return F(Ye);var ve=W.state.lexical.prev,Se=ve&&ve.info=="interface";return U(Se?Vr:gn)}function yl(j,G){return G=="*"?(W.marked="keyword",F(Rr,xe(";"))):G=="default"?(W.marked="keyword",F(_e,xe(";"))):j=="{"?F(D(wl,"}"),Rr,xe(";")):U(Oe)}function wl(j,G){if(G=="as")return W.marked="keyword",F(xe("variable"));if(j=="variable")return U(Ye,wl)}function It(j){return j=="string"?F():j=="("?U(_e):j=="."?U(qe):U(Fe,Qn,Rr)}function Fe(j,G){return j=="{"?Y(Fe,"}"):(j=="variable"&&pe(G),G=="*"&&(W.marked="keyword"),F(bl))}function Qn(j){if(j==",")return F(Fe,Qn)}function bl(j,G){if(G=="as")return W.marked="keyword",F(Fe)}function Rr(j,G){if(G=="from")return W.marked="keyword",F(_e)}function ft(j){return j=="]"?F():U(D(Ye,"]"))}function Jn(){return U(ne("form"),Tr,xe("{"),ne("}"),D(Ko,"}"),de,de)}function Ko(){return U(Tr,Yn)}function xl(j,G){return j.lastType=="operator"||j.lastType==","||x.test(G.charAt(0))||/[,.]/.test(G.charAt(0))}function Ee(j,G,ve){return G.tokenize==R&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(G.lastType)||G.lastType=="quasi"&&/\{\s*$/.test(j.string.slice(0,j.pos-(ve||0)))}return{startState:function(j){var G={tokenize:R,lastType:"sof",cc:[],lexical:new oe((j||0)-a,0,"block",!1),localVars:i.localVars,context:i.localVars&&new me(null,null,!1),indented:j||0};return i.globalVars&&typeof i.globalVars=="object"&&(G.globalVars=i.globalVars),G},token:function(j,G){if(j.sol()&&(G.lexical.hasOwnProperty("align")||(G.lexical.align=!1),G.indented=j.indentation(),q(j,G)),G.tokenize!=$&&j.eatSpace())return null;var ve=G.tokenize(j,G);return P=="comment"?ve:(G.lastType=P=="operator"&&(T=="++"||T=="--")?"incdec":P,we(G,ve,P,T,j))},indent:function(j,G){if(j.tokenize==$||j.tokenize==z)return r.Pass;if(j.tokenize!=R)return 0;var ve=G&&G.charAt(0),Se=j.lexical,Ve;if(!/^\s*else\b/.test(G))for(var lt=j.cc.length-1;lt>=0;--lt){var Ie=j.cc[lt];if(Ie==de)Se=Se.prev;else if(Ie!=Bc&&Ie!=J)break}for(;(Se.type=="stat"||Se.type=="form")&&(ve=="}"||(Ve=j.cc[j.cc.length-1])&&(Ve==qe||Ve==ct)&&!/^[,\.=+\-*:?[\(]/.test(G));)Se=Se.prev;l&&Se.type==")"&&Se.prev.type=="stat"&&(Se=Se.prev);var lr=Se.type,Yr=ve==lr;return lr=="vardef"?Se.indented+(j.lastType=="operator"||j.lastType==","?Se.info.length+1:0):lr=="form"&&ve=="{"?Se.indented:lr=="form"?Se.indented+a:lr=="stat"?Se.indented+(xl(j,G)?l||a:0):Se.info=="switch"&&!Yr&&i.doubleIndentSwitch!=!1?Se.indented+(/^(?:case|default)\b/.test(G)?a:2*a):Se.align?Se.column+(Yr?0:1):Se.indented+(Yr?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:u,jsonMode:d,expressionAllowed:Ee,skipExpression:function(j){we(j,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var oK=fl();const cc=kt(oK);let fu=[];function aK(e,t){const{prefixes:r,callback:n}=t;function i(a){if(a.state.completionActive||!r||!n)return;const l=a.getDoc(),u=a.getCursor(),d=l.getLine(u.line).slice(0,u.ch);for(const p of r)if(d.endsWith(p)){n(a);return}}n&&r&&!fu.includes(e)?(fu.push(e),e.on("inputRead",i)):fu.includes(e)&&(e.off("inputRead",i),fu=fu.filter(a=>a!==e))}let US=!1;function sK(){US||(cc.defineOption("prefixTrigger",[],aK),US=!0)}sK();const fc=e=>{const{fontFamily:t,fontScale:r,label:n,...i}=e,a={};return t&&(a.fontFamily=t.includes(" ")?'"'.concat(t,'"'):t),r&&(a.fontSize="".concat(r*100,"%")),y.jsx("div",{className:"code-area",style:a,children:y.jsxs("label",{children:[y.jsx("span",{className:Qt("label",{"screen-reader-only":e.labelHidden}),children:n}),y.jsx(FP,{...i})]})})};function lK(e){return C.useCallback(t=>{t.showHint({completeSingle:!1,extraKeys:["]","-","|"].reduce((r,n)=>(r[n]=(i,a)=>{const l=i.getDoc();l.replaceRange(n,l.getCursor()),a.close()},r),{}),hint(){const r=t.findWordAt(t.getCursor()),n=t.getRange(r.anchor,r.head).toLowerCase(),i={list:e.passages.reduce((a,l)=>l.name.toLowerCase().includes(n)?[...a,l.name]:a,[]),from:r.anchor,to:r.head};return cc.on(i,"pick",()=>{const a=t.getDoc();a.replaceRange("]] ",a.getCursor())}),i}})},[e.passages])}function fw(e,t){var n;if(e.loadState!=="loaded"||!((n=e.properties.editorExtensions)!=null&&n.twine))return;const r=Object.keys(e.properties.editorExtensions.twine).filter(i=>_0.satisfies(t,i));if(r.length===0){console.info("".concat(e.name," ").concat(e.version," has editor extensions, but none that ").concat(t," satisfies"));return}return r.length>1&&console.warn("More than one set of editor extensions for ".concat(e.name," ").concat(e.version," is satisfied by ").concat(t,". Using the first.")),e.properties.editorExtensions.twine[r[0]]}function Mu(e){return e.name.toLowerCase().replace(/\s/g,"-")+"-"+e.version}function uK(e,t){const{dispatch:r,format:n}=zO(e,t),{prefs:i}=pt(),[a,l]=C.useState(),u=p0(i,e,t);return C.useEffect(()=>{var d;if(!u){if(n.loadState==="unloaded")r(rc(n));else if(n.loadState==="loaded"){const p=fw(n,bn().version);(d=p==null?void 0:p.codeMirror)!=null&&d.mode&&(cc.defineMode(Mu(n),p.codeMirror.mode),l(Mu(n)))}}},[r,u,n]),a}const WS=new WeakMap;function dw(e,t){const{prefs:r}=pt(),{format:n}=zO(e,t),i=p0(r,n.name,n.version);let a=WS.get(n);if(!a&&!i&&n.loadState==="loaded"){console.log("refreshing editor extensions");const{version:l}=bn();a=fw(n,l),WS.set(n,a)}return i&&(a=void 0),{editorExtensions:a,extensionsDisabled:i}}function hw(e){let t={extraKeys:{Insert(){}}};return e.editorCursorBlinks||(t.cursorBlinkRate=0),t}const cK=e=>{var le;const{disabled:t,onChange:r,onEditorChange:n,onExecCommand:i,passage:a,story:l,storyFormat:u,storyFormatExtensionsDisabled:d,toolbarItems:p,variableMap:g}=e,[m,w]=C.useState(a.text),{prefs:x}=pt(),O=lK(l),I=(le=uK(u.name,u.version))!=null?le:"text",{t:P}=Ae(),T=C.useRef(),N=C.useRef();C.useEffect(()=>{!N.current&&m!==a.text&&w(a.text)},[m,a.text]);const R=C.useCallback((we,W,U)=>{n(we),w(U),N.current&&window.clearTimeout(N.current),T.current=U,N.current=window.setTimeout(()=>{N.current=void 0,r(T.current)},1e3)},[r,n]);C.useEffect(()=>{N.current&&(window.clearTimeout(N.current),N.current=window.setTimeout(()=>{N.current=void 0,r(T.current)},1e3))},[r]);const _=C.useCallback(we=>{n(we),window.setTimeout(()=>{we.focus(),we.refresh()},400)},[n]),$=KS(we=>{const W=p.flatMap(U=>U.type==="menu"?U.items.filter(F=>F.type!=="separator"):U);we.showHint({completeSingle:!1,hint(){const U=we.findWordAt(we.getCursor()),F=we.getRange(U.anchor,U.head).toLowerCase();let be=W.filter(pe=>!pe.disabled);if(F!=="/"){const pe=be.map(ce=>({...ce,score:ce.label.toLowerCase().split(" ").reduce((ue,me)=>Math.max(ue,cw(F,me)),0)}));pe.sort((ce,ue)=>ue.score-ce.score),be=pe[0].score>=.8?pe.filter(ce=>ce.score>=.8):pe[0].score>=.6?pe.filter(ce=>ce.score>=.6):pe}return{list:be.map(pe=>({text:pe.label,hint(){const ce=we.getDoc();F!=="/"&&U.anchor.ch--,ce.replaceRange("",U.anchor,U.head),i(pe.command)}})),from:U.anchor,to:U.head}}})},[p,i]),{editorExtensions:z}=dw(l.storyFormat,l.storyFormatVersion),H=KS(we=>{if(!g)return;const{validNameRegex:W=/^\w+$/,suggestVariableName:U}=(z==null?void 0:z.variables)||{};we.showHint({completeSingle:!1,hint(){const F=we.getCursor(),pe=we.getLine(F.line).slice(0,F.ch).match(/@([^\s]+)?$/);if(!pe||!W.test(pe[1]))return;let ce=g.variablesForPassage(a).map(ue=>ue.name);return U?ce=U(ce,pe[1]):ce=fK(ce,pe[1]),{list:ce,from:{line:F.line,ch:F.ch-pe[0].length},to:F}}})},[g]),q=C.useCallback(we=>{const W=we.getCursor();we.getRange({line:W.line,ch:W.ch-1},W)==="/"?W.ch===1&&$(we):we.getRange({line:W.line,ch:W.ch-1},W)==="@"?H(we):O(we)},[O]),re=C.useMemo(()=>({...hw(x),mode:d?"text":I,lineWrapping:!0,placeholder:P("dialogs.passageEdit.passageTextPlaceholder"),prefixTrigger:{callback:q,prefixes:["[[","->","/","@"]},extraKeys:{call(we,W){if(we==="Tab"||we==="Shift-Tab"){const U=we==="Shift-Tab";let F=-1,be=-1,pe=-1,ce=-1;const ue=W.getCursor(),me=W.getAllMarks();if(me.forEach((se,X)=>{const J=se.find(),{line:ne,ch:de}=U?J.to:J.from;ne<ue.line||ne===ue.line&&de<ue.ch?(F===-1&&(F=X),pe=X):(be===-1&&(ce=X),be=X)}),U&&(ce=pe,F=be),ce===-1&&(ce=F,ce===-1))return;const V=me.slice(ce).find(se=>se.className==="placeholder"),ee=V==null?void 0:V.replacedWith;if(ee)return()=>{ee.click()}}},fallthrough:void 0},readOnly:t?"nocursor":!1}),[t,q,I,x,d,P]),oe=C.useMemo(()=>Date.now(),[]);return y.jsx(lw,{children:y.jsx(fc,{editorDidMount:_,fontFamily:x.passageEditorFontFamily,fontScale:x.passageEditorFontScale,label:P("dialogs.passageEdit.passageTextEditorLabel"),labelHidden:!0,onBeforeChange:R,onChange:n,options:re,value:m},oe)})};function KS(e,t){const r=C.useRef();return C.useEffect(()=>{r.current=e},t),C.useCallback((...n)=>{var i;return(i=r.current)==null?void 0:i.call(r,...n)},[])}function fK(e,t){let r=e.map(n=>[n,cw(t,n)]);return r.sort((n,i)=>i[1]-n[1]),r[0][1]>=.8?r=r.filter(n=>n[1]>=.8):r[0][1]>=.6&&(r=r.filter(n=>n[1]>=.6)),r.map(n=>n[0])}const DP=e=>{const{editor:t}=e,{t:r}=Ae();function n(i){t==null||t.execCommand(i),t==null||t.focus()}return y.jsxs(y.Fragment,{children:[y.jsx(De,{disabled:!t,icon:y.jsx(mM,{}),label:r("components.indentButtons.indent"),onClick:()=>n("indentMore")}),y.jsx(De,{disabled:!t,icon:y.jsx(gM,{}),label:r("components.indentButtons.unindent"),onClick:()=>n("indentLess")})]})},pw=e=>{const{disabled:t,editor:r,watch:n}=e,{t:i}=Ae(),[a,l]=C.useState(!1),[u,d]=C.useState(!1);C.useEffect(()=>{if(r){const g=r.historySize();l(g.redo>0),d(g.undo>0)}else l(!1),d(!1)},[r,n]);function p(g){r==null||r.execCommand(g),r==null||r.focus()}return y.jsxs(y.Fragment,{children:[y.jsx(De,{disabled:t||!u,icon:y.jsx(s2,{}),label:i("common.undo"),onClick:()=>p("undo")}),y.jsx(De,{disabled:t||!a,icon:y.jsx(l2,{}),label:i("common.redo"),onClick:()=>p("redo")})]})};const dK=e=>y.jsx("div",{className:"button-card",children:y.jsx(zo,{...e})});const Mc=e=>{const{items:t,...r}=e,[n,i]=C.useState(null),[a,l]=C.useState(null),[u,d]=C.useState(!1),{styles:p,attributes:g}=sw(n,a,{strategy:"fixed"});return C.useEffect(()=>{const m=()=>d(!1);return u&&document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[a,u,d]),y.jsxs("span",{className:"menu-button",children:[y.jsx(De,{...r,onClick:()=>d(m=>!m),ref:i}),y.jsx(Ci,{classNames:"fade-out",in:u,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:y.jsx("div",{className:"menu-button-menu",ref:l,style:p.popper,...g.popper,children:y.jsx(dK,{floating:!0,children:y.jsx(Ft,{orientation:"vertical",children:t.map((m,w)=>m.separator?y.jsx(bR,{},w):"checkable"in m?y.jsx(vi,{checkedIcon:y.jsx(d0,{}),disabled:m.disabled,label:m.label,onChange:m.onClick,uncheckedIcon:y.jsx(Jx,{}),value:m.checked},w):y.jsx(De,{disabled:m.disabled,icon:y.jsx(Jx,{}),label:m.label,onClick:m.onClick,variant:m.variant},w))})})})})]})};/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var zP=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],mh=zP.join(","),BP=typeof Element>"u",Ia=BP?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,qm=!BP&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},HP=function(t,r,n){var i=Array.prototype.slice.apply(t.querySelectorAll(mh));return r&&Ia.call(t,mh)&&i.unshift(t),i=i.filter(n),i},UP=function e(t,r,n){for(var i=[],a=Array.from(t);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var u=l.assignedElements(),d=u.length?u:l.children,p=e(d,!0,n);n.flatten?i.push.apply(i,p):i.push({scope:l,candidates:p})}else{var g=Ia.call(l,mh);g&&n.filter(l)&&(r||!t.includes(l))&&i.push(l);var m=l.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(l),w=!n.shadowRootFilter||n.shadowRootFilter(l);if(m&&w){var x=e(m===!0?l.children:m.children,!0,n);n.flatten?i.push.apply(i,x):i.push({scope:l,candidates:x})}else a.unshift.apply(a,l.children)}}return i},WP=function(t,r){return t.tabIndex<0&&(r||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},hK=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},KP=function(t){return t.tagName==="INPUT"},pK=function(t){return KP(t)&&t.type==="hidden"},gK=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},vK=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},mK=function(t){if(!t.name)return!0;var r=t.form||qm(t),n=function(u){return r.querySelectorAll('input[type="radio"][name="'+u+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=vK(i,t.form);return!a||a===t},yK=function(t){return KP(t)&&t.type==="radio"},wK=function(t){return yK(t)&&!mK(t)},GS=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},bK=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=Ia.call(t,"details>summary:first-of-type"),l=a?t.parentElement:t;if(Ia.call(l,"details:not([open]) *"))return!0;var u=qm(t).host,d=(u==null?void 0:u.ownerDocument.contains(u))||t.ownerDocument.contains(t);if(!n||n==="full"){if(typeof i=="function"){for(var p=t;t;){var g=t.parentElement,m=qm(t);if(g&&!g.shadowRoot&&i(g)===!0)return GS(t);t.assignedSlot?t=t.assignedSlot:!g&&m!==t.ownerDocument?t=m.host:t=g}t=p}if(d)return!t.getClientRects().length}else if(n==="non-zero-area")return GS(t);return!1},xK=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return Ia.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},yh=function(t,r){return!(r.disabled||pK(r)||bK(r,t)||gK(r)||xK(r))},Vm=function(t,r){return!(wK(r)||WP(r)<0||!yh(t,r))},EK=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},SK=function e(t){var r=[],n=[];return t.forEach(function(i,a){var l=!!i.scope,u=l?i.scope:i,d=WP(u,l),p=l?e(i.candidates):u;d===0?l?r.push.apply(r,p):r.push(u):n.push({documentOrder:a,tabIndex:d,item:i,isScope:l,content:p})}),n.sort(hK).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(r)},CK=function(t,r){r=r||{};var n;return r.getShadowRoot?n=UP([t],r.includeContainer,{filter:Vm.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:EK}):n=HP(t,r.includeContainer,Vm.bind(null,r)),SK(n)},kK=function(t,r){r=r||{};var n;return r.getShadowRoot?n=UP([t],r.includeContainer,{filter:yh.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=HP(t,r.includeContainer,yh.bind(null,r)),n},qf=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Ia.call(t,mh)===!1?!1:Vm(r,t)},TK=zP.concat("iframe").join(","),cv=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Ia.call(t,TK)===!1?!1:yh(r,t)};/*!
* focus-trap 6.7.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(r),!0).forEach(function(n){PK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VS=function(){var e=[];return{activateTrap:function(r){if(e.length>0){var n=e[e.length-1];n!==r&&n.pause()}var i=e.indexOf(r);i===-1||e.splice(i,1),e.push(r)},deactivateTrap:function(r){var n=e.indexOf(r);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}}}(),LK=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},NK=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},AK=function(t){return t.key==="Tab"||t.keyCode===9},XS=function(t){return setTimeout(t,0)},fv=function(t,r){var n=-1;return t.every(function(i,a){return r(i)?(n=a,!1):!0}),n},du=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return typeof t=="function"?t.apply(void 0,n):t},Vf=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},jK=function(t,r){var n=(r==null?void 0:r.document)||document,i=OK({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),a={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,u=function(z,H,q){return z&&z[H]!==void 0?z[H]:i[q||H]},d=function(z){return!!(z&&a.containers.some(function(H){return H.contains(z)}))},p=function(z){var H=i[z];if(typeof H=="function"){for(var q=arguments.length,re=new Array(q>1?q-1:0),oe=1;oe<q;oe++)re[oe-1]=arguments[oe];H=H.apply(void 0,re)}if(!H){if(H===void 0||H===!1)return H;throw new Error("`".concat(z,"` was specified but was not a node, or did not return a node"))}var le=H;if(typeof H=="string"&&(le=n.querySelector(H),!le))throw new Error("`".concat(z,"` as selector refers to no known node"));return le},g=function(){var z=p("initialFocus");if(z===!1)return!1;if(z===void 0)if(d(n.activeElement))z=n.activeElement;else{var H=a.tabbableGroups[0],q=H&&H.firstTabbableNode;z=q||p("fallbackFocus")}if(!z)throw new Error("Your focus-trap needs to have at least one focusable element");return z},m=function(){if(a.tabbableGroups=a.containers.map(function(z){var H=CK(z),q=kK(z);if(H.length>0)return{container:z,firstTabbableNode:H[0],lastTabbableNode:H[H.length-1],nextTabbableNode:function(oe){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,we=q.findIndex(function(W){return W===oe});return le?q.slice(we+1).find(function(W){return qf(W)}):q.slice(0,we).reverse().find(function(W){return qf(W)})}}}).filter(function(z){return!!z}),a.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},w=function $(z){if(z!==!1&&z!==n.activeElement){if(!z||!z.focus){$(g());return}z.focus({preventScroll:!!i.preventScroll}),a.mostRecentlyFocusedNode=z,LK(z)&&z.select()}},x=function(z){var H=p("setReturnFocus",z);return H||(H===!1?!1:z)},O=function(z){var H=Vf(z);if(!d(H)){if(du(i.clickOutsideDeactivates,z)){l.deactivate({returnFocus:i.returnFocusOnDeactivate&&!cv(H)});return}du(i.allowOutsideClick,z)||z.preventDefault()}},I=function(z){var H=Vf(z),q=d(H);q||H instanceof Document?q&&(a.mostRecentlyFocusedNode=H):(z.stopImmediatePropagation(),w(a.mostRecentlyFocusedNode||g()))},P=function(z){var H=Vf(z);m();var q=null;if(a.tabbableGroups.length>0){var re=fv(a.tabbableGroups,function(pe){var ce=pe.container;return ce.contains(H)}),oe=re>=0?a.tabbableGroups[re]:void 0;if(re<0)z.shiftKey?q=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:q=a.tabbableGroups[0].firstTabbableNode;else if(z.shiftKey){var le=fv(a.tabbableGroups,function(pe){var ce=pe.firstTabbableNode;return H===ce});if(le<0&&(oe.container===H||cv(H)&&!qf(H)&&!oe.nextTabbableNode(H,!1))&&(le=re),le>=0){var we=le===0?a.tabbableGroups.length-1:le-1,W=a.tabbableGroups[we];q=W.lastTabbableNode}}else{var U=fv(a.tabbableGroups,function(pe){var ce=pe.lastTabbableNode;return H===ce});if(U<0&&(oe.container===H||cv(H)&&!qf(H)&&!oe.nextTabbableNode(H))&&(U=re),U>=0){var F=U===a.tabbableGroups.length-1?0:U+1,be=a.tabbableGroups[F];q=be.firstTabbableNode}}}else q=p("fallbackFocus");q&&(z.preventDefault(),w(q))},T=function(z){if(NK(z)&&du(i.escapeDeactivates,z)!==!1){z.preventDefault(),l.deactivate();return}if(AK(z)){P(z);return}},N=function(z){if(!du(i.clickOutsideDeactivates,z)){var H=Vf(z);d(H)||du(i.allowOutsideClick,z)||(z.preventDefault(),z.stopImmediatePropagation())}},R=function(){if(a.active)return VS.activateTrap(l),a.delayInitialFocusTimer=i.delayInitialFocus?XS(function(){w(g())}):w(g()),n.addEventListener("focusin",I,!0),n.addEventListener("mousedown",O,{capture:!0,passive:!1}),n.addEventListener("touchstart",O,{capture:!0,passive:!1}),n.addEventListener("click",N,{capture:!0,passive:!1}),n.addEventListener("keydown",T,{capture:!0,passive:!1}),l},_=function(){if(a.active)return n.removeEventListener("focusin",I,!0),n.removeEventListener("mousedown",O,!0),n.removeEventListener("touchstart",O,!0),n.removeEventListener("click",N,!0),n.removeEventListener("keydown",T,!0),l};return l={activate:function(z){if(a.active)return this;var H=u(z,"onActivate"),q=u(z,"onPostActivate"),re=u(z,"checkCanFocusTrap");re||m(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement,H&&H();var oe=function(){re&&m(),R(),q&&q()};return re?(re(a.containers.concat()).then(oe,oe),this):(oe(),this)},deactivate:function(z){if(!a.active)return this;clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,_(),a.active=!1,a.paused=!1,VS.deactivateTrap(l);var H=u(z,"onDeactivate"),q=u(z,"onPostDeactivate"),re=u(z,"checkCanReturnFocus");H&&H();var oe=u(z,"returnFocus","returnFocusOnDeactivate"),le=function(){XS(function(){oe&&w(x(a.nodeFocusedBeforeActivation)),q&&q()})};return oe&&re?(re(x(a.nodeFocusedBeforeActivation)).then(le,le),this):(le(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,_(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,m(),R(),this)},updateContainerElements:function(z){var H=[].concat(z).filter(Boolean);return a.containers=H.map(function(q){return typeof q=="string"?n.querySelector(q):q}),a.active&&m(),this}},l.updateContainerElements(t),l};const IK=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:jK},Symbol.toStringTag,{value:"Module"})),_K=JA(IK);function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function MK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RK(e,t,r){return t&&YS(e.prototype,t),r&&YS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $K(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ym(e,t)}function Ym(e,t){return Ym=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ym(e,t)}function FK(e){var t=BK();return function(){var n=wh(e),i;if(t){var a=wh(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return DK(this,i)}}function DK(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zK(e)}function zK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wh(e)}var Xf=C,HK=Sc,ot=ep,UK=_K,WK=UK.createFocusTrap,gw=function(e){$K(r,e);var t=FK(r);function r(n){var i;MK(this,r),i=t.call(this,n),i.tailoredFocusTrapOptions={returnFocusOnDeactivate:!1},i.returnFocusOnDeactivate=!0;var a=n.focusTrapOptions;for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){if(l==="returnFocusOnDeactivate"){i.returnFocusOnDeactivate=!!a[l];continue}if(l==="onPostDeactivate"){i.onPostDeactivate=a[l];continue}i.tailoredFocusTrapOptions[l]=a[l]}return i.focusTrapElements=n.containerElements||[],i.updatePreviousElement(),i}return RK(r,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getNodeForOption",value:function(i){var a=this.tailoredFocusTrapOptions[i];if(!a)return null;var l=a;if(typeof a=="string"){var u;if(l=(u=this.getDocument())===null||u===void 0?void 0:u.querySelector(a),!l)throw new Error("`".concat(i,"` refers to no known node"))}if(typeof a=="function"&&(l=a(),!l))throw new Error("`".concat(i,"` did not return a node"));return l}},{key:"getReturnFocusNode",value:function(){var i=this.getNodeForOption("setReturnFocus");return i||this.previouslyFocusedElement}},{key:"updatePreviousElement",value:function(){var i=this.getDocument();i&&(this.previouslyFocusedElement=i.activeElement)}},{key:"deactivateTrap",value:function(){var i=this,a=this.tailoredFocusTrapOptions,l=a.checkCanReturnFocus,u=a.preventScroll,d=u===void 0?!1:u;this.focusTrap&&this.focusTrap.deactivate({returnFocus:!1});var p=function(){var m=i.getReturnFocusNode(),w=(m==null?void 0:m.focus)&&i.returnFocusOnDeactivate;w&&m.focus({preventScroll:d}),i.onPostDeactivate&&i.onPostDeactivate.call(null)};l?l(this.getReturnFocusNode()).then(p,p):p()}},{key:"setupFocusTrap",value:function(){if(!this.focusTrap){var i=this.focusTrapElements.map(HK.findDOMNode),a=i.some(Boolean);a&&(this.focusTrap=this.props._createFocusTrap(i,this.tailoredFocusTrapOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(i){if(this.focusTrap){i.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var a=!i.active&&this.props.active,l=i.active&&!this.props.active,u=!i.paused&&this.props.paused,d=i.paused&&!this.props.paused;if(a&&(this.updatePreviousElement(),this.focusTrap.activate()),l){this.deactivateTrap();return}u&&this.focusTrap.pause(),d&&this.focusTrap.unpause()}else i.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var i=this,a=this.props.children?Xf.Children.only(this.props.children):void 0;if(a){if(a.type&&a.type===Xf.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var l=function(p){var g=i.props.containerElements;a&&(typeof a.ref=="function"?a.ref(p):a.ref&&(a.ref.current=p)),i.focusTrapElements=g||[p]},u=Xf.cloneElement(a,{ref:l});return u}return null}}]),r}(Xf.Component),hu=typeof Element>"u"?Function:Element;gw.propTypes={active:ot.bool,paused:ot.bool,focusTrapOptions:ot.shape({document:ot.object,onActivate:ot.func,onPostActivate:ot.func,checkCanFocusTrap:ot.func,onDeactivate:ot.func,onPostDeactivate:ot.func,checkCanReturnFocus:ot.func,initialFocus:ot.oneOfType([ot.instanceOf(hu),ot.string,ot.func,ot.bool]),fallbackFocus:ot.oneOfType([ot.instanceOf(hu),ot.string,ot.func]),escapeDeactivates:ot.oneOfType([ot.bool,ot.func]),clickOutsideDeactivates:ot.oneOfType([ot.bool,ot.func]),returnFocusOnDeactivate:ot.bool,setReturnFocus:ot.oneOfType([ot.instanceOf(hu),ot.string,ot.func]),allowOutsideClick:ot.oneOfType([ot.bool,ot.func]),preventScroll:ot.bool}),containerElements:ot.arrayOf(ot.instanceOf(hu)),children:ot.oneOfType([ot.element,ot.instanceOf(hu)])};gw.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:WK};var KK=gw;const GK=kt(KK),wa=e=>{const{ariaLabel:t,children:r,focusSelector:n,onChangeOpen:i,open:a,...l}=e,[u,d]=C.useState(null),[p,g]=C.useState(null),{styles:m,attributes:w}=sw(u,p,{strategy:"fixed"});return y.jsxs("span",{className:"card-button",children:[y.jsx(De,{onClick:()=>i(!a),...l,ref:d}),y.jsx(Ci,{classNames:"fade-out",in:a,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:y.jsx(GK,{focusTrapOptions:{clickOutsideDeactivates:!0,onDeactivate:()=>i(!1)},children:y.jsx("div",{"aria-label":t,className:"card-button-card",ref:g,role:"dialog",style:m.popper,...w.popper,children:y.jsx(zo,{floating:!0,children:r})})})})]})},Rc=e=>{const{cancelIcon:t,cancelLabel:r,onChange:n,onSubmit:i,prompt:a,submitIcon:l,submitLabel:u,submitVariant:d,validate:p,value:g,...m}=e,w=C.useRef(!0),[x,O]=C.useState(!1),[I,P]=C.useState(),{t:T}=Ae();C.useEffect(()=>{async function _(){if(p){const $=await p(g);w.current&&P($)}else w.current&&P({valid:!0})}_()},[p,g]),C.useEffect(()=>()=>{w.current=!1},[]);function N(_){_.preventDefault(),O(!1)}function R(_){_.preventDefault(),I!=null&&I.valid&&(i(g),O(!1))}return y.jsx("span",{className:"prompt-button",children:y.jsx(wa,{ariaLabel:a,onChangeOpen:O,open:x,...m,children:y.jsxs("form",{onSubmit:R,children:[y.jsxs(hr,{children:[y.jsx(lc,{onChange:n,orientation:"vertical",value:g,children:a}),(I==null?void 0:I.message)&&y.jsx("p",{children:I.message})]}),y.jsxs(Ft,{children:[y.jsx(De,{buttonType:"submit",disabled:!(I!=null&&I.valid),icon:l!=null?l:y.jsx(d0,{}),label:u!=null?u:T("common.ok"),variant:d!=null?d:"primary"}),y.jsx(De,{buttonType:"button",icon:t!=null?t:y.jsx(Rn,{}),label:r!=null?r:T("common.cancel"),onClick:N})]})]})})})},qK=()=>{const{t:e}=Ae();return y.jsx(De,{disabled:!0,icon:y.jsx(Cc,{}),label:e("common.rename")})},VK=e=>{const{onRename:t,passage:r,story:n}=e,[i,a]=C.useState(r.name),{t:l}=Ae();function u(d){return d.trim()===""?{message:l("components.renamePassageButton.emptyName"),valid:!1}:n.passages.some(p=>p.id!==r.id&&p.name===d)?{message:l("components.renamePassageButton.nameAlreadyUsed"),valid:!1}:{valid:!0}}return y.jsx(Rc,{icon:y.jsx(Cc,{}),label:l("common.rename"),onChange:d=>a(d.target.value),onSubmit:t,prompt:l("common.renamePrompt",{name:r.name}),validate:u,value:i})},GP=e=>!e.disabled&&e.passage?y.jsx(VK,{...e}):y.jsx(qK,{}),vw=["none","red","orange","yellow","green","blue","purple"];const qP=e=>{const{assignedTags:t,disabled:r,existingTags:n,icon:i,label:a,onAdd:l}=e,[u,d]=C.useState(!0),[p,g]=C.useState("none"),[m,w]=C.useState(""),[x,O]=C.useState(!1),{t:I}=Ae();let P,T=al(m);!T&&m!==""&&(P=I("components.addTagButton.invalidName")),T&&u&&(T=!n.includes(m),T||(P=I("components.addTagButton.alreadyAdded")));function N(){u?l(m,p):l(m),O(!1)}function R(_){const $=_.target.value;w($),d($==="")}return y.jsx("span",{className:"add-tag-button",children:y.jsxs(wa,{ariaLabel:I("components.addTagButton.addLabel"),disabled:r,icon:i!=null?i:y.jsx(Ks,{}),label:a!=null?a:I("common.tag"),onChangeOpen:O,open:x,children:[y.jsxs(hr,{children:[y.jsx(Yi,{onChange:R,options:[{label:I("components.addTagButton.newTag"),value:""},...n.map(_=>({disabled:t.includes(_),label:_,value:_}))],value:u?"":m,children:I("components.addTagButton.addLabel")}),u&&y.jsxs(y.Fragment,{children:[y.jsx(lc,{onChange:_=>w(_.target.value.replace(/\s/g,"-")),value:m,children:I("components.addTagButton.tagNameLabel")}),y.jsx(Yi,{onChange:_=>g(_.target.value),options:vw.map(_=>({label:I("colors.".concat(_)),value:_})),value:p,children:I("components.addTagButton.tagColorLabel")})]}),u&&!!P&&y.jsx("p",{children:P})]}),y.jsxs(Ft,{children:[y.jsx(De,{disabled:!T,icon:y.jsx(Ks,{}),label:I("common.add"),onClick:N,variant:"create"}),y.jsx(De,{icon:y.jsx(Rn,{}),label:I("common.cancel"),onClick:()=>O(!1)})]})]})})};const VP=e=>{const{t}=Ae();return y.jsx("span",{className:Qt("tag-button","color-".concat(e.color)),children:y.jsx(Mc,{disabled:e.disabled,icon:y.jsx(u2,{}),iconPosition:"end",items:[...vw.map(r=>({checkable:!0,checked:r==="none"?!e.color:r===e.color,label:t("colors.".concat(r)),onClick:()=>e.onChangeColor(r)})),{separator:!0},{label:t("common.remove"),onClick:e.onRemove}],label:e.name})})};const XP=C.memo(e=>y.jsx("div",{className:"tag-stripe",children:e.tags.map(t=>y.jsx("span",{className:"color-".concat(e.tagColors[t]),title:t},t))}));XP.displayName="TagStripe";function $c(){const{prefs:e}=pt(),{dispatch:t,formats:r}=Kr(),{stories:n}=Tt();return{publishArchive:C.useCallback(async()=>UO(n,bn()),[n]),proofStory:C.useCallback(async i=>{const a=yt(n,i),l=cn(r,e.proofingFormat.name,e.proofingFormat.version),u=await rc(l)(t);if(!u)throw new Error("Couldn't load story format properties");return uh(a,u.source,bn())},[r,e.proofingFormat.name,e.proofingFormat.version,n,t]),publishStory:C.useCallback(async(i,a)=>{const l=yt(n,i),u=cn(r,l.storyFormat,l.storyFormatVersion),d=await rc(u)(t);if(!d)throw new Error("Couldn't load story format properties");return uh(l,d.source,bn(),a)},[r,n,t]),publishStoryData:C.useCallback(i=>{const a=yt(n,i);return Jh(a,bn(),{startOptional:!0})},[n])}}function YP(){const{proofStory:e,publishStory:t}=$c();if(Da()){const{twineElectron:r}=window;if(!r)throw new Error("Electron bridge is not present on window.");return{playStory:async n=>{r.openWithScratchFile(await t(n),"play-".concat(n,".html"))},proofStory:async n=>{r.openWithScratchFile(await e(n),"proof-".concat(n,".html"))},testStory:async(n,i)=>{r.openWithScratchFile(await t(n,{formatOptions:"debug",startId:i}),"test-".concat(n,".html"))}}}return{playStory:async r=>{window.open("#/stories/".concat(r,"/play"),"_blank")},proofStory:async r=>{window.open("#/stories/".concat(r,"/proof"),"_blank")},testStory:async(r,n)=>{window.open(n?"#/stories/".concat(r,"/test/").concat(n):"#/stories/".concat(r,"/test"),"_blank")}}}const QP=e=>{const{passage:t,story:r}=e,{testStory:n}=YP(),{t:i}=Ae();return y.jsx(De,{disabled:!t,icon:y.jsx(m2,{}),label:i("routes.storyEdit.toolbar.testFromHere"),onClick:()=>n(r.id,t==null?void 0:t.id)})},XK=e=>{const{disabled:t,editor:r,passage:n,story:i}=e,{dispatch:a}=pn(),{t:l}=Ae();function u(g,m){a(OH(i,n,g),l("undoChange.addTag")),m&&a(xO(i,g,m))}function d(g){a(Ro(i,n,{name:g},{dontUpdateOthers:!0}))}function p({height:g,width:m}){a(Ro(i,n,{height:g,width:m}))}return y.jsxs(Ft,{children:[y.jsx(pw,{disabled:t,editor:r,watch:n.text}),y.jsx(qP,{disabled:t,assignedTags:n.tags,existingTags:mO(i),onAdd:u}),y.jsx(Mc,{disabled:t,icon:y.jsx(MM,{}),items:[{checkable:!0,checked:n.height===100&&n.width===100,label:l("dialogs.passageEdit.sizeSmall"),onClick:()=>p({height:100,width:100})},{checkable:!0,checked:n.height===200&&n.width===200,label:l("dialogs.passageEdit.sizeLarge"),onClick:()=>p({height:200,width:200})},{checkable:!0,checked:n.height===200&&n.width===100,label:l("dialogs.passageEdit.sizeTall"),onClick:()=>p({height:200,width:100})},{checkable:!0,checked:n.height===100&&n.width===200,label:l("dialogs.passageEdit.sizeWide"),onClick:()=>p({height:100,width:200})}],label:l("dialogs.passageEdit.size")}),y.jsx(GP,{disabled:t,onRename:d,passage:n,story:i}),y.jsx(QP,{passage:n,story:i})]})};const YK=e=>{const{disabled:t,onExecCommand:r,toolbarItems:n}=e,i=C.useRef(null);return y.jsx("div",{className:"story-format-toolbar",ref:i,children:y.jsx(Ft,{children:n.map((a,l)=>{switch(a.type){case"button":return y.jsx(De,{disabled:t||a.disabled,icon:y.jsx("img",{src:a.icon,alt:""}),iconOnly:a.iconOnly,label:a.label,onClick:()=>r(a.command)},l);case"menu":return y.jsx(Mc,{disabled:t||a.disabled,icon:y.jsx("img",{src:a.icon,alt:""}),iconOnly:a.iconOnly,items:a.items.filter(u=>["button","separator"].includes(u.type)).map(u=>u.type==="button"?{type:"button",disabled:u.disabled,label:u.label,onClick:()=>r(u.command)}:{separator:!0}),label:a.label},l)}return null})})})},QK=e=>{const{disabled:t,passage:r,story:n}=e,{dispatch:i,stories:a}=pn(),{t:l}=Ae();function u(p,g){i(jr(a,n,{tagColors:{...n.tagColors,[p]:g}}))}function d(p){i(PH(n,r,p),l("undoChange.removeTag"))}return r.tags.length===0?null:y.jsx("div",{className:"tags",children:y.jsx(Ft,{children:r.tags.map(p=>y.jsx(VP,{color:n.tagColors[p],disabled:t,name:p,onChangeColor:g=>u(p,g),onRemove:()=>d(p)},p))})})};function JK(e,t){const{dispatch:r,formats:n}=Kr(),[i,a]=C.useState({}),[l,u]=C.useState(),d=cn(n,e,t),{prefs:p}=pt(),g=p0(p,e,t);return C.useEffect(()=>{var m,w;if(!g){if(d.loadState==="unloaded")r(rc(d));else if(d.loadState==="loaded"&&!i[Mu(d)]){const x=Mu(d),O=fw(d,bn().version);if((m=O==null?void 0:O.codeMirror)!=null&&m.commands)for(const I in O.codeMirror.commands){const P=x+I;P in cc.commands?console.warn('CodeMirror already has a "'.concat(P,'" command defined, skipping')):cc.commands[P]=O.codeMirror.commands[I]}(w=O==null?void 0:O.codeMirror)!=null&&w.toolbar&&u(()=>(I,P)=>{var N;if(!((N=O==null?void 0:O.codeMirror)!=null&&N.toolbar))return[];const T=O.codeMirror.toolbar(I,P);return Array.isArray(T)?T.reduce((R,_)=>{switch(_.type){case"button":return[...R,{..._,command:x+_.command}];case"menu":if(Array.isArray(_.items))return[...R,{..._,items:_.items.filter($=>["button","separator"].includes($.type)).map($=>$.type==="separator"?$:{...$,command:x+$.command})}]}return R},[]):[]}),a(I=>({...I,[Mu(d)]:!0}))}}},[r,g,d,i]),l}function JP(){const{prefs:e}=pt(),[t]=C.useState(window.matchMedia("(prefers-color-scheme: dark)")),[r,n]=C.useState(t.matches?"dark":"light");return C.useEffect(()=>{const i=a=>n(a.matches?"dark":"light");return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),e.appTheme==="system"?r:e.appTheme}function ZK(e,t,r){const{formats:n}=Kr(),{prefs:i}=pt(),a=JP(),l=cn(n,e,t),u=JK(e,t),[d,p]=C.useState([]),g=C.useCallback(()=>{if(r&&u)try{const m=window.getComputedStyle(r.getWrapperElement());console.log("refreshing toolbar items"),p(u(r,{appTheme:a,foregroundColor:m.color,locale:i.locale}))}catch(m){console.error("Toolbar function for ".concat(l.name," ").concat(l.version," threw an error, skipping update"),m)}else p([])},[r,l.name,l.version,i.locale,u,a]);return C.useEffect(()=>{if(r)return g(),r.on("cursorActivity",g),()=>r.off("cursorActivity",g)},[r,g]),[d,g]}const QS=e=>{const{disabled:t,passageId:r,storyId:n,variableMap:i}=e,[a,l]=C.useState(!0),[u,d]=C.useState(!1),[p,g]=C.useState(),{ErrorBoundary:m,error:w,reset:x}=Mh(),{dispatch:O,stories:I}=pn(),{formats:P}=Kr(),T=Vi(I,n,r),N=yt(I,n),R=cn(P,N.storyFormat,N.storyFormatVersion),{t:_}=Ae(),[$,z]=ZK(R.name,R.version,p);C.useEffect(()=>{w&&(a?(console.error("Passage editor crashed, trying without format extensions",w),l(!1)):d(!0),x())},[w,x,a]);const H=C.useCallback(oe=>{O(Ro(N,T,{text:oe}))},[O,T,N]),q=C.useCallback(oe=>{if(!p)throw new Error("No editor set");p.execCommand(oe);const le=p.listSelections();Promise.resolve().then(()=>{p.setSelections(le),dv(p,!0),z()})},[p,dv,z]),re=C.useCallback(oe=>{g(oe),dv(oe)},[]);return u?y.jsx(Do,{children:_("dialogs.passageEdit.editorCrashed")}):y.jsxs("div",{className:"passage-edit-contents","aria-hidden":t,children:[y.jsx(XK,{disabled:t,editor:p,passage:T,story:N}),a&&y.jsx(YK,{disabled:t,onExecCommand:q,toolbarItems:$}),y.jsx(QK,{disabled:t,passage:T,story:N}),y.jsx(m,{children:y.jsx(cK,{disabled:t,onChange:H,onEditorChange:re,passage:T,story:N,storyFormat:R,storyFormatExtensionsDisabled:!a,onExecCommand:q,toolbarItems:$,variableMap:i})})]})};function dv(e,t){let r;const n=e.getDoc();n.eachLine(i=>{const a=n.getLineNumber(i),l=/\${(\d+):([^}]+)}/g;let u;for(;(u=l.exec(i.text))!==null;){const d={line:a,ch:u.index},p={line:a,ch:d.ch+u[0].length},g=document.createElement("span");r!=null||(r=g),g.className="placeholder",g.textContent=u[2];const m=O=>{const I=O?"1":"0";I!==g.dataset.selected&&(g.dataset.selected=I)};m(!1),g.addEventListener("click",()=>{n.setSelection(d,p)});const w=n.markText(d,p,{className:"placeholder",replacedWith:g,handleMouseEvents:!0}),x=(O,I)=>{m(I.ranges.length===1&&I.ranges[0].anchor.line===d.line&&I.ranges[0].anchor.ch===d.ch)};e.on("beforeSelectionChange",x),w.on("clear",()=>{e.off("beforeSelectionChange",x)})}}),t&&Promise.resolve().then(()=>{r==null||r.click()})}const JS=({value:e})=>{const t=/^\s*/.exec(e),r=t?t[0].length:0,n=/\s*$/.exec(e),i=n?n[0].length:0;return y.jsxs("span",{className:"visible-whitespace",children:[[...Array(r)].map((a,l)=>y.jsx(Wx,{},l)),e.trim(),[...Array(i)].map((a,l)=>y.jsx(Wx,{},l))]})},eG=e=>{const{onChangeProps:t,onClose:r,passageIds:n,storyId:i,...a}=e,{dispatch:l}=Gr(),{stories:u}=Tt(),d=n.map(m=>Vi(u,i,m).name),p={};a.collapsed&&(p.height="calc(var(--control-height) * ".concat(n.length,")"),a.maximized&&(p.bottom=0,p.position="absolute"));function g(m,w){w!=null&&w.shiftKey?r(w):l(tG([m]))}return y.jsx("div",{className:Qt("passage-edit-stack",{collapsed:a.collapsed}),style:p,children:y.jsx(eK,{childKeys:n,children:n.map((m,w)=>w!==0?C.createElement(G9,{...a,headerDisplayLabel:y.jsx(JS,{value:d[w]}),headerLabel:d[w],key:m,onClose:x=>g(m,x),onRaise:()=>l(mw(i,[m],e.variableMap))},y.jsx(QS,{disabled:!0,passageId:m,storyId:i,variableMap:e.variableMap})):C.createElement(Vn,{...a,headerDisplayLabel:y.jsx(JS,{value:d[w]}),headerLabel:d[w],key:m,maximizable:!0,onClose:x=>g(m,x)},y.jsx(QS,{passageId:m,storyId:i,variableMap:e.variableMap})))})})},Qm=e=>{const{passageIds:t,storyId:r}=e,{stories:n}=Tt(),i=t.filter(a=>{try{Vi(n,r,a)}catch{return!1}return!0});return i.length===0?(e.onClose(),null):i.length!==t.length?(e.onChangeProps({...e,passageIds:i}),null):y.jsx(eG,{...e})};function mw(e,t,r,n=6){return(i,a)=>{var d,p;const l=a(),u=l.findIndex(({component:g})=>g===Qm);if(u!==-1){const g=(p=(d=l[u].props)==null?void 0:d.passageIds)!=null?p:[],m=[...t,...g.filter(w=>!t.includes(w))];m.length>n&&(m.length=n),i({type:"setDialogProps",index:u,props:{...l[u].props,passageIds:m}})}else{const g=[...t];g.length>n&&(g.length=n),i({type:"addDialog",component:Qm,props:{storyId:e,passageIds:g,variableMap:r}})}}}function tG(e){return(t,r)=>{const n=r(),i=n.findIndex(({component:l})=>l===Qm);if(i===-1){console.warn("Asked to remove a passage editor, but there is no editor stack");return}const a=n[i].props.passageIds.filter(l=>!e.includes(l));a.length===0?t({type:"removeDialog",index:i}):t({type:"setDialogProps",index:i,props:{...n[i].props,passageIds:a}})}}var rG=Wh;function nG(){this.__data__=new rG,this.size=0}var iG=nG;function oG(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var aG=oG;function sG(e){return this.__data__.get(e)}var lG=sG;function uG(e){return this.__data__.has(e)}var cG=uG,fG=Wh,dG=b0,hG=x0,pG=200;function gG(e,t){var r=this.__data__;if(r instanceof fG){var n=r.__data__;if(!dG||n.length<pG-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new hG(n)}return r.set(e,t),this.size=r.size,this}var vG=gG,mG=Wh,yG=iG,wG=aG,bG=lG,xG=cG,EG=vG;function dl(e){var t=this.__data__=new mG(e);this.size=t.size}dl.prototype.clear=yG;dl.prototype.delete=wG;dl.prototype.get=bG;dl.prototype.has=xG;dl.prototype.set=EG;var ZP=dl;function SG(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var CG=SG,kG=J2,TG=CG,OG=Z2,PG=1,LG=2;function NG(e,t,r,n,i,a){var l=r&PG,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=-1,w=!0,x=r&LG?new kG:void 0;for(a.set(e,t),a.set(t,e);++m<u;){var O=e[m],I=t[m];if(n)var P=l?n(I,O,m,t,e,a):n(O,I,m,e,t,a);if(P!==void 0){if(P)continue;w=!1;break}if(x){if(!TG(t,function(T,N){if(!OG(x,N)&&(O===T||i(O,T,r,n,a)))return x.push(N)})){w=!1;break}}else if(!(O===I||i(O,I,r,n,a))){w=!1;break}}return a.delete(e),a.delete(t),w}var eL=NG,AG=Si,jG=AG.Uint8Array,IG=jG;function _G(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var MG=_G,ZS=kc,eC=IG,RG=$h,$G=eL,FG=MG,DG=E0,zG=1,BG=2,HG="[object Boolean]",UG="[object Date]",WG="[object Error]",KG="[object Map]",GG="[object Number]",qG="[object RegExp]",VG="[object Set]",XG="[object String]",YG="[object Symbol]",QG="[object ArrayBuffer]",JG="[object DataView]",tC=ZS?ZS.prototype:void 0,hv=tC?tC.valueOf:void 0;function ZG(e,t,r,n,i,a,l){switch(r){case JG:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case QG:return!(e.byteLength!=t.byteLength||!a(new eC(e),new eC(t)));case HG:case UG:case GG:return RG(+e,+t);case WG:return e.name==t.name&&e.message==t.message;case qG:case XG:return e==t+"";case KG:var u=FG;case VG:var d=n&zG;if(u||(u=DG),e.size!=t.size&&!d)return!1;var p=l.get(e);if(p)return p==t;n|=BG,l.set(e,t);var g=$G(u(e),u(t),n,i,a,l);return l.delete(e),g;case YG:if(hv)return hv.call(e)==hv.call(t)}return!1}var eq=ZG;function tq(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var tL=tq,rq=tL,nq=Wn;function iq(e,t,r){var n=t(e);return nq(e)?n:rq(n,r(e))}var oq=iq;function aq(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var l=e[r];t(l,r,e)&&(a[i++]=l)}return a}var sq=aq;function lq(){return[]}var uq=lq,cq=sq,fq=uq,dq=Object.prototype,hq=dq.propertyIsEnumerable,rC=Object.getOwnPropertySymbols,pq=rC?function(e){return e==null?[]:(e=Object(e),cq(rC(e),function(t){return hq.call(e,t)}))}:fq,gq=pq;function vq(e,t){return function(r){return e(t(r))}}var mq=vq,yq=mq,wq=yq(Object.keys,Object),bq=wq,xq=R2,Eq=bq,Sq=Object.prototype,Cq=Sq.hasOwnProperty;function kq(e){if(!xq(e))return Eq(e);var t=[];for(var r in Object(e))Cq.call(e,r)&&r!="constructor"&&t.push(r);return t}var Tq=kq,Oq=M2,Pq=Tq,Lq=Oc;function Nq(e){return Lq(e)?Oq(e):Pq(e)}var yw=Nq,Aq=oq,jq=gq,Iq=yw;function _q(e){return Aq(e,Iq,jq)}var Mq=_q,nC=Mq,Rq=1,$q=Object.prototype,Fq=$q.hasOwnProperty;function Dq(e,t,r,n,i,a){var l=r&Rq,u=nC(e),d=u.length,p=nC(t),g=p.length;if(d!=g&&!l)return!1;for(var m=d;m--;){var w=u[m];if(!(l?w in t:Fq.call(t,w)))return!1}var x=a.get(e),O=a.get(t);if(x&&O)return x==t&&O==e;var I=!0;a.set(e,t),a.set(t,e);for(var P=l;++m<d;){w=u[m];var T=e[w],N=t[w];if(n)var R=l?n(N,T,w,t,e,a):n(T,N,w,e,t,a);if(!(R===void 0?T===N||i(T,N,r,n,a):R)){I=!1;break}P||(P=w=="constructor")}if(I&&!P){var _=e.constructor,$=t.constructor;_!=$&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof $=="function"&&$ instanceof $)&&(I=!1)}return a.delete(e),a.delete(t),I}var zq=Dq,Bq=Fa,Hq=Si,Uq=Bq(Hq,"DataView"),Wq=Uq,Kq=Fa,Gq=Si,qq=Kq(Gq,"Promise"),Vq=qq,Xq=Fa,Yq=Si,Qq=Xq(Yq,"WeakMap"),Jq=Qq,Jm=Wq,Zm=b0,ey=Vq,ty=eO,ry=Jq,rL=Tc,hl=P2,iC="[object Map]",Zq="[object Object]",oC="[object Promise]",aC="[object Set]",sC="[object WeakMap]",lC="[object DataView]",eV=hl(Jm),tV=hl(Zm),rV=hl(ey),nV=hl(ty),iV=hl(ry),sa=rL;(Jm&&sa(new Jm(new ArrayBuffer(1)))!=lC||Zm&&sa(new Zm)!=iC||ey&&sa(ey.resolve())!=oC||ty&&sa(new ty)!=aC||ry&&sa(new ry)!=sC)&&(sa=function(e){var t=rL(e),r=t==Zq?e.constructor:void 0,n=r?hl(r):"";if(n)switch(n){case eV:return lC;case tV:return iC;case rV:return oC;case nV:return aC;case iV:return sC}return t});var oV=sa,pv=ZP,aV=eL,sV=eq,lV=zq,uC=oV,cC=Wn,fC=j2,uV=_2,cV=1,dC="[object Arguments]",hC="[object Array]",Yf="[object Object]",fV=Object.prototype,pC=fV.hasOwnProperty;function dV(e,t,r,n,i,a){var l=cC(e),u=cC(t),d=l?hC:uC(e),p=u?hC:uC(t);d=d==dC?Yf:d,p=p==dC?Yf:p;var g=d==Yf,m=p==Yf,w=d==p;if(w&&fC(e)){if(!fC(t))return!1;l=!0,g=!1}if(w&&!g)return a||(a=new pv),l||uV(e)?aV(e,t,r,n,i,a):sV(e,t,d,r,n,i,a);if(!(r&cV)){var x=g&&pC.call(e,"__wrapped__"),O=m&&pC.call(t,"__wrapped__");if(x||O){var I=x?e.value():e,P=O?t.value():t;return a||(a=new pv),i(I,P,r,n,a)}}return w?(a||(a=new pv),lV(e,t,r,n,i,a)):!1}var hV=dV,pV=hV,gC=Pc;function nL(e,t,r,n,i){return e===t?!0:e==null||t==null||!gC(e)&&!gC(t)?e!==e&&t!==t:pV(e,t,r,n,nL,i)}var ww=nL,gV=ww;function vV(e,t){return gV(e,t)}var mV=vV;const yV=kt(mV),wV=(e,t)=>{switch(t.type){case"addDialog":let r=!1;const n=e.map(i=>yV(i,{collapsed:i.collapsed,component:t.component,highlighted:i.highlighted,maximized:i.maximized,props:t.props})?(r=!0,{...i,collapsed:!1,highlighted:!0}):i);return r?n:[...e,{collapsed:!1,component:t.component,highlighted:!1,maximized:!1,props:t.props}];case"removeDialog":return e.filter((i,a)=>a!==t.index);case"setDialogCollapsed":return e.map((i,a)=>a===t.index?{...i,collapsed:t.collapsed}:i);case"setDialogHighlighted":return e.map((i,a)=>a===t.index?{...i,highlighted:t.highlighted}:i);case"setDialogMaximized":return e.map((i,a)=>({...i,maximized:a===t.index?t.maximized:!1}));case"setDialogProps":return e.map((i,a)=>({...i,props:a===t.index?t.props:i.props}))}};var iL={},pp={},Fc={},oL={},gp={};Object.defineProperty(gp,"__esModule",{value:!0});gp.default=void 0;var bV=function(t,r){var n,i=function(){n!=null&&(clearTimeout(n),n=null)},a=function(){for(var u=arguments.length,d=new Array(u),p=0;p<u;p++)d[p]=arguments[p];i(),n=setTimeout(function(){t.apply(void 0,d)},r)};return a.cancel=function(){i()},a},xV=bV;gp.default=xV;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return t.default}});var t=r(gp);function r(n){return n&&n.__esModule?n:{default:n}}})(oL);Object.defineProperty(Fc,"__esModule",{value:!0});Fc.default=void 0;var gv=C,EV=oL;function SV(e,t){return OV(e)||TV(e,t)||kV(e,t)||CV()}function CV(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kV(e,t){if(e){if(typeof e=="string")return vC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vC(e,t)}}function vC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,a=void 0;try{for(var l=e[Symbol.iterator](),u;!(n=(u=l.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&l.return!=null&&l.return()}finally{if(i)throw a}}return r}}function OV(e){if(Array.isArray(e))return e}var PV=function(){var t=(0,gv.useState)({height:0,width:0}),r=SV(t,2),n=r[0],i=r[1],a=(0,gv.useRef)(null);return(0,gv.useEffect)(function(){var l=function(){return a.current==null&&(a.current=document.createElement("div"),a.current.style.width="99px",a.current.style.height="99px",a.current.style.overflow="scroll",a.current.style.position="absolute",a.current.style.top="-9999px",a.current.setAttribute("aria-hidden","true"),a.current.setAttribute("role","presentation")),a.current},u=function(){var m=l(),w=m.offsetHeight,x=m.clientHeight,O=m.offsetWidth,I=m.clientWidth,P=w-x,T=O-I;i(function(N){var R=N.height,_=N.width;return R!==P||_!==T?{height:P,width:T}:N})},d=(0,EV.debounce)(u,100);window.addEventListener("resize",d),document.body.appendChild(l()),u();var p=l();return function(){d.cancel(),window.removeEventListener("resize",d),document.body.removeChild(p)}},[]),n},LV=PV;Fc.default=LV;Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;var NV=C,AV=jV(Fc);function jV(e){return e&&e.__esModule?e:{default:e}}var IV=function(t){var r=t.onChange,n=(0,AV.default)(),i=n.height,a=n.width;return(0,NV.useEffect)(function(){r({height:i,width:a})},[i,a,r]),null},_V=IV;pp.default=_V;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useScrollbarSize",{enumerable:!0,get:function(){return r.default}}),e.default=void 0;var t=n(pp),r=n(Fc);function n(a){return a&&a.__esModule?a:{default:a}}var i=t.default;e.default=i})(iL);const MV=e=>y.jsx(Ci,{classNames:"pop",timeout:200,...e,children:e.children}),RV=()=>{const{height:e,width:t}=iL.useScrollbarSize(),{prefs:r}=pt(),{dispatch:n,dialogs:i}=Gr(),a=i.some(d=>!d.maximized),l={paddingLeft:"calc(100% - (".concat(r.dialogWidth,"px + 2 * (var(--grid-size))))"),marginBottom:e,marginRight:t},u={marginRight:a?"calc(".concat(r.dialogWidth,"px + var(--grid-size))"):0};return y.jsx("div",{className:"dialogs",style:l,children:y.jsx(cl,{component:null,children:i.map((d,p)=>{const g={collapsed:d.collapsed,highlighted:d.highlighted,maximized:d.maximized,onChangeCollapsed:m=>n({type:"setDialogCollapsed",collapsed:m,index:p}),onChangeHighlighted:m=>n({type:"setDialogHighlighted",highlighted:m,index:p}),onChangeMaximized:m=>n({type:"setDialogMaximized",maximized:m,index:p}),onChangeProps:m=>n({type:"setDialogProps",index:p,props:m}),onClose:()=>n({type:"removeDialog",index:p})};return y.jsx(MV,{children:d.maximized?y.jsx("div",{className:"maximized",style:u,children:y.jsx(d.component,{...d.props,...g})}):y.jsx(d.component,{...d.props,...g})},p)})})})},bw=C.createContext({dispatch:()=>{},dialogs:[]});bw.displayName="Dialogs";const Gr=()=>C.useContext(bw),xw=e=>{const[t,r]=T0(wV,[]);return y.jsxs(bw.Provider,{value:{dispatch:r,dialogs:t},children:[e.children,y.jsx(RV,{})]})};const aL=e=>{const{allTags:t,color:r,name:n,onChangeColor:i,onChangeName:a}=e,[l,u]=C.useState(n),{t:d}=Ae();function p(g){return g!==n&&t.includes(g)?{message:d("components.tagEditor.alreadyExists"),valid:!1}:{valid:!0}}return y.jsxs("div",{className:"tag-editor",children:[y.jsx("span",{className:Qt("tag-name","color-".concat(e.color)),children:e.name}),y.jsx(Rc,{icon:y.jsx(Cc,{}),label:d("common.rename"),onChange:g=>u(g.target.value.replace(/\s/g,"-")),onSubmit:()=>a(l),prompt:d("common.renamePrompt",{name:n}),value:l,validate:p}),y.jsx(Yi,{onChange:g=>i(g.target.value),options:vw.map(g=>({label:d("colors.".concat(g)),value:g})),value:r!=null?r:"",children:d("common.color")})]})},$V=e=>{const{storyId:t,...r}=e,{dispatch:n,stories:i}=pn(),{t:a}=Ae(),l=yt(i,t),u=mO(l);function d(g,m){n(xO(l,g,m),a("undoChange.changeTagColor"))}function p(g,m){n(wH(l,g,m),a("undoChange.renameTag"))}return y.jsx(Vn,{className:"passage-tags-dialog",fixedSize:!0,headerLabel:a("dialogs.passageTags.title"),...r,children:y.jsx(hr,{children:u.length>0?u.map(g=>y.jsx(aL,{allTags:u,color:l.tagColors[g],name:g,onChangeColor:m=>d(g,m),onChangeName:m=>p(g,m)},g)):y.jsx("p",{children:a("dialogs.passageTags.noTags")})})})};function sL(){const{dispatch:e}=Tt(),{prefs:t}=pt(),{formats:r}=Kr();return Ge.useCallback(()=>{let n;try{n=cn(r,t.storyFormat.name,t.storyFormat.version)}catch{try{n=cn(r,Gs().storyFormat.name,Gs().storyFormat.version)}catch(i){console.error("Could not locate a safe story format, skipping story repair: ".concat(i.message))}}n&&e({type:"repair",allFormats:r,defaultFormat:n})},[r,t.storyFormat.name,t.storyFormat.version,e])}const FV=e=>{const{children:t,onChange:r,onError:n,orientation:i,...a}=e,l=Qt("file-input","orientation-".concat(i!=null?i:"horizontal"));function u(d){if(!d.target.files)throw new Error("Change event occurred but no files present");const p=d.target.files[0],g=new FileReader;g.addEventListener("loadend",m=>{g.error?(console.warn(g.error),n&&n(g.error)):r(p,g.result)}),g.readAsText(p)}return y.jsx("span",{className:l,children:y.jsxs("label",{children:[y.jsx("span",{className:"file-input-label",children:t}),y.jsx("span",{className:"file-input-control",children:y.jsx("input",{...a,onChange:u,type:"file"})})]})})};var mC=kc,DV=m0,zV=Wn,yC=mC?mC.isConcatSpreadable:void 0;function BV(e){return zV(e)||DV(e)||!!(yC&&e&&e[yC])}var HV=BV,UV=tL,WV=HV;function lL(e,t,r,n,i){var a=-1,l=e.length;for(r||(r=WV),i||(i=[]);++a<l;){var u=e[a];t>0&&r(u)?t>1?lL(u,t-1,r,n,i):UV(i,u):n||(i[i.length]=u)}return i}var KV=lL,GV=Wn,qV=Nc,VV=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,XV=/^\w*$/;function YV(e,t){if(GV(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qV(e)?!0:XV.test(e)||!VV.test(e)||t!=null&&e in Object(t)}var Ew=YV,uL=x0,QV="Expected a function";function Sw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(QV);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var l=e.apply(this,n);return r.cache=a.set(i,l)||a,l};return r.cache=new(Sw.Cache||uL),r}Sw.Cache=uL;var JV=Sw,ZV=JV,eX=500;function tX(e){var t=ZV(e,function(n){return r.size===eX&&r.clear(),n}),r=t.cache;return t}var rX=tX,nX=rX,iX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oX=/\\(\\)?/g,aX=nX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(iX,function(r,n,i,a){t.push(i?a.replace(oX,"$1"):n||r)}),t}),sX=aX,lX=Wn,uX=Ew,cX=sX,fX=S0;function dX(e,t){return lX(e)?e:uX(e,t)?[e]:cX(fX(e))}var cL=dX,hX=Nc,pX=1/0;function gX(e){if(typeof e=="string"||hX(e))return e;var t=e+"";return t=="0"&&1/e==-pX?"-0":t}var vp=gX,vX=cL,mX=vp;function yX(e,t){t=vX(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[mX(t[r++])];return r&&r==n?e:void 0}var Cw=yX,wX=ZP,bX=ww,xX=1,EX=2;function SX(e,t,r,n){var i=r.length,a=i,l=!n;if(e==null)return!a;for(e=Object(e);i--;){var u=r[i];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){u=r[i];var d=u[0],p=e[d],g=u[1];if(l&&u[2]){if(p===void 0&&!(d in e))return!1}else{var m=new wX;if(n)var w=n(p,g,d,e,t,m);if(!(w===void 0?bX(g,p,xX|EX,n,m):w))return!1}}return!0}var CX=SX,kX=$a;function TX(e){return e===e&&!kX(e)}var fL=TX,OX=fL,PX=yw;function LX(e){for(var t=PX(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,OX(i)]}return t}var NX=LX;function AX(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var dL=AX,jX=CX,IX=NX,_X=dL;function MX(e){var t=IX(e);return t.length==1&&t[0][2]?_X(t[0][0],t[0][1]):function(r){return r===e||jX(r,e,t)}}var RX=MX,$X=Cw;function FX(e,t,r){var n=e==null?void 0:$X(e,t);return n===void 0?r:n}var DX=FX;function zX(e,t){return e!=null&&t in Object(e)}var BX=zX,HX=cL,UX=m0,WX=Wn,KX=v0,GX=g0,qX=vp;function VX(e,t,r){t=HX(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var l=qX(t[n]);if(!(a=e!=null&&r(e,l)))break;e=e[l]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&GX(i)&&KX(l,i)&&(WX(e)||UX(e)))}var XX=VX,YX=BX,QX=XX;function JX(e,t){return e!=null&&QX(e,t,YX)}var ZX=JX,eY=ww,tY=DX,rY=ZX,nY=Ew,iY=fL,oY=dL,aY=vp,sY=1,lY=2;function uY(e,t){return nY(e)&&iY(t)?oY(aY(e),t):function(r){var n=tY(r,e);return n===void 0&&n===t?rY(r,e):eY(t,n,sY|lY)}}var cY=uY;function fY(e){return function(t){return t==null?void 0:t[e]}}var dY=fY,hY=Cw;function pY(e){return function(t){return hY(t,e)}}var gY=pY,vY=dY,mY=gY,yY=Ew,wY=vp;function bY(e){return yY(e)?vY(wY(e)):mY(e)}var xY=bY,EY=RX,SY=cY,CY=Rh,kY=Wn,TY=xY;function OY(e){return typeof e=="function"?e:e==null?CY:typeof e=="object"?kY(e)?SY(e[0],e[1]):EY(e):TY(e)}var PY=OY;function LY(e){return function(t,r,n){for(var i=-1,a=Object(t),l=n(t),u=l.length;u--;){var d=l[e?u:++i];if(r(a[d],d,a)===!1)break}return t}}var NY=LY,AY=NY,jY=AY(),IY=jY,_Y=IY,MY=yw;function RY(e,t){return e&&_Y(e,t,MY)}var $Y=RY,FY=Oc;function DY(e,t){return function(r,n){if(r==null)return r;if(!FY(r))return e(r,n);for(var i=r.length,a=t?i:-1,l=Object(r);(t?a--:++a<i)&&n(l[a],a,l)!==!1;);return r}}var zY=DY,BY=$Y,HY=zY,UY=HY(BY),WY=UY,KY=WY,GY=Oc;function qY(e,t){var r=-1,n=GY(e)?Array(e.length):[];return KY(e,function(i,a,l){n[++r]=t(i,a,l)}),n}var VY=qY;function XY(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var YY=XY,wC=Nc;function QY(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,a=wC(e),l=t!==void 0,u=t===null,d=t===t,p=wC(t);if(!u&&!p&&!a&&e>t||a&&l&&d&&!u&&!p||n&&l&&d||!r&&d||!i)return 1;if(!n&&!a&&!p&&e<t||p&&r&&i&&!n&&!a||u&&r&&i||!l&&i||!d)return-1}return 0}var JY=QY,ZY=JY;function eQ(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,l=i.length,u=r.length;++n<l;){var d=ZY(i[n],a[n]);if(d){if(n>=u)return d;var p=r[n];return d*(p=="desc"?-1:1)}}return e.index-t.index}var tQ=eQ,vv=nO,rQ=Cw,nQ=PY,iQ=VY,oQ=YY,aQ=I2,sQ=tQ,lQ=Rh,uQ=Wn;function cQ(e,t,r){t.length?t=vv(t,function(a){return uQ(a)?function(l){return rQ(l,a.length===1?a[0]:a)}:a}):t=[lQ];var n=-1;t=vv(t,aQ(nQ));var i=iQ(e,function(a,l,u){var d=vv(t,function(p){return p(a)});return{criteria:d,index:++n,value:a}});return oQ(i,function(a,l){return sQ(a,l,r)})}var hL=cQ,fQ=KV,dQ=hL,hQ=L2,bC=N2,pQ=hQ(function(e,t){if(e==null)return[];var r=t.length;return r>1&&bC(e,t[0],t[1])?t=[]:r>2&&bC(t[0],t[1],t[2])&&(t=[t[0]]),dQ(e,fQ(t,1),[])}),gQ=pQ;const vQ=kt(gQ),mQ=/\r?\n/;function xC(e){return e.replace(/\\/g,"\\\\").replace(/([[\]{}])/g,"\\$1")}function Ed(e){return e.replace(/^::/gm,"\\::")}function yQ(e){const t=xC(e.name).replace(/^\s+/g,a=>"\\ ".repeat(a.length)).replace(/\s+$/g,a=>"\\ ".repeat(a.length)),r=e.tags.length>0?"[".concat(e.tags.map(xC).join(" "),"]"):void 0,n=JSON.stringify({position:"".concat(e.left,",").concat(e.top),size:"".concat(e.width,",").concat(e.height)}).replace(/\s+/g,""),i=Ed(e.text);return":: ".concat(t).concat(r?" "+r:""," ").concat(n,"\n").concat(i,"\n")}function wQ(e){const[t,...r]=e.split(mQ),n=/^::\s*(.*?(?:\\\s)?)\s*(\[.*?\])?\s*(\{.*?\})?\s*$/.exec(t);if(!n)throw new Error("Header line couldn't be parsed: ".concat(t));const[,i,a,l]=n;if(i.trim()==="")throw new Error("Passage name couldn't be found in header line: ".concat(t));const u={...Bo(),id:Ct(),name:EC(i.replace(/^(\\\s)+/g,d=>" ".repeat(d.length/2)).replace(/(\\\s)+$/g,d=>" ".repeat(d.length/2))),tags:[],text:r.map(EQ).join("\n").trim()};if(a&&(u.tags=a.replace(/^\[(.*)\]$/g,"$1").split(/\s/).filter(d=>d.trim()!=="").map(d=>EC(d))),l)try{const d=JSON.parse(l);if(typeof d.position=="string"){const[p,g]=d.position.split(",").map(parseFloat);typeof p=="number"&&typeof g=="number"?(u.left=p,u.top=g):console.warn("Couldn't parse passage position metadata ".concat(d.position))}if(typeof d.size=="string"){const[p,g]=d.size.split(",").map(parseFloat);typeof p=="number"&&typeof g=="number"?(u.width=p,u.height=g):console.warn("Couldn't parse passage size metadata ".concat(d.size))}}catch{console.warn("Couldn't parse passage metadata ".concat(l))}return u}function bQ(e){const t=Ct(),r={...tl(),id:t,ifid:Ct(),lastUpdate:new Date,passages:e.split(/^::/m).filter(a=>a.trim()!=="").map(a=>":: "+a).map(wQ).map(a=>({...a,story:t})),script:""};r.passages=r.passages.filter(a=>{const l=a.tags.includes("script"),u=a.tags.includes("stylesheet");return!l&&!u||l&&u?!0:(l?r.script+=a.text+"\n":u&&(r.stylesheet+=a.text+"\n"),!1)}),r.script=r.script.trim(),r.stylesheet=r.stylesheet.trim();const n=r.passages.findIndex(a=>a.name==="StoryTitle");n!==-1&&(r.name=r.passages[n].text.trim(),r.passages.splice(n,1));const i=r.passages.findIndex(a=>a.name==="StoryData");if(i!==-1){const a=r.passages[i];r.passages.splice(i,1);try{const{ifid:l,format:u,"format-version":d,start:p,"tag-colors":g,zoom:m}=JSON.parse(a.text);if(typeof l=="string"&&(r.ifid=l),typeof u=="string"&&(r.storyFormat=u),typeof d=="string"&&(r.storyFormatVersion=d),typeof p=="string"){const w=r.passages.find(x=>x.name===p);w?r.startPassage=w.id:console.warn("Couldn't find start passage with name \"".concat(p,'"'))}if(typeof g=="object")for(const w in g)typeof g[w]=="string"?r.tagColors[w]=g[w]:console.warn('Tag "'.concat(w,'" has non-string color'));typeof m=="number"&&(r.zoom=m)}catch{console.warn("Couldn't parse story data: ".concat(a.text))}}else console.warn("No StoryData passage is present in Twee");return r.passages.every(({left:a,top:l})=>a===0&&l===0)&&(r.passages=r.passages.map((a,l)=>({...a,left:25+125*(l%10),top:25+125*Math.floor(l/10)}))),r}function xQ(e){const t=":: StoryTitle\n".concat(Ed(e.name)),r=e.passages.find(l=>l.id===e.startPassage),n=":: StoryData\n".concat(JSON.stringify({ifid:e.ifid,format:e.storyFormat,"format-version":e.storyFormatVersion,start:r==null?void 0:r.name,"tag-colors":Object.keys(e.tagColors).length>0?e.tagColors:void 0,zoom:e.zoom},null,2));let i="".concat(t,"\n\n\n").concat(n,"\n\n\n").concat(vQ(e.passages,["name"]).map(yQ).join("\n\n"));const a=e.passages.map(({name:l})=>l);if(e.script.trim()!==""){const l=Yu("StoryScript",a);i+="\n\n:: ".concat(l," [script]\n").concat(Ed(e.script))}if(e.stylesheet.trim()!==""){const l=Yu("StoryStylesheet",a);i+="\n\n:: ".concat(l," [stylesheet]\n").concat(Ed(e.stylesheet))}return i}function EC(e){return e.replace(/\\([[\]{}])/g,"$1").replace(/\\\\/g,"\\")}function EQ(e){return e.replace(/^\\:/gm,":")}const SQ=e=>{const{onChange:t}=e,{t:r}=Ae();function n(i,a){/\.html$/.test(i.name)?t(i,BO(a)):t(i,[bQ(a)])}return y.jsx("div",{className:"file-chooser",children:y.jsx("p",{children:y.jsx(FV,{accept:".html,.twee,.tw",onChange:n,orientation:"vertical",children:r("dialogs.storyImport.filePrompt")})})})};const CQ=e=>{const{existingStories:t,onImport:r,stories:n}=e,[i,a]=C.useState([]),{t:l}=Ae(),u=C.useCallback(p=>t.some(g=>zr(g)===zr(p)),[t]);C.useEffect(()=>{a(n.filter(p=>!u(p)))},[n,u]);function d(p,g){a(g?m=>[...m,p]:m=>m.filter(w=>w.id!==p.id))}return y.jsxs("div",{className:"story-chooser",children:[y.jsx("p",{children:l("dialogs.storyImport.storiesPrompt")}),y.jsx("ul",{children:n.map(p=>y.jsxs("li",{children:[y.jsx(vi,{label:p.name,onChange:g=>d(p,g),value:i.includes(p)}),i.includes(p)&&u(p)&&y.jsx("span",{className:"replace-warning",children:l("dialogs.storyImport.willReplaceExisting")})]},p.id))}),y.jsx("div",{className:"actions",children:y.jsx(De,{disabled:i.length===0,icon:y.jsx(f2,{}),label:l("dialogs.storyImport.importSelected"),onClick:()=>r(i),variant:"primary"})})]})};const kQ=e=>{const{onClose:t}=e,{t:r}=Ae(),n=sL(),{dispatch:i,stories:a}=Tt(),[l,u]=C.useState(),[d,p]=C.useState([]);function g(w){i(mH(w,a)),n(),t()}function m(w,x){x.length===0||x.some(O=>a.some(I=>zr(I)===zr(O)))?(u(w),p(x)):g(x)}return y.jsx(Vn,{...e,className:"story-import-dialog",fixedSize:!0,headerLabel:r("dialogs.storyImport.title"),children:y.jsxs(hr,{children:[y.jsx(SQ,{onChange:m}),l&&d.length>0&&y.jsx(CQ,{existingStories:a,onImport:g,stories:d}),l&&d.length===0&&y.jsx("p",{children:r("dialogs.storyImport.noStoriesInFile")})]})})};const TQ=e=>{const{storyId:t,...r}=e,[n,i]=C.useState(),{dispatch:a,stories:l}=Tt(),{prefs:u}=pt(),d=yt(l,t),{t:p}=Ae(),g=(m,w,x)=>{i(m),a(jr(l,d,{script:x}))};return y.jsxs(Vn,{...r,className:"story-javascript-dialog",headerLabel:p("dialogs.storyJavaScript.title"),maximizable:!0,children:[y.jsxs(Ft,{children:[y.jsx(pw,{editor:n,watch:d.script}),y.jsx(DP,{editor:n})]}),y.jsx(lw,{children:y.jsx(fc,{editorDidMount:i,fontFamily:u.codeEditorFontFamily,fontScale:u.codeEditorFontScale,label:p("dialogs.storyJavaScript.editorLabel"),labelHidden:!0,onBeforeChange:g,options:{...hw(u),autofocus:!0,lineWrapping:!0,mode:"javascript",placeholder:p("dialogs.storyJavaScript.explanation")},value:d.script})})]})},OQ=e=>{const{formats:t,selectedFormat:r,...n}=e,{t:i}=Ae(),a=t.filter(d=>d.loadState==="loading"),u=DO(t.filter(d=>d.loadState==="loaded"||d.id===r.id)).map(d=>({disabled:!1,label:"".concat(d.name," ").concat(d.version),value:d.id}));return a.length!==0&&u.push({disabled:!0,label:i("components.storyFormatSelect.loadingCount",{loadingCount:a.length}),value:""}),y.jsx(Yi,{...n,options:u,value:r.id})};const PQ=({children:e,domId:t,percent:r})=>y.jsxs("div",{className:"meter",id:t,role:"meter","aria-labelledby":"".concat(t,"-label"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r*100,children:[y.jsx("div",{className:"meter-bar",children:y.jsx("span",{className:"filled",style:{width:r*100+"%"}})}),y.jsx("div",{className:"meter-label",id:"".concat(t,"-label"),children:e})]}),pL=({block:e,children:t})=>{const[r,n]=C.useState([]),{dispatch:i,formats:a}=Kr();C.useEffect(()=>{const d=a.filter(p=>!r.find(g=>g.name===p.name&&g.version===p.version));d.length>0&&(i(i8(d)),n([...r,...d]))},[i,a,r]);const l=a.find(d=>d.loadState==="loading"),u=a.filter(d=>d.loadState==="loaded").length/a.length;return e&&u<1?y.jsx(PQ,{domId:"story-format-loader",percent:u,children:l&&y.jsxs(y.Fragment,{children:["Loading ",l.name," ",l.version]})}):y.jsx(y.Fragment,{children:t})};const LQ=new Intl.DateTimeFormat([],{dateStyle:"full",timeStyle:"long"}),NQ=e=>{const{story:t}=e,r=hH(t),{t:n}=Ae();return y.jsxs("div",{className:"story-stats",children:[y.jsx("table",{className:"counts",children:y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{children:r.characters}),y.jsx("td",{children:n("dialogs.storyDetails.stats.characters")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.words}),y.jsx("td",{children:n("dialogs.storyDetails.stats.words")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.passages}),y.jsx("td",{children:n("dialogs.storyDetails.stats.passages")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.links.length}),y.jsx("td",{children:n("dialogs.storyDetails.stats.links")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.brokenLinks.length}),y.jsx("td",{children:n("dialogs.storyDetails.stats.brokenLinks")})]})]})}),y.jsxs("div",{className:"update-and-ifid",children:[y.jsx("p",{children:n("dialogs.storyDetails.stats.lastUpdate",{date:LQ.format(t.lastUpdate)})}),y.jsxs("p",{children:[n("dialogs.storyDetails.stats.ifid",{ifid:t.ifid})," ",y.jsx("a",{href:"https://ifdb.org/help-ifid",target:"_blank",rel:"noreferrer",children:n("dialogs.storyDetails.stats.ifidExplanation")})]})]})]})},AQ=e=>{const{storyId:t,...r}=e,{dispatch:n,stories:i}=Tt(),{formats:a}=Kr(),l=yt(i,t),{t:u}=Ae();function d(p){const g=c8(a,p.target.value);n(jr(i,l,{storyFormat:g.name,storyFormatVersion:g.version}))}return y.jsxs(Vn,{...r,className:"story-details-dialog",fixedSize:!0,headerLabel:l.name,children:[y.jsxs("div",{className:"story-format",children:[y.jsx(pL,{block:!1}),y.jsx(OQ,{formats:a,onChange:d,selectedFormat:cn(a,l.storyFormat,l.storyFormatVersion),children:u("common.storyFormat")}),y.jsx("a",{href:"https://twinery.org/2storyformats",target:"_blank",rel:"noreferrer",children:u("dialogs.storyDetails.storyFormatExplanation")})]}),y.jsx(Ft,{children:y.jsx(vi,{label:u("dialogs.storyDetails.snapToGrid"),onChange:p=>n(jr(i,l,{snapToGrid:p})),value:l.snapToGrid})}),y.jsx(hr,{children:!r.collapsed&&y.jsx(NQ,{story:l})})]})};var jQ=Si,IQ=function(){return jQ.Date.now()},_Q=IQ,MQ=/\s/;function RQ(e){for(var t=e.length;t--&&MQ.test(e.charAt(t)););return t}var $Q=RQ,FQ=$Q,DQ=/^\s+/;function zQ(e){return e&&e.slice(0,FQ(e)+1).replace(DQ,"")}var BQ=zQ,HQ=BQ,SC=$a,UQ=Nc,CC=0/0,WQ=/^[-+]0x[0-9a-f]+$/i,KQ=/^0b[01]+$/i,GQ=/^0o[0-7]+$/i,qQ=parseInt;function VQ(e){if(typeof e=="number")return e;if(UQ(e))return CC;if(SC(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=SC(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=HQ(e);var r=KQ.test(e);return r||GQ.test(e)?qQ(e.slice(2),r?2:8):WQ.test(e)?CC:+e}var XQ=VQ,YQ=$a,mv=_Q,kC=XQ,QQ="Expected a function",JQ=Math.max,ZQ=Math.min;function eJ(e,t,r){var n,i,a,l,u,d,p=0,g=!1,m=!1,w=!0;if(typeof e!="function")throw new TypeError(QQ);t=kC(t)||0,YQ(r)&&(g=!!r.leading,m="maxWait"in r,a=m?JQ(kC(r.maxWait)||0,t):a,w="trailing"in r?!!r.trailing:w);function x(z){var H=n,q=i;return n=i=void 0,p=z,l=e.apply(q,H),l}function O(z){return p=z,u=setTimeout(T,t),g?x(z):l}function I(z){var H=z-d,q=z-p,re=t-H;return m?ZQ(re,a-q):re}function P(z){var H=z-d,q=z-p;return d===void 0||H>=t||H<0||m&&q>=a}function T(){var z=mv();if(P(z))return N(z);u=setTimeout(T,I(z))}function N(z){return u=void 0,w&&n?x(z):(n=i=void 0,l)}function R(){u!==void 0&&clearTimeout(u),p=0,n=d=i=u=void 0}function _(){return u===void 0?l:N(mv())}function $(){var z=mv(),H=P(z);if(n=arguments,i=this,d=z,H){if(u===void 0)return O(d);if(m)return clearTimeout(u),u=setTimeout(T,t),x(d)}return u===void 0&&(u=setTimeout(T,t)),l}return $.cancel=R,$.flush=_,$}var tJ=eJ;const gL=kt(tJ);const TC={Tab:!1,"Shift-Tab":!1},rJ=e=>{var $,z,H;const{find:t,flags:r,replace:n,storyId:i,onClose:a,onChangeProps:l,...u}=e,d=C.useRef(!1),{dispatch:p,stories:g}=pn(),{t:m}=Ae(),w=yt(g,i),x=C.useMemo(()=>dH(w.passages,t,r).map(({id:q})=>q),[t,r,w.passages]),O=C.useMemo(()=>gL(p,250,{leading:!1,trailing:!0}),[p]);C.useEffect(()=>{d.current||O(IE(w,x))},[O,x,w]);function I(q){var re,oe,le;l({storyId:i,find:(re=q.find)!=null?re:t,flags:(oe=q.flags)!=null?oe:r,replace:(le=q.replace)!=null?le:n})}function P(){d.current=!0,p(IE(w,[])),a()}function T(q,re,oe){I({replace:oe})}function N(q,re,oe){I({find:oe})}function R(){p(vH(w,t,n,r),"undoChange.replaceAllText")}function _(q){I({flags:{...r,[q]:!r[q]}})}return y.jsxs(Vn,{...u,className:"story-search-dialog",fixedSize:!0,headerLabel:m("dialogs.storySearch.title"),onClose:P,children:[y.jsxs("div",{className:"search-fields",children:[y.jsx(fc,{label:m("dialogs.storySearch.find"),onBeforeChange:N,options:{extraKeys:TC,mode:"text"},value:t}),y.jsx(fc,{label:m("dialogs.storySearch.replaceWith"),onBeforeChange:T,options:{extraKeys:TC,mode:"text"},value:n})]}),y.jsxs("div",{className:"search-flags",children:[y.jsx(vi,{label:m("dialogs.storySearch.includePassageNames"),onChange:()=>_("includePassageNames"),value:($=r.includePassageNames)!=null?$:!1}),y.jsx(vi,{label:m("dialogs.storySearch.matchCase"),onChange:()=>_("matchCase"),value:(z=r.matchCase)!=null?z:!1}),y.jsx(vi,{label:m("dialogs.storySearch.useRegexes"),onChange:()=>_("useRegexes"),value:(H=r.useRegexes)!=null?H:!1})]}),y.jsxs("div",{className:"search-results",children:[y.jsx(De,{disabled:x.length===0,icon:y.jsx(IM,{}),label:m("dialogs.storySearch.replaceAll"),onClick:R,variant:"danger"}),y.jsx("span",{children:t&&(x.length>0?m("dialogs.storySearch.matchCount",{count:x.length}):m("dialogs.storySearch.noMatches"))})]})]})};const nJ=e=>{const{storyId:t,...r}=e,[n,i]=C.useState(),{dispatch:a,stories:l}=Tt(),{prefs:u}=pt(),d=yt(l,t),{t:p}=Ae(),g=(m,w,x)=>{i(m),a(jr(l,d,{stylesheet:x}))};return y.jsxs(Vn,{...r,className:"story-stylesheet-dialog",headerLabel:p("dialogs.storyStylesheet.title"),maximizable:!0,children:[y.jsxs(Ft,{children:[y.jsx(pw,{editor:n,watch:d.script}),y.jsx(DP,{editor:n})]}),y.jsx(lw,{children:y.jsx(fc,{editorDidMount:i,fontFamily:u.codeEditorFontFamily,fontScale:u.codeEditorFontScale,label:p("dialogs.storyStylesheet.editorLabel"),labelHidden:!0,onBeforeChange:g,options:{...hw(u),autofocus:!0,lineWrapping:!0,mode:"css",placeholder:p("dialogs.storyStylesheet.explanation")},value:d.stylesheet})})]})},iJ=e=>{const{dispatch:t,stories:r}=pn(),{dispatch:n,prefs:i}=pt(),{t:a}=Ae(),l=k0(r);function u(p,g){n(tr("storyTagColors",{...i.storyTagColors,[p]:g}))}function d(p,g){t(bH(r,p,g))}return y.jsx(Vn,{className:"story-tags-dialog",fixedSize:!0,headerLabel:a("dialogs.storyTags.title"),...e,children:y.jsx(hr,{children:l.length>0?l.map(p=>y.jsx(aL,{allTags:l,color:i.storyTagColors[p],name:p,onChangeColor:g=>u(p,g),onChangeName:g=>d(p,g)},p)):y.jsx("p",{children:a("dialogs.storyTags.noTags")})})})};function kw(e){return function(t){return!!t.type&&t.type.tabsRole===e}}var mp=kw("Tab"),Tw=kw("TabList"),yp=kw("TabPanel");function ny(){return ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(this,arguments)}function oJ(e){return mp(e)||Tw(e)||yp(e)}function iy(e,t){return C.Children.map(e,function(r){return r===null?null:oJ(r)?t(r):r.props&&r.props.children&&typeof r.props.children=="object"?C.cloneElement(r,ny({},r.props,{children:iy(r.props.children,t)})):r})}function Ow(e,t){return C.Children.forEach(e,function(r){r!==null&&(mp(r)||yp(r)?t(r):r.props&&r.props.children&&typeof r.props.children=="object"&&(Tw(r)&&t(r),Ow(r.props.children,t)))})}function vL(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=vL(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function wp(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=vL(t))&&(n&&(n+=" "),n+=r);return n}var aJ=0;function OC(){return"react-tabs-"+aJ++}function mL(e){var t=0;return Ow(e,function(r){mp(r)&&t++}),t}function sJ(e){var t=0;return Ow(e,function(r){yp(r)&&t++}),t}var lJ=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys"];function oy(){return oy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(this,arguments)}function uJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function cJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ay(e,t)}function ay(e,t){return ay=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ay(e,t)}function yL(e){return e&&"getAttribute"in e}function PC(e){return yL(e)&&e.getAttribute("data-rttab")}function ra(e){return yL(e)&&e.getAttribute("aria-disabled")==="true"}var bh;function fJ(e){var t=e||(typeof window<"u"?window:void 0);try{bh=!!(typeof t<"u"&&t.document&&t.document.activeElement)}catch{bh=!1}}var Pw=function(e){cJ(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,n.tabNodes=[],n.handleKeyDown=function(u){var d=n.props,p=d.direction,g=d.disableUpDownKeys;if(n.isTabFromContainer(u.target)){var m=n.props.selectedIndex,w=!1,x=!1;(u.keyCode===32||u.keyCode===13)&&(w=!0,x=!1,n.handleClick(u)),u.keyCode===37||!g&&u.keyCode===38?(p==="rtl"?m=n.getNextTab(m):m=n.getPrevTab(m),w=!0,x=!0):u.keyCode===39||!g&&u.keyCode===40?(p==="rtl"?m=n.getPrevTab(m):m=n.getNextTab(m),w=!0,x=!0):u.keyCode===35?(m=n.getLastTab(),w=!0,x=!0):u.keyCode===36&&(m=n.getFirstTab(),w=!0,x=!0),w&&u.preventDefault(),x&&n.setSelected(m,u)}},n.handleClick=function(u){var d=u.target;do if(n.isTabFromContainer(d)){if(ra(d))return;var p=[].slice.call(d.parentNode.children).filter(PC).indexOf(d);n.setSelected(p,u);return}while((d=d.parentNode)!=null)},n}var r=t.prototype;return r.setSelected=function(i,a){if(!(i<0||i>=this.getTabsCount())){var l=this.props,u=l.onSelect,d=l.selectedIndex;u(i,d,a)}},r.getNextTab=function(i){for(var a=this.getTabsCount(),l=i+1;l<a;l++)if(!ra(this.getTab(l)))return l;for(var u=0;u<i;u++)if(!ra(this.getTab(u)))return u;return i},r.getPrevTab=function(i){for(var a=i;a--;)if(!ra(this.getTab(a)))return a;for(a=this.getTabsCount();a-- >i;)if(!ra(this.getTab(a)))return a;return i},r.getFirstTab=function(){for(var i=this.getTabsCount(),a=0;a<i;a++)if(!ra(this.getTab(a)))return a;return null},r.getLastTab=function(){for(var i=this.getTabsCount();i--;)if(!ra(this.getTab(i)))return i;return null},r.getTabsCount=function(){var i=this.props.children;return mL(i)},r.getPanelsCount=function(){var i=this.props.children;return sJ(i)},r.getTab=function(i){return this.tabNodes["tabs-"+i]},r.getChildren=function(){var i=this,a=0,l=this.props,u=l.children,d=l.disabledTabClassName,p=l.focus,g=l.forceRenderTabPanel,m=l.selectedIndex,w=l.selectedTabClassName,x=l.selectedTabPanelClassName,O=l.environment;this.tabIds=this.tabIds||[],this.panelIds=this.panelIds||[];for(var I=this.tabIds.length-this.getTabsCount();I++<0;)this.tabIds.push(OC()),this.panelIds.push(OC());return iy(u,function(P){var T=P;if(Tw(P)){var N=0,R=!1;bh==null&&fJ(O),bh&&(R=Ge.Children.toArray(P.props.children).filter(mp).some(function($,z){var H=O||(typeof window<"u"?window:void 0);return H&&H.document.activeElement===i.getTab(z)})),T=C.cloneElement(P,{children:iy(P.props.children,function($){var z="tabs-"+N,H=m===N,q={tabRef:function(oe){i.tabNodes[z]=oe},id:i.tabIds[N],panelId:i.panelIds[N],selected:H,focus:H&&(p||R)};return w&&(q.selectedClassName=w),d&&(q.disabledClassName=d),N++,C.cloneElement($,q)})})}else if(yp(P)){var _={id:i.panelIds[a],tabId:i.tabIds[a],selected:m===a};g&&(_.forceRender=g),x&&(_.selectedClassName=x),a++,T=C.cloneElement(P,_)}return T})},r.isTabFromContainer=function(i){if(!PC(i))return!1;var a=i.parentElement;do{if(a===this.node)return!0;if(a.getAttribute("data-rttabs"))break;a=a.parentElement}while(a);return!1},r.render=function(){var i=this,a=this.props;a.children;var l=a.className;a.disabledTabClassName;var u=a.domRef;a.focus,a.forceRenderTabPanel,a.onSelect,a.selectedIndex,a.selectedTabClassName,a.selectedTabPanelClassName,a.environment,a.disableUpDownKeys;var d=uJ(a,lJ);return Ge.createElement("div",oy({},d,{className:wp(l),onClick:this.handleClick,onKeyDown:this.handleKeyDown,ref:function(g){i.node=g,u&&u(g)},"data-rttabs":!0}),this.getChildren())},t}(C.Component);Pw.defaultProps={className:"react-tabs",focus:!1};Pw.propTypes={};var dJ=["children","defaultIndex","defaultFocus"];function hJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function pJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sy(e,t)}function sy(e,t){return sy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},sy(e,t)}var gJ=0,yv=1,bp=function(e){pJ(t,e);function t(n){var i;return i=e.call(this,n)||this,i.handleSelected=function(a,l,u){var d=i.props.onSelect,p=i.state.mode;if(!(typeof d=="function"&&d(a,l,u)===!1)){var g={focus:u.type==="keydown"};p===yv&&(g.selectedIndex=a),i.setState(g)}},i.state=t.copyPropsToState(i.props,{},n.defaultFocus),i}t.getDerivedStateFromProps=function(i,a){return t.copyPropsToState(i,a)},t.getModeFromProps=function(i){return i.selectedIndex===null?yv:gJ},t.copyPropsToState=function(i,a,l){l===void 0&&(l=!1);var u={focus:l,mode:t.getModeFromProps(i)};if(u.mode===yv){var d=Math.max(0,mL(i.children)-1),p=null;a.selectedIndex!=null?p=Math.min(a.selectedIndex,d):p=i.defaultIndex||0,u.selectedIndex=p}return u};var r=t.prototype;return r.render=function(){var i=this.props,a=i.children;i.defaultIndex,i.defaultFocus;var l=hJ(i,dJ),u=this.state,d=u.focus,p=u.selectedIndex;return l.focus=d,l.onSelect=this.handleSelected,p!=null&&(l.selectedIndex=p),Ge.createElement(Pw,l,a)},t}(C.Component);bp.defaultProps={defaultFocus:!1,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1};bp.propTypes={};bp.tabsRole="Tabs";var vJ=["children","className"];function ly(){return ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(this,arguments)}function mJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function yJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,uy(e,t)}function uy(e,t){return uy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},uy(e,t)}var xp=function(e){yJ(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i=this.props,a=i.children,l=i.className,u=mJ(i,vJ);return Ge.createElement("ul",ly({},u,{className:wp(l),role:"tablist"}),a)},t}(C.Component);xp.defaultProps={className:"react-tabs__tab-list"};xp.propTypes={};xp.tabsRole="TabList";var wJ=["children","className","disabled","disabledClassName","focus","id","panelId","selected","selectedClassName","tabIndex","tabRef"];function cy(){return cy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function bJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function xJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fy(e,t)}function fy(e,t){return fy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fy(e,t)}var wv="react-tabs__tab",Ep=function(e){xJ(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidMount=function(){this.checkFocus()},r.componentDidUpdate=function(){this.checkFocus()},r.checkFocus=function(){var i=this.props,a=i.selected,l=i.focus;a&&l&&this.node.focus()},r.render=function(){var i,a=this,l=this.props,u=l.children,d=l.className,p=l.disabled,g=l.disabledClassName;l.focus;var m=l.id,w=l.panelId,x=l.selected,O=l.selectedClassName,I=l.tabIndex,P=l.tabRef,T=bJ(l,wJ);return Ge.createElement("li",cy({},T,{className:wp(d,(i={},i[O]=x,i[g]=p,i)),ref:function(R){a.node=R,P&&P(R)},role:"tab",id:m,"aria-selected":x?"true":"false","aria-disabled":p?"true":"false","aria-controls":w,tabIndex:I||(x?"0":null),"data-rttab":!0}),u)},t}(C.Component);Ep.defaultProps={className:wv,disabledClassName:wv+"--disabled",focus:!1,id:null,panelId:null,selected:!1,selectedClassName:wv+"--selected"};Ep.propTypes={};Ep.tabsRole="Tab";var EJ=["children","className","forceRender","id","selected","selectedClassName","tabId"];function dy(){return dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dy.apply(this,arguments)}function SJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function CJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,hy(e,t)}function hy(e,t){return hy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},hy(e,t)}var LC="react-tabs__tab-panel",Sp=function(e){CJ(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var i,a=this.props,l=a.children,u=a.className,d=a.forceRender,p=a.id,g=a.selected,m=a.selectedClassName,w=a.tabId,x=SJ(a,EJ);return Ge.createElement("div",dy({},x,{className:wp(u,(i={},i[m]=g,i)),role:"tabpanel",id:p,"aria-labelledby":w}),d||g?l:null)},t}(C.Component);Sp.defaultProps={className:LC,forceRender:!1,selectedClassName:LC+"--selected"};Sp.propTypes={};Sp.tabsRole="TabPanel";const kJ=()=>{const e=ul(),{t}=Ae();return["/","/stories"].includes(e.location.pathname)?null:y.jsx(De,{icon:y.jsx(E_,{}),variant:"primary",label:e.length>1?t("common.back"):t("routes.storyList.titleGeneric"),onClick:()=>e.length>1?e.goBack():e.push("/")})};const Lw=e=>{const{helpUrl:t="https://twinery.org/2guide",pinnedControls:r,tabs:n}=e,{t:i}=Ae();return y.jsx("div",{className:"route-toolbar",children:y.jsxs(bp,{selectedTabClassName:"selected",children:[y.jsxs("div",{className:"route-toolbar-top",children:[y.jsx(kJ,{}),y.jsx(xp,{className:"route-toolbar-tablist",children:Object.keys(n).map(a=>y.jsx(Ep,{className:"route-toolbar-tab",children:a},a))}),y.jsxs("div",{className:"route-toolbar-pinned-controls",children:[r,y.jsx(De,{icon:y.jsx(h2,{}),label:i("common.help"),onClick:()=>window.open(t,"_blank")})]})]}),y.jsx("div",{children:Object.entries(n).map(([a,l])=>y.jsx(Sp,{children:l},a))})]})})};var wL={exports:{}};(function(e,t){(function(r,n){n()})(dr,function(){function r(p,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function n(p,g,m){var w=new XMLHttpRequest;w.open("GET",p),w.responseType="blob",w.onload=function(){d(w.response,g,m)},w.onerror=function(){console.error("could not download file")},w.send()}function i(p){var g=new XMLHttpRequest;g.open("HEAD",p,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function a(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(g)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof dr=="object"&&dr.global===dr?dr:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(p,g,m){var w=l.URL||l.webkitURL,x=document.createElement("a");g=g||p.name||"download",x.download=g,x.rel="noopener",typeof p=="string"?(x.href=p,x.origin===location.origin?a(x):i(x.href)?n(p,g,m):a(x,x.target="_blank")):(x.href=w.createObjectURL(p),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){a(x)},0))}:"msSaveOrOpenBlob"in navigator?function(p,g,m){if(g=g||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(r(p,m),g);else if(i(p))n(p,g,m);else{var w=document.createElement("a");w.href=p,w.target="_blank",setTimeout(function(){a(w)})}}:function(p,g,m,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof p=="string")return n(p,g,m);var x=p.type==="application/octet-stream",O=/constructor/i.test(l.HTMLElement)||l.safari,I=/CriOS\/[\d]+/.test(navigator.userAgent);if((I||x&&O||u)&&typeof FileReader<"u"){var P=new FileReader;P.onloadend=function(){var R=P.result;R=I?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=R:location=R,w=null},P.readAsDataURL(p)}else{var T=l.URL||l.webkitURL,N=T.createObjectURL(p);w?w.location=N:location.href=N,w=null,setTimeout(function(){T.revokeObjectURL(N)},4e4)}});l.saveAs=d.saveAs=d,e.exports=d})})(wL);var bL=wL.exports;function xL(e,t){const r=new Blob([e],{type:"text/html;charset=utf-8"});bL.saveAs(r,t)}function TJ(e,t){const r=new Blob([e],{type:"text/plain;charset=utf-8"});bL.saveAs(r,t)}const EL=({story:e})=>{var _,$,z,H;const{publishStory:t}=$c(),[r,n]=C.useState(),[i,a]=C.useState(),[l,u]=C.useState(),[d,p]=C.useState(),{playStory:g,proofStory:m,testStory:w}=YP(),{t:x}=Ae();function O(){n(void 0),a(void 0),u(void 0),p(void 0)}async function I(){if(!e)throw new Error("No story provided to publish");O();try{await g(e.id)}catch(q){n(q)}}async function P(){if(!e)throw new Error("No story provided to publish");O();try{await m(e.id)}catch(q){a(q)}}async function T(){if(!e)throw new Error("No story provided to publish");O();try{xL(await t(e.id),zr(e))}catch(q){u(q)}}async function N(){if(!e)throw new Error("No story provided to publish");O();try{await w(e.id)}catch(q){p(q)}}function R(){if(!e)throw new Error("No story provided to export");TJ(xQ(e),zr(e,".twee"))}return y.jsxs(Ft,{children:[y.jsx(wa,{ariaLabel:(_=d==null?void 0:d.message)!=null?_:"",disabled:!e,icon:y.jsx(m2,{}),label:x("routeActions.build.test"),onChangeOpen:()=>p(void 0),onClick:N,open:!!d,children:y.jsxs(hr,{children:[y.jsx("p",{children:d==null?void 0:d.message}),y.jsx(De,{icon:y.jsx(Rn,{}),label:x("common.close"),onClick:()=>p(void 0),variant:"primary"})]})}),y.jsx(wa,{ariaLabel:($=r==null?void 0:r.message)!=null?$:"",disabled:!e,icon:y.jsx(PM,{}),label:x("routeActions.build.play"),onChangeOpen:()=>n(void 0),onClick:I,open:!!r,children:y.jsxs(hr,{children:[y.jsx("p",{children:r==null?void 0:r.message}),y.jsx(De,{icon:y.jsx(Rn,{}),label:x("common.close"),onClick:()=>n(void 0),variant:"primary"})]})}),y.jsx(wa,{ariaLabel:(z=i==null?void 0:i.message)!=null?z:"",disabled:!e,icon:y.jsx(eM,{}),label:x("routeActions.build.proof"),onChangeOpen:()=>a(void 0),onClick:P,open:!!i,children:y.jsxs(hr,{children:[y.jsx("p",{children:i==null?void 0:i.message}),y.jsx(De,{icon:y.jsx(Rn,{}),label:x("common.close"),onClick:()=>a(void 0),variant:"primary"})]})}),y.jsx(wa,{ariaLabel:(H=l==null?void 0:l.message)!=null?H:"",disabled:!e,icon:y.jsx(oM,{}),label:x("routeActions.build.publishToFile"),onChangeOpen:()=>u(void 0),onClick:T,open:!!l,children:y.jsxs(hr,{children:[y.jsx("p",{children:l==null?void 0:l.message}),y.jsx(De,{icon:y.jsx(Rn,{}),label:x("common.close"),onClick:()=>u(void 0),variant:"primary"})]})}),y.jsx(De,{disabled:!e,icon:y.jsx(ER,{}),label:x("routeActions.build.exportAsTwee"),onClick:R})]})},Nw=()=>{const{dispatch:e}=Gr(),t=ul(),{t:r}=Ae();return y.jsxs(Ft,{children:[y.jsx(De,{icon:y.jsx(BM,{}),label:r("routeActions.app.preferences"),onClick:()=>e({type:"addDialog",component:J9})}),y.jsx(De,{disabled:t.location.pathname==="/story-formats",icon:y.jsx(rM,{}),label:r("routeActions.app.storyFormats"),onClick:()=>t.push("/story-formats")}),y.jsx(De,{icon:y.jsx(j_,{}),label:r("routeActions.app.aboutApp"),onClick:()=>e({type:"addDialog",component:X9})}),y.jsx(De,{icon:y.jsx(R_,{}),label:r("routeActions.app.reportBug"),onClick:()=>window.open("https://twinery.org/2bugs","_blank")})]})};function OJ(e){try{return new URL(e),!0}catch{}return!1}const PJ=()=>{const{dispatch:e,formats:t}=Kr(),[r,n]=C.useState(""),{t:i}=Ae();async function a(){e(e8(r,await lh(r)))}const l=async u=>{if(r.trim()==="")return{valid:!1};if(!OJ(r))return{message:i("routes.storyFormatList.toolbar.addStoryFormatButton.invalidUrl"),valid:!1};try{const d=await lh(r);return t.some(p=>p.name===d.name&&p.version===d.version)?{message:i("routes.storyFormatList.toolbar.addStoryFormatButton.alreadyAdded",{storyFormatName:d.name,storyFormatVersion:d.version}),valid:!1}:{message:i("routes.storyFormatList.toolbar.addStoryFormatButton.addPreview",{storyFormatName:d.name,storyFormatVersion:d.version}),valid:!0}}catch(d){return{message:i("routes.storyFormatList.toolbar.addStoryFormatButton.fetchError",{errorMessage:d.message}),valid:!1}}};return y.jsx("span",{className:"add-format-button",children:y.jsx(Rc,{icon:y.jsx(Ks,{}),label:i("common.add"),onChange:u=>n(u.target.value),onSubmit:a,prompt:i("routes.storyFormatList.toolbar.addStoryFormatButton.prompt"),submitIcon:y.jsx(Ks,{}),submitLabel:i("common.add"),submitVariant:"create",validate:l,value:r})})},LJ=e=>{const{format:t}=e,{dispatch:r,prefs:n}=pt(),{t:i}=Ae(),a=(t==null?void 0:t.loadState)!=="loaded"||t.properties.proofing||n.storyFormat.name===t.name&&n.storyFormat.version===t.version,l=()=>{if(!t)throw new Error("Can't set undefined format as default");r({type:"update",name:"storyFormat",value:{name:t.name,version:t.version}})};return y.jsx(De,{disabled:a,icon:y.jsx(qM,{}),label:i("routes.storyFormatList.toolbar.useAsDefaultFormat"),onClick:l})},NJ=e=>{const{format:t}=e,{dispatch:r,prefs:n}=pt(),{t:i}=Ae(),a=(t==null?void 0:t.loadState)!=="loaded"||!t.properties.proofing||n.proofingFormat.name===t.name&&n.proofingFormat.version===t.version,l=()=>{if(!t)throw new Error("Can't set undefined format as proofing");r({type:"update",name:"proofingFormat",value:{name:t.name,version:t.version}})};return y.jsx(De,{disabled:a,icon:y.jsx(J_,{}),label:i("routes.storyFormatList.toolbar.useAsProofingFormat"),onClick:l})},AJ=e=>{const{format:t}=e,{dispatch:r}=Kr(),{prefs:n}=pt(),{t:i}=Ae(),a=(t==null?void 0:t.name)===n.storyFormat.name&&(t==null?void 0:t.version)===n.storyFormat.version,l=(t==null?void 0:t.name)===n.proofingFormat.name&&(t==null?void 0:t.version)===n.proofingFormat.version;return y.jsx(De,{disabled:!t||!t.userAdded||a||l,icon:y.jsx(Qd,{}),label:i("common.remove"),onClick:()=>t&&r(t8(t))})},jJ=e=>{const{format:t}=e,{dispatch:r,prefs:n}=pt(),{t:i}=Ae(),a=n.disabledStoryFormatEditorExtensions.some(u=>u.name===(t==null?void 0:t.name)&&u.version===(t==null?void 0:t.version));function l(){if(!t)throw new Error("Format is not set");r(a?tr("disabledStoryFormatEditorExtensions",n.disabledStoryFormatEditorExtensions.filter(u=>u.name!==t.name||u.version!==t.version)):tr("disabledStoryFormatEditorExtensions",[...n.disabledStoryFormatEditorExtensions,{name:t.name,version:t.version}]))}return y.jsx(De,{disabled:!t,icon:y.jsx(AM,{}),label:i("routes.storyFormatList.toolbar.".concat(a?"enable":"disable","FormatExtensions")),onClick:l})},IJ=e=>{const{selectedFormats:t}=e,r=t.length===1?t[0]:void 0;return y.jsxs(Ft,{children:[y.jsx(PJ,{}),y.jsx(AJ,{format:r}),y.jsx(jJ,{format:r}),y.jsx(LJ,{format:r}),y.jsx(NJ,{format:r})]})},_J=()=>{const{dispatch:e,prefs:t}=pt(),{t:r}=Ae();function n(i){e(tr("storyFormatListFilter",i))}return y.jsxs(y.Fragment,{children:[y.jsx(vi,{disabled:t.storyFormatListFilter==="current",label:r("routes.storyFormatList.title.current"),onChange:()=>n("current"),value:t.storyFormatListFilter==="current"}),y.jsx(vi,{disabled:t.storyFormatListFilter==="user",label:r("routes.storyFormatList.title.user"),onChange:()=>n("user"),value:t.storyFormatListFilter==="user"}),y.jsx(vi,{disabled:t.storyFormatListFilter==="all",label:r("routes.storyFormatList.title.all"),onChange:()=>n("all"),value:t.storyFormatListFilter==="all"})]})},MJ=e=>{const{selectedFormats:t}=e,{t:r}=Ae();return y.jsx(Lw,{tabs:{[r("common.storyFormat")]:y.jsx(IJ,{selectedFormats:t}),[r("common.view")]:y.jsx(_J,{}),[r("common.appName")]:y.jsx(Nw,{})}})},RJ=()=>{const{dispatch:e,formats:t}=Kr(),{dispatch:r,prefs:n}=pt(),{t:i}=Ae(),a=t.filter(d=>d.selected),l=DO(l8(t,n.storyFormatListFilter));C.useEffect(()=>{for(const d of a)d.selected&&!l.includes(d)&&e(n8(d))},[r,a,l,e]);function u(d){e(o8(d,!0))}return y.jsx("div",{className:"story-format-list-route",children:y.jsxs(xw,{children:[y.jsx(MJ,{selectedFormats:a}),y.jsx(dP,{ignoreSelector:".story-format-card",onClickAway:()=>e(r8()),children:y.jsxs(J0,{title:i("routes.storyFormatList.title.".concat(n.storyFormatListFilter)),children:[y.jsx("p",{children:i(l.length>0?"routes.storyFormatList.storyFormatExplanation":"routes.storyFormatList.noneVisible")}),y.jsx(pL,{children:y.jsx(hP,{columnWidth:"450px",children:y.jsx(cl,{component:null,children:l.map(d=>y.jsx(Ci,{classNames:"pop",timeout:200,children:y.jsx(D7,{defaultFormat:d.name===n.storyFormat.name&&d.version===n.storyFormat.version,editorExtensionsDisabled:n.disabledStoryFormatEditorExtensions.some(p=>d.name===p.name&&d.version===p.version),format:d,onSelect:()=>u(d),proofingFormat:d.name===n.proofingFormat.name&&d.version===n.proofingFormat.version})},d.id))})})})]})})]})})};const $J=e=>{const{container:t,ignoreEventsOnSelector:r,onSelectRect:n,onTemporarySelectRect:i}=e,[a,l]=C.useState(!1),[u,d]=C.useState(!1),[p,g]=C.useState(),[m,w]=C.useState();C.useEffect(()=>{const O=t.current;let I;function P(_){return{left:_.clientX-I.left+O.scrollLeft,top:_.clientY-I.top+O.scrollTop}}function T(_){O&&(O.releasePointerCapture(_.pointerId),O.removeEventListener("pointermove",N),O.removeEventListener("pointerup",T),d(!1))}function N(_){w(P(_))}function R(_){_.pointerType==="touch"||_.button!==0||!O||r&&_.target.closest(r)||(I=O.getBoundingClientRect(),O.setPointerCapture(_.pointerId),O.addEventListener("pointermove",N),O.addEventListener("pointerup",T),l(!!(_.shiftKey||_.ctrlKey)),d(!0),g(P(_)),w(P(_)))}if(O)return O.addEventListener("pointerdown",R),()=>O.removeEventListener("pointerdown",R)},[t,r]),C.useEffect(()=>{p&&m&&(u?i(Hg(p,m),a):(n(Hg(p,m),a),g(void 0),w(void 0)))},[a,m,u,n,i,p]);const x=C.useMemo(()=>{if(!p||!m)return{};const O=Hg(p,m);return{transform:"translate(".concat(O.left,"px, ").concat(O.top,"px) scale(").concat(O.width/100,", ").concat(O.height/100,")")}},[m,p]);return!p||!m?null:y.jsx("div",{className:"marquee-selection",style:x})};const NC=25*Math.sqrt(2),FJ=e=>{const{offset:t,passage:r}=e,n={left:r.left,top:r.top};return r.selected&&(n.left+=t.left,n.top+=t.top),y.jsx("line",{className:"broken-connection",x1:n.left+r.width,y1:n.top+r.height,x2:n.left+r.width+NC,y2:n.top+r.height+NC,style:{markerEnd:"url(#link-broken)"}})};function SL({start:e,end:t,radius:r,largeArc:n,sweep:i,rotation:a}){return"M"+e.left+","+e.top+" A"+r.left+","+r.top+" "+(a!=null?a:"0")+(n?" 1":" 0")+(i?" 1 ":" 0 ")+t.left+","+t.top}const DJ=e=>{const{end:t,offset:r,start:n,variant:i}=e,a=C.useMemo(()=>{let l=n,u=t;n.selected&&(l={...n,left:n.left+r.left,top:n.top+r.top}),t.selected&&(u={...t,left:t.left+r.left,top:t.top+r.top});let d=bE(l),p=bE(u);if(d=xE(l,d,p),!d||(p=xE(u,d,p),!p))return"";const g=A3(d,p);let m=d.left<p.left;d.left===p.left&&d.top<p.top&&(m=!0);const w=N3(d,p);return SL({start:d,end:p,radius:{left:g,top:g*.75},rotation:w,sweep:m})},[t,r.left,r.top,n]);return y.jsx("path",{d:a,className:"passage-connection variant-".concat(i),style:{markerEnd:"url(#link-arrowhead)"}})};const zJ=e=>{const{offset:t,passage:r,variant:n}=e,i={left:r.left,top:r.top};r.selected&&(i.left+=t.left,i.top+=t.top);const a=C.useMemo(()=>.4*Math.min(r.width,r.height),[r.height,r.width]),l=C.useMemo(()=>SL({start:{left:i.left,top:i.top+r.height/2},end:{left:i.left,top:i.top},radius:{left:a,top:a},sweep:!0,largeArc:!0}),[r.height,a,i.left,i.top]);return y.jsx("path",{className:"self-connection variant-".concat(n),d:l,style:{markerEnd:"url(#link-arrowhead)"}})},xu=C.memo(e=>{const{broken:t,connections:r,offset:n,self:i,variant:a="link"}=e;return y.jsxs(y.Fragment,{children:[Array.from(r).map(l=>Array.from(l[1]).map(u=>y.jsx(DJ,{end:u,offset:n,start:l[0],variant:a},l[0].name+u.name))),Array.from(i).map(l=>y.jsx(zJ,{offset:n,passage:l,variant:a},l.name)),Array.from(t).map(l=>y.jsx(FJ,{offset:n,passage:l},l.name))]})});xu.displayName="PassageConnectionGroup";const BJ=()=>y.jsxs("defs",{children:[y.jsx("marker",{id:"link-arrowhead",refX:"6",refY:"4",markerWidth:"8",markerHeight:"8",orient:"auto",children:y.jsx("path",{d:"M 1,1 7,4 1,7 Z"})}),y.jsxs("marker",{id:"link-broken",refX:"7.5",refY:"7.5",markerWidth:"15",markerHeight:"15",children:[y.jsx("circle",{cx:"7.5",cy:"7.5",r:"7.5"}),y.jsx("path",{d:"M4.5 7.5h 6z"})]}),y.jsxs("marker",{id:"link-start",markerWidth:"15",markerHeight:"15",refX:"16",refY:"16",viewBox:"0 0 32 32",children:[y.jsx("circle",{cx:"16",cy:"16",r:"16"}),y.jsx("path",{d:"M8 17a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"}),y.jsx("path",{d:"M11 18a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"}),y.jsx("circle",{className:"fill-white",cx:"19",cy:"13",r:"1"})]})]});const CL=C.memo(e=>{const{offset:t,passage:r}=e,n={left:r.left,top:r.top};return r.selected&&(n.left+=t.left,n.top+=t.top),y.jsx("line",{className:"start-connection",x1:n.left-50,y1:n.top+r.height/2,x2:n.left,y2:n.top+r.height/2,style:{markerStart:"url(#link-start)"}})});CL.displayName="StartConnection";const HJ=()=>[];function UJ(e,t){var u,d;const{dispatch:r,formats:n}=Kr(),i=cn(n,e,t),{editorExtensions:a,extensionsDisabled:l}=dw(e,t);return C.useEffect(()=>{!l&&i.loadState==="unloaded"&&r(rc(i))},[r,l,i]),(d=(u=a==null?void 0:a.references)==null?void 0:u.parsePassageText)!=null?d:HJ}const Qf=new Set,AC={left:0,top:0},WJ=e=>{const{formatName:t,formatVersion:r,offset:n,passages:i,startPassageId:a}=e,l=UJ(t,r),{draggable:u,fixed:d}=C.useMemo(()=>jE(i),[i]),{draggable:p,fixed:g}=C.useMemo(()=>jE(i,l),[i,l]),m=C.useMemo(()=>i.find(w=>w.id===a),[i,a]);return y.jsxs("svg",{className:"link-connectors",children:[y.jsx(BJ,{}),m&&y.jsx(CL,{offset:n,passage:m}),y.jsx(xu,{...u,offset:n}),y.jsx(xu,{...d,offset:AC}),y.jsx(xu,{broken:Qf,connections:p.connections,offset:n,self:Qf,variant:"reference"}),y.jsx(xu,{broken:Qf,connections:g.connections,offset:AC,self:Qf,variant:"reference"})]})};var kn=typeof window<"u"?window:{screen:{},navigator:{}},Qs=(kn.matchMedia||function(){return{matches:!1}}).bind(kn),KJ={get passive(){return!0}},kL=function(){};kn.addEventListener&&kn.addEventListener("p",kL,KJ);kn.removeEventListener&&kn.removeEventListener("p",kL,!1);var Aw="ontouchstart"in kn,GJ="TouchEvent"in kn,qJ=Aw||GJ&&Qs("(any-pointer: coarse)").matches,jC=(kn.navigator.maxTouchPoints||0)>0||qJ,TL=kn.navigator.userAgent||"",VJ=Qs("(pointer: coarse)").matches&&/iPad|Macintosh/.test(TL)&&Math.min(kn.screen.width||0,kn.screen.height||0)>=768,XJ=(Qs("(pointer: coarse)").matches||!Qs("(pointer: fine)").matches&&Aw)&&!/Windows.*Firefox/.test(TL),YJ=Qs("(any-pointer: fine)").matches||Qs("(any-hover: hover)").matches||VJ||!Aw,QJ=jC&&(YJ||!XJ)?"hybrid":jC?"touchOnly":"mouseOnly",jw={exports:{}},OL={},Dt={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.findInArray=JJ;ki.isFunction=ZJ;ki.isNum=eZ;ki.int=tZ;ki.dontSetMe=rZ;function JJ(e,t){for(var r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function ZJ(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function eZ(e){return typeof e=="number"&&!isNaN(e)}function tZ(e){return parseInt(e,10)}function rZ(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.getPrefix=PL;Ba.browserPrefixToKey=LL;Ba.browserPrefixToStyle=nZ;Ba.default=void 0;var bv=["Moz","Webkit","O","ms"];function PL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u"||typeof window.document>"u")return"";var t=window.document.documentElement.style;if(e in t)return"";for(var r=0;r<bv.length;r++)if(LL(e,bv[r])in t)return bv[r];return""}function LL(e,t){return t?"".concat(t).concat(iZ(e)):e}function nZ(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function iZ(e){for(var t="",r=!0,n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}var oZ=PL();Ba.default=oZ;function Sd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sd=function(r){return typeof r}:Sd=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sd(e)}Object.defineProperty(Dt,"__esModule",{value:!0});Dt.matchesSelector=IL;Dt.matchesSelectorAndParentsTo=sZ;Dt.addEvent=lZ;Dt.removeEvent=uZ;Dt.outerHeight=cZ;Dt.outerWidth=fZ;Dt.innerHeight=dZ;Dt.innerWidth=hZ;Dt.offsetXYFromParent=pZ;Dt.createCSSTransform=gZ;Dt.createSVGTransform=vZ;Dt.getTranslation=Iw;Dt.getTouch=mZ;Dt.getTouchIdentifier=yZ;Dt.addUserSelectStyles=wZ;Dt.removeUserSelectStyles=bZ;Dt.addClassName=_L;Dt.removeClassName=ML;var un=ki,IC=aZ(Ba);function NL(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return NL=function(){return e},e}function aZ(e){if(e&&e.__esModule)return e;if(e===null||Sd(e)!=="object"&&typeof e!="function")return{default:e};var t=NL();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){jL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jf="";function IL(e,t){return Jf||(Jf=(0,un.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,un.isFunction)(e[r])})),(0,un.isFunction)(e[Jf])?e[Jf](t):!1}function sZ(e,t,r){var n=e;do{if(IL(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function lZ(e,t,r,n){if(e){var i=AL({capture:!0},n);e.addEventListener?e.addEventListener(t,r,i):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}}function uZ(e,t,r,n){if(e){var i=AL({capture:!0},n);e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}}function cZ(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,un.int)(r.borderTopWidth),t+=(0,un.int)(r.borderBottomWidth),t}function fZ(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,un.int)(r.borderLeftWidth),t+=(0,un.int)(r.borderRightWidth),t}function dZ(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,un.int)(r.paddingTop),t-=(0,un.int)(r.paddingBottom),t}function hZ(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,un.int)(r.paddingLeft),t-=(0,un.int)(r.paddingRight),t}function pZ(e,t,r){var n=t===t.ownerDocument.body,i=n?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-i.left)/r,l=(e.clientY+t.scrollTop-i.top)/r;return{x:a,y:l}}function gZ(e,t){var r=Iw(e,t,"px");return jL({},(0,IC.browserPrefixToKey)("transform",IC.default),r)}function vZ(e,t){var r=Iw(e,t,"");return r}function Iw(e,t,r){var n=e.x,i=e.y,a="translate(".concat(n).concat(r,",").concat(i).concat(r,")");if(t){var l="".concat(typeof t.x=="string"?t.x:t.x+r),u="".concat(typeof t.y=="string"?t.y:t.y+r);a="translate(".concat(l,", ").concat(u,")")+a}return a}function mZ(e,t){return e.targetTouches&&(0,un.findInArray)(e.targetTouches,function(r){return t===r.identifier})||e.changedTouches&&(0,un.findInArray)(e.changedTouches,function(r){return t===r.identifier})}function yZ(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function wZ(e){if(e){var t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&_L(e.body,"react-draggable-transparent-selection")}}function bZ(e){if(e)try{if(e.body&&ML(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function _L(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function ML(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.getBoundPosition=xZ;Ti.snapToGrid=EZ;Ti.canDragX=SZ;Ti.canDragY=CZ;Ti.getControlPosition=kZ;Ti.createCoreData=TZ;Ti.createDraggableData=OZ;var en=ki,Ls=Dt;function xZ(e,t,r){if(!e.props.bounds)return[t,r];var n=e.props.bounds;n=typeof n=="string"?n:PZ(n);var i=_w(e);if(typeof n=="string"){var a=i.ownerDocument,l=a.defaultView,u;if(n==="parent"?u=i.parentNode:u=a.querySelector(n),!(u instanceof l.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');var d=l.getComputedStyle(i),p=l.getComputedStyle(u);n={left:-i.offsetLeft+(0,en.int)(p.paddingLeft)+(0,en.int)(d.marginLeft),top:-i.offsetTop+(0,en.int)(p.paddingTop)+(0,en.int)(d.marginTop),right:(0,Ls.innerWidth)(u)-(0,Ls.outerWidth)(i)-i.offsetLeft+(0,en.int)(p.paddingRight)-(0,en.int)(d.marginRight),bottom:(0,Ls.innerHeight)(u)-(0,Ls.outerHeight)(i)-i.offsetTop+(0,en.int)(p.paddingBottom)-(0,en.int)(d.marginBottom)}}return(0,en.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,en.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,en.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,en.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function EZ(e,t,r){var n=Math.round(t/e[0])*e[0],i=Math.round(r/e[1])*e[1];return[n,i]}function SZ(e){return e.props.axis==="both"||e.props.axis==="x"}function CZ(e){return e.props.axis==="both"||e.props.axis==="y"}function kZ(e,t,r){var n=typeof t=="number"?(0,Ls.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;var i=_w(r),a=r.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Ls.offsetXYFromParent)(n||e,a,r.props.scale)}function TZ(e,t,r){var n=e.state,i=!(0,en.isNum)(n.lastX),a=_w(e);return i?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:a,deltaX:t-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:t,y:r}}function OZ(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function PZ(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function _w(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Cp={},kp={};Object.defineProperty(kp,"__esModule",{value:!0});kp.default=LZ;function LZ(){}Object.defineProperty(Cp,"__esModule",{value:!0});Cp.default=void 0;var xv=AZ(C),Zr=Mw(ep),NZ=Mw(Sc),wr=Dt,na=Ti,Ev=ki,pu=Mw(kp);function Mw(e){return e&&e.__esModule?e:{default:e}}function RL(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return RL=function(){return e},e}function AZ(e){if(e&&e.__esModule)return e;if(e===null||Ru(e)!=="object"&&typeof e!="function")return{default:e};var t=RL();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function Ru(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ru=function(r){return typeof r}:Ru=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ru(e)}function jZ(e,t){return RZ(e)||MZ(e,t)||_Z(e,t)||IZ()}function IZ(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _Z(e,t){if(e){if(typeof e=="string")return MC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MC(e,t)}}function MC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MZ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,a=void 0;try{for(var l=e[Symbol.iterator](),u;!(n=(u=l.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&l.return!=null&&l.return()}finally{if(i)throw a}}return r}}function RZ(e){if(Array.isArray(e))return e}function $Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FZ(e,t,r){return t&&RC(e.prototype,t),r&&RC(e,r),e}function DZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&py(e,t)}function py(e,t){return py=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},py(e,t)}function zZ(e){var t=HZ();return function(){var r=xh(e),n;if(t){var i=xh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return BZ(this,n)}}function BZ(e,t){return t&&(Ru(t)==="object"||typeof t=="function")?t:br(e)}function br(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function xh(e){return xh=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},xh(e)}function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var In={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},po=In.mouse,Tp=function(e){DZ(r,e);var t=zZ(r);function r(){var n;$Z(this,r);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=t.call.apply(t,[this].concat(a)),yn(br(n),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),yn(br(n),"mounted",!1),yn(br(n),"handleDragStart",function(u){if(n.props.onMouseDown(u),!n.props.allowAnyClick&&typeof u.button=="number"&&u.button!==0)return!1;var d=n.findDOMNode();if(!d||!d.ownerDocument||!d.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var p=d.ownerDocument;if(!(n.props.disabled||!(u.target instanceof p.defaultView.Node)||n.props.handle&&!(0,wr.matchesSelectorAndParentsTo)(u.target,n.props.handle,d)||n.props.cancel&&(0,wr.matchesSelectorAndParentsTo)(u.target,n.props.cancel,d))){u.type==="touchstart"&&u.preventDefault();var g=(0,wr.getTouchIdentifier)(u);n.setState({touchIdentifier:g});var m=(0,na.getControlPosition)(u,g,br(n));if(m!=null){var w=m.x,x=m.y,O=(0,na.createCoreData)(br(n),w,x);(0,pu.default)("DraggableCore: handleDragStart: %j",O),(0,pu.default)("calling",n.props.onStart);var I=n.props.onStart(u,O);I===!1||n.mounted===!1||(n.props.enableUserSelectHack&&(0,wr.addUserSelectStyles)(p),n.setState({dragging:!0,lastX:w,lastY:x}),(0,wr.addEvent)(p,po.move,n.handleDrag),(0,wr.addEvent)(p,po.stop,n.handleDragStop))}}}),yn(br(n),"handleDrag",function(u){var d=(0,na.getControlPosition)(u,n.state.touchIdentifier,br(n));if(d!=null){var p=d.x,g=d.y;if(Array.isArray(n.props.grid)){var m=p-n.state.lastX,w=g-n.state.lastY,x=(0,na.snapToGrid)(n.props.grid,m,w),O=jZ(x,2);if(m=O[0],w=O[1],!m&&!w)return;p=n.state.lastX+m,g=n.state.lastY+w}var I=(0,na.createCoreData)(br(n),p,g);(0,pu.default)("DraggableCore: handleDrag: %j",I);var P=n.props.onDrag(u,I);if(P===!1||n.mounted===!1){try{n.handleDragStop(new MouseEvent("mouseup"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.handleDragStop(T)}return}n.setState({lastX:p,lastY:g})}}),yn(br(n),"handleDragStop",function(u){if(n.state.dragging){var d=(0,na.getControlPosition)(u,n.state.touchIdentifier,br(n));if(d!=null){var p=d.x,g=d.y,m=(0,na.createCoreData)(br(n),p,g),w=n.props.onStop(u,m);if(w===!1||n.mounted===!1)return!1;var x=n.findDOMNode();x&&n.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(x.ownerDocument),(0,pu.default)("DraggableCore: handleDragStop: %j",m),n.setState({dragging:!1,lastX:NaN,lastY:NaN}),x&&((0,pu.default)("DraggableCore: Removing handlers"),(0,wr.removeEvent)(x.ownerDocument,po.move,n.handleDrag),(0,wr.removeEvent)(x.ownerDocument,po.stop,n.handleDragStop))}}}),yn(br(n),"onMouseDown",function(u){return po=In.mouse,n.handleDragStart(u)}),yn(br(n),"onMouseUp",function(u){return po=In.mouse,n.handleDragStop(u)}),yn(br(n),"onTouchStart",function(u){return po=In.touch,n.handleDragStart(u)}),yn(br(n),"onTouchEnd",function(u){return po=In.touch,n.handleDragStop(u)}),n}return FZ(r,[{key:"componentDidMount",value:function(){this.mounted=!0;var i=this.findDOMNode();i&&(0,wr.addEvent)(i,In.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.findDOMNode();if(i){var a=i.ownerDocument;(0,wr.removeEvent)(a,In.mouse.move,this.handleDrag),(0,wr.removeEvent)(a,In.touch.move,this.handleDrag),(0,wr.removeEvent)(a,In.mouse.stop,this.handleDragStop),(0,wr.removeEvent)(a,In.touch.stop,this.handleDragStop),(0,wr.removeEvent)(i,In.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(a)}}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:NZ.default.findDOMNode(this)}},{key:"render",value:function(){return xv.cloneElement(xv.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),r}(xv.Component);Cp.default=Tp;yn(Tp,"displayName","DraggableCore");yn(Tp,"propTypes",{allowAnyClick:Zr.default.bool,disabled:Zr.default.bool,enableUserSelectHack:Zr.default.bool,offsetParent:function(t,r){if(t[r]&&t[r].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Zr.default.arrayOf(Zr.default.number),handle:Zr.default.string,cancel:Zr.default.string,nodeRef:Zr.default.object,onStart:Zr.default.func,onDrag:Zr.default.func,onStop:Zr.default.func,onMouseDown:Zr.default.func,scale:Zr.default.number,className:Ev.dontSetMe,style:Ev.dontSetMe,transform:Ev.dontSetMe});yn(Tp,"defaultProps",{allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),e.default=void 0;var t=w(C),r=g(ep),n=g(Sc),i=g(x2),a=Dt,l=Ti,u=ki,d=g(Cp),p=g(kp);function g(V){return V&&V.__esModule?V:{default:V}}function m(){if(typeof WeakMap!="function")return null;var V=new WeakMap;return m=function(){return V},V}function w(V){if(V&&V.__esModule)return V;if(V===null||x(V)!=="object"&&typeof V!="function")return{default:V};var ee=m();if(ee&&ee.has(V))return ee.get(V);var se={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in V)if(Object.prototype.hasOwnProperty.call(V,J)){var ne=X?Object.getOwnPropertyDescriptor(V,J):null;ne&&(ne.get||ne.set)?Object.defineProperty(se,J,ne):se[J]=V[J]}return se.default=V,ee&&ee.set(V,se),se}function x(V){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(se){return typeof se}:x=function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},x(V)}function O(){return O=Object.assign||function(V){for(var ee=1;ee<arguments.length;ee++){var se=arguments[ee];for(var X in se)Object.prototype.hasOwnProperty.call(se,X)&&(V[X]=se[X])}return V},O.apply(this,arguments)}function I(V,ee){if(V==null)return{};var se=P(V,ee),X,J;if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(V);for(J=0;J<ne.length;J++)X=ne[J],!(ee.indexOf(X)>=0)&&Object.prototype.propertyIsEnumerable.call(V,X)&&(se[X]=V[X])}return se}function P(V,ee){if(V==null)return{};var se={},X=Object.keys(V),J,ne;for(ne=0;ne<X.length;ne++)J=X[ne],!(ee.indexOf(J)>=0)&&(se[J]=V[J]);return se}function T(V,ee){return z(V)||$(V,ee)||R(V,ee)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(V,ee){if(V){if(typeof V=="string")return _(V,ee);var se=Object.prototype.toString.call(V).slice(8,-1);if(se==="Object"&&V.constructor&&(se=V.constructor.name),se==="Map"||se==="Set")return Array.from(V);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return _(V,ee)}}function _(V,ee){(ee==null||ee>V.length)&&(ee=V.length);for(var se=0,X=new Array(ee);se<ee;se++)X[se]=V[se];return X}function $(V,ee){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(V)))){var se=[],X=!0,J=!1,ne=void 0;try{for(var de=V[Symbol.iterator](),xe;!(X=(xe=de.next()).done)&&(se.push(xe.value),!(ee&&se.length===ee));X=!0);}catch(Oe){J=!0,ne=Oe}finally{try{!X&&de.return!=null&&de.return()}finally{if(J)throw ne}}return se}}function z(V){if(Array.isArray(V))return V}function H(V,ee){var se=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);ee&&(X=X.filter(function(J){return Object.getOwnPropertyDescriptor(V,J).enumerable})),se.push.apply(se,X)}return se}function q(V){for(var ee=1;ee<arguments.length;ee++){var se=arguments[ee]!=null?arguments[ee]:{};ee%2?H(Object(se),!0).forEach(function(X){ue(V,X,se[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(se)):H(Object(se)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(se,X))})}return V}function re(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")}function oe(V,ee){for(var se=0;se<ee.length;se++){var X=ee[se];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(V,X.key,X)}}function le(V,ee,se){return ee&&oe(V.prototype,ee),se&&oe(V,se),V}function we(V,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(ee&&ee.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),ee&&W(V,ee)}function W(V,ee){return W=Object.setPrototypeOf||function(X,J){return X.__proto__=J,X},W(V,ee)}function U(V){var ee=pe();return function(){var se=ce(V),X;if(ee){var J=ce(this).constructor;X=Reflect.construct(se,arguments,J)}else X=se.apply(this,arguments);return F(this,X)}}function F(V,ee){return ee&&(x(ee)==="object"||typeof ee=="function")?ee:be(V)}function be(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ce(V){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(se){return se.__proto__||Object.getPrototypeOf(se)},ce(V)}function ue(V,ee,se){return ee in V?Object.defineProperty(V,ee,{value:se,enumerable:!0,configurable:!0,writable:!0}):V[ee]=se,V}var me=function(V){we(se,V);var ee=U(se);le(se,null,[{key:"getDerivedStateFromProps",value:function(J,ne){var de=J.position,xe=ne.prevPropsPosition;return de&&(!xe||de.x!==xe.x||de.y!==xe.y)?((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:de,prevPropsPosition:xe}),{x:de.x,y:de.y,prevPropsPosition:q({},de)}):null}}]);function se(X){var J;return re(this,se),J=ee.call(this,X),ue(be(J),"onDragStart",function(ne,de){(0,p.default)("Draggable: onDragStart: %j",de);var xe=J.props.onStart(ne,(0,l.createDraggableData)(be(J),de));if(xe===!1)return!1;J.setState({dragging:!0,dragged:!0})}),ue(be(J),"onDrag",function(ne,de){if(!J.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",de);var xe=(0,l.createDraggableData)(be(J),de),Oe={x:xe.x,y:xe.y};if(J.props.bounds){var $e=Oe.x,_e=Oe.y;Oe.x+=J.state.slackX,Oe.y+=J.state.slackY;var Ye=(0,l.getBoundPosition)(be(J),Oe.x,Oe.y),ut=T(Ye,2),vt=ut[0],ze=ut[1];Oe.x=vt,Oe.y=ze,Oe.slackX=J.state.slackX+($e-Oe.x),Oe.slackY=J.state.slackY+(_e-Oe.y),xe.x=Oe.x,xe.y=Oe.y,xe.deltaX=Oe.x-J.state.x,xe.deltaY=Oe.y-J.state.y}var qe=J.props.onDrag(ne,xe);if(qe===!1)return!1;J.setState(Oe)}),ue(be(J),"onDragStop",function(ne,de){if(!J.state.dragging)return!1;var xe=J.props.onStop(ne,(0,l.createDraggableData)(be(J),de));if(xe===!1)return!1;(0,p.default)("Draggable: onDragStop: %j",de);var Oe={dragging:!1,slackX:0,slackY:0},$e=!!J.props.position;if($e){var _e=J.props.position,Ye=_e.x,ut=_e.y;Oe.x=Ye,Oe.y=ut}J.setState(Oe)}),J.state={dragging:!1,dragged:!1,x:X.position?X.position.x:X.defaultPosition.x,y:X.position?X.position.y:X.defaultPosition.y,prevPropsPosition:q({},X.position),slackX:0,slackY:0,isElementSVG:!1},X.position&&!(X.onDrag||X.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),J}return le(se,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:n.default.findDOMNode(this)}},{key:"render",value:function(){var J,ne=this.props;ne.axis,ne.bounds;var de=ne.children,xe=ne.defaultPosition,Oe=ne.defaultClassName,$e=ne.defaultClassNameDragging,_e=ne.defaultClassNameDragged,Ye=ne.position,ut=ne.positionOffset;ne.scale;var vt=I(ne,["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"]),ze={},qe=null,ct=!!Ye,at=!ct||this.state.dragging,st=Ye||xe,xt={x:(0,l.canDragX)(this)&&at?this.state.x:st.x,y:(0,l.canDragY)(this)&&at?this.state.y:st.y};this.state.isElementSVG?qe=(0,a.createSVGTransform)(xt,ut):ze=(0,a.createCSSTransform)(xt,ut);var Qe=(0,i.default)(de.props.className||"",Oe,(J={},ue(J,$e,this.state.dragging),ue(J,_e,this.state.dragged),J));return t.createElement(d.default,O({},vt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(de),{className:Qe,style:q(q({},de.props.style),ze),transform:qe}))}}]),se}(t.Component);e.default=me,ue(me,"displayName","Draggable"),ue(me,"propTypes",q(q({},d.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),ue(me,"defaultProps",q(q({},d.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}))})(OL);var $L=OL,FL=$L.default,UZ=$L.DraggableCore;jw.exports=FL;jw.exports.default=FL;var WZ=jw.exports.DraggableCore=UZ;const KZ=400,DL=C.memo(e=>{const{onDeselect:t,onDrag:r,onDragStart:n,onDragStop:i,onEdit:a,onSelect:l,passage:u,tagColors:d}=e,{t:p}=Ae(),g=C.useMemo(()=>Qt("passage-card",{empty:wO(u),selected:u.selected}),[u]),m=C.useRef(null),w=C.useMemo(()=>u.text.length>0?u.text.substring(0,KZ):y.jsx("span",{className:"placeholder",children:p(QJ==="touchOnly"?"components.passageCard.placeholderTouch":"components.passageCard.placeholderClick")}),[u.text,p]),x=C.useMemo(()=>({height:u.height,left:u.left,top:u.top,width:u.width}),[u.height,u.left,u.top,u.width]),O=C.useCallback(T=>{T.shiftKey||T.ctrlKey?u.selected?t(u):l(u,!1):u.selected||l(u,!0)},[t,l,u]),I=C.useCallback(()=>a(u),[a,u]),P=C.useCallback((T,N)=>{l(u,N)},[l,u]);return y.jsx(WZ,{nodeRef:m,onMouseDown:O,onStart:n,onDrag:r,onStop:i,children:y.jsx("div",{className:g,ref:m,style:x,"data-passage-tags":u.tags.join(" "),children:y.jsxs(Z0,{highlighted:u.highlighted,label:u.name,onDoubleClick:I,onSelect:P,selected:u.selected,children:[y.jsx(XP,{tagColors:d,tags:u.tags}),y.jsx("h2",{children:u.name}),y.jsx(hr,{children:w})]})})})});DL.displayName="PassageCard";const zL=C.memo(e=>{const{passages:t}=e,r=C.useMemo(()=>[...t].sort((n,i)=>n.top!==i.top?n.top-i.top:n.left-i.left),[t]);return y.jsx(cl,{component:null,children:r.map(n=>y.jsx(Ci,{classNames:"pop",timeout:200,children:y.jsx(DL,{passage:n,...e})},n.id))})});zL.displayName="PassageCardGroup";function GZ(e,t){switch(t.type){case"start":return{dragging:!0,dragX:t.x,dragY:t.y,startX:t.x,startY:t.y};case"move":return{...e,dragX:t.x,dragY:t.y};case"stop":return Promise.resolve().then(()=>t.callback({left:e.dragX-e.startX,top:e.dragY-e.startY})),{dragging:!1,dragX:0,dragY:0,startX:0,startY:0}}}const $C=.6,qZ=e=>{const{formatName:t,formatVersion:r,onDeselect:n,onDrag:i,onEdit:a,onSelect:l,passages:u,startPassageId:d,tagColors:p,visibleZoom:g,zoom:m}=e,[w,x]=C.useState(g<=$C),O=C.useRef(null),I=C.useMemo(()=>j3([...u,{top:0,left:0,width:0,height:0}]),[u]),P=C.useMemo(()=>({height:"calc(".concat(I.height,"px + max(50vh, ").concat(1e3/g,"px))"),width:"calc(".concat(I.width,"px + max(50vw, ").concat(1e3/g,"px))"),transform:"scale(".concat(g,")")}),[I.height,I.width,g]),[T,N]=C.useReducer(GZ,{dragging:!1,dragX:0,dragY:0,startX:0,startY:0}),R=C.useRef(!1);C.useEffect(()=>{m===g&&x(m<=$C)},[g,m]),C.useEffect(()=>{O.current&&(O.current.style.setProperty("--drag-offset-left","".concat((T.dragX-T.startX)/g,"px")),O.current.style.setProperty("--drag-offset-top","".concat((T.dragY-T.startY)/g,"px")))},[T.dragX,T.dragY,T.startX,T.startY,g]);const _=C.useCallback((q,re)=>{document.body.classList.add("dragging-passages"),N({type:"start",x:re.x,y:re.y})},[]),$=C.useCallback((q,re)=>N({type:"move",x:re.x,y:re.y}),[]),z=C.useCallback(()=>{document.body.classList.remove("dragging-passages"),N({type:"stop",callback:i}),R.current=!0,window.setTimeout(()=>{R.current=!1},0)},[i]),H=C.useCallback((q,re)=>{R.current||l(q,re)},[l]);return y.jsxs("div",{className:Qt("passage-map",{"compact-passage-cards":w}),ref:O,style:P,children:[y.jsx(WJ,{formatName:t,formatVersion:r,offset:{left:(T.dragX-T.startX)/m,top:(T.dragY-T.startY)/m},passages:u,startPassageId:d}),y.jsx(zL,{onDeselect:n,onDragStart:_,onDrag:$,onDragStop:z,onEdit:a,onSelect:H,passages:u,tagColors:p})]})},VZ=e=>{const{container:t,onSelectRect:r,...n}=e,[i,a]=C.useState(),[l,u]=C.useState(),d=C.useMemo(()=>i?e.passages.map(m=>{if(l&&m.selected)return m;const w=Bh(i,m);return w===m.selected?m:{...m,selected:w}}):e.passages,[e.passages,l,i]),p=C.useCallback((m,w)=>{a({height:m.height/e.zoom,left:m.left/e.zoom,top:m.top/e.zoom,width:m.width/e.zoom}),u(w)},[e.zoom]),g=C.useCallback((m,w)=>{a(void 0),u(void 0),r(m,w)},[r]);return y.jsxs(y.Fragment,{children:[y.jsx($J,{container:t,ignoreEventsOnSelector:".passage-card, .fuzzy-finder, .zoom-buttons",onSelectRect:g,onTemporarySelectRect:p}),y.jsx(qZ,{...n,passages:d})]})};/*!
 * hotkeys-js v3.8.7
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * Copyright (c) 2021 kenny wong <wowohoo@qq.com>
 * http://jaywcjlove.github.io/hotkeys
 * 
 * Licensed under the MIT license.
 */var Sv=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Cv(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on".concat(t),function(){r(window.event)})}function BL(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function HL(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function XZ(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,i=!0,a=0;a<r.length;a++)n.indexOf(r[a])===-1&&(i=!1);return i}var UL={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Sv?173:189,"=":Sv?61:187,";":Sv?59:186,"'":222,"[":219,"]":221,"\\":220},_a={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},FC={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},fr={16:!1,18:!1,17:!1,91:!1},rr={};for(var Zf=1;Zf<20;Zf++)UL["f".concat(Zf)]=111+Zf;var Nt=[],WL="all",KL=[],Op=function(t){return UL[t.toLowerCase()]||_a[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function GL(e){WL=e||"all"}function dc(){return WL||"all"}function YZ(){return Nt.slice(0)}function QZ(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return(t.isContentEditable||(r==="INPUT"||r==="TEXTAREA"||r==="SELECT")&&!t.readOnly)&&(n=!1),n}function JZ(e){return typeof e=="string"&&(e=Op(e)),Nt.indexOf(e)!==-1}function ZZ(e,t){var r,n;e||(e=dc());for(var i in rr)if(Object.prototype.hasOwnProperty.call(rr,i))for(r=rr[i],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;dc()===e&&GL(t||"all")}function eee(e){var t=e.keyCode||e.which||e.charCode,r=Nt.indexOf(t);if(r>=0&&Nt.splice(r,1),e.key&&e.key.toLowerCase()==="meta"&&Nt.splice(0,Nt.length),(t===93||t===224)&&(t=91),t in fr){fr[t]=!1;for(var n in _a)_a[n]===t&&(an[n]=!1)}}function tee(e){if(!e)Object.keys(rr).forEach(function(l){return delete rr[l]});else if(Array.isArray(e))e.forEach(function(l){l.key&&kv(l)});else if(typeof e=="object")e.key&&kv(e);else if(typeof e=="string"){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=r[0],a=r[1];typeof i=="function"&&(a=i,i=""),kv({key:e,scope:i,method:a,splitKey:"+"})}}var kv=function(t){var r=t.key,n=t.scope,i=t.method,a=t.splitKey,l=a===void 0?"+":a,u=HL(r);u.forEach(function(d){var p=d.split(l),g=p.length,m=p[g-1],w=m==="*"?"*":Op(m);if(rr[w]){n||(n=dc());var x=g>1?BL(_a,p):[];rr[w]=rr[w].map(function(O){var I=i?O.method===i:!0;return I&&O.scope===n&&XZ(O.mods,x)?{}:O})}})};function DC(e,t,r){var n;if(t.scope===r||t.scope==="all"){n=t.mods.length>0;for(var i in fr)Object.prototype.hasOwnProperty.call(fr,i)&&(!fr[i]&&t.mods.indexOf(+i)>-1||fr[i]&&t.mods.indexOf(+i)===-1)&&(n=!1);(t.mods.length===0&&!fr[16]&&!fr[18]&&!fr[17]&&!fr[91]||n||t.shortcut==="*")&&t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function zC(e){var t=rr["*"],r=e.keyCode||e.which||e.charCode;if(an.filter.call(this,e)){if((r===93||r===224)&&(r=91),Nt.indexOf(r)===-1&&r!==229&&Nt.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(x){var O=FC[x];e[x]&&Nt.indexOf(O)===-1?Nt.push(O):!e[x]&&Nt.indexOf(O)>-1?Nt.splice(Nt.indexOf(O),1):x==="metaKey"&&e[x]&&Nt.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(Nt=Nt.slice(Nt.indexOf(O))))}),r in fr){fr[r]=!0;for(var n in _a)_a[n]===r&&(an[n]=!0);if(!t)return}for(var i in fr)Object.prototype.hasOwnProperty.call(fr,i)&&(fr[i]=e[FC[i]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(Nt.indexOf(17)===-1&&Nt.push(17),Nt.indexOf(18)===-1&&Nt.push(18),fr[17]=!0,fr[18]=!0);var a=dc();if(t)for(var l=0;l<t.length;l++)t[l].scope===a&&(e.type==="keydown"&&t[l].keydown||e.type==="keyup"&&t[l].keyup)&&DC(e,t[l],a);if(r in rr){for(var u=0;u<rr[r].length;u++)if((e.type==="keydown"&&rr[r][u].keydown||e.type==="keyup"&&rr[r][u].keyup)&&rr[r][u].key){for(var d=rr[r][u],p=d.splitKey,g=d.key.split(p),m=[],w=0;w<g.length;w++)m.push(Op(g[w]));m.sort().join("")===Nt.sort().join("")&&DC(e,d,a)}}}}function ree(e){return KL.indexOf(e)>-1}function an(e,t,r){Nt=[];var n=HL(e),i=[],a="all",l=document,u=0,d=!1,p=!0,g="+";for(r===void 0&&typeof t=="function"&&(r=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(a=t.scope),t.element&&(l=t.element),t.keyup&&(d=t.keyup),t.keydown!==void 0&&(p=t.keydown),typeof t.splitKey=="string"&&(g=t.splitKey)),typeof t=="string"&&(a=t);u<n.length;u++)e=n[u].split(g),i=[],e.length>1&&(i=BL(_a,e)),e=e[e.length-1],e=e==="*"?"*":Op(e),e in rr||(rr[e]=[]),rr[e].push({keyup:d,keydown:p,scope:a,mods:i,shortcut:n[u],method:r,key:n[u],splitKey:g});typeof l<"u"&&!ree(l)&&window&&(KL.push(l),Cv(l,"keydown",function(m){zC(m)}),Cv(window,"focus",function(){Nt=[]}),Cv(l,"keyup",function(m){zC(m),eee(m)}))}var Tv={setScope:GL,getScope:dc,deleteScope:ZZ,getPressedKeyCodes:YZ,isPressed:JZ,filter:QZ,unbind:tee};for(var Ov in Tv)Object.prototype.hasOwnProperty.call(Tv,Ov)&&(an[Ov]=Tv[Ov]);if(typeof window<"u"){var nee=window.hotkeys;an.noConflict=function(e){return e&&window.hotkeys===an&&(window.hotkeys=nee),an},window.hotkeys=an}an.filter=function(){return!0};var qL=function(t,r){var n=t.target,i=n&&n.tagName;return!!(i&&r&&r.includes(i))},iee=function(t){return qL(t,["INPUT","TEXTAREA","SELECT"])};function xo(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var i=r||{},a=i.enableOnTags,l=i.filter,u=i.keyup,d=i.keydown,p=i.filterPreventDefault,g=p===void 0?!0:p,m=i.enabled,w=m===void 0?!0:m,x=i.enableOnContentEditable,O=x===void 0?!1:x,I=C.useRef(null),P=C.useCallback(function(T,N){var R;return l&&!l(T)?!g:iee(T)&&!qL(T,a)||(R=T.target)!=null&&R.isContentEditable&&!O?!0:I.current===null||document.activeElement===I.current?(t(T,N),!0):!1},n?[I,a,l].concat(n):[I,a,l]);return C.useEffect(function(){if(!w){an.unbind(e,P);return}return u&&d!==!0&&(r.keydown=!1),an(e,r||{},P),function(){return an.unbind(e,P)}},[P,e,w]),I}an.isPressed;const oee=e=>{const{detail:t,heading:r,onClick:n,selected:i}=e;return y.jsxs("button",{className:Qt("fuzzy-finder-result",{selected:i}),onClick:n,children:[y.jsx(H_,{}),y.jsx("span",{className:"heading",children:r}),y.jsx("span",{className:"detail",children:t})]})};function ed(e){return!!(e&&document.activeElement===e)}const aee=e=>{const{noResultsText:t,onChangeSearch:r,onClose:n,onSelectResult:i,prompt:a,search:l,results:u}=e,[d,p]=C.useState(0),g=C.useRef(null),m=C.useRef(null);return xo("escape",n,{enableOnTags:["INPUT"],filter:()=>ed(m.current)},[n]),xo("return",()=>i(d),{enableOnTags:["INPUT"],filter:()=>ed(m.current)},[i,d]),xo("up",()=>p(w=>w===0?u.length-1:w-1),{enableOnTags:["INPUT"],filter:()=>ed(m.current)},[i,d]),xo("down",()=>p(w=>w===u.length-1?0:w+1),{enableOnTags:["INPUT"],filter:()=>ed(m.current)},[i,d]),C.useEffect(()=>{const w=window.setTimeout(()=>{var x;g.current&&((x=g.current.querySelector("input"))==null||x.focus())},0);return()=>window.clearTimeout(w)},[]),y.jsx("div",{className:"fuzzy-finder",ref:g,children:y.jsxs(zo,{children:[y.jsxs("div",{className:"search",children:[y.jsx(lc,{onChange:w=>r(w.target.value),ref:m,value:l,children:a}),y.jsx(De,{icon:y.jsx(Rn,{}),iconOnly:!0,label:"Close",onClick:n,tooltipPosition:"bottom"})]}),y.jsxs("div",{className:Qt("results",{"has-results":u.length>0}),children:[l.length>0&&u.length===0&&y.jsx("div",{className:"no-results",children:t}),l.length>0&&u.length>0&&y.jsx("ol",{children:u.map((w,x)=>y.jsx("li",{children:y.jsx(oee,{...w,onClick:()=>i(x),selected:x===d})},w.heading))})]})]})})},see=e=>{const{onClose:t,onOpen:r,open:n,setCenter:i,story:a}=e,{dispatch:l}=Tt(),[u,d]=C.useState(""),[p,g]=C.useState(""),m=C.useMemo(()=>gL(T=>{g(T)},100,{leading:!0,trailing:!0}),[]),w=C.useMemo(()=>fH(a.passages,p),[p,a.passages]),x=C.useMemo(()=>w.map(({name:T,text:N})=>({heading:T,detail:N})),[w]);xo("p",r);const{t:O}=Ae();function I(T){d(T),m(T)}function P(T){i(w[T]),l(bO(a,w[T],!0)),d(""),t()}return y.jsx(Ci,{classNames:"pop",mountOnEnter:!0,timeout:200,unmountOnExit:!0,in:n,children:y.jsx(aee,{noResultsText:O("components.passageFuzzyFinder.noResults"),onClose:t,onChangeSearch:I,onSelectResult:P,prompt:O("components.passageFuzzyFinder.prompt"),search:u,results:x})})};const lee=e=>{const{getCenter:t,story:r}=e,{dispatch:n}=pn(),i=C.useCallback(()=>{const{left:l,top:u}=t();n(rO(r,l,u),"undoChange.newPassage")},[n,t,r]),{t:a}=Ae();return y.jsx(De,{icon:y.jsx(Ks,{}),label:a("common.new"),onClick:i})},uee=e=>{const{passages:t,story:r}=e,{dispatch:n}=pn(),{t:i}=Ae(),a=C.useMemo(()=>t.length===0?!0:t.some(u=>r.startPassage===u.id),[t,r.startPassage]),l=C.useCallback(()=>{t.length!==0&&n(oB(r,t),t.length>1?"undoChange.deletePassages":"undoChange.deletePassage")},[n,t,r]);return xo("Backspace,Delete",l,[l]),y.jsx(De,{disabled:a,icon:y.jsx(Qd,{}),label:!a&&t.length>1?i("common.deleteCount",{count:t.length}):i("common.delete"),onClick:l})},cee=e=>{const{passages:t,story:r}=e,{dispatch:n}=Gr(),{t:i}=Ae();function a(){n(mw(r.id,t.map(({id:l})=>l),e.variableMap))}return y.jsx(De,{disabled:t.length===0,icon:y.jsx(c2,{}),label:t.length>1?i("common.editCount",{count:t.length}):i("common.edit"),onClick:a})},fee=e=>{const{onOpenFuzzyFinder:t}=e,{t:r}=Ae();return y.jsx(De,{icon:y.jsx(sM,{}),label:r("routes.storyEdit.toolbar.goTo"),onClick:t})},dee=e=>{const{story:t}=e,{dispatch:r}=Tt(),{t:n}=Ae();return y.jsx(De,{icon:y.jsx(EM,{}),label:n("common.selectAll"),onClick:()=>r(EH(t))})},hee=e=>{const{passage:t,story:r}=e,{dispatch:n,stories:i}=Tt(),{t:a}=Ae();function l(){if(!t)throw new Error("No passage set");n(jr(i,r,{startPassage:t.id}))}return y.jsx(De,{disabled:!t||t.id===r.startPassage,icon:y.jsx($M,{}),label:a("routes.storyEdit.toolbar.startStoryHere"),onClick:l})},pee=e=>{const{getCenter:t,onOpenFuzzyFinder:r,story:n,variableMap:i}=e,{dispatch:a}=Tt(),l=C.useMemo(()=>n.passages.filter(p=>p.selected),[n.passages]),u=C.useMemo(()=>l.length===1?l[0]:void 0,[l]);function d(p,g){if(!g)throw new Error("Passage is unset");a(Ro(n,g,{name:p},{dontUpdateOthers:!0}))}return y.jsxs(Ft,{children:[y.jsx(lee,{getCenter:t,story:n}),y.jsx(cee,{passages:l,story:n,variableMap:i}),y.jsx(GP,{onRename:p=>d(p,u),passage:u,story:n}),y.jsx(uee,{passages:l,story:n}),y.jsx(QP,{passage:u,story:n}),y.jsx(hee,{passage:u,story:n}),y.jsx(fee,{onOpenFuzzyFinder:r}),y.jsx(dee,{story:n})]})},gee=()=>{const{t:e}=Ae();return y.jsx(De,{disabled:!0,icon:y.jsx(Cc,{}),label:e("common.rename")})},vee=e=>{const{existingStories:t,onRename:r,story:n}=e,[i,a]=C.useState(n.name),{t:l}=Ae();C.useEffect(()=>a(n.name),[n]);function u(d){return d.trim()===""?{message:l("components.renameStoryButton.emptyName"),valid:!1}:t.some(p=>p.id!==n.id&&zr(p)===zr({...n,name:d}))?{message:l("components.renameStoryButton.nameAlreadyUsed"),valid:!1}:{valid:!0}}return y.jsx(Rc,{icon:y.jsx(Cc,{}),label:l("common.rename"),onChange:d=>a(d.target.value),onSubmit:r,prompt:l("common.renamePrompt",{name:n.name}),validate:u,value:i})},VL=e=>e.story?y.jsx(vee,{...e}):y.jsx(gee,{}),mee=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ae();return y.jsx(De,{icon:y.jsx(xm,{}),label:n("common.details"),onClick:()=>r({type:"addDialog",component:AQ,props:{storyId:t.id}})})},yee=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ae();return y.jsx(De,{icon:y.jsx(DM,{}),label:n("routes.storyEdit.toolbar.findAndReplace"),onClick:()=>r({type:"addDialog",component:rJ,props:{find:"",flags:{includePassageNames:!0,matchCase:!1,useRegexes:!1},replace:"",storyId:t.id}})})},wee=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ae();return y.jsx(De,{icon:y.jsx(__,{}),label:n("routes.storyEdit.toolbar.javaScript"),onClick:()=>r({type:"addDialog",component:TQ,props:{storyId:t.id}})})},bee=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ae();return y.jsx(De,{icon:y.jsx(v2,{}),label:n("routes.storyEdit.toolbar.passageTags"),onClick:()=>r({type:"addDialog",component:$V,props:{storyId:t.id}})})},xee=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ae();return y.jsx(De,{icon:y.jsx(fM,{}),label:n("routes.storyEdit.toolbar.stylesheet"),onClick:()=>r({type:"addDialog",component:nJ,props:{storyId:t.id}})})},Eee=e=>{const{dispatch:t,stories:r}=Tt(),{story:n}=e;return y.jsxs(Ft,{children:[y.jsx(yee,{story:n}),y.jsx(VL,{existingStories:r,onRename:i=>t(jr(r,n,{name:i})),story:n}),y.jsx(mee,{story:n}),y.jsx(bee,{story:n}),y.jsx(wee,{story:n}),y.jsx(xee,{story:n})]})},See=()=>{const{redo:e,redoLabel:t,undo:r,undoLabel:n}=pn(),{t:i}=Ae();return y.jsxs(y.Fragment,{children:[y.jsx(De,{disabled:!r,icon:y.jsx(s2,{}),label:n!=null?n:i("common.undo"),onClick:r}),y.jsx(De,{disabled:!e,icon:y.jsx(l2,{}),label:t!=null?t:i("common.redo"),onClick:e})]})};const XL=C.memo(({story:e})=>{const{dispatch:t,stories:r}=Tt(),{t:n}=Ae(),i=C.useCallback(a=>{t(jr(r,e,{zoom:a}))},[t,r,e]);return y.jsxs("div",{className:"zoom-buttons",children:[y.jsx("span",{className:"legend",children:n("routes.storyEdit.zoomButtons.legend")}),y.jsx(De,{icon:y.jsx(p2,{}),iconOnly:!0,label:n("routes.storyEdit.zoomButtons.passageNamesAndExcerpts"),onClick:()=>i(1),selectable:!0,selected:e.zoom===1}),y.jsx(De,{icon:y.jsx(bM,{}),iconOnly:!0,label:n("routes.storyEdit.zoomButtons.passageNames"),onClick:()=>i(.6),selectable:!0,selected:e.zoom===.6}),y.jsx(De,{icon:y.jsx(uM,{}),iconOnly:!0,label:n("routes.storyEdit.zoomButtons.storyStructure"),onClick:()=>i(.3),selectable:!0,selected:e.zoom===.3})]})});XL.displayName="ZoomButtons";const Cee=e=>{const{getCenter:t,onOpenFuzzyFinder:r,story:n,variableMap:i}=e,{t:a}=Ae();return y.jsx(Lw,{pinnedControls:y.jsxs(y.Fragment,{children:[y.jsx(XL,{story:n}),y.jsx(See,{})]}),tabs:{[a("common.passage")]:y.jsx(pee,{getCenter:t,onOpenFuzzyFinder:r,story:n,variableMap:i}),[a("common.story")]:y.jsx(Eee,{story:n}),[a("common.build")]:y.jsx(EL,{story:n}),[a("common.appName")]:y.jsx(Nw,{})}})};function kee(e,t){const{dispatch:r}=pn(),[n,i]=C.useState(!1);C.useEffect(()=>{if(!n&&(i(!0),e.passages.length===0)){const a=t();r(rO(e,a.left,a.top))}},[r,t,n,e])}function Tee(e){const{editorExtensions:t}=dw(e.storyFormat,e.storyFormatVersion),r=C.useMemo(()=>new Oee,[e.id,t]),n=C.useMemo(()=>new WeakSet,[r]);return C.useEffect(()=>{var a;const i=(a=t==null?void 0:t.variables)==null?void 0:a.parseDefinitions;if(i)for(const l of e.passages)n.has(l)||(n.add(l),r.resetPassage(l,i(l.text)))},[t,e.passages,r]),r}class Oee{constructor(){bf(this,"natives",new Map);bf(this,"globals",new Map);bf(this,"locals",new Map)}variablesForPassage(t){const r=this.locals.get(t.id),n=r.map(i=>i.name);return console.log("variablesForPassage",{id:t.id,locals:r,names:n}),[...r.sort(Pv),...Array.from(this.globals.values()).filter(i=>!n.includes(i.name)).sort(Pv),...Array.from(this.natives.values()).sort(Pv)]}resetPassage(t,r){const n=this.locals.get(t.id),i=[];this.locals.set(t.id,i);for(const a of r)if(typeof a=="string")this.natives.has(a)||this.natives.set(a,{name:a,definitions:[]});else{const{name:l}=a;console.log("onPassageVariable",{id:t.id,token:a});const u={...a,passage:t},d=this.globals.get(l)||i.find(p=>p.name===l)||(n==null?void 0:n.find(p=>p.name===l))||{name:l,definitions:[]};u.expression&&(d.definitions.push(u),i.includes(d)||i.push(d)),u.local||this.globals.set(l,d)}n==null||n.forEach(a=>{i.includes(a)||(a.definitions=a.definitions.filter(l=>{var u;return((u=l.passage)==null?void 0:u.id)!==t.id}),a.definitions.length===0&&this.globals.delete(a.name))})}}function Pv(e,t){return e.name.localeCompare(t.name)}function Pee(e,t){const r=C.useMemo(()=>e.passages.filter(g=>g.selected),[e.passages]),{dispatch:n}=pn(),{dispatch:i}=Gr(),a=C.useCallback(g=>n(xH(e,g)),[e,n]),l=C.useCallback(g=>{Math.abs(g.left)<1&&Math.abs(g.top)<1||n(yH(e,e.passages.reduce((m,w)=>w.selected?[...m,w.id]:m,[]),g.left/e.zoom,g.top/e.zoom),(r.length>1,"undoChange.movePassages"))},[r.length,e,n]),u=C.useCallback(g=>i(mw(e.id,[g.id],t)),[i,e.id,t]),d=C.useCallback((g,m)=>n(bO(e,g,m)),[e,n]),p=C.useCallback((g,m)=>{const w={height:g.height/e.zoom,left:g.left/e.zoom,top:g.top/e.zoom,width:g.width/e.zoom};n(SH(e,w,m?r.map(x=>x.id):[]))},[r,e,n]);return{handleDeselectPassage:a,handleDragPassages:l,handleEditPassage:u,handleSelectPassage:d,handleSelectRect:p}}function Lee(e,t){const{dialogs:r}=Gr(),{prefs:n}=pt(),i=C.useCallback(()=>{if(!t.current)throw new Error("Asked for the center of an element, but it does not exist in the DOM yet");return{left:(t.current.scrollLeft+t.current.clientWidth/2)/e.zoom,top:(t.current.scrollTop+t.current.clientHeight/2)/e.zoom}},[t,e.zoom]),a=C.useCallback(({left:l,top:u})=>{if(!t.current)throw new Error("Asked to set the center of an element, but it does not exist in the DOM yet");const{height:d,width:p}=t.current.getBoundingClientRect(),g={left:(l-p/e.zoom/2)*e.zoom,top:(u-d/e.zoom/2)*e.zoom};r.length>0&&(g.left+=n.dialogWidth/2),t.current.scrollTo(g)},[r.length,t,n.dialogWidth,e.zoom]);return{getCenter:i,setCenter:a}}function Nee(e){const{dispatch:t,stories:r}=Tt();xo("-",()=>{switch(e.zoom){case 1:t(jr(r,e,{zoom:.6}));break;case .6:t(jr(r,e,{zoom:.3}));break}},{keydown:!1,keyup:!0},[t,r,e]),xo("=",()=>{switch(e.zoom){case .3:t(jr(r,e,{zoom:.6}));break;case .6:t(jr(r,e,{zoom:1}));break}},{keydown:!1,keyup:!0},[t,r,e])}function Aee(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}var jee=Aee;function Iee(e){var t=1.70158;return e*e*((t+1)*e-t)}var _ee=Iee;function Mee(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}var Ree=Mee;function $ee(e){var t=.36363636363636365,r=8/11,n=9/10,i=4356/361,a=35442/1805,l=16061/1805,u=e*e;return e<t?7.5625*u:e<r?9.075*u-9.9*e+3.4:e<n?i*u-a*e+l:10.8*e*e-20.52*e+10.72}var Rw=$ee,BC=Rw;function Fee(e){return e<.5?.5*(1-BC(1-e*2)):.5*BC(e*2-1)+.5}var Dee=Fee,zee=Rw;function Bee(e){return 1-zee(1-e)}var Hee=Bee;function Uee(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}var Wee=Uee;function Kee(e){return 1-Math.sqrt(1-e*e)}var Gee=Kee;function qee(e){return Math.sqrt(1- --e*e)}var Vee=qee;function Xee(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}var Yee=Xee;function Qee(e){return e*e*e}var Jee=Qee;function Zee(e){var t=e-1;return t*t*t+1}var ete=Zee;function tte(e){return e<.5?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}var rte=tte;function nte(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}var ite=nte;function ote(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}var ate=ote;function ste(e){return e===0||e===1?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-e*20)+1}var lte=ste;function ute(e){return e===0?e:Math.pow(2,10*(e-1))}var cte=ute;function fte(e){return e===1?e:1-Math.pow(2,-10*e)}var dte=fte;function hte(e){return e}var pte=hte;function gte(e){return e/=.5,e<1?.5*e*e:(e--,-.5*(e*(e-2)-1))}var vte=gte;function mte(e){return e*e}var yte=mte;function wte(e){return-e*(e-2)}var bte=wte;function xte(e){return e<.5?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}var Ete=xte;function Ste(e){return Math.pow(e,4)}var Cte=Ste;function kte(e){return Math.pow(e-1,3)*(1-e)+1}var Tte=kte;function Ote(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}var Pte=Ote;function Lte(e){return e*e*e*e*e}var Nte=Lte;function Ate(e){return--e*e*e*e*e+1}var jte=Ate;function Ite(e){return-.5*(Math.cos(Math.PI*e)-1)}var _te=Ite;function Mte(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}var Rte=Mte;function $te(e){return Math.sin(e*Math.PI/2)}var Fte=$te,Dte={backInOut:jee,backIn:_ee,backOut:Ree,bounceInOut:Dee,bounceIn:Hee,bounceOut:Rw,circInOut:Wee,circIn:Gee,circOut:Vee,cubicInOut:Yee,cubicIn:Jee,cubicOut:ete,elasticInOut:rte,elasticIn:ite,elasticOut:ate,expoInOut:lte,expoIn:cte,expoOut:dte,linear:pte,quadInOut:vte,quadIn:yte,quadOut:bte,quartInOut:Ete,quartIn:Cte,quartOut:Tte,quintInOut:Pte,quintIn:Nte,quintOut:jte,sineInOut:_te,sineIn:Rte,sineOut:Fte};function zte(e,t,r,n){let i;if(n<1)return i=t+r*Dte.quadOut(n),e(i),i;e(t+r)}function Bte(e,t){const[r,n]=C.useState(e),i=C.useRef(),a=C.useCallback(()=>{i.current&&window.requestAnimationFrame(l=>{const u=i.current;if(u.lastTimestamp){u.elapsed+=(l-u.lastTimestamp)/500,u.lastTimestamp=l;const d=zte(n,u.zoom.start,u.zoom.change,u.elapsed);if(d){const p=u.scrollNormalizedCenter.left*d-u.scrollCenter.width,g=u.scrollNormalizedCenter.top*d-u.scrollCenter.height;p>=0&&g>=0&&(u.scrollTarget.scrollLeft=p,u.scrollTarget.scrollTop=g),a()}else i.current=void 0}else u.lastTimestamp=l,a()})},[]);return C.useEffect(()=>{!i.current&&r!==e&&t&&(i.current={scrollTarget:t,elapsed:0,scrollNormalizedCenter:{left:(t.scrollLeft+t.clientWidth/2)/r,top:(t.scrollTop+t.clientHeight/2)/r},scrollCenter:{height:t.clientHeight/2,width:t.clientWidth/2},zoom:{start:r,change:e-r}},window.requestAnimationFrame(a))},[r,t,a,e]),r}const Hte=()=>{const{storyId:e}=dp(),{stories:t}=pn(),r=yt(t,e),n=Tee(r),[i,a]=C.useState(!1),l=C.useRef(null),{getCenter:u,setCenter:d}=Lee(r,l),{handleDeselectPassage:p,handleDragPassages:g,handleEditPassage:m,handleSelectPassage:w,handleSelectRect:x}=Pee(r,n),O=Bte(r.zoom,l.current);return Nee(r),kee(r,u),y.jsxs("div",{className:"story-edit-route",children:[y.jsx(bP,{title:r.name}),y.jsx(Cee,{getCenter:u,onOpenFuzzyFinder:()=>a(!0),story:r,variableMap:n}),y.jsxs(J0,{grabbable:!0,padded:!1,ref:l,children:[y.jsx(VZ,{container:l,formatName:r.storyFormat,formatVersion:r.storyFormatVersion,onDeselect:p,onDrag:g,onEdit:m,onSelect:w,onSelectRect:x,passages:r.passages,startPassageId:r.startPassage,tagColors:r.tagColors,visibleZoom:O,zoom:r.zoom}),y.jsx(see,{onClose:()=>a(!1),onOpen:()=>a(!0),open:i,setCenter:d,story:r})]})]})},Ute=()=>y.jsx(jP,{children:y.jsx(xw,{children:y.jsx(Hte,{})})});var Wte=hL,HC=Wn;function Kte(e,t,r,n){return e==null?[]:(HC(t)||(t=t==null?[]:[t]),r=n?void 0:r,HC(r)||(r=r==null?[]:[r]),Wte(e,t,r))}var Gte=Kte;const UC=kt(Gte),qte=1e3*60*60*24*14;function Vte(){const{prefs:e}=pt();return{shouldShowDonationPrompt:C.useCallback(()=>e.donateShown?!1:Date.now()>e.firstRunTime+qte,[e.donateShown,e.firstRunTime])}}const Xte=e=>{var g;const{watch:t}=e,[r,n]=C.useState(),[i,a]=C.useState(!1),[l,u]=C.useState(),{t:d}=Ae(),p=Da()||!((g=navigator.storage)!=null&&g.estimate);return C.useEffect(()=>{async function m(){a(!0);const{quota:w,usage:x}=await navigator.storage.estimate();w!==void 0&&x!==void 0&&u(((1-x/w)*100).toFixed(0)),n(t),a(!1)}!p&&!i&&r!==t&&m()},[p,r,t,i]),p?null:y.jsx("span",{className:"storage-quota",children:l&&d("components.storageQuota.freeSpace",{percent:l})})},Yte=()=>{const{stories:e}=Tt(),{t}=Ae();return y.jsx(De,{icon:y.jsx(TM,{}),label:t("routes.storyList.toolbar.archive"),onClick:()=>xL(UO(e,bn()),P8())})},Qte=()=>{const{dispatch:e}=Gr(),{t}=Ae();return y.jsx(De,{icon:y.jsx(f2,{}),label:t("common.import"),onClick:()=>e({type:"addDialog",component:kQ})})},Jte=()=>{const{dispatch:e}=Gr(),{t}=Ae();return y.jsx(De,{icon:y.jsx(v2,{}),label:t("routes.storyList.toolbar.storyTags"),onClick:()=>{e({type:"addDialog",component:iJ})}})},Zte=()=>y.jsxs(Ft,{children:[y.jsx(Jte,{}),y.jsx(Qte,{}),y.jsx(Yte,{})]}),ere=()=>{const{dispatch:e,stories:t}=Tt(),[r,n]=C.useState(Yu(tl().name,t.map(p=>p.name))),i=ul(),{prefs:a}=pt(),{t:l}=Ae();function u(p){return p.trim()===""?{valid:!1,message:l("routes.storyList.toolbar.createStoryButton.emptyName")}:t.some(g=>g.name.toLowerCase()===p.toLowerCase())?{valid:!1,message:l("routes.storyList.toolbar.createStoryButton.nameConflict")}:{valid:!0}}function d(){const p=iB(t,a,{name:r})(e,()=>t);i.push("/stories/".concat(p))}return y.jsx(Rc,{icon:y.jsx(Ks,{}),label:l("common.new"),submitLabel:l("common.create"),submitVariant:"create",onChange:p=>n(p.target.value),onSubmit:d,prompt:l("routes.storyList.toolbar.createStoryButton.prompt"),validate:u,value:r})};const tre=e=>{const{cancelIcon:t,cancelLabel:r,confirmIcon:n,confirmLabel:i,confirmVariant:a,onConfirm:l,prompt:u,...d}=e,[p,g]=C.useState(!1),{t:m}=Ae();function w(){g(!1),l()}return y.jsx("span",{className:"confirm-button",children:y.jsx(wa,{ariaLabel:u,focusSelector:"button:nth-child(2)",onChangeOpen:g,open:p,...d,children:y.jsxs("div",{children:[y.jsx(hr,{children:u}),y.jsxs(Ft,{children:[y.jsx(De,{icon:n!=null?n:y.jsx(d0,{}),label:i!=null?i:m("common.ok"),onClick:w,variant:a!=null?a:"primary"}),y.jsx(De,{icon:t!=null?t:y.jsx(Rn,{}),label:r!=null?r:m("common.cancel"),onClick:()=>g(!1)})]})]})})})},rre=({story:e})=>{const[t,r]=C.useState(e==null?void 0:e.name),{dispatch:n}=Tt(),{t:i}=Ae();return C.useEffect(()=>{e!=null&&e.name&&r(e.name)},[e==null?void 0:e.name]),y.jsx(tre,{confirmIcon:y.jsx(Qd,{}),confirmLabel:i("common.delete"),confirmVariant:"danger",disabled:!e,icon:y.jsx(Qd,{}),label:i("common.delete"),onConfirm:e?()=>n(aB(e)):()=>{},prompt:i("routes.storyList.toolbar.deleteStoryButton.warning.".concat(Da()?"electron":"web"),{storyName:t})})},nre=({story:e})=>{const{dispatch:t,stories:r}=Tt(),{t:n}=Ae();function i(){if(!e)throw new Error("No story set");t(sB(e,r))}return y.jsx(De,{disabled:!e,icon:y.jsx(V_,{}),label:n("common.duplicate"),onClick:i})},ire=({story:e})=>{const t=ul(),{t:r}=Ae();return y.jsx(De,{disabled:!e,icon:y.jsx(c2,{}),label:r("common.edit"),onClick:()=>t.push("/stories/".concat(e==null?void 0:e.id))})},ore=e=>{var u;const{story:t}=e,{dispatch:r,prefs:n}=pt(),{dispatch:i,stories:a}=Tt();function l(d,p){if(!t)throw new Error("Story is unset");i(jr(a,t,{tags:t.tags?[...t.tags,d]:[d]})),p&&r(tr("storyTagColors",{...n.storyTagColors,[d]:p}))}return y.jsx(qP,{assignedTags:(u=t==null?void 0:t.tags)!=null?u:[],disabled:!t,existingTags:k0(a),icon:y.jsx(g2,{}),onAdd:l})},are=e=>{const{selectedStory:t}=e,{dispatch:r,stories:n}=Tt();return y.jsxs(Ft,{children:[y.jsx(ere,{}),y.jsx(ire,{story:t}),y.jsx(ore,{story:t}),y.jsx(VL,{existingStories:n,onRename:i=>r(jr(n,t,{name:i})),story:t}),y.jsx(nre,{story:t}),y.jsx(rre,{story:t})]})},sre=()=>{const{t:e}=Ae(),{dispatch:t,prefs:r}=pt();return y.jsx(Mc,{icon:y.jsx(N_,{}),items:[{checkable:!0,checked:r.storyListSort==="date",label:e("routes.storyList.toolbar.sortByDate"),onClick:()=>t(tr("storyListSort","date"))},{checkable:!0,checked:r.storyListSort==="name",label:e("routes.storyList.toolbar.sortByName"),onClick:()=>t(tr("storyListSort","name"))}],label:e("routes.storyList.toolbar.sort")})},lre=e=>{const{dispatch:t,prefs:r}=pt(),{t:n}=Ae();return y.jsx(Mc,{disabled:e.tags.length===0,icon:y.jsx(g2,{}),items:[{checkable:!0,checked:r.storyListTagFilter.length===0,label:n("routes.storyList.toolbar.showAllStories"),onClick:()=>t({type:"update",name:"storyListTagFilter",value:[]})},{separator:!0},...e.tags.map(i=>({checkable:!0,checked:r.storyListTagFilter.includes(i),label:i,onClick:()=>t({type:"update",name:"storyListTagFilter",value:r.storyListTagFilter.includes(i)?r.storyListTagFilter.filter(a=>a!==i):[...r.storyListTagFilter,i]})}))],label:n("routes.storyList.toolbar.showTags")})},ure=()=>{const{stories:e}=Tt();return y.jsxs(Ft,{children:[y.jsx(sre,{}),y.jsx(lre,{tags:k0(e)})]})},cre=e=>{const{selectedStories:t}=e,{stories:r}=Tt(),{t:n}=Ae(),i=t.length===1?t[0]:void 0;return y.jsx(Lw,{pinnedControls:y.jsx(Xte,{watch:r}),tabs:{[n("common.story")]:y.jsx(are,{selectedStory:i}),[n("routes.storyList.library")]:y.jsx(Zte,{}),[n("common.build")]:y.jsx(EL,{story:i}),[n("common.view")]:y.jsx(ure,{}),[n("common.appName")]:y.jsx(Nw,{})}})};function fre(e){let t=0;for(let r=0;r<e.length;r++)t+=e.charCodeAt(r);return t%360}const YL=C.memo(e=>{const{story:t}=e,r=[fre(t.name)];r.push((r[0]+15)%360),r.push((r[0]-15)%360),r.push((r[0]+30)%360),r.push((r[0]-30)%360),r.push((r[0]+60)%360);let n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const d=t.passages.map(g=>({key:g.name,x:g.left+g.width/2,y:g.top+g.height/2,radius:Math.max(g.width,g.height)})).reduce((g,m,w)=>{const x=m.radius+200;return n=Math.min(n,m.x-x),i=Math.min(i,m.y-x),a=Math.max(a,m.x+x),l=Math.max(l,m.y+x),g[0].push(y.jsx("circle",{cx:m.x,cy:m.y,r:x,style:{fill:"hsl(".concat(r[w%r.length],", 80%, 80%)")}},"".concat(m.key,"-bg"))),g[1].push(y.jsx("circle",{cx:m.x,cy:m.y,r:m.radius,style:{fill:"hsl(".concat(r[w%r.length],", 80%, 60%)")}},"".concat(m.key,"-fg"))),g},[[],[]]).map((g,m)=>y.jsx("g",{className:"story-preview-".concat(m===0?"bg":"fg"),children:g},m)),p="".concat(n," ").concat(i," ").concat(a-n," ").concat(l-i);return y.jsx("svg",{className:"story-preview",viewBox:p,xmlns:"http://www.w3.org/2000/svg",children:d})});YL.displayName="StoryPreview";const dre=new Intl.DateTimeFormat([]),hre=e=>{const{onChangeTagColor:t,onEdit:r,onRemoveTag:n,onSelect:i,story:a,storyTagColors:l,...u}=e,{t:d}=Ae();return y.jsx("div",{className:"story-card",children:y.jsx(Z0,{...u,label:a.name,onDoubleClick:r,onSelect:i,selected:a.selected,children:y.jsxs(hr,{children:[y.jsxs("div",{className:"story-card-summary",children:[y.jsx("div",{className:"story-card-summary-preview",children:y.jsx(YL,{story:a})}),y.jsxs("div",{className:"story-card-summary-text",children:[y.jsx("h2",{children:a.name}),y.jsxs("p",{children:[d("components.storyCard.lastUpdated",{date:dre.format(a.lastUpdate)}),y.jsx("br",{}),d("components.storyCard.passageCount",{count:a.passages.length})]})]})]}),a.tags&&y.jsx("div",{className:"tags",children:a.tags.map(p=>y.jsx(VP,{color:l[p],name:p,onChangeColor:g=>t(p,g),onRemove:()=>n(p)},p))})]})})})},pre="360px",gre=e=>{const{onSelectStory:t,stories:r}=e,{dispatch:n,prefs:i}=pt(),{dispatch:a}=pn(),l=ul();function u(p,g){n(tr("storyTagColors",{...i.storyTagColors,[p]:g}))}function d(p,g){a(jr(r,p,{tags:p.tags.filter(m=>m!==g)}))}return y.jsx(y.Fragment,{children:y.jsx(hP,{columnWidth:pre,children:y.jsx(cl,{component:null,children:r.map(p=>y.jsx(Ci,{classNames:"pop",timeout:200,children:y.jsx(hre,{onChangeTagColor:u,onEdit:()=>l.push("/stories/".concat(p.id)),onRemoveTag:g=>d(p,g),onSelect:()=>t(p),story:p,storyTagColors:i.storyTagColors})},p.id))})})})},vre=()=>{const{dispatch:e}=Gr(),{dispatch:t,stories:r}=Tt(),{prefs:n}=pt(),{shouldShowDonationPrompt:i}=Vte(),{t:a}=Ae(),l=C.useMemo(()=>r.filter(d=>d.selected),[r]),u=C.useMemo(()=>{const d=n.storyListTagFilter.length>0?r.filter(p=>p.tags.some(g=>n.storyListTagFilter.includes(g))):r;switch(n.storyListSort){case"date":return UC(d,["lastUpdate"],["desc"]);case"name":return UC(d,"name")}},[n.storyListSort,n.storyListTagFilter,r]);return C.useEffect(()=>{for(const d of l)d.selected&&!u.includes(d)&&t(CH(d))},[l,r,t,u]),C.useEffect(()=>{i()&&e({type:"addDialog",component:Y9})},[e,i]),y.jsxs("div",{className:"story-list-route",children:[y.jsx(cre,{selectedStories:l}),y.jsx(dP,{ignoreSelector:".story-card",onClickAway:()=>t(kH()),children:y.jsxs(J0,{title:a(n.storyListTagFilter.length>0?"routes.storyList.taggedTitleCount":"routes.storyList.titleCount",{count:u.length}),children:[y.jsx(xR,{}),y.jsx("div",{className:"stories",children:r.length===0?y.jsx("p",{children:a("routes.storyList.noStories")}):y.jsx(gre,{onSelectStory:d=>t(TH(d,!0)),stories:u})})]})})]})},WC=()=>y.jsx(jP,{children:y.jsx(xw,{children:y.jsx(vre,{})})});function $w(e){delete window.CodeMirror,delete window.SVG,delete window.Store,delete window.StoryFormat,delete window.amdDefine,delete window.app,delete window.jQuery,document.open(),document.write(e),document.close()}const mre=()=>{const[e,t]=C.useState(),[r,n]=C.useState(!1),{storyId:i}=dp(),{publishStory:a}=$c();return C.useEffect(()=>{async function l(){try{$w(await a(i))}catch(u){t(u)}}r||(n(!0),l())},[r,a,i]),e?y.jsx(Do,{children:e.message}):null},yre=()=>{const[e,t]=C.useState(),[r,n]=C.useState(!1),{storyId:i}=dp(),{proofStory:a}=$c();return C.useEffect(()=>{async function l(){try{$w(await a(i))}catch(u){t(u)}}r||(n(!0),l())},[r,a,i]),e?y.jsx(Do,{children:e.message}):null},KC=()=>{const[e,t]=C.useState(),[r,n]=C.useState(!1),{passageId:i,storyId:a}=dp(),{publishStory:l}=$c();return C.useEffect(()=>{async function u(){try{$w(await l(a,{formatOptions:"debug",startId:i}))}catch(d){t(d)}}r||(n(!0),u())},[r,i,l,a]),e?y.jsx(Do,{children:e.message}):null};var wre=new Error("Element already at target scroll position"),bre=new Error("Scroll cancelled"),xre=Math.min,GC=Date.now,Ere={left:qC("scrollLeft"),top:qC("scrollTop")};function qC(e){return function(r,n,i,a){i=i||{},typeof i=="function"&&(a=i,i={}),typeof a!="function"&&(a=Cre);var l=GC(),u=r[e],d=i.ease||Sre,p=isNaN(i.duration)?350:+i.duration,g=!1;return u===n?a(wre,r[e]):requestAnimationFrame(w),m;function m(){g=!0}function w(x){if(g)return a(bre,r[e]);var O=GC(),I=xre(1,(O-l)/p),P=d(I);r[e]=P*(n-u)+u,I<1?requestAnimationFrame(w):requestAnimationFrame(function(){a(null,r[e])})}}}function Sre(e){return .5*(1-Math.cos(Math.PI*e))}function Cre(){}const kre=kt(Ere);const Tre=e=>{const{children:t,image:r,nextLabel:n,onNext:i,onSkip:a,showSkip:l,title:u,...d}=e,{t:p}=Ae();return y.jsx("div",{className:"welcome-card",children:y.jsxs(zo,{...d,children:[y.jsx("div",{className:"welcome-card-image",children:r}),y.jsxs(hr,{children:[y.jsx("h2",{children:u}),t]}),y.jsxs(Ft,{children:[y.jsx(De,{icon:y.jsx(C_,{}),variant:"primary",onClick:i,label:n}),l&&y.jsx(De,{icon:y.jsx(w_,{}),label:p("common.skip"),onClick:a})]})]})})},Ore=()=>[{html:"routes.welcome.greeting",image:y.jsx(SR,{}),nextLabel:"routes.welcome.tellMeMore",title:"routes.welcome.greetingTitle"},{html:"routes.welcome.help",image:y.jsx(h2,{}),title:"routes.welcome.helpTitle"},Da()?{html:"routes.welcome.autosave",image:y.jsx(Ux,{}),title:"routes.welcome.autosaveTitle"}:{html:"routes.welcome.browserStorage",image:y.jsx(Ux,{}),title:"routes.welcome.browserStorageTitle"},{html:"routes.welcome.done",image:y.jsx(CM,{}),nextLabel:"routes.welcome.gotoStoryList",title:"routes.welcome.doneTitle"}];const VC=()=>{const e=C.useRef(null),{dispatch:t}=pt(),r=ul(),[n,i]=C.useState(1),a=C.useMemo(Ore,[]),l=C.useMemo(()=>a.slice(0,n),[a,n]),{t:u}=Ae();C.useEffect(()=>{var g;if(e.current){const m=e.current.querySelector(".welcome-card:last-of-type");m&&kre.top((g=document.documentElement)!=null?g:document.body,m.offsetTop,{duration:400})}},[n]);const d=()=>{t(tr("welcomeSeen",!0)),r.push("/")},p=()=>i(g=>g+1);return y.jsxs("div",{className:"welcome-route",ref:e,children:[y.jsx(ph,{children:y.jsx("title",{children:u("routes.welcome.greetingTitle")})}),y.jsx("div",{className:"cards",children:y.jsx(cl,{component:null,children:l.map((g,m)=>y.jsx(Ci,{classNames:"pop",timeout:200,children:y.jsx(Tre,{image:g.image,nextLabel:g.nextLabel?u(g.nextLabel):u("common.next"),onNext:m===a.length-1?d:p,onSkip:d,showSkip:m===0,title:u(g.title),children:y.jsx("div",{dangerouslySetInnerHTML:{__html:u(g.html)}})})},g.title))})})]})},Pre=()=>{const{prefs:e}=pt();return y.jsx(B5,{children:e.welcomeSeen?y.jsxs(z5,{children:[y.jsx(Ri,{exact:!0,path:"/",children:y.jsx(WC,{})}),y.jsx(Ri,{path:"/story-formats",children:y.jsx(RJ,{})}),y.jsx(Ri,{path:"/welcome",children:y.jsx(VC,{})}),y.jsx(Ri,{path:"/stories/:storyId/play",children:y.jsx(mre,{})}),y.jsx(Ri,{path:"/stories/:storyId/proof",children:y.jsx(yre,{})}),y.jsx(Ri,{path:"/stories/:storyId/test/:passageId",children:y.jsx(KC,{})}),y.jsx(Ri,{path:"/stories/:storyId/test",children:y.jsx(KC,{})}),y.jsx(Ri,{path:"/stories/:storyId",children:y.jsx(Ute,{})}),y.jsx(Ri,{path:"*",render:t=>(console.warn('No route for path "'.concat(t.location.pathname,'", rendering story list')),y.jsx(WC,{}))})]}):y.jsx(VC,{})})},Lre=({children:e})=>{const[t,r]=C.useState(!1),[n,i]=C.useState(!1),[a,l]=C.useState(!1),[u,d]=C.useState(!1),[p,g]=C.useState(!1),{dispatch:m,prefs:w}=pt(),{dispatch:x}=Tt(),{dispatch:O,formats:I}=Kr(),P=sL(),{prefs:T,stories:N,storyFormats:R}=Zh();return C.useEffect(()=>{async function _(){if(!t){const $=await R.load(),z=await T.load(),H=await N.load();O({type:"init",state:$}),m({type:"init",state:z}),x({type:"init",state:H}),i(!0)}}_(),r(!0)},[O,n,t,T,m,N,x,R]),C.useEffect(()=>{n&&!u&&(O({type:"repair"}),d(!0))},[O,u,n]),C.useEffect(()=>{n&&u&&!a&&(m({type:"repair",allFormats:I}),l(!0))},[u,I,n,m,a]),C.useEffect(()=>{n&&u&&a&&!p&&(P(),g(!0))},[O,u,I,n,m,a,w.storyFormat.name,w.storyFormat.version,P,N,x,p]),n&&u&&a&&p?y.jsx(y.Fragment,{children:e}):y.jsx(S2,{})};function Nre(){const e=JP();return C.useEffect(()=>{document.body.dataset.appTheme=e},[e]),null}(function(e,t){(function(r,n){n()})(dr,function(){function r(i){var a=!0,l=!1,u=null,d={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function p($){return!!($&&$!==document&&$.nodeName!=="HTML"&&$.nodeName!=="BODY"&&"classList"in $&&"contains"in $.classList)}function g($){var z=$.type,H=$.tagName;return!!(H==="INPUT"&&d[z]&&!$.readOnly||H==="TEXTAREA"&&!$.readOnly||$.isContentEditable)}function m($){$.classList.contains("focus-visible")||($.classList.add("focus-visible"),$.setAttribute("data-focus-visible-added",""))}function w($){$.hasAttribute("data-focus-visible-added")&&($.classList.remove("focus-visible"),$.removeAttribute("data-focus-visible-added"))}function x($){$.metaKey||$.altKey||$.ctrlKey||(p(i.activeElement)&&m(i.activeElement),a=!0)}function O($){a=!1}function I($){p($.target)&&(a||g($.target))&&m($.target)}function P($){p($.target)&&($.target.classList.contains("focus-visible")||$.target.hasAttribute("data-focus-visible-added"))&&(l=!0,window.clearTimeout(u),u=window.setTimeout(function(){l=!1},100),w($.target))}function T($){document.visibilityState==="hidden"&&(l&&(a=!0),N())}function N(){document.addEventListener("mousemove",_),document.addEventListener("mousedown",_),document.addEventListener("mouseup",_),document.addEventListener("pointermove",_),document.addEventListener("pointerdown",_),document.addEventListener("pointerup",_),document.addEventListener("touchmove",_),document.addEventListener("touchstart",_),document.addEventListener("touchend",_)}function R(){document.removeEventListener("mousemove",_),document.removeEventListener("mousedown",_),document.removeEventListener("mouseup",_),document.removeEventListener("pointermove",_),document.removeEventListener("pointerdown",_),document.removeEventListener("pointerup",_),document.removeEventListener("touchmove",_),document.removeEventListener("touchstart",_),document.removeEventListener("touchend",_)}function _($){$.target.nodeName&&$.target.nodeName.toLowerCase()==="html"||(a=!1,R())}document.addEventListener("keydown",x,!0),document.addEventListener("mousedown",O,!0),document.addEventListener("pointerdown",O,!0),document.addEventListener("touchstart",O,!0),document.addEventListener("visibilitychange",T,!0),N(),i.addEventListener("focus",I,!0),i.addEventListener("blur",P,!0),i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&i.host?i.host.setAttribute("data-js-focus-visible",""):i.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if(typeof window<"u"&&typeof document<"u"){window.applyFocusVisiblePolyfill=r;var n;try{n=new CustomEvent("focus-visible-polyfill-ready")}catch{n=document.createEvent("CustomEvent"),n.initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(n)}typeof document<"u"&&r(document)})})();const Are=()=>y.jsx(rR,{children:y.jsxs(K8,{children:[y.jsx(G8,{}),y.jsx(Nre,{}),y.jsx(h8,{children:y.jsx(p8,{children:y.jsx(Lre,{children:y.jsx(C.Suspense,{fallback:y.jsx(S2,{}),children:y.jsx(Pre,{})})})})})]})});Sc.render(y.jsx(C.StrictMode,{children:y.jsx(Are,{})}),document.getElementById("root"));
